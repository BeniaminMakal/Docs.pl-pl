---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
title: "Konfigurowanie witryny sieci Web, która korzysta z usługi aplikacji (C#) | Dokumentacja firmy Microsoft"
author: rick-anderson
description: "ASP.NET w wersji 2.0 wprowadzono szereg usług aplikacji, które są częścią programu .NET Framework i służyć jako zestaw modułów konstrukcyjnych usług yo..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: 1e33d1c6-3f9f-4c26-81e2-2a8f8907bb05
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
msc.type: authoredcontent
ms.openlocfilehash: 3f2b8e395505c1d13b914399b8de2196f0ba230a
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/24/2018
---
<a name="configuring-a-website-that-uses-application-services-c"></a><span data-ttu-id="58f6b-103">Konfigurowanie witryny sieci Web, która korzysta z usługi aplikacji (C#)</span><span class="sxs-lookup"><span data-stu-id="58f6b-103">Configuring a Website that Uses Application Services (C#)</span></span>
====================
<span data-ttu-id="58f6b-104">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="58f6b-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="58f6b-105">[Pobierz kod](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) lub [pobierania plików PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="58f6b-105">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span></span>

> <span data-ttu-id="58f6b-106">ASP.NET w wersji 2.0 wprowadzono szereg usług aplikacji, które są częścią programu .NET Framework i służyć jako zestaw usług bloków konstrukcyjnych, które można dodać zaawansowane funkcje do aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="58f6b-106">ASP.NET version 2.0 introduced a series of application services, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="58f6b-107">W tym samouczku opisuje sposób konfigurowania witryny sieci Web w środowisku produkcyjnym w celu korzystania z aplikacji, usług i opisano często występujące problemy z zarządzaniem kont użytkowników i role w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-107">This tutorial explores how to configure a website in the production environment to use application services and addresses common issues with managing user accounts and roles on the production environment.</span></span>


## <a name="introduction"></a><span data-ttu-id="58f6b-108">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="58f6b-108">Introduction</span></span>

<span data-ttu-id="58f6b-109">ASP.NET w wersji 2.0 wprowadzono szereg *usług aplikacji*, które są częścią programu .NET Framework i służyć jako zestaw modułów konstrukcyjnych usług, które umożliwia dodanie rozbudowane funkcje do aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="58f6b-109">ASP.NET version 2.0 introduced a series of *application services*, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="58f6b-110">Usługi aplikacji obejmują:</span><span class="sxs-lookup"><span data-stu-id="58f6b-110">The application services include:</span></span>

- <span data-ttu-id="58f6b-111">**Członkostwo** — interfejs API do tworzenia i zarządzania kontami użytkowników.</span><span class="sxs-lookup"><span data-stu-id="58f6b-111">**Membership** - an API for creating and managing user accounts.</span></span>
- <span data-ttu-id="58f6b-112">**Role** — interfejs API do klasyfikacji użytkowników w grupach.</span><span class="sxs-lookup"><span data-stu-id="58f6b-112">**Roles** - an API for categorizing users into groups.</span></span>
- <span data-ttu-id="58f6b-113">**Profil** — interfejs API do przechowywania zawartości niestandardowych, specyficzne dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="58f6b-113">**Profile** - an API for storing custom, user-specific content.</span></span>
- <span data-ttu-id="58f6b-114">**Mapa witryny** — interfejs API do definiowania struktury logicznej lokacji s w postaci hierarchii, które można wyświetlić za pomocą kontrolki, takich jak menu i nawigacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-114">**Site Map** - an API for defining a site s logical structure in the form of a hierarchy, which can then be displayed via navigation controls, such as menus and breadcrumbs.</span></span>
- <span data-ttu-id="58f6b-115">**Personalizacja** — interfejs API do obsługi preferencje, najczęściej używana z [ *składników Web Part*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span><span class="sxs-lookup"><span data-stu-id="58f6b-115">**Personalization** - an API for maintaining customization preferences, most often used with [*WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span></span>
- <span data-ttu-id="58f6b-116">**Monitorowanie kondycji** — interfejs API do monitorowania wydajności, zabezpieczeń, błędy i innych metryk kondycji systemu dla działającej aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="58f6b-116">**Health Monitoring** - an API for monitoring performance, security, errors, and other system health metrics for a running web application.</span></span>
  

<span data-ttu-id="58f6b-117">Interfejsy API usług aplikacji nie są związane z konkretnej implementacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-117">The application services APIs are not tied to a specific implementation.</span></span> <span data-ttu-id="58f6b-118">Zamiast tego należy poinstruować usług aplikacji, aby użyć określonego *dostawcy*, i usługi za pomocą technologii określonego implementuje tego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="58f6b-118">Instead, you instruct the application services to use a particular *provider*, and that provider implements the service using a particular technology.</span></span> <span data-ttu-id="58f6b-119">Najczęściej używane dostawców dla internetowego aplikacji sieci web hostowanej w lokalizacji hostingu firmy są dostawców używających implementacji bazy danych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="58f6b-119">The most commonly used providers for Internet-based web applications hosted at a web hosting company are those providers that use a SQL Server database implementation.</span></span> <span data-ttu-id="58f6b-120">Na przykład `SqlMembershipProvider` jest dostawcą członkostwa interfejsu API, która przechowuje informacje o koncie użytkownika w bazie danych programu Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="58f6b-120">For example, the `SqlMembershipProvider` is a provider for the Membership API that stores user account information in a Microsoft SQL Server database.</span></span>

<span data-ttu-id="58f6b-121">Przy użyciu dostawcy programu SQL Server i usług aplikacji dodaje niektóre wyzwania, podczas wdrażania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-121">Using the application services and SQL Server providers adds some challenges when deploying the application.</span></span> <span data-ttu-id="58f6b-122">Po pierwsze obiekty bazy danych usług aplikacji należy właściwie utworzone w rozwoju i produkcyjnych bazach danych i prawidłowo zainicjowane.</span><span class="sxs-lookup"><span data-stu-id="58f6b-122">For starters, the application services database objects must be properly created on both the development and production databases and appropriately initialized.</span></span> <span data-ttu-id="58f6b-123">Brak ważnych ustawień konfiguracji, które należy wprowadzić.</span><span class="sxs-lookup"><span data-stu-id="58f6b-123">There are also important configuration settings that need to be made.</span></span>

> [!NOTE]
> <span data-ttu-id="58f6b-124">Interfejsy API zostały zaprojektowane przy użyciu usług aplikacji [ *modelu dostawcy*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), wzorzec projektowania, który pozwala na interfejs API s szczegółów implementacji w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="58f6b-124">The application services APIs were designed using the [*provider model*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), a design pattern that allows for an API s implementation details to be provided at runtime.</span></span> <span data-ttu-id="58f6b-125">.NET Framework jest dostarczany z dostawców usług aplikacji, które mogą być używane, takich jak `SqlMembershipProvider` i `SqlRoleProvider`, dostawcy dla członkostwa, które są i interfejsów API ról, które korzystają z serwera SQL bazy danych wdrażania.</span><span class="sxs-lookup"><span data-stu-id="58f6b-125">The .NET Framework ships with a number of application service providers that can be used, such as the `SqlMembershipProvider` and `SqlRoleProvider`, which are providers for the Membership and Roles APIs that use a SQL Server database implementation.</span></span> <span data-ttu-id="58f6b-126">Można również tworzyć i wtyczki niestandardowego dostawcy.</span><span class="sxs-lookup"><span data-stu-id="58f6b-126">You can also create and plug-in a custom provider.</span></span> <span data-ttu-id="58f6b-127">W rzeczywistości przeglądami książki aplikacji sieci web już zawiera niestandardowego dostawcy dla interfejsu API mapy witryny (`ReviewSiteMapProvider`), który konstruuje mapy witryny z danych w `Genres` i `Books` tabele w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-127">In fact, the Book Reviews web application already contains a custom provider for the Site Map API (`ReviewSiteMapProvider`), which constructs the site map from the data in the `Genres` and `Books` tables in the database.</span></span>


<span data-ttu-id="58f6b-128">W tym samouczku rozpoczyna się od przyjrzeć się jak mogę rozszerzyć przeglądami książki aplikacji sieci web do użycia, członkostwo i role interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="58f6b-128">This tutorial starts with a look at how I extended the Book Reviews web application to use the Membership and Roles APIs.</span></span> <span data-ttu-id="58f6b-129">Następnie przedstawiono wdrażanie aplikacji sieci web, która korzysta z usługi aplikacji z implementacją bazy danych programu SQL Server i nie zawiera umożliwi Udokumentowanie typowych problemów z zarządzaniem kont użytkowników i role w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-129">It then walks through deploying a web application that uses application services with a SQL Server database implementation, and concludes by addressing common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="updates-to-the-book-reviews-application"></a><span data-ttu-id="58f6b-130">Aktualizacje aplikacji przeglądami książki</span><span class="sxs-lookup"><span data-stu-id="58f6b-130">Updates to the Book Reviews Application</span></span>

<span data-ttu-id="58f6b-131">W ciągu ostatnich kilku samouczków, z którymi aplikacja sieci web sprawdza książki została zaktualizowana z statycznej witryny sieci Web do aplikacji sieci web dynamicznych, opartych na danych wykonaj z zestawem stron administracyjnych związanych z zarządzaniem genres i recenzje.</span><span class="sxs-lookup"><span data-stu-id="58f6b-131">Over the past couple tutorials the Book Reviews web application was updated from a static website to a dynamic, data-driven web application complete with a set of administration pages for managing genres and reviews.</span></span> <span data-ttu-id="58f6b-132">Jednak w tej sekcji administracyjnej nie jest zabezpieczony — każdy użytkownik, który zna (lub liczba prób) adres URL strony Administracja można waltz w i tworzyć, edytować lub usunąć przeglądy w naszej witrynie.</span><span class="sxs-lookup"><span data-stu-id="58f6b-132">However, this administration section is currently not protected - any user who knows (or guesses) the administration page URL can waltz in and create, edit, or delete reviews on our site.</span></span> <span data-ttu-id="58f6b-133">Jest to często stosowana metoda ochrony niektórych części witryny sieci Web do implementowania kont użytkowników, a następnie użyć reguł autoryzacji adresów URL, aby ograniczyć dostęp do określonych użytkowników lub ról.</span><span class="sxs-lookup"><span data-stu-id="58f6b-133">A common way to protect certain portions of a website is to implement user accounts and then use URL authorization rules to restrict access to certain users or roles.</span></span> <span data-ttu-id="58f6b-134">Dostępny do pobrania z tego samouczka aplikacji sieci web przeglądami książki obsługuje kont użytkowników i ról.</span><span class="sxs-lookup"><span data-stu-id="58f6b-134">The Book Reviews web application available for download with this tutorial supports user accounts and roles.</span></span> <span data-ttu-id="58f6b-135">Ma on jeden definicja roli o nazwie administratora i tylko użytkownicy w tej roli mają dostęp do stron administracyjnych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-135">It has a single role defined named Admin and only users in this role can access the administration pages.</span></span>

> [!NOTE]
> <span data-ttu-id="58f6b-136">I Zapisz utworzone trzy konta użytkowników w aplikacji sieci web przeglądami książki: Scott Jisun i Alicji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-136">I ve created three user accounts in the Book Reviews web application: Scott, Jisun, and Alice.</span></span> <span data-ttu-id="58f6b-137">Wszystkie trzy użytkownicy mają tego samego hasła: **hasło!**</span><span class="sxs-lookup"><span data-stu-id="58f6b-137">All three users have the same password: **password!**</span></span> <span data-ttu-id="58f6b-138">Scott i Jisun znajdują się w roli administratora, Alicja nie jest.</span><span class="sxs-lookup"><span data-stu-id="58f6b-138">Scott and Jisun are in the Admin role, Alice is not.</span></span> <span data-ttu-id="58f6b-139">Na stronach witryny s-administration są nadal dostępne dla użytkowników anonimowych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-139">The site s non-administration pages are still accessible to anonymous users.</span></span> <span data-ttu-id="58f6b-140">Oznacza to, że nie trzeba zalogować się do witryny, chyba że chcesz administrować, w którym to przypadku należy zalogować się jako użytkownik w roli administratora.</span><span class="sxs-lookup"><span data-stu-id="58f6b-140">That is, you do not need to sign in to visit the site, unless you want to administer it, in which case you must sign in as a user in the Admin role.</span></span>


<span data-ttu-id="58f6b-141">Aby dołączyć inny interfejs dla użytkowników uwierzytelnionych i anonimowych została zaktualizowana strony wzorcowej s przeglądami książki aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-141">The Book Reviews application s master page has been updated to include a different user interface for authenticated and anonymous users.</span></span> <span data-ttu-id="58f6b-142">Jeśli użytkownik anonimowy odwiedza witrynę widzi łącze logowania w prawym górnym rogu.</span><span class="sxs-lookup"><span data-stu-id="58f6b-142">If an anonymous user visits the site she sees a Login link in the upper right corner.</span></span> <span data-ttu-id="58f6b-143">Uwierzytelniony użytkownik zobaczy następujący komunikat, "Witamy z powrotem, *username*!"</span><span class="sxs-lookup"><span data-stu-id="58f6b-143">An authenticated user sees the message, "Welcome back, *username*!"</span></span> <span data-ttu-id="58f6b-144">i link do wylogowania. Dostępne są również strony logowania s (`~/Login.aspx`), zawierający formant sieci Web logowania, który udostępnia logiki i interfejsu użytkownika dla uwierzytelniania obiekt odwiedzający.</span><span class="sxs-lookup"><span data-stu-id="58f6b-144">and a link to log out. There s also a login page (`~/Login.aspx`), which contains a Login Web control that provides the user interface and logic for authenticating a visitor.</span></span> <span data-ttu-id="58f6b-145">Tylko administratorzy mogą tworzyć nowych kont.</span><span class="sxs-lookup"><span data-stu-id="58f6b-145">Only administrators can create new accounts.</span></span> <span data-ttu-id="58f6b-146">(Brak stron do tworzenia i zarządzania kontami użytkowników w `~/Admin` folderu.)</span><span class="sxs-lookup"><span data-stu-id="58f6b-146">(There are pages for creating and managing user accounts in the `~/Admin` folder.)</span></span>

### <a name="configuring-the-membership-and-roles-apis"></a><span data-ttu-id="58f6b-147">Konfigurowanie członkostwa i ról interfejsów API</span><span class="sxs-lookup"><span data-stu-id="58f6b-147">Configuring the Membership and Roles APIs</span></span>

<span data-ttu-id="58f6b-148">Przeglądy książki aplikacji sieci web używa członkostwo i role interfejsów API do obsługi kont użytkowników i grup użytkowników do ról (to znaczy, rola administratora).</span><span class="sxs-lookup"><span data-stu-id="58f6b-148">The Book Reviews web application uses the Membership and Roles APIs to support user accounts and to group those users into roles (namely, the Admin role).</span></span> <span data-ttu-id="58f6b-149">`SqlMembershipProvider` i `SqlRoleProvider` klasy dostawcy są używane, ponieważ chcemy do przechowywania informacji o kontach i roli w bazie danych programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="58f6b-149">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes are used because we want to store account and role information in a SQL Server database.</span></span>

> [!NOTE]
> <span data-ttu-id="58f6b-150">W tym samouczku nie mają być szczegółowej analizy na konfigurowanie aplikacji sieci web do obsługi członkostwa i ról interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="58f6b-150">This tutorial is not intended to be a detailed examination at configuring a web application to support the Membership and Roles APIs.</span></span> <span data-ttu-id="58f6b-151">Dokładne przyjrzeć się te interfejsy API i kroki należy wykonać w celu skonfigurowania witryny sieci Web z nich korzystać, przeczytaj Mój [ *samouczki dotyczące zabezpieczeń witryny sieci Web*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="58f6b-151">For a thorough look at these APIs and the steps you need to take to configure a website to use them, please read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>


<span data-ttu-id="58f6b-152">Do korzystania z usługi aplikacji z bazą danych programu SQL Server, należy najpierw dodać obiekty bazy danych używane przez tych dostawców do bazy danych, w którym ma konto użytkownika i przechowywane informacje o rolach.</span><span class="sxs-lookup"><span data-stu-id="58f6b-152">To use the application services with a SQL Server database you must first add the database objects used by these providers to the database where you want the user account and role information stored.</span></span> <span data-ttu-id="58f6b-153">Te obiekty bazy danych wymagane obejmują szereg tabel, widoków i procedur składowanych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-153">These requisite database objects include a variety of tables, views, and stored procedures.</span></span> <span data-ttu-id="58f6b-154">O ile nie określono inaczej, `SqlMembershipProvider` i `SqlRoleProvider` klasy dostawców korzystania z bazy danych programu SQL Server Express Edition o nazwie `ASPNETDB` znajduje się w aplikacji s `App_Data` folderu; Jeśli baza danych nie istnieje, jest tworzony automatycznie z wymaganych obiektów bazy danych przez tych dostawców w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="58f6b-154">Unless specified otherwise, the `SqlMembershipProvider` and `SqlRoleProvider` provider classes use a SQL Server Express Edition database named `ASPNETDB` located in the application s `App_Data` folder; if such a database does not exist, it is automatically created with the necessary database objects by these providers at runtime.</span></span>

<span data-ttu-id="58f6b-155">Możliwe jest, i zazwyczaj jest to idealne utworzyć aplikację usługi obiektów bazy danych w tej samej bazy danych, których są przechowywane dane specyficzne dla aplikacji s witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="58f6b-155">It is possible, and usually ideal, to create the application services database objects in the same database where the website s application-specific data is stored.</span></span> <span data-ttu-id="58f6b-156">.NET Framework jest dostarczany z narzędziem o nazwie `aspnet_regsql.exe` instalujące obiektów bazy danych określonej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-156">The .NET Framework ships with a tool named `aspnet_regsql.exe` that installs the database objects on a specified database.</span></span> <span data-ttu-id="58f6b-157">Mam usunięty z wyprzedzeniem i użyć tego narzędzia, aby dodać te obiekty do `Reviews.mdf` bazy danych w `App_Data` folder (projektowej bazie danych).</span><span class="sxs-lookup"><span data-stu-id="58f6b-157">I have gone ahead and used this tool to add these objects to the `Reviews.mdf` database in the `App_Data` folder (the development database).</span></span> <span data-ttu-id="58f6b-158">Firma Microsoft będzie Zobacz, jak to narzędzie później w tym samouczku przy wdrażaniu tych obiektów w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-158">We'll see how to use this tool later in this tutorial when we add these objects to the production database.</span></span>

<span data-ttu-id="58f6b-159">Jeśli dodasz usługami obiektów bazy danych do bazy danych innej niż `ASPNETDB` trzeba będzie dostosować `SqlMembershipProvider` i `SqlRoleProvider` dostawcy klas konfiguracji, tak aby używały odpowiednią bazę danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-159">If you add the application services database objects to a database other than `ASPNETDB` you will need to customize the `SqlMembershipProvider` and `SqlRoleProvider` provider classes configurations so that they use the appropriate database.</span></span> <span data-ttu-id="58f6b-160">Aby dostosować dodać dostawcę członkostwa [  *&lt;członkostwa&gt; elementu* ](https://msdn.microsoft.com/library/1b9hw62f.aspx) w `<system.web>` sekcji `Web.config`; użyj [  *&lt;roleManager&gt; elementu* ](https://msdn.microsoft.com/library/ms164660.aspx) do skonfigurowania dostawcy ról.</span><span class="sxs-lookup"><span data-stu-id="58f6b-160">To customize the Membership provider add a [*&lt;membership&gt; element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) within the `<system.web>` section in `Web.config`; use the [*&lt;roleManager&gt; element*](https://msdn.microsoft.com/library/ms164660.aspx) to configure the Roles provider.</span></span> <span data-ttu-id="58f6b-161">Poniższy fragment jest pobierana z s aplikacji przeglądami książki `Web.config` oraz konfigurowanie ustawień członkostwa i ról interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="58f6b-161">The following snippet is taken from the Book Reviews application s `Web.config` and shows the configure settings for the Membership and Roles APIs.</span></span> <span data-ttu-id="58f6b-162">Należy pamiętać, że oba zarejestrować nowego dostawcę - `ReviewMembership` i `ReviewRole` -używające `SqlMembershipProvider` i `SqlRoleProvider` dostawców, odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="58f6b-162">Note that both register a new provider - `ReviewMembership` and `ReviewRole` - that use the `SqlMembershipProvider` and `SqlRoleProvider` providers, respectively.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample1.xml)]

<span data-ttu-id="58f6b-163">`Web.config` Pliku s `<authentication>` element także został skonfigurowany do obsługi uwierzytelniania opartego na formularzach.</span><span class="sxs-lookup"><span data-stu-id="58f6b-163">The `Web.config` file s `<authentication>` element has also been configured to support forms-based authentication.</span></span>
  

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample2.xml)]

### <a name="limiting-access-to-the-administration-pages"></a><span data-ttu-id="58f6b-164">Ograniczanie dostępu do stron administracyjnych</span><span class="sxs-lookup"><span data-stu-id="58f6b-164">Limiting Access to the Administration Pages</span></span>

<span data-ttu-id="58f6b-165">ASP.NET ułatwia Udziel lub Odmów dostępu do określonego pliku lub folderu przez użytkownika lub roli przy użyciu jego *Autoryzacja adresów URL* funkcji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-165">ASP.NET makes it easy to grant or deny access to a particular file or folder by user or by role via its *URL authorization* feature.</span></span> <span data-ttu-id="58f6b-166">(Omówiono pokrótce Autoryzacja adresów URL w *podstawowe różnice między usług IIS i ASP.NET Development Server* samouczka i pokazano, jak usług IIS i ASP.NET Development Server stosowane reguł autoryzacji adresów URL na statyczne w zależności od zawartości dynamicznej.) Ponieważ chcemy, aby zabronić dostępu do `~/Admin` folderu z wyjątkiem tych użytkowników w roli administratora, należy dodać reguły autoryzacji adresów URL do tego folderu.</span><span class="sxs-lookup"><span data-stu-id="58f6b-166">(We briefly discussed URL authorization in the *Core Differences Between IIS and the ASP.NET Development Server* tutorial and showed how IIS and the ASP.NET Development Server apply URL authorization rules differently for static versus dynamic content.) Because we want to prohibit access to the `~/Admin` folder except for those users in the Admin role, we need to add URL authorization rules to this folder.</span></span> <span data-ttu-id="58f6b-167">W szczególności reguł autoryzacji adresów URL, należy zezwolić użytkownikom w roli administratora i odmawiać go innym użytkownikom.</span><span class="sxs-lookup"><span data-stu-id="58f6b-167">Specifically, the URL authorization rules need to allow users in the Admin role and deny all other users.</span></span> <span data-ttu-id="58f6b-168">Jest to osiągane przez dodanie `Web.config` pliku `~/Admin` folder z następującą zawartość:</span><span class="sxs-lookup"><span data-stu-id="58f6b-168">This is accomplished by adding a `Web.config` file to the `~/Admin` folder with the following contents:</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample3.xml)]

<span data-ttu-id="58f6b-169">Dla więcej informacji o funkcji autoryzacji adresu URL s ASP.NET i jak z niego korzystać do pełnych reguł autoryzacji dla użytkowników i ról, należy przeczytać [ *autoryzacji na podstawie użytkownika* ](../../older-versions-security/membership/user-based-authorization-cs.md) i [ *Autoryzacji opartej na rolach* ](../../older-versions-security/roles/role-based-authorization-cs.md) samouczki z mojej [ *samouczki dotyczące zabezpieczeń witryny sieci Web*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="58f6b-169">For more information on ASP.NET s URL authorization feature and how to use it to spell out authorization rules for users and for roles, be sure to read the [*User-Based Authorization*](../../older-versions-security/membership/user-based-authorization-cs.md) and [*Role-Based Authorization*](../../older-versions-security/roles/role-based-authorization-cs.md) tutorials from my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

## <a name="deploying-a-web-application-that-uses-application-services"></a><span data-ttu-id="58f6b-170">Wdrażanie aplikacji sieci Web, która korzysta z usługi aplikacji</span><span class="sxs-lookup"><span data-stu-id="58f6b-170">Deploying a Web Application That Uses Application Services</span></span>

<span data-ttu-id="58f6b-171">W przypadku wdrażania witryny sieci Web, który korzysta z usługi aplikacji i dostawcy, która przechowuje informacje o usługach aplikacji w bazie danych, konieczne jest utworzony w produkcyjnej bazie danych obiektów bazy danych wymaganych przez usługi aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-171">When deploying a website that uses application services and a provider that stores the application services information in a database, it is imperative that the database objects needed by the application services be created on the production database.</span></span> <span data-ttu-id="58f6b-172">Początkowo w produkcyjnej bazie danych nie zawiera tych obiektów, to podczas wdrażania aplikacji (lub po jej wdrożeniu po raz pierwszy po dodaniu usługi aplikacji), należy wykonać dodatkowe kroki, aby pobrać te obiekty wymagania bazy danych w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-172">Initially the production database does not contain these objects, so when the application is first deployed (or when it is deployed for the first time after application services have been added), you must take extra steps to get these requisite database objects on the production database.</span></span>

<span data-ttu-id="58f6b-173">Inne wyzwanie mogą wystąpić podczas wdrażania witryny sieci Web, który korzysta z usług aplikacji, jeśli chcesz replikować kont użytkowników utworzonych w środowisku programistycznym do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="58f6b-173">Another challenge can arise when deploying a website that uses application services if you intend to replicate the user accounts created in the development environment to the production environment.</span></span> <span data-ttu-id="58f6b-174">W zależności od konfiguracji członkostwo i role istnieje możliwość, że nawet jeśli kopiujesz pomyślnie kont użytkowników, które zostały utworzone w środowisku programistycznym w produkcyjnej bazie danych, ci użytkownicy nie może zalogować się do aplikacji sieci web w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-174">Depending on the Membership and Roles configuration, it is possible that even if you successfully copy the user accounts that were created in the development environment to the production database, these users cannot sign into the web application in production.</span></span> <span data-ttu-id="58f6b-175">Firma Microsoft będzie Spójrz na przyczyny tego problemu i omówiono sposób zapobiec go.</span><span class="sxs-lookup"><span data-stu-id="58f6b-175">We'll look at the cause of this issue and discuss how to prevent it from happening.</span></span>

<span data-ttu-id="58f6b-176">Program ASP.NET jest dostarczany z nieuprzywilejowany [ *narzędzie do administrowania witryny sieci Web (WSAT)* ](https://msdn.microsoft.com/library/yy40ytx0.aspx) który można uruchomić z programu Visual Studio i umożliwia użytkownikowi konta, ról i autoryzacji reguł, które mają być zarządzane za pośrednictwem sieci web interfejs.</span><span class="sxs-lookup"><span data-stu-id="58f6b-176">ASP.NET ships with a nice [*Web Site Administration Tool (WSAT)*](https://msdn.microsoft.com/library/yy40ytx0.aspx) that can be launched from Visual Studio and allows the user account, roles, and authorization rules to be managed through a web-based interface.</span></span> <span data-ttu-id="58f6b-177">Niestety WSAT działa tylko dla lokalnych witryn sieci Web, co oznacza, że nie może służyć do zdalnego zarządzania kontami użytkowników, ról i reguł autoryzacji dla aplikacji sieci web w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-177">Unfortunately, the WSAT only works for local websites, meaning that it cannot be used to remotely manage user accounts, roles, and authorization rules for the web application in the production environment.</span></span> <span data-ttu-id="58f6b-178">Przyjrzymy implementuje zachowanie WSAT przypominającej z witryny sieci Web produkcji na różne sposoby.</span><span class="sxs-lookup"><span data-stu-id="58f6b-178">We'll look at different ways to implement WSAT-like behavior from your production website.</span></span>

### <a name="adding-the-database-objects-using-aspnetregsqlexe"></a><span data-ttu-id="58f6b-179">Dodawanie przy użyciu obiektów bazy danych aspnet\_regsql.exe</span><span class="sxs-lookup"><span data-stu-id="58f6b-179">Adding the Database Objects Using aspnet\_regsql.exe</span></span>

<span data-ttu-id="58f6b-180">*Wdrażania bazy danych* samouczku przedstawiono sposób kopiowania tabele i danych z bazy danych Programowanie w produkcyjnej bazie danych, a te techniki na pewno może służyć do kopiowania obiektów bazy danych usług aplikacji do w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-180">The *Deploying a Database* tutorial showed how to copy the tables and data from the development database to the production database, and these techniques can certainly be used to copy the application services database objects to the production database.</span></span> <span data-ttu-id="58f6b-181">Innym rozwiązaniem jest `aspnet_regsql.exe` narzędzia, które dodaje lub usuwa z bazy danych obiektów bazy danych usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-181">Another option is the `aspnet_regsql.exe` tool, which adds or removes the application services database objects from a database.</span></span>

> [!NOTE]
> <span data-ttu-id="58f6b-182">`aspnet_regsql.exe` Narzędzie tworzy obiekty baz danych na określonej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-182">The `aspnet_regsql.exe` tool creates the database objects on a specified database.</span></span> <span data-ttu-id="58f6b-183">Nie są migrowane dane w tych obiektach bazy danych z bazy danych Programowanie w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-183">It does not migrate data in those database objects from the development database to the production database.</span></span> <span data-ttu-id="58f6b-184">Jeśli chcesz skopiować informacji o kontach i roli użytkownika w bazie danych Programowanie w produkcyjnej bazie danych korzystać z metod opisanych w *wdrażania bazy danych* samouczka.</span><span class="sxs-lookup"><span data-stu-id="58f6b-184">If you mean to copy the user account and role information in the development database to the production database use the techniques covered in the *Deploying a Database* tutorial.</span></span>


<span data-ttu-id="58f6b-185">Let s, zobacz, jak dodać obiekty bazy danych przy użyciu bazy danych produkcyjnej `aspnet_regsql.exe` narzędzia.</span><span class="sxs-lookup"><span data-stu-id="58f6b-185">Let s look at how to add the database objects to the production database using the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="58f6b-186">Rozpocznij od otwierając Eksploratora Windows i przechodząc do katalogu .NET Framework w wersji 2.0 na komputerze %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span><span class="sxs-lookup"><span data-stu-id="58f6b-186">Start by opening Windows Explorer and navigating to the .NET Framework version 2.0 directory on your computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span></span> <span data-ttu-id="58f6b-187">Możesz znaleźć `aspnet_regsql.exe` narzędzia.</span><span class="sxs-lookup"><span data-stu-id="58f6b-187">There you should find the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="58f6b-188">Można to narzędzie z wiersza polecenia, ale zawiera także graficznego interfejsu użytkownika; Kliknij dwukrotnie `aspnet_regsql.exe` plików można uruchomić jej graficznego składnika.</span><span class="sxs-lookup"><span data-stu-id="58f6b-188">This tool can be used from the command-line, but it also includes a graphical user interface; double-click the `aspnet_regsql.exe` file to launch its graphical component.</span></span>

<span data-ttu-id="58f6b-189">Uruchamia narzędzie za pomocą wyświetlania ekranu powitalnego, wyjaśniający jej celem.</span><span class="sxs-lookup"><span data-stu-id="58f6b-189">The tool starts by displaying a splash screen explaining its purpose.</span></span> <span data-ttu-id="58f6b-190">Kliknij przycisk Dalej przejście do ekranu "Wybierz opcję instalacji", co przedstawiono na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="58f6b-190">Click Next to advance to the "Select a Setup Option" screen, which is shown in Figure 1.</span></span> <span data-ttu-id="58f6b-191">W tym miejscu można dodać usługi aplikacji obiekty bazy danych lub usuń je z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-191">From here you can choose to add the application services database objects or remove them from a database.</span></span> <span data-ttu-id="58f6b-192">Ponieważ chcemy dodać te obiekty w produkcyjnej bazie danych, wybierz opcję "Konfiguruj SQL Server dla usług aplikacji", a następnie kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="58f6b-192">Because we want to add these objects to the production database, select the "Configure SQL Server for application services" option and click Next.</span></span>


<span data-ttu-id="58f6b-193">[![Wybierz konfigurowania programu SQL Server dla usług aplikacji](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="58f6b-193">[![Choose to Configure SQL Server for Application Services](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="58f6b-194">**Rysunek 1**: Wybierz do konfigurowania programu SQL Server dla usług aplikacji ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="58f6b-194">**Figure 1**: Choose to Configure SQL Server for Application Services ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="58f6b-195">W "Wybierz serwer i baza danych" ekranu monituje o podanie informacji do połączenia z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-195">In "Select the Server and Database" screen prompts for information to connect to the database.</span></span> <span data-ttu-id="58f6b-196">Wprowadź serwer bazy danych, poświadczenia zabezpieczeń i nazwę bazy danych, udostępniane przez firmy hostingu w sieci web, a następnie kliknij przycisk Dalej.</span><span class="sxs-lookup"><span data-stu-id="58f6b-196">Enter the database server, the security credentials, and the database name supplied to you by your web hosting company and click Next.</span></span>

> [!NOTE]
> <span data-ttu-id="58f6b-197">Po wprowadzeniu serwera bazy danych i poświadczeń może uzyskać wystąpił błąd podczas rozwijania listy rozwijanej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-197">After entering your database server and credentials you may get an error when expanding the database drop-down list.</span></span> <span data-ttu-id="58f6b-198">`aspnet_regsql.exe` Narzędzia kwerendy `sysdatabases` tabeli systemowej można pobrać listy baz danych na serwerze, ale niektóre hostingu przedsiębiorstwa blokowanie ich serwery baz danych, aby te informacje nie są publicznie dostępne w sieci web.</span><span class="sxs-lookup"><span data-stu-id="58f6b-198">The `aspnet_regsql.exe` tool queries the `sysdatabases` system table to retrieve a list of databases on the server, but some web hosting companies lock down their database servers so that this information is not publicly available.</span></span> <span data-ttu-id="58f6b-199">Jeśli ten błąd możesz wpisać nazwę bazy danych bezpośrednio na liście rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="58f6b-199">If you get this error you can type the database name directly into the drop-down list.</span></span>


<span data-ttu-id="58f6b-200">[![Podaj narzędzia z informacjami o połączeniu s bazy danych](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="58f6b-200">[![Supply the Tool With Your Database s Connection Information](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="58f6b-201">**Rysunek 2**: Podaj s narzędzie z Twojej bazy danych informacji o połączeniu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="58f6b-201">**Figure 2**: Supply the Tool With Your Database s Connection Information ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="58f6b-202">Kolejne ekranu znajduje się podsumowanie akcje, które mają mieć to miejsce, które obiekty bazy danych usług aplikacji są mają zostać dodane do określonej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-202">The subsequent screen summarizes the actions that are about to take place, namely that the application services database objects are going to be added to the specified database.</span></span> <span data-ttu-id="58f6b-203">Kliknij przycisk Dalej, aby ukończyć tę akcję.</span><span class="sxs-lookup"><span data-stu-id="58f6b-203">Click Next to complete this action.</span></span> <span data-ttu-id="58f6b-204">Po kilku chwilach końcowego ekran jest wyświetlany, biorąc pod uwagę, że obiekty bazy danych zostały dodane (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="58f6b-204">After a few moments, the final screen is displayed, noting that the database objects have been added (see Figure 3).</span></span>


<span data-ttu-id="58f6b-205">[![Powodzenie! Obiekty bazy danych usług aplikacji zostały dodane do produkcyjnej bazy danych](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="58f6b-205">[![Success! The Application Services Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="58f6b-206">**Rysunek 3**: sukcesu!</span><span class="sxs-lookup"><span data-stu-id="58f6b-206">**Figure 3**: Success!</span></span> <span data-ttu-id="58f6b-207">Aplikacja usługi bazy danych obiekty zostały dodane w produkcyjnej bazie danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="58f6b-207">The Application Services Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="58f6b-208">Aby sprawdzić, czy obiekty bazy danych usług aplikacji zostały pomyślnie dodane do produkcyjnej bazy danych, Otwórz program SQL Server Management Studio i połączenia z bazą danych w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-208">To verify that the application services database objects were successfully added to the production database, open SQL Server Management Studio and connect to your production database.</span></span> <span data-ttu-id="58f6b-209">Jak pokazano na rysunku 4, powinien zostać wyświetlony tabel bazy danych usług aplikacji, w bazie danych, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, itd.</span><span class="sxs-lookup"><span data-stu-id="58f6b-209">As Figure 4 shows, you should now see the application services database tables in your database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, and so forth.</span></span>


<span data-ttu-id="58f6b-210">[![Upewnij się, że obiekty bazy danych zostały dodane w produkcyjnej bazie danych](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="58f6b-210">[![Confirm That the Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span></span>

<span data-ttu-id="58f6b-211">**Rysunek 4**: Upewnij się, że obiekty bazy danych zostały dodane do produkcyjnej bazy danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="58f6b-211">**Figure 4**: Confirm That the Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="58f6b-212">Tylko musisz użyć `aspnet_regsql.exe` narzędzia w przypadku wdrażania aplikacji sieci web po raz pierwszy lub po raz pierwszy po rozpoczęciu korzystania z usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-212">You will only need to use the `aspnet_regsql.exe` tool when deploying your web application for the first time or for the first time after you have started using the application services.</span></span> <span data-ttu-id="58f6b-213">Po zatwierdzeniu te obiekty bazy danych w bazie danych produkcyjnych one won t trzeba ponownie dodane lub zmodyfikowane.</span><span class="sxs-lookup"><span data-stu-id="58f6b-213">Once these database objects are on the production database they won t need to be re-added or modified.</span></span>

### <a name="copying-user-accounts-from-development-to-production"></a><span data-ttu-id="58f6b-214">Kopiowanie konta użytkowników od projektowania do produkcji</span><span class="sxs-lookup"><span data-stu-id="58f6b-214">Copying User Accounts from Development to Production</span></span>

<span data-ttu-id="58f6b-215">Korzystając z `SqlMembershipProvider` i `SqlRoleProvider` klasy dostawców do przechowywania informacji o usługach aplikacji w bazie danych programu SQL Server, informacji o kontach i roli użytkownika jest przechowywane w różnych tabel bazy danych, łącznie z `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, i `aspnet_UsersInRoles`, między innymi.</span><span class="sxs-lookup"><span data-stu-id="58f6b-215">When using the `SqlMembershipProvider` and `SqlRoleProvider` provider classes to store the application services information in a SQL Server database, the user account and role information is stored in a variety of database tables, including `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, and `aspnet_UsersInRoles`, among others.</span></span> <span data-ttu-id="58f6b-216">Podczas tworzenia kont użytkowników w przypadku utworzenia w środowisku programistycznym może replikować tych kont użytkowników w środowisku produkcyjnym przez skopiowanie odpowiednie rekordy z tabel odpowiednie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-216">If during development you create user accounts in the development environment you can replicate those user accounts in production by copying the corresponding records from the applicable database tables.</span></span> <span data-ttu-id="58f6b-217">Jeśli Kreator publikowania bazy danych jest używane do wdrażania obiektów bazy danych usług aplikacji może również wybrano kopiowanie rekordów, co spowodowałoby kont użytkowników utworzone w rozwoju się również w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-217">If you used the Database Publishing Wizard to deploy the application services database objects you may have also elected to copy the records, which would result in the user accounts created in development to also be on production.</span></span> <span data-ttu-id="58f6b-218">Jednak w zależności od ustawień konfiguracji może się okazać, czy nie można zalogować się w witrynie produkcji tych użytkowników, których konta zostały utworzone w rozwoju i skopiowane do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="58f6b-218">But, depending on your configuration settings, you may find that those users whose accounts were created in development and copied to production are unable to login from the production website.</span></span> <span data-ttu-id="58f6b-219">Co daje?</span><span class="sxs-lookup"><span data-stu-id="58f6b-219">What gives?</span></span>

<span data-ttu-id="58f6b-220">`SqlMembershipProvider` i `SqlRoleProvider` klasy dostawców zostały zaprojektowane w taki sposób, że pojedyncza baza danych może służyć jako magazynu użytkowników dla wielu aplikacji, w którym każda aplikacja może teoretycznie mają użytkownicy z nakładającą się nazwami użytkowników i role o takiej samej nazwie.</span><span class="sxs-lookup"><span data-stu-id="58f6b-220">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes were designed such that a single database could serve as a user store for multiple applications, where each application could, in theory, have users with overlapping usernames and roles with the same name.</span></span> <span data-ttu-id="58f6b-221">Aby zezwolić na tego rodzaju elastyczności, bazy danych przechowuje listę aplikacji w `aspnet_Applications` tabeli, a każdy użytkownik jest skojarzony z jedną z tych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-221">To allow for this flexibility, the database maintains a list of applications in the `aspnet_Applications` table, and each user is associated with one of these applications.</span></span> <span data-ttu-id="58f6b-222">W szczególności `aspnet_Users` tabela ma `ApplicationId` kolumny, która wiąże każdy użytkownik z rekordem w `aspnet_Applications` tabeli.</span><span class="sxs-lookup"><span data-stu-id="58f6b-222">Specifically, the `aspnet_Users` table has an `ApplicationId` column that ties each user to a record in the `aspnet_Applications` table.</span></span>

<span data-ttu-id="58f6b-223">Oprócz `ApplicationId` kolumny, `aspnet_Applications` tabeli znajdują się także `ApplicationName` kolumny, która zapewnia bardziej człowieka przyjazna nazwa dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-223">In addition to the `ApplicationId` column, the `aspnet_Applications` table also includes an `ApplicationName` column, which provides a more human-friendly name for the application.</span></span> <span data-ttu-id="58f6b-224">Próba uzyskania witryny sieci Web pracować przy użyciu konta użytkownika, takich jak sprawdzanie poprawności poświadczeń użytkownika s, na stronie logowania, musi ona informować `SqlMembershipProvider` jakie aplikacji do pracy z klasy.</span><span class="sxs-lookup"><span data-stu-id="58f6b-224">When a website attempts to work with a user account, such as validating a user s credentials from the login page, it must tell the `SqlMembershipProvider` class what application to work with.</span></span> <span data-ttu-id="58f6b-225">Zazwyczaj jest to przez podanie nazwy aplikacji i jego wartość pochodzi z konfiguracji dostawcy s w `Web.config` — w szczególności za pośrednictwem `applicationName` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="58f6b-225">It usually does this by supplying the application name, and the this value comes from the provider s configuration in `Web.config` - specifically via the `applicationName` attribute.</span></span>

<span data-ttu-id="58f6b-226">Ale co się stanie, jeśli `applicationName` atrybut nie jest określony w `Web.config`?</span><span class="sxs-lookup"><span data-stu-id="58f6b-226">But what happens if the `applicationName` attribute is not specified in `Web.config`?</span></span> <span data-ttu-id="58f6b-227">W takim przypadku członkostwo system używa ścieżki katalogu głównego aplikacji jako `applicationName` wartość.</span><span class="sxs-lookup"><span data-stu-id="58f6b-227">In such a case the Membership system uses the application root path as the `applicationName` value.</span></span> <span data-ttu-id="58f6b-228">Jeśli `applicationName` atrybut nie jest jawnie ustawiona `Web.config`, następnie, istnieje możliwość Środowisko deweloperskie i środowiska produkcyjnego używają głównych różnych aplikacji i w związku z tym zostanie skojarzona z inną aplikację nazwy w usługach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-228">If the `applicationName` attribute is not explicitly set in `Web.config`, then, there is the possibility that the development environment and production environment use a different application root and therefore will be associated with different application names in the application services.</span></span> <span data-ttu-id="58f6b-229">W przypadku takich niezgodność tych użytkowników utworzone w środowisku programistycznym będzie mieć `ApplicationId` wartość, która nie jest zgodny z `ApplicationId` wartość w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-229">If such a mismatch occurs then those users created in the development environment will have an `ApplicationId` value that does not match with the `ApplicationId` value for the production environment.</span></span> <span data-ttu-id="58f6b-230">Wynikiem jest zalogowanie się użytkowników won t.</span><span class="sxs-lookup"><span data-stu-id="58f6b-230">The net result is that those users won t be able to login.</span></span>

> [!NOTE]
> <span data-ttu-id="58f6b-231">Jeśli okaże się, że w tej sytuacji — z kontami użytkowników skopiowane do środowiska produkcyjnego niedopasowanych `ApplicationId` wartość — można napisać zapytanie, aby zaktualizować te nieprawidłowe `ApplicationId` wartości do `ApplicationId` używane w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-231">If you find yourself in this situation - with user accounts copied to production with a mismatched `ApplicationId` value - you could write a query to update these incorrect `ApplicationId` values to the `ApplicationId` used on production.</span></span> <span data-ttu-id="58f6b-232">Po zaktualizowaniu użytkowników, których konta zostały utworzone w środowisku programistycznym teraz będzie mógł zalogować się do aplikacji sieci web w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-232">Once updated, the users whose accounts were created on the development environment would now be able to sign into the web application on production.</span></span>


<span data-ttu-id="58f6b-233">Dobre wieści jest, że jest prosty krok należy wykonać, aby upewnić się, że dwóch środowisk używać tego samego `ApplicationId` — jawnie ustawione `applicationName` atrybutu w `Web.config` dla wszystkich dostawców usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="58f6b-233">The good news is that there is a simple step you can take to ensure that the two environments use the same `ApplicationId` - explicitly set the `applicationName` attribute in `Web.config` for all of your application services providers.</span></span> <span data-ttu-id="58f6b-234">Jawnie ustawiona `applicationName` atrybutu "BookReviews" w `<membership>` i `<roleManager>` elementy, co ta Wstawka kodu z `Web.config` zawiera.</span><span class="sxs-lookup"><span data-stu-id="58f6b-234">I explicitly set the `applicationName` attribute to "BookReviews" in the `<membership>` and `<roleManager>` elements as this snippet from `Web.config` shows.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample4.xml)]

<span data-ttu-id="58f6b-235">Aby poznać ustawienie `applicationName` atrybut i uzasadnienie, zapoznaj się [ *Scott Guthrie* ](https://weblogs.asp.net/scottgu/) s wpis w blogu, [ *zawsze ustawić właściwość applicationName Właściwość podczas konfigurowania członkostwa ASP.NET i innych dostawców*](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="58f6b-235">For more discussion on setting the `applicationName` attribute and the rationale behind it, refer to [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog post, [*Always set the applicationName property when configuring ASP.NET Membership and other Providers*](https://weblogs.asp.net/scottgu/443634).</span></span>

### <a name="managing-user-accounts-in-the-production-environment"></a><span data-ttu-id="58f6b-236">Zarządzanie kontami użytkowników w środowisku produkcyjnym</span><span class="sxs-lookup"><span data-stu-id="58f6b-236">Managing User Accounts in the Production Environment</span></span>

<span data-ttu-id="58f6b-237">Narzędzia administracji witryny sieci Web platformy ASP.NET (WSAT) ułatwia tworzenie i zarządzanie kontami użytkowników, zdefiniuj zastosować ról i pełnych reguły autoryzacji na podstawie użytkowników i ról.</span><span class="sxs-lookup"><span data-stu-id="58f6b-237">The ASP.NET Web Site Administration Tool (WSAT) makes it easy to create and manage user accounts, define and apply roles, and spell out user- and role-based authorization rules.</span></span> <span data-ttu-id="58f6b-238">Możesz uruchomić WSAT z programu Visual Studio, przechodząc do Eksploratora rozwiązań i klikając ikonę Konfiguracja programu ASP.NET lub przechodząc do witryny sieci Web lub projektu w menu i wybraniu elementu menu konfiguracja platformy ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="58f6b-238">You can launch the WSAT from Visual Studio by going to the Solution Explorer and clicking the ASP.NET Configuration icon or by going to the Website or Project menus and selecting the ASP.NET Configuration menu item.</span></span> <span data-ttu-id="58f6b-239">Niestety WSAT może pracować tylko z lokalnej witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="58f6b-239">Unfortunately, the WSAT can only work with local websites.</span></span> <span data-ttu-id="58f6b-240">W związku z tym nie można użyć WSAT ze stacji roboczej do zarządzania witryny sieci Web w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-240">Therefore, you cannot use the WSAT from your workstation to manage the website in the production environment.</span></span>

<span data-ttu-id="58f6b-241">Dobre wieści jest wszystkie funkcje udostępniane podał WSAT jest dostępnych programowo za pośrednictwem członkostwa i ról interfejsów API; Ponadto wiele ekranów WSAT używanie standardowych kontrolek związane z logowaniem ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="58f6b-241">The good news is that all of the functionality exposed provided by the WSAT is available programmatically through the Membership and Roles APIs; furthermore, many of the WSAT screens use the standard ASP.NET Login-related controls.</span></span> <span data-ttu-id="58f6b-242">Krótko mówiąc można dodać strony ASP.NET do witryny sieci Web oferuje możliwości zarządzania niezbędne.</span><span class="sxs-lookup"><span data-stu-id="58f6b-242">In short, you can add ASP.NET pages to your website that offer the necessary management capabilities.</span></span>

<span data-ttu-id="58f6b-243">Odwołaj, że samouczek wcześniejszych zaktualizowany przeglądami książki aplikacji sieci web obejmują `~/Admin` folderu, a ten folder został skonfigurowany, aby umożliwić tylko przez użytkowników w roli administratora.</span><span class="sxs-lookup"><span data-stu-id="58f6b-243">Recall that an earlier tutorial updated the Book Reviews web application to include an `~/Admin` folder, and this folder has been configured to only allow users in the Admin role.</span></span> <span data-ttu-id="58f6b-244">Po dodaniu strony do tego folderu o nazwie `CreateAccount.aspx` z którym administrator może utworzyć nowego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="58f6b-244">I added a page to that folder named `CreateAccount.aspx` from which an administrator can create a new user account.</span></span> <span data-ttu-id="58f6b-245">Ta strona używa formancie CreateUserWizard do wyświetlenia logikę interfejsu i wewnętrznej bazy danych użytkownika do tworzenia nowego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="58f6b-245">This page uses the CreateUserWizard control to display the user interface and backend logic for creating a new user account.</span></span> <span data-ttu-id="58f6b-246">Jakie więcej, s I dostosowane formantu ma zawierać pola wyboru, które monituje czy również należy dodać nowego użytkownika do roli administratora (patrz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="58f6b-246">What s more, I customized the control to include a CheckBox that prompts whether the new user should also be added to the Admin role (see Figure 5).</span></span> <span data-ttu-id="58f6b-247">Z niewielki pracy można utworzyć niestandardowy zestaw stron implementujący użytkowników i ról związanych z zarządzaniem zadań, które w przeciwnym razie zostanie dostarczone przez WSAT.</span><span class="sxs-lookup"><span data-stu-id="58f6b-247">With a little bit of work you can build a custom set of pages that implements the user and role management-related tasks that would otherwise be provided by the WSAT.</span></span>

> [!NOTE]
> <span data-ttu-id="58f6b-248">Dla więcej informacji na temat przy użyciu członkostwa i ról interfejsów API oraz kontroli związane z logowaniem sieci Web ASP.NET, należy przeczytać Mój [ *samouczki dotyczące zabezpieczeń witryny sieci Web*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="58f6b-248">For more information on using the Membership and Roles APIs along with the Login-related ASP.NET Web controls, be sure to read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span> <span data-ttu-id="58f6b-249">Aby uzyskać więcej informacji na temat dostosowywania formancie CreateUserWizard zobacz [ *tworzenia kont użytkowników* ](../../older-versions-security/membership/creating-user-accounts-cs.md) i [ *przechowywania dodatkowych informacji użytkownika* ](../../older-versions-security/membership/storing-additional-user-information-cs.md) samouczki lub wyewidencjonowanie [ *Erich Peterson* ](http://www.erichpeterson.com/) artykułu s [ *Dostosowywanie formancie CreateUserWizard* ](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="58f6b-249">For more on customizing the CreateUserWizard control refer to the [*Creating User Accounts*](../../older-versions-security/membership/creating-user-accounts-cs.md) and [*Storing Additional User Information*](../../older-versions-security/membership/storing-additional-user-information-cs.md) tutorials, or check out [*Erich Peterson*](http://www.erichpeterson.com/) s article, [*Customizing the CreateUserWizard Control*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span></span>


<span data-ttu-id="58f6b-250">[![Administratorzy mogą tworzyć nowych kont użytkowników](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="58f6b-250">[![Administrators Can Create New User Accounts](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span></span>

<span data-ttu-id="58f6b-251">**Rysunek 5**: Administratorzy mogą tworzyć nowych kont użytkowników ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="58f6b-251">**Figure 5**: Administrators Can Create New User Accounts ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span></span>


<span data-ttu-id="58f6b-252">Jeśli potrzebujesz pełną funkcjonalnością WSAT wyewidencjonowanie [ *stopniowych swój własny sieci Web narzędzie do administrowania witryną*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), w których autor Dan Clem przeprowadzi Cię przez proces tworzenia niestandardowego narzędzia przypominającej WSAT.</span><span class="sxs-lookup"><span data-stu-id="58f6b-252">If you need the full functionality of the WSAT check out [*Rolling Your Own Web Site Administration Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in which author Dan Clem walks through the process of building a custom WSAT-like tool.</span></span> <span data-ttu-id="58f6b-253">DaN udziały jego s kodu aplikacji (w języku C#) i instrukcje krok po kroku dodanie go do witryny sieci Web hostowanej.</span><span class="sxs-lookup"><span data-stu-id="58f6b-253">Dan shares his application s source code (in C#) and provides step-by-step instructions for adding it to your hosted website.</span></span>

## <a name="summary"></a><span data-ttu-id="58f6b-254">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="58f6b-254">Summary</span></span>

<span data-ttu-id="58f6b-255">W przypadku wdrażania aplikacji sieci web, która używa implementacja bazy danych usług aplikacji musi najpierw sprawdź, czy w produkcyjnej bazie danych ma obiektów wymagania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="58f6b-255">When deploying a web application that uses the application services database implementation you must first ensure that the production database has the requisite database objects.</span></span> <span data-ttu-id="58f6b-256">Te obiekty można dodać przy użyciu techniki opisane w *wdrażania bazy danych* samouczek; Alternatywnie, można zastosować `aspnet_regsql.exe` narzędzia, ponieważ widzieliśmy w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="58f6b-256">These objects can be added using the techniques discussed in the *Deploying a Database* tutorial; alternatively, you can use the `aspnet_regsql.exe` tool, as we saw in this tutorial.</span></span> <span data-ttu-id="58f6b-257">Inne problemy, firma Microsoft dotknięciu Centrum wokół synchronizowanie nazwę aplikacji, używane w środowisk projektowania i produkcji, (co jest ważne, jeśli użytkownicy i role utworzone w środowisku programistycznym, jest nieprawidłowy w środowisku produkcyjnym) i metody Zarządzanie użytkownikami i rolami w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="58f6b-257">Other challenges we touched on center around synchronizing the application name used in the development and production environments (which is important if you want users and roles created in the development environment to be valid on production) and techniques for managing the users and roles in the production environment.</span></span>

<span data-ttu-id="58f6b-258">Programowanie przyjemność!</span><span class="sxs-lookup"><span data-stu-id="58f6b-258">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="58f6b-259">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="58f6b-259">Further Reading</span></span>

<span data-ttu-id="58f6b-260">Więcej informacji dotyczących tematów omówionych w tym samouczku można znaleźć w następujących zasobach:</span><span class="sxs-lookup"><span data-stu-id="58f6b-260">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="58f6b-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span><span class="sxs-lookup"><span data-stu-id="58f6b-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span></span>](https://msdn.microsoft.com/library/ms229862.aspx)
- [<span data-ttu-id="58f6b-262">*Tworzenie bazy danych usług aplikacji dla programu SQL Server*</span><span class="sxs-lookup"><span data-stu-id="58f6b-262">*Creating the Application Services Database for SQL Server*</span></span>](https://msdn.microsoft.com/library/x28wfk74.aspx)
- [<span data-ttu-id="58f6b-263">*Tworzenie schematu członkostwa w programie SQL Server*</span><span class="sxs-lookup"><span data-stu-id="58f6b-263">*Creating the Membership Schema in SQL Server*</span></span>](../../older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs.md)
- [<span data-ttu-id="58f6b-264">*Badanie członkostwa ASP.NET s, ról i profilu*</span><span class="sxs-lookup"><span data-stu-id="58f6b-264">*Examining ASP.NET s Membership, Roles, and Profile*</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="58f6b-265">*Wycofanie własne narzędzia administrowania witryną sieci Web*</span><span class="sxs-lookup"><span data-stu-id="58f6b-265">*Rolling Your Own Web Site Administration Tool*</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [<span data-ttu-id="58f6b-266">*Samouczki dotyczące zabezpieczeń witryny sieci Web*</span><span class="sxs-lookup"><span data-stu-id="58f6b-266">*Website Security Tutorials*</span></span>](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)
- [<span data-ttu-id="58f6b-267">*Omówienie narzędzia do administrowania witryny sieci Web*</span><span class="sxs-lookup"><span data-stu-id="58f6b-267">*Web Site Administration Tool Overview*</span></span>](https://msdn.microsoft.com/library/yy40ytx0.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="58f6b-268">[Poprzednie](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[dalej](strategies-for-database-development-and-deployment-cs.md)</span><span class="sxs-lookup"><span data-stu-id="58f6b-268">[Previous](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Next](strategies-for-database-development-and-deployment-cs.md)</span></span>
