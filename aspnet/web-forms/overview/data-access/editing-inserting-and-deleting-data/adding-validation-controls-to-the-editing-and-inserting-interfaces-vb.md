---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-vb
title: "Dodawanie formantów weryfikacji do edycji i wstawianie interfejsów (VB) | Dokumentacja firmy Microsoft"
author: rick-anderson
description: "W tym samouczku zajmiemy się tym, jak łatwo jest Dodaj formanty walidacji EditItemTemplate i InsertItemTemplate danych formantu sieci Web, aby zapewnić bardziej..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/17/2006
ms.topic: article
ms.assetid: e3d7028a-7a22-4a4f-babe-d53afc41c0e2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-vb
msc.type: authoredcontent
ms.openlocfilehash: a181be8d07ff15c33818077dc75b5cc6c6bbf65d
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/10/2017
---
<a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-vb"></a><span data-ttu-id="2e0c9-103">Dodawanie formantów weryfikacji do edycji i wstawianie interfejsów (VB)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-103">Adding Validation Controls to the Editing and Inserting Interfaces (VB)</span></span>
====================
<span data-ttu-id="2e0c9-104">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="2e0c9-105">[Pobierz przykładową aplikację](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_VB.exe) lub [pobierania plików PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/datatutorial19vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_VB.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/datatutorial19vb1.pdf)</span></span>

> <span data-ttu-id="2e0c9-106">W tym samouczku będziemy zostanie wyświetlone, jak łatwo jest Dodaj formanty walidacji EditItemTemplate i InsertItemTemplate danych formantu sieci Web zapewnia bardziej niezawodne interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="2e0c9-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="2e0c9-107">Introduction</span></span>

<span data-ttu-id="2e0c9-108">Kontrolki GridView i widoku DetailsView w przykładach, możemy zostały przedstawione w ciągu ostatnich trzech samouczki ma wszystkie zostały składa się z BoundFields i CheckBoxFields (typy pól automatycznie dodawane przez program Visual Studio podczas wiązania ze źródłem danych widoku GridView lub widoku DetailsView kontrolowanie za pomocą tagów inteligentnych).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="2e0c9-109">Podczas edycji wiersza w widoku GridView lub widoku DetailsView, te BoundFields, które nie są tylko do odczytu są konwertowane na pola tekstowe, z którego użytkownik końcowy może zmodyfikować istniejących danych.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="2e0c9-110">Podobnie podczas Wstawianie nowy rekord formantu widoku DetailsView tych BoundFields którego `InsertVisible` właściwość jest ustawiona na `True` (ustawienie domyślne) są renderowane jako puste pola tekstowe, w którym użytkownik może podać wartości pól w nowym rekordzie.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `True` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="2e0c9-111">Podobnie CheckBoxFields, które są wyłączone w interfejsie standardowe, tylko do odczytu, są konwertowane na włączone pola wyboru w edycji i wstawianie interfejsów.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="2e0c9-112">Domyślnie edycji i wstawianie interfejsów dla elementu BoundField i CheckBoxField mogą być przydatne, interfejs brakuje dowolny rodzaj sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="2e0c9-113">Jeśli użytkownik wprowadzi błąd zapisu danych — takich jak pominięcie `ProductName` pola lub nieprawidłową wartość dla wprowadzania `UnitsInStock` (na przykład -50) zostanie zgłoszony wyjątek z wewnątrz głębokości architektury aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="2e0c9-114">Podczas tego wyjątku można bezpiecznie obsłużyć jak pokazano w [poprzedniego samouczek](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-vb.md), najlepiej edycji lub wstawianie interfejsu użytkownika to formanty walidacji, aby uniemożliwić użytkownikowi wprowadzanie takich nieprawidłowe dane w pierwszym miejscu.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-vb.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="2e0c9-115">Zapewnić dostosowane edycji lub wstawianie interfejsu, musimy elementu BoundField lub CheckBoxField Zamień na pole TemplateField.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="2e0c9-116">TemplateFields, które były temat dyskusji w [przy użyciu TemplateFields w kontrolce GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) i [TemplateFields za pomocą formantu widoku DetailsView](../custom-formatting/using-templatefields-in-the-detailsview-control-vb.md) samouczki, może składać się z wielu Definiowanie szablonów należy oddzielić interfejsów dla stanów innego wiersza.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-vb.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="2e0c9-117">TemplateField `ItemTemplate` służy do podczas renderowania pola tylko do odczytu lub wierszy w widoku DetailsView lub widoku GridView formantów, podczas gdy `EditItemTemplate` i `InsertItemTemplate` wskazać interfejsy służące do edycji i wstawiania tryby, odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="2e0c9-118">W tym samouczku zajmiemy się tym, jak łatwo jest Dodaj formanty walidacji do TemplateField `EditItemTemplate` i `InsertItemTemplate` zapewnia bardziej niezawodne interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="2e0c9-119">W szczególności ten samouczek przedstawia przykład utworzone w [badanie zdarzeń skojarzonych z Wstawianie, aktualizowanie i usuwanie](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md) samouczka i wspomaga edycji i wstawianie interfejsy do uwzględnienia odpowiednie sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deletingexamining-the-events-associated-with-inserting-updating-and-deleting-vbmd"></a><span data-ttu-id="2e0c9-120">Krok 1: Replikowanie w przykładzie z[badanie zdarzenia skojarzonego z Wstawianie, aktualizowanie i usuwanie](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md)</span></span>

<span data-ttu-id="2e0c9-121">W [badanie zdarzeń skojarzonych z Wstawianie, aktualizowanie i usuwanie](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md) samouczek utworzyliśmy stronę wymienione nazwy i cen produktów w można edytować widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-vb.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="2e0c9-122">Ponadto stronie uwzględniona Element DetailsView o `DefaultMode` ustawiono właściwość `Insert`, a tym samym zawsze renderowanie w trybie wstawiania.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="2e0c9-123">Z tego widoku DetailsView, użytkownik może wprowadź nazwę i cen dla nowego produktu, kliknij przycisk Wstaw i został dodany do systemu (zobacz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>


<span data-ttu-id="2e0c9-124">[![Poprzedni przykład pozwala użytkownikom na dodawanie nowych produktów i edytować istniejące](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image1.png)</span></span>

<span data-ttu-id="2e0c9-125">**Rysunek 1**: poprzedniego przykładu umożliwia użytkownikom dodawanie nowych produktów i edytować istniejące ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image3.png))</span></span>


<span data-ttu-id="2e0c9-126">Naszym celem w tym samouczku jest rozszerzyć widoku DetailsView i GridView, aby zapewnić formanty walidacji.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="2e0c9-127">W szczególności zostanie logiki sprawdzania poprawności:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="2e0c9-128">Wymaga podania nazwy podczas wstawiania lub edytowania produktu</span><span class="sxs-lookup"><span data-stu-id="2e0c9-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="2e0c9-129">Wymaga podania ceny podczas wstawiania rekordów; Podczas edytowania rekordu, firma Microsoft będzie wymagać wciąż cen, ale będzie używać logika w widoku GridView `RowUpdating` już z wcześniejszych samouczek programu obsługi zdarzeń</span><span class="sxs-lookup"><span data-stu-id="2e0c9-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="2e0c9-130">Sprawdź, czy wartość wprowadzona w cenie formacie waluty prawidłowe</span><span class="sxs-lookup"><span data-stu-id="2e0c9-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="2e0c9-131">Zanim można przyjrzymy rozbudować w poprzednim przykładzie, aby uwzględnić sprawdzania poprawności, najpierw musimy replikacji w przykładzie z `DataModificationEvents.aspx` strony do strony w tym samouczku `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="2e0c9-132">Potrzebujemy kopiować zarówno w tym celu `DataModificationEvents.aspx` deklaratywne znaczników strony i jego kod źródłowy.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="2e0c9-133">Najpierw skopiować na deklaratywne znaczników, wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="2e0c9-134">Otwórz `DataModificationEvents.aspx` strony w programie Visual Studio</span><span class="sxs-lookup"><span data-stu-id="2e0c9-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="2e0c9-135">Przejdź do strony deklaratywne znaczników (kliknij przycisk źródła w dolnej części strony)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="2e0c9-136">Skopiuj tekst wewnątrz `<asp:Content>` i `</asp:Content>` tagi (linie 3 – 44), jak pokazano na rysunku 2.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>


<span data-ttu-id="2e0c9-137">[![Skopiuj tekst w &lt;asp: Content&gt; formantu](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image4.png)</span></span>

<span data-ttu-id="2e0c9-138">**Rysunek 2**: skopiować tekst w `<asp:Content>` formantu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image6.png))</span></span>


1. <span data-ttu-id="2e0c9-139">Otwórz `UIValidation.aspx` strony</span><span class="sxs-lookup"><span data-stu-id="2e0c9-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="2e0c9-140">Przejdź do strony deklaratywne znaczników</span><span class="sxs-lookup"><span data-stu-id="2e0c9-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="2e0c9-141">Wklej tekst wewnątrz `<asp:Content>` formantu.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="2e0c9-142">Aby skopiować kod źródłowy, otwórz `DataModificationEvents.aspx.vb` zaznacz i skopiuj tylko tekst *w* `EditInsertDelete_DataModificationEvents` klasy.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-142">To copy over the source code, open the `DataModificationEvents.aspx.vb` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="2e0c9-143">Skopiuj obsługi zdarzeń trzy (`Page_Load`, `GridView1_RowUpdating`, i `ObjectDataSource1_Inserting`), ale **nie** skopiuj deklaracji klasy.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration.</span></span> <span data-ttu-id="2e0c9-144">Wklej skopiowany tekst *w* `EditInsertDelete_UIValidation` klasy w `UIValidation.aspx.vb`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="2e0c9-145">Po przeniesieniu za pośrednictwem zawartość i kod z `DataModificationEvents.aspx` do `UIValidation.aspx`, Poświęć chwilę, aby przetestować postęp w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="2e0c9-146">Powinny pojawić się takie same dane wyjściowe i doświadczenia, te same funkcje, w każdym z tych dwóch stronach (dla zrzut ekranu odwołują się do rysunku 1 `DataModificationEvents.aspx` w działaniu).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="2e0c9-147">Krok 2: Konwertowanie BoundFields na TemplateFields</span><span class="sxs-lookup"><span data-stu-id="2e0c9-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="2e0c9-148">Aby dodać formanty walidacji do edycji i wstawianie interfejsów, BoundFields używany przez formant widoku DetailsView i GridView muszą zostać przekonwertowane do TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="2e0c9-149">Można to osiągnąć, kliknij odpowiednio łącza edycji kolumn i Edytuj pola w widoku GridView i DetailsView tagów inteligentnych.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="2e0c9-150">, Zaznacz wszystkie BoundFields, a następnie kliknij łącze "Konwertuj to pole na pole TemplateField".</span><span class="sxs-lookup"><span data-stu-id="2e0c9-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>


<span data-ttu-id="2e0c9-151">[![Konwertowanie każdego DetailsView i w widoku GridView BoundFields TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image7.png)</span></span>

<span data-ttu-id="2e0c9-152">**Rysunek 3**: konwertowanie każdego DetailsView i w widoku GridView BoundFields do TemplateFields ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image9.png))</span></span>


<span data-ttu-id="2e0c9-153">Konwertowanie elementu BoundField na pole TemplateField za pomocą okna dialogowego pola generuje TemplateField, który wykazuje tych samych interfejsów tylko do odczytu, edytowania i wstawianie jako elementu BoundField, do samej siebie.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="2e0c9-154">Następujący kod przedstawia składnię deklaratywne `ProductName` w widoku DetailsView po został przekonwertowany na pole TemplateField:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/samples/sample1.aspx)]

<span data-ttu-id="2e0c9-155">Należy pamiętać, że ta TemplateField ma trzy szablony tworzone automatycznie `ItemTemplate`, `EditItemTemplate`, i `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="2e0c9-156">`ItemTemplate` Wyświetla wartość pola danych jednego (`ProductName`) za pomocą formantu etykiety w sieci Web, podczas gdy `EditItemTemplate` i `InsertItemTemplate` przedstawić wartości pola danych w formancie TextBox sieci Web, który kojarzy w polu danych z pole tekstowe `Text` Właściwość przy użyciu dwukierunkowego wiązania z danymi.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="2e0c9-157">Ponieważ w widoku DetailsView jest używany tylko na tej stronie do wrzucania, można usunąć `ItemTemplate` i `EditItemTemplate` z dwóch TemplateFields, chociaż nie powoduje żadnych problemów w pozostawienie ich.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="2e0c9-158">Ponieważ w widoku GridView nie obsługuje wbudowanej funkcji DetailsView Wstawianie, konwertowanie w widoku GridView `ProductName` pole na pole TemplateField powoduje tylko `ItemTemplate` i `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/samples/sample2.aspx)]

<span data-ttu-id="2e0c9-159">Klikając przycisk "Konwertuj to pole na pole TemplateField", Visual Studio został utworzony TemplateField, w których szablony naśladować interfejsu użytkownika przekonwertowanego elementu BoundField.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="2e0c9-160">Można to sprawdzić, przechodząc na stronę tej strony za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="2e0c9-161">Znajdziesz się, że wygląd i zachowanie TemplateFields jest identyczne środowisko podczas BoundFields użyto zamiast tego.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="2e0c9-162">Możesz dostosować edycji interfejsów w szablonach, zgodnie z potrzebami.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="2e0c9-163">Na przykład może chcemy mieć w polu tekstowym `UnitPrice` TemplateFields renderowane jako pole tekstowe mniejsze niż `ProductName` pola tekstowego.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="2e0c9-164">W tym celu można ustawić pole tekstowe `Columns` właściwości do odpowiedniej wartości lub podaj bezwzględny szerokość za pośrednictwem `Width` właściwości.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="2e0c9-165">W następnym samouczku przedstawiono będzie całkowicie dostosowywania interfejsu edycji przez zastąpienie pole tekstowe z wpisem danych formantu sieci Web.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>


## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="2e0c9-166">Krok 3: Dodawanie formantów weryfikacji do widoku GridView`EditItemTemplate` s</span><span class="sxs-lookup"><span data-stu-id="2e0c9-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="2e0c9-167">Podczas tworzenia formularzy wprowadzania danych, ważne jest wprowadzania wszystkich wymaganych pól i że wszystkie podane dane wejściowe są wartości prawnych, niepoprawnie sformatowany.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="2e0c9-168">Aby upewnić się, że dane wejściowe użytkownika są prawidłowe, program ASP.NET udostępnia pięć formantów wbudowanych sprawdzania poprawności, które są przeznaczone do użycia w celu sprawdzenia wartości kontrolki wprowadzania w formie jednej:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="2e0c9-169">[RequiredFieldValidator](https://msdn.microsoft.com/en-us/library/5hbw267h(VS.80).aspx) gwarantuje, że wartość została podana</span><span class="sxs-lookup"><span data-stu-id="2e0c9-169">[RequiredFieldValidator](https://msdn.microsoft.com/en-us/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="2e0c9-170">[CompareValidator](https://msdn.microsoft.com/en-us/library/db330ayw(VS.80).aspx) sprawdza poprawność wartości z inną wartością formantu sieci Web lub wartość stałą lub zapewnia, że format wartości jest niedozwolona dla określonego typu danych</span><span class="sxs-lookup"><span data-stu-id="2e0c9-170">[CompareValidator](https://msdn.microsoft.com/en-us/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="2e0c9-171">[RangeValidator](https://msdn.microsoft.com/en-us/library/f70d09xt.aspx) gwarantuje, że wartość znajduje się w zakresie wartości</span><span class="sxs-lookup"><span data-stu-id="2e0c9-171">[RangeValidator](https://msdn.microsoft.com/en-us/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="2e0c9-172">[RegularExpressionValidator](https://msdn.microsoft.com/en-US/library/eahwtc9e.aspx) weryfikuje wartość względem [wyrażeń regularnych](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-172">[RegularExpressionValidator](https://msdn.microsoft.com/en-US/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="2e0c9-173">[CustomValidator](https://msdn.microsoft.com/en-us/library/9eee01cx(VS.80).aspx) weryfikuje wartość z niestandardowych, definiowanych przez użytkownika — metoda</span><span class="sxs-lookup"><span data-stu-id="2e0c9-173">[CustomValidator](https://msdn.microsoft.com/en-us/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="2e0c9-174">Aby uzyskać więcej informacji o tych kontrolek pięć, zapoznaj się [sekcji Formanty walidacji](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) z [samouczków szybkiego startu ASP.NET](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="2e0c9-175">W naszym samouczku trzeba będzie użyć RequiredFieldValidator w widoku DetailsView i w widoku GridView `ProductName` TemplateFields i RequiredFieldValidator w widoku DetailsView `UnitPrice` TemplateField.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="2e0c9-176">Ponadto musisz dodać CompareValidator do obu formantów `UnitPrice` TemplateFields, który zapewnia, że wprowadzona cena ma wartość większą niż lub równa 0 i jest podana w formacie waluty prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="2e0c9-177">Podczas ASP.NET 1.x miały te takich samych kontroli pięć sprawdzania poprawności, ASP.NET 2.0 dodał szereg ulepszeń, głównym dwa skryptu po stronie klienta jest obsługa przeglądarek innych niż program Internet Explorer i możliwość formantów sprawdzania poprawności partycji na stronie do Sprawdzanie poprawności grupy.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="2e0c9-178">Aby uzyskać więcej informacji na temat nowych funkcji kontroli weryfikacji w 2.0 dotyczą [pincety formanty walidacji w programie ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>


<span data-ttu-id="2e0c9-179">Zacznijmy od dodania formanty walidacji niezbędne `EditItemTemplate` s w TemplateFields w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="2e0c9-180">Aby to zrobić, kliknij łącze Edytuj szablony z widoku GridView tagów inteligentnych można wyświetlić interfejsu edycji szablonu.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="2e0c9-181">W tym miejscu można wybrać szablon, który można edytować na liście rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="2e0c9-182">Ponieważ chcemy, aby rozszerzyć interfejs edytowania, musimy Dodaj formanty walidacji do `ProductName` i `UnitPrice`w `EditItemTemplate` s.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>


<span data-ttu-id="2e0c9-183">[![Należy rozszerzyć ProductName i jego UnitPrice EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image10.png)</span></span>

<span data-ttu-id="2e0c9-184">**Rysunek 4**: musimy Rozszerz `ProductName` i `UnitPrice`w `EditItemTemplate` s ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image12.png))</span></span>


<span data-ttu-id="2e0c9-185">W `ProductName` `EditItemTemplate`, Dodaj RequiredFieldValidator przeciągając je z przybornika do interfejsu edycji szablonu, umieszczając za pole tekstowe.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>


<span data-ttu-id="2e0c9-186">[![Dodaj RequiredFieldValidator do ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image13.png)</span></span>

<span data-ttu-id="2e0c9-187">**Rysunek 5**: Dodaj RequiredFieldValidator do `ProductName` `EditItemTemplate` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image15.png))</span></span>


<span data-ttu-id="2e0c9-188">Wszystkie formanty walidacji pracę sprawdzanie poprawności danych wejściowych jeden formant sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="2e0c9-189">W związku z tym należy wskazać, że RequiredFieldValidator właśnie dodaliśmy powinien sprawdzania poprawności pole tekstowe w `EditItemTemplate`; odbywa się przez ustawienie sterowania weryfikacji [Właściwość ControlToValidate](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) do `ID` odpowiednie formantu sieci Web.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="2e0c9-190">Pole tekstowe ma obecnie raczej nieopisane `ID` z `TextBox1`, ale teraz zmienić na bardziej odpowiednią.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="2e0c9-191">Kliknij w polu tekstowym w szablonie, a następnie w oknie Właściwości zmień `ID` z `TextBox1` do `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>


<span data-ttu-id="2e0c9-192">[![Zmień identyfikator pole tekstowe EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image16.png)</span></span>

<span data-ttu-id="2e0c9-193">**Rysunek 6**: Zmień pole tekstowe `ID` do `EditProductName` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image18.png))</span></span>


<span data-ttu-id="2e0c9-194">Następnie należy ustawić RequiredFieldValidator `ControlToValidate` właściwości `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="2e0c9-195">Wreszcie, ustaw [właściwości ErrorMessage](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) do "Należy podać nazwę produktu" i [właściwości Text](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) do "\*".</span><span class="sxs-lookup"><span data-stu-id="2e0c9-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="2e0c9-196">`Text` Wartość właściwości, jeśli zostanie podana, jest tekst, który jest wyświetlany przez formant weryfikacji w przypadku niepowodzenia weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="2e0c9-197">`ErrorMessage` Wartość właściwości, która jest wymagana, jest używany przez formant ValidationSummary; Jeśli `Text` pominięcia będzie używana wartość właściwości `ErrorMessage` wartość właściwości jest również tekstu wyświetlanego przez formant sprawdzania poprawności na nieprawidłowe dane wejściowe.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="2e0c9-198">Ustawienie tych trzech właściwości RequiredFieldValidator, po ekranie powinien wyglądać podobnie do rysunku 7.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>


<span data-ttu-id="2e0c9-199">[![Ustawianie właściwości tekstu, komunikat o błędzie i ControlToValidate RequiredFieldValidator](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image19.png)</span></span>

<span data-ttu-id="2e0c9-200">**Rysunek 7**: Ustaw RequiredFieldValidator `ControlToValidate`, `ErrorMessage`, i `Text` właściwości ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image21.png))</span></span>


<span data-ttu-id="2e0c9-201">Z RequiredFieldValidator dodane do `ProductName` `EditItemTemplate`, wszystkie, czy pozostaje jest dodanie niezbędne sprawdzania poprawności `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="2e0c9-202">Ponieważ firma Microsoft, decydujesz się na tej stronie `UnitPrice` jest opcjonalny w przypadku edytowania rekordu, nie należy dodawać RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="2e0c9-203">Jednak należy dodać CompareValidator, aby upewnić się, że `UnitPrice`, jeśli podany, jest poprawnie sformatowana jako walutę i jest większa lub równa 0.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="2e0c9-204">Zanim dodamy CompareValidator do `UnitPrice` `EditItemTemplate`, najpierw Zmieńmy identyfikator formantu TextBox w sieci Web z `TextBox2` do `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="2e0c9-205">Po wprowadzeniu tej zmiany należy dodać CompareValidator, ustawienie jej `ControlToValidate` właściwości `EditUnitPrice`, jego `ErrorMessage` dla właściwości "cena musi być większa lub równa zero i nie może zawierać symbol waluty," i jego `Text` właściwości "\*".</span><span class="sxs-lookup"><span data-stu-id="2e0c9-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="2e0c9-206">Aby wskazać, że `UnitPrice` wartość musi być większa lub równa 0, ustaw CompareValidator [właściwości Operator](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) do `GreaterThanEqual`, jego [właściwości ValueToCompare](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) "0" i jego [ Typ właściwości](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) do `Currency`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="2e0c9-207">Poniżej przedstawiono składni deklaratywnej `UnitPrice` na pole TemplateField `EditItemTemplate` po dokonaniu zmiany:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/samples/sample3.aspx)]

<span data-ttu-id="2e0c9-208">Po wprowadzeniu tych zmian, otwórz stronę w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="2e0c9-209">Przy próbie pominąć nazwę lub wprowadź wartość Nieprawidłowa cena podczas edytowania produktu gwiazdka pojawia się obok pola tekstowego.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="2e0c9-210">Jak pokazano na rysunku 8, cenę, która zawiera symbol waluty, takich jak $ cenie od 19,95 jest uznawane za nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="2e0c9-211">CompareValidator `Currency` `Type` umożliwia separatory cyfr (na przykład przecinków lub okresów, w zależności od ustawienia kultury) i wiodące plus lub minus, ale *nie* zezwolenie na symbol waluty.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="2e0c9-212">To zachowanie może perplex użytkowników, jak interfejs edytowania obecnie renderuje `UnitPrice` w formacie waluty.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="2e0c9-213">Odwołaj się, że w *zdarzeń skojarzonych z Wstawianie, aktualizowanie i usuwanie* samouczek ustawiliśmy elementu BoundField `DataFormatString` właściwości `{0:c}` celu formacie waluty.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="2e0c9-214">Ponadto możemy ustawić `ApplyFormatInEditMode` właściwości na wartość true, powodując widoku GridView do edycji interfejs do formatowania `UnitPrice` jako walutę.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="2e0c9-215">Podczas konwertowania elementu BoundField na pole TemplateField, Visual Studio zauważyć te ustawienia i sformatowany pole tekstowe `Text` właściwość jako walutę przy użyciu składni wiązania z danymi `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>


<span data-ttu-id="2e0c9-216">[![Gwiazdka pojawia się obok pola tekstowe z nieprawidłowe dane wejściowe](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image22.png)</span></span>

<span data-ttu-id="2e0c9-217">**Rysunek 8**: gwiazdki pojawia się dalej, aby pola tekstowe z nieprawidłowe dane wejściowe ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image24.png))</span></span>


<span data-ttu-id="2e0c9-218">Podczas sprawdzania poprawności działa jako — jest, użytkownik będzie musiał ręcznie usunąć symbol waluty podczas edytowania rekordu, który nie jest akceptowane.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="2e0c9-219">Aby rozwiązać ten problem, firma Microsoft dostępne są trzy opcje:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="2e0c9-220">Skonfiguruj `EditItemTemplate` , aby `UnitPrice` wartość nie jest sformatowany jako walutę.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="2e0c9-221">Zezwalaj użytkownikowi na wprowadzenie symbolu waluty przez usunięcie CompareValidator i zastępowanie RegularExpressionValidator, który prawidłowo sprawdza, czy wartość waluty prawidłowo sformatowane.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="2e0c9-222">W tym miejscu problem jest wyrażenie regularne do sprawdzania poprawności wartości waluty nie jest łatwa i będzie wymagać pisanie kodu, jeśli trzeba zastosować ustawienia kultury.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="2e0c9-223">Całkowicie usunąć formant sprawdzania poprawności i zależne od logikę weryfikacji po stronie serwera w widoku GridView `RowUpdating` obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="2e0c9-224">Przejdźmy z opcją #1 w tym ćwiczeniu.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="2e0c9-225">Obecnie `UnitPrice` jest w formacie waluty z powodu wyrażenia wiązania danych dla pola tekstowego w `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="2e0c9-226">Zmień instrukcję Bind `Bind("UnitPrice", "{0:n2}")`, które formatuje wynik jako liczba z dwóch cyfr precyzji.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="2e0c9-227">Można to zrobić bezpośrednio za pomocą składni deklaratywnej lub klikając łącze Edytuj powiązania DataBindings z `EditUnitPrice` TextBox w `UnitPrice` na pole TemplateField `EditItemTemplate` (zobacz rysunku 9 i 10).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>


<span data-ttu-id="2e0c9-228">[![Kliknij łącze Edytuj powiązania DataBindings pole tekstowe](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image25.png)</span></span>

<span data-ttu-id="2e0c9-229">**Rysunek 9**: kliknij łącze Edytuj powiązania danych w polu tekstowym ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image27.png))</span></span>


<span data-ttu-id="2e0c9-230">[![Określ specyfikatora formatu w instrukcji Bind](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image28.png)</span></span>

<span data-ttu-id="2e0c9-231">**Na rysunku nr 10**: Określ specyfikatora formatu w `Bind` instrukcji ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image30.png))</span></span>


<span data-ttu-id="2e0c9-232">Dzięki tej zmianie sformatowany cen w interfejsie edycji obejmuje przecinkami jako separator grupy i okres jako separator dziesiętny, ale pozostawia poza symbol waluty.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="2e0c9-233">`UnitPrice` `EditItemTemplate` Nie zawiera RequiredFieldValidator, pozwalając odświeżenie strony, aby i aktualizowania logiki do rozpoczęcia.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="2e0c9-234">Jednak `RowUpdating` kopiowane z obsługi zdarzeń *badanie zdarzeń skojarzonych z Wstawianie, aktualizowanie i usuwanie* samouczek obejmuje programowe Sprawdź, czy upewnia się, że `UnitPrice` jest dostępne.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="2e0c9-235">Możesz także usunąć tę logikę, pozostaw go jako-, albo Dodaj RequiredFieldValidator do `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>


## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="2e0c9-236">Krok 4: Podsumowanie problemów zapis danych</span><span class="sxs-lookup"><span data-stu-id="2e0c9-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="2e0c9-237">Oprócz formantów pięć weryfikacji platformy ASP.NET zawiera [formant ValidationSummary](https://msdn.microsoft.com/en-US/library/f9h59855(VS.80).aspx), który wyświetla `ErrorMessage` s tych kontrolek sprawdzania poprawności, które wykryto nieprawidłowe dane.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/en-US/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="2e0c9-238">To podsumowanie danych mogą być wyświetlane jako tekstu na stronie sieci web lub za pośrednictwem messagebox modalne, po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="2e0c9-239">Umożliwia także poprawiania komfortu tego samouczka do dołączenia po stronie klienta element messagebox podsumowania sprawdzania poprawności problemów.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="2e0c9-240">Aby to zrobić, przeciągnij formant ValidationSummary z przybornika do projektanta.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="2e0c9-241">Lokalizacja formantu weryfikacji naprawdę nie ma znaczenia, ponieważ chcemy skonfiguruj go, aby wyświetlić podsumowanie tylko jako element messagebox.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="2e0c9-242">Po dodaniu formantu, ustaw jej [właściwości ShowSummary](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) do `False` i jego [właściwości ShowMessageBox](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) do `True`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [ShowMessageBox property](https://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="2e0c9-243">Z tym dodatkiem jakieś błędy sprawdzania poprawności zostały podsumowane w messagebox po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>


<span data-ttu-id="2e0c9-244">[![Błędy sprawdzania poprawności zostały podsumowane w Messagebox po stronie klienta](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image31.png)</span></span>

<span data-ttu-id="2e0c9-245">**Rysunek 11**: błędy sprawdzania poprawności zostały podsumowane w Messagebox po stronie klienta ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image33.png))</span></span>


## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="2e0c9-246">Krok 5: Dodawanie formantów weryfikacji do widoku DetailsView`InsertItemTemplate`</span><span class="sxs-lookup"><span data-stu-id="2e0c9-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="2e0c9-247">Wszystkie opcje, które pozostaje w tym samouczku jest Dodaj formanty walidacji interfejsu Wstawianie DetailsView.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="2e0c9-248">Proces dodawania formanty walidacji w szablonach DetailsView jest identyczna jak zbadać w kroku 3; Dlatego firma Microsoft będzie breeze za pomocą zadania w tym kroku.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="2e0c9-249">Jak robiliśmy z widoku GridView `EditItemTemplate` s, I zachęca do zmiany nazwy `ID` s pola tekstowe z nieopisane `TextBox1` i `TextBox2` do `InsertProductName` i `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="2e0c9-250">Dodaj RequiredFieldValidator do `ProductName` `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="2e0c9-251">Ustaw `ControlToValidate` do `ID` pola tekstowego w szablonie, jego `Text` dla właściwości "\*" i jego `ErrorMessage` dla właściwości "Należy podać nazwę produktu".</span><span class="sxs-lookup"><span data-stu-id="2e0c9-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="2e0c9-252">Ponieważ `UnitPrice` jest wymagany dla tej strony, podczas dodawania nowego rekordu, Dodaj RequiredFieldValidator do `UnitPrice` `InsertItemTemplate`, ustawienie jej `ControlToValidate`, `Text`, i `ErrorMessage` właściwości odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="2e0c9-253">Na koniec należy dodać CompareValidator do `UnitPrice` `InsertItemTemplate` jak również konfigurowanie jego `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, i `ValueToCompare` właściwości tak samo, jak robiliśmy z `UnitPrice`w CompareValidator w widoku GridView `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="2e0c9-254">Po dodaniu tych kontrolek sprawdzania poprawności, nowego produktu nie może być dodany do systemu, jeśli nie podano nazwy lub jego cena jest liczbą ujemną ani sformatowany w niedozwolony sposób.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>


<span data-ttu-id="2e0c9-255">[![Dodano logikę weryfikacji DetailsView Wstawianie interfejsu](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image34.png)</span></span>

<span data-ttu-id="2e0c9-256">**Rysunek 12**: logikę weryfikacji został dodany do interfejsu Wstawianie DetailsView ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image36.png))</span></span>


## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="2e0c9-257">Krok 6: Partycjonowanie formanty walidacji w grupach sprawdzania poprawności</span><span class="sxs-lookup"><span data-stu-id="2e0c9-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="2e0c9-258">Naszą stronę składa się z dwóch różnych logicznie zestawów formanty walidacji: te, które odpowiadają widoku GridView do edycji interfejsu i tych, które odpowiadają widoku DetailsView do wstawiania interfejsu.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="2e0c9-259">Domyślnie podczas odświeżania strony *wszystkie* formanty walidacji na tej stronie są sprawdzane.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="2e0c9-260">Jednak podczas edytowania rekordu nie chcemy formanty walidacji DetailsView Wstawianie interfejs do sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="2e0c9-261">Rysunek 13 ilustruje nasze bieżące dilemma, gdy użytkownik edytuje produkt o wartości doskonale prawne, kliknięcie przycisku Aktualizacja powoduje błąd sprawdzania poprawności, ponieważ wartości nazwy i cen w interfejsie Wstawianie są puste.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>


<span data-ttu-id="2e0c9-262">[![Aktualizowanie produktu spowoduje, że interfejs wstawianie formantów weryfikacji Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image37.png)</span></span>

<span data-ttu-id="2e0c9-263">**Rysunek 13**: aktualizowanie produktu spowoduje, że interfejs wstawianie formantów weryfikacji Fire ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image39.png))</span></span>


<span data-ttu-id="2e0c9-264">Formanty walidacji w programie ASP.NET 2.0 mogą być podzielone na grupy weryfikacji za pomocą ich `ValidationGroup` właściwości.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="2e0c9-265">Aby skojarzyć zbiór formanty walidacji w grupie, wystarczy ustawić ich `ValidationGroup` właściwości na tę samą wartość.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="2e0c9-266">W naszym samouczku ustawić `ValidationGroup` właściwości formanty walidacji w widoku GridView TemplateFields do `EditValidationControls` i `ValidationGroup` właściwości TemplateFields DetailsView do `InsertValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="2e0c9-267">Te zmiany może odbywać się bezpośrednio w deklaratywne znaczników lub w oknie właściwości, gdy przy użyciu narzędzia Projektant Edytuj szablon interfejsu.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="2e0c9-268">Oprócz sprawdzania poprawności kontrolki, przycisk i formanty w programie ASP.NET 2.0 przycisk również obejmować `ValidationGroup` właściwości.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="2e0c9-269">Grupy sprawdzania poprawności modułów sprawdzania poprawności są sprawdzane pod kątem poprawności tylko podczas odświeżania strony jest wywołanych przycisku, który ma taką samą `ValidationGroup` ustawienie właściwości.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="2e0c9-270">Na przykład w kolejności dla przycisku Wstaw DetailsView do wyzwolenia `InsertValidationControls` grupy sprawdzania poprawności należy ustawić w elemencie CommandField `ValidationGroup` właściwości `InsertValidationControls` (patrz rysunek 14).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="2e0c9-271">Ponadto należy ustawić w widoku GridView w elemencie CommandField `ValidationGroup` właściwości `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>


<span data-ttu-id="2e0c9-272">[![Właściwości w elemencie CommandField ValidationGroup InsertValidationControls przez zestaw widoku DetailsView](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image40.png)</span></span>

<span data-ttu-id="2e0c9-273">**Rysunek 14**: Ustaw DetailsView w elemencie CommandField `ValidationGroup` właściwości `InsertValidationControls` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="2e0c9-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/_static/image42.png))</span></span>


<span data-ttu-id="2e0c9-274">Po wprowadzeniu tych zmian widoku DetailsView i w widoku GridView TemplateFields i CommandFields powinien wyglądać podobnie do następującego:</span><span class="sxs-lookup"><span data-stu-id="2e0c9-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="2e0c9-275">TemplateFields i CommandField DetailsView</span><span class="sxs-lookup"><span data-stu-id="2e0c9-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/samples/sample4.aspx)]

<span data-ttu-id="2e0c9-276">CommandField i TemplateFields w widoku GridView</span><span class="sxs-lookup"><span data-stu-id="2e0c9-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/samples/sample5.aspx)]

<span data-ttu-id="2e0c9-277">W tym momencie formanty walidacji specyficzne dla edycji wyzwalać tylko po kliknięciu przycisku Aktualizuj w widoku GridView i sprawdzania poprawności specyficznych dla wstawiania fire formantów tylko wtedy, gdy zostanie kliknięty przycisk Wstaw DetailsView rozwiązywania problemów zaznaczone rysunku 13.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="2e0c9-278">Jednak z tą zmianą naszych formant ValidationSummary nie jest już wyświetlany podczas wprowadzania nieprawidłowe dane.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="2e0c9-279">Zawiera także formant ValidationSummary `ValidationGroup` właściwości i tylko przedstawiono podsumowanie tych formanty walidacji w jego grupie sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="2e0c9-280">W związku z tym musimy mieć dwa formanty walidacji na tej stronie, jeden dla `InsertValidationControls` grupy sprawdzania poprawności i jeden dla `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-vb/samples/sample6.aspx)]

<span data-ttu-id="2e0c9-281">Z tym dodatkiem z naszym samouczkiem jest zakończona</span><span class="sxs-lookup"><span data-stu-id="2e0c9-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="2e0c9-282">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="2e0c9-282">Summary</span></span>

<span data-ttu-id="2e0c9-283">Gdy BoundFields zapewniają zarówno interfejs Wstawianie i edytowania, interfejs nie jest można dostosowywać.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="2e0c9-284">Zazwyczaj chcemy Dodaj formanty walidacji do edycji i wstawianie interfejs, aby upewnić się, że użytkownik wprowadza wymagają danych wejściowych w formacie prawnych.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="2e0c9-285">W tym celu możemy przekonwertować BoundFields TemplateFields i Dodaj formanty walidacji do odpowiednie szablony.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="2e0c9-286">W tym samouczku będziemy rozszerzony przykład z *badanie zdarzeń skojarzonych z Wstawianie, aktualizowanie i usuwanie* samouczek, dodawanie formantów weryfikacji do obu widoku DetailsView na wstawianie interfejsu i w widoku GridView Edytowanie interfejsu.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="2e0c9-287">Ponadto widzieliśmy sposób wyświetlania informacji podsumowania weryfikacji przy użyciu formant ValidationSummary i partycji formanty walidacji na stronie w odrębnych sprawdzania poprawności grupy.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="2e0c9-288">Jak widzieliśmy w tym samouczku TemplateFields Zezwalaj edycji i wstawianie interfejsów zostać rozszerzony do należą formanty walidacji.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="2e0c9-289">TemplateFields można również rozszerzać uwzględnienie dodatkowych wejściowych formantów sieci Web, włączanie pole tekstowe, które mają zostać zastąpione przez bardziej odpowiedni formant sieci Web.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="2e0c9-290">W naszym samouczku dalej zajmiemy się tym, jak zastąpić formantu TextBox formant DropDownList powiązane z danymi, który jest idealny edytowania klucz obcy (takich jak `CategoryID` lub `SupplierID` w `Products` tabeli).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="2e0c9-291">Programowanie przyjemność!</span><span class="sxs-lookup"><span data-stu-id="2e0c9-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="2e0c9-292">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="2e0c9-292">About the Author</span></span>

<span data-ttu-id="2e0c9-293">[Scott Bento](http://www.4guysfromrolla.com/ScottMitchell.shtml), autora siedmiu książek ASP/ASP.NET i twórcę z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje z technologii Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="2e0c9-294">Scott działa jako niezależnego konsultanta trainer i składnika zapisywania.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="2e0c9-295">Jest jego najnowszej książki [ *Sams nauczyć się ASP.NET 2.0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="2e0c9-296">Piotr można uzyskać pod adresem [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) lub za pośrednictwem jego blog, który znajduje się w temacie [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="2e0c9-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="2e0c9-297">Specjalne podziękowania dla</span><span class="sxs-lookup"><span data-stu-id="2e0c9-297">Special Thanks To</span></span>

<span data-ttu-id="2e0c9-298">Ten samouczek serii zostało sprawdzone przez wiele recenzentów przydatne.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-298">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="2e0c9-299">Prowadzić osób dokonujących przeglądu, w tym samouczku zostały Liz Shulok i Zack Nowak.</span><span class="sxs-lookup"><span data-stu-id="2e0c9-299">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="2e0c9-300">Zainteresowani recenzowania Moje nadchodzących artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="2e0c9-300">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="2e0c9-301">Jeśli tak, Porzuć mnie linii w [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-301">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="2e0c9-302">[Poprzednie](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-vb.md)
[dalej](customizing-the-data-modification-interface-vb.md)</span><span class="sxs-lookup"><span data-stu-id="2e0c9-302">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-vb.md)
[Next](customizing-the-data-modification-interface-vb.md)</span></span>
