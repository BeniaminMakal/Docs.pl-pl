---
title: "Rozwiązywanie problemów z platformy ASP.NET Core w usługach IIS"
author: guardrex
description: "Dowiedz się, jak diagnozować problemy z wdrożeniami usług IIS aplikacji platformy ASP.NET Core."
ms.author: riande
manager: wpickett
ms.custom: mvc
ms.date: 03/13/2017
ms.topic: article
ms.technology: aspnet
ms.prod: asp.net-core
uid: host-and-deploy/iis/troubleshoot
ms.openlocfilehash: 2e42d5904e2be8c031c5c6d4bbc104a251b699f2
ms.sourcegitcommit: 12e5194936b7e820efc5505a2d5d4f84e88eb5ef
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/11/2018
---
# <a name="troubleshoot-aspnet-core-on-iis"></a><span data-ttu-id="362d8-103">Rozwiązywanie problemów z platformy ASP.NET Core w usługach IIS</span><span class="sxs-lookup"><span data-stu-id="362d8-103">Troubleshoot ASP.NET Core on IIS</span></span>

<span data-ttu-id="362d8-104">Przez [Luke Latham](https://github.com/guardrex)</span><span class="sxs-lookup"><span data-stu-id="362d8-104">By [Luke Latham](https://github.com/guardrex)</span></span>

<span data-ttu-id="362d8-105">Do diagnozowania problemów z wdrożeniami usług IIS:</span><span class="sxs-lookup"><span data-stu-id="362d8-105">To diagnose issues with IIS deployments:</span></span>

* <span data-ttu-id="362d8-106">Badanie wyników przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="362d8-106">Study browser output.</span></span>
* <span data-ttu-id="362d8-107">Sprawdź system **aplikacji** Zaloguj się za pośrednictwem **Podgląd zdarzeń**.</span><span class="sxs-lookup"><span data-stu-id="362d8-107">Examine the system's **Application** log through **Event Viewer**.</span></span>
* <span data-ttu-id="362d8-108">Włącz `stdout` rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="362d8-108">Enable `stdout` logging.</span></span> <span data-ttu-id="362d8-109">**Moduł platformy ASP.NET Core** dziennika znajduje się w podanej w ścieżce *stdoutLogFile* atrybutu `<aspNetCore>` element *web.config*. Wszystkie foldery w ścieżce w wartości atrybutu musi istnieć w ramach wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="362d8-109">The **ASP.NET Core Module** log is found on the path provided in the *stdoutLogFile* attribute of the `<aspNetCore>` element in *web.config*. Any folders on the path provided in the attribute value must exist in the deployment.</span></span> <span data-ttu-id="362d8-110">Ustaw *stdoutLogEnabled* do `true`.</span><span class="sxs-lookup"><span data-stu-id="362d8-110">Set *stdoutLogEnabled* to `true`.</span></span> <span data-ttu-id="362d8-111">Aplikacje używające `Microsoft.NET.Sdk.Web` zestaw SDK, aby utworzyć *web.config* plik domyślny *stdoutLogEnabled* ustawienie `false`, ręcznie podaj *web.config* pliku lub zmodyfikowania pliku, aby włączyć `stdout` rejestrowania.</span><span class="sxs-lookup"><span data-stu-id="362d8-111">Apps that use the the `Microsoft.NET.Sdk.Web` SDK to create the *web.config* file default the *stdoutLogEnabled* setting to `false`, so manually provide the *web.config* file or modify the file in order to enable `stdout` logging.</span></span>

<span data-ttu-id="362d8-112">Użyj informacji z tych trzech źródeł z [typowe błędy odwołania tematu](xref:host-and-deploy/azure-iis-errors-reference) problemu.</span><span class="sxs-lookup"><span data-stu-id="362d8-112">Use information from those three sources with the [common errors reference topic](xref:host-and-deploy/azure-iis-errors-reference) to determine the problem.</span></span> <span data-ttu-id="362d8-113">Wykonaj zalecenia dotyczące rozwiązywania problemów do rozwiązania problemu.</span><span class="sxs-lookup"><span data-stu-id="362d8-113">Follow the troubleshooting advice provided to resolve the issue.</span></span>

<span data-ttu-id="362d8-114">Niektóre typowe błędy nie są wyświetlane w przeglądarce, dziennik aplikacji i ASP.NET Core modułu dziennika do modułu *startupTimeLimit* (domyślne: 120 sekund) i *startupRetryCount* (domyślne: 2) są spełnione.</span><span class="sxs-lookup"><span data-stu-id="362d8-114">Several of the common errors don't appear in the browser, Application Log, and ASP.NET Core Module Log until the module *startupTimeLimit* (default: 120 seconds) and *startupRetryCount* (default: 2) have passed.</span></span> <span data-ttu-id="362d8-115">W związku z tym Zaczekaj pełne 6 minut przed wydedukowania które module nie można uruchomić procesu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="362d8-115">Therefore, wait a full six minutes before deducing that the module has failed to start a process for the app.</span></span>

<span data-ttu-id="362d8-116">Jest szybkim sposobem Ustal, czy aplikacja działa prawidłowo do uruchomienia aplikacji bezpośrednio na Kestrel.</span><span class="sxs-lookup"><span data-stu-id="362d8-116">One quick way to determine if the app is working properly is to run the app directly on Kestrel.</span></span> <span data-ttu-id="362d8-117">Jeśli aplikacja została opublikowana jako [wdrożenia zależne od framework](/dotnet/core/deploying/#framework-dependent-deployments-fdd), wykonać `dotnet <assembly_name>.dll` w folderze wdrożenia, który jest ścieżka fizyczna programu IIS do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="362d8-117">If the app was published as a [framework-dependent deployment](/dotnet/core/deploying/#framework-dependent-deployments-fdd), execute `dotnet <assembly_name>.dll` in the deployment folder, which is the IIS physical path to the app.</span></span> <span data-ttu-id="362d8-118">Jeśli aplikacja została opublikowana jako [niezależne wdrożenia](/dotnet/core/deploying/#self-contained-deployments-scd)Uruchom aplikację do pliku wykonywalnego bezpośrednio z wiersza polecenia, `<assembly_name>.exe`, w folderze wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="362d8-118">If the app was published as a [self-contained deployment](/dotnet/core/deploying/#self-contained-deployments-scd), run the app's executable directly from a command prompt, `<assembly_name>.exe`, in the deployment folder.</span></span> <span data-ttu-id="362d8-119">Jeśli Kestrel nasłuchuje na porcie domyślnym 5000, aplikacja powinna być dostępne pod adresem `http://localhost:5000/`.</span><span class="sxs-lookup"><span data-stu-id="362d8-119">If Kestrel is listening on default port 5000, the app should be available at `http://localhost:5000/`.</span></span> <span data-ttu-id="362d8-120">Jeśli aplikacja zazwyczaj odpowiada pod adresem punktu końcowego Kestrel, problem jest bardziej prawdopodobne, związane z konfiguracją zwrotnego serwera proxy i mniej prawdopodobne w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="362d8-120">If the app responds normally at the Kestrel endpoint address, the problem is more likely related to the reverse proxy configuration and less likely within the app.</span></span>

<span data-ttu-id="362d8-121">Jednym ze sposobów ustalenia, czy zwrotny serwer proxy działa poprawnie jest wykonanie żądania prostego pliku statycznego do arkusza stylów, skryptów lub obraz z plików statycznych dla aplikacji w *wwwroot* przy użyciu [oprogramowanie pośredniczące plików statycznych](xref:fundamentals/static-files).</span><span class="sxs-lookup"><span data-stu-id="362d8-121">One way to determine if the reverse proxy is working properly is to perform a simple static file request for a stylesheet, script, or image from the app's static files in *wwwroot* using [Static File Middleware](xref:fundamentals/static-files).</span></span> <span data-ttu-id="362d8-122">Jeśli aplikacja może obsługiwać pliki statyczne, ale innych punktów końcowych i widoków MVC kończą się niepowodzeniem, problem jest mniej prawdopodobne związane z konfiguracją zwrotnego serwera proxy i bardziej prawdopodobne w aplikacji (na przykład routingu MVC lub 500 Wewnętrzny błąd serwera).</span><span class="sxs-lookup"><span data-stu-id="362d8-122">If the app can serve static files but MVC Views and other endpoints are failing, the problem is less likely related to the reverse proxy configuration and more likely within the app (for example, MVC routing or 500 Internal Server Error).</span></span>

<span data-ttu-id="362d8-123">Gdy Kestrel uruchamia się normalnie za usług IIS, ale aplikacja nie mogą być uruchamiane na komputerze po pomyślnym uruchomieniu lokalnie, wartość zmiennej środowiskowej może tymczasowo dodane do *web.config* można ustawić `ASPNETCORE_ENVIRONMENT` do `Development`.</span><span class="sxs-lookup"><span data-stu-id="362d8-123">When Kestrel starts normally behind IIS but the app won't run on the system after successfully running locally, an environment variable can be temporarily added to *web.config* to set the `ASPNETCORE_ENVIRONMENT` to `Development`.</span></span> <span data-ttu-id="362d8-124">Umożliwia ustawienie zmiennej środowiskowej dopóki środowisko nie została zastąpiona przy uruchamianiu aplikacji, [strona wyjątek dewelopera](xref:fundamentals/error-handling) pojawią się po uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="362d8-124">As long as the environment isn't overridden in app startup, setting the environment variable allows the [developer exception page](xref:fundamentals/error-handling) to appear when the app is run.</span></span> <span data-ttu-id="362d8-125">Ustawienie zmiennej środowiskowej dla `ASPNETCORE_ENVIRONMENT` w ten sposób jest zalecane tylko dla serwerów przemieszczania/testowania, które nie są dostępne w Internecie.</span><span class="sxs-lookup"><span data-stu-id="362d8-125">Setting the environment variable for `ASPNETCORE_ENVIRONMENT` in this way is only recommended for staging/testing servers that aren't exposed to the Internet.</span></span> <span data-ttu-id="362d8-126">Pamiętaj usunąć zmienną środowiskową z *web.config* pliku po zakończeniu.</span><span class="sxs-lookup"><span data-stu-id="362d8-126">Be sure to remove the environment variable from the *web.config* file when finished.</span></span> <span data-ttu-id="362d8-127">Aby uzyskać informacje na temat ustawiania zmiennych środowiskowych za pośrednictwem *web.config*, zobacz [environmentVariables elementem podrzędnym aspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span><span class="sxs-lookup"><span data-stu-id="362d8-127">For information on setting environment variables via *web.config*, see [environmentVariables child element of aspNetCore](xref:host-and-deploy/aspnet-core-module#setting-environment-variables).</span></span>

<span data-ttu-id="362d8-128">W większości przypadków Włączanie rejestrowania aplikacji pomaga w rozwiązywaniu problemów z aplikacji lub zwrotnego serwera proxy.</span><span class="sxs-lookup"><span data-stu-id="362d8-128">In most cases, enabling application logging assists in troubleshooting problems with the app or the reverse proxy.</span></span> <span data-ttu-id="362d8-129">Zobacz [rejestrowanie](xref:fundamentals/logging/index) Aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="362d8-129">See [Logging](xref:fundamentals/logging/index) for more information.</span></span>

<span data-ttu-id="362d8-130">Ostatni porady dotyczące rozwiązywania problemów odnosi się do aplikacji, których nie można uruchomić po uaktualnieniu albo .NET Core SDK w wersjach programowanie maszyny lub pakietu w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="362d8-130">The last troubleshooting tip pertains to apps that fail to run after upgrading either the .NET Core SDK on the development machine or package versions within the app.</span></span> <span data-ttu-id="362d8-131">W niektórych przypadkach niespójne pakiety mogą być dzielone aplikacji podczas przeprowadzania uaktualnienia głównych.</span><span class="sxs-lookup"><span data-stu-id="362d8-131">In some cases, incoherent packages may break an app when performing major upgrades.</span></span> <span data-ttu-id="362d8-132">Większość te problemy można rozwiązać przez:</span><span class="sxs-lookup"><span data-stu-id="362d8-132">Most of these issues can be fixed by:</span></span>

* <span data-ttu-id="362d8-133">Usuwanie `bin` i `obj` foldery w projekcie.</span><span class="sxs-lookup"><span data-stu-id="362d8-133">Deleting the `bin` and `obj` folders in the project.</span></span>
* <span data-ttu-id="362d8-134">Czyszczenie pakietu buforuje na `%UserProfile%\.nuget\packages\` i `%LocalAppData%\Nuget\v3-cache`.</span><span class="sxs-lookup"><span data-stu-id="362d8-134">Clearing package caches at `%UserProfile%\.nuget\packages\` and `%LocalAppData%\Nuget\v3-cache`.</span></span>
* <span data-ttu-id="362d8-135">Przywracanie i ponownie skompilować projekt.</span><span class="sxs-lookup"><span data-stu-id="362d8-135">Restoring and rebuilding the project.</span></span>
* <span data-ttu-id="362d8-136">Potwierdzenie, że poprzedniego wdrożenia na serwerze zostaną całkowicie usunięte przed ponownym wdrażaniem aplikacji.</span><span class="sxs-lookup"><span data-stu-id="362d8-136">Confirming that the prior deployment on the server has been completely deleted prior to re-deploying the app.</span></span>

> [!TIP]
> <span data-ttu-id="362d8-137">Jest to wygodny sposób czyszczenia pamięci podręcznych pakietu do wykonania `dotnet nuget locals all --clear` z wiersza polecenia.</span><span class="sxs-lookup"><span data-stu-id="362d8-137">A convenient way to clear package caches is to execute `dotnet nuget locals all --clear` from a command prompt.</span></span>
> 
> <span data-ttu-id="362d8-138">Wyczyszczenie pamięci podręcznej pakiet może być również wykonywane przy użyciu [nuget.exe](https://www.nuget.org/downloads) narzędzie i wykonywania polecenia `nuget locals all -clear`.</span><span class="sxs-lookup"><span data-stu-id="362d8-138">Clearing package caches can also be accomplished by using the [nuget.exe](https://www.nuget.org/downloads) tool and executing the command `nuget locals all -clear`.</span></span> <span data-ttu-id="362d8-139">*nuget.exe* nie jest powiązane instalacji z systemem Windows 10 i trzeba je instalować osobno w witrynie NuGet.</span><span class="sxs-lookup"><span data-stu-id="362d8-139">*nuget.exe* isn't a bundled install with Windows 10 and must be obtained separately from the NuGet website.</span></span>
<!--
> [!TIP]
> A convenient way to clear package caches is to:
>
> * Obtain the *NuGet.exe* tool from [NuGet.org](https://www.nuget.org/).
> * Add the path to *NuGet.exe* to the system PATH.
> * Execute `nuget locals all -clear` from a command prompt.
>
> Alternatively, execute `dotnet nuget locals all --clear` from a command prompt without obtaining *NuGet.exe*. -->

## <a name="additional-resources"></a><span data-ttu-id="362d8-140">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="362d8-140">Additional resources</span></span>

* [<span data-ttu-id="362d8-141">Typowe błędy odwołania dla usługi Azure App Service i IIS z platformy ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="362d8-141">Common errors reference for Azure App Service and IIS with ASP.NET Core</span></span>](xref:host-and-deploy/azure-iis-errors-reference)
* [<span data-ttu-id="362d8-142">Konfiguracja modułu Core programu ASP.NET</span><span class="sxs-lookup"><span data-stu-id="362d8-142">ASP.NET Core Module configuration reference</span></span>](xref:host-and-deploy/aspnet-core-module)
