---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: Tworzenie definicji kompilacji, który obsługuje wdrażanie | Dokumentacja firmy Microsoft
author: jrjlee
description: Jeśli chcesz wykonywać dowolny rodzaj kompilacji w Team Foundation Server (TFS) 2010, należy utworzyć definicję kompilacji w projekcie zespołowym. Ten temat des...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: c5ea0bd9f01bb57b96abd349741f304c0093d887
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/10/2018
---
<a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="2b814-104">Tworzenie definicji kompilacji, która obsługuje wdrożenia</span><span class="sxs-lookup"><span data-stu-id="2b814-104">Creating a Build Definition That Supports Deployment</span></span>
====================
<span data-ttu-id="2b814-105">przez [Lewandowski Jason](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="2b814-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="2b814-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="2b814-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="2b814-107">Jeśli chcesz wykonywać dowolny rodzaj kompilacji w Team Foundation Server (TFS) 2010, należy utworzyć definicję kompilacji w projekcie zespołowym.</span><span class="sxs-lookup"><span data-stu-id="2b814-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="2b814-108">W tym temacie opisano, jak utworzyć nową definicję kompilacji w programie TFS i sterowanie wdrożenia sieci web jako część procesu kompilacji w Team Build.</span><span class="sxs-lookup"><span data-stu-id="2b814-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>


<span data-ttu-id="2b814-109">Ten temat jest częścią serii samouczków na podstawie tych wymagań związanych z przedsiębiorstwa wdrażaniem fikcyjnej firmy o nazwie firmy Fabrikam, Inc. Przykładowe rozwiązanie korzysta z tego samouczka serii&#x2014; [rozwiązania kontaktów Menedżerze](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;do reprezentowania aplikacji sieci web z realistyczne poziom złożoności, w tym aplikacji ASP.NET MVC 3, Windows Communication Usługa Foundation (WCF), a projekt bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2b814-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="2b814-110">Istotą te samouczki metody wdrażania opiera się na podejście pliku projektu podziału opisane w [opis pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), w którym jest kontrolowany przez proces kompilacji i wdrożenia dwa pliki projektu&#x2014;jeden zawierającego instrukcje kompilacji, które mają zastosowanie do każdego środowiska docelowego i dysk zawierający ustawienia kompilacji i wdrożenia określonego środowiska.</span><span class="sxs-lookup"><span data-stu-id="2b814-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="2b814-111">W czasie kompilacji pliku projektu określonego środowiska jest scalany pliku projektu niezależny od środowiska pełny zestaw instrukcji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="2b814-112">Omówienie zadań</span><span class="sxs-lookup"><span data-stu-id="2b814-112">Task Overview</span></span>

<span data-ttu-id="2b814-113">Definicja kompilacji jest mechanizm, który określa, jak i kiedy kompilacje wystąpić dla projektów zespołowych w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="2b814-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="2b814-114">Określa każdej definicji kompilacji:</span><span class="sxs-lookup"><span data-stu-id="2b814-114">Each build definition specifies:</span></span>

- <span data-ttu-id="2b814-115">Czynności, które chcesz utworzyć, takich jak pliki rozwiązania Visual Studio lub niestandardowe pliki projektu Microsoft kompilacji Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="2b814-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="2b814-116">Kryteria określające po kompilacji powinien mieć miejsce, takie jak ręczne wyzwalaczy, ciągłej integracji (CI), lub warunkowych zaewidencjonowań.</span><span class="sxs-lookup"><span data-stu-id="2b814-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="2b814-117">Lokalizacja, do której Team Build należy wysłać wyjścia kompilacji, w tym artefakty wdrażania pakietów sieci web i skryptów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2b814-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="2b814-118">Ilość czasu, które mają być przechowywane każdej kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="2b814-119">Różnych innych parametrów procesu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="2b814-120">Aby uzyskać więcej informacji o definicje kompilacji, zobacz [Definiowanie procesu kompilacji](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="2b814-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>


<span data-ttu-id="2b814-121">W tym temacie opisano sposób tworzenia definicji kompilacji, która używa elementu konfiguracji, tak aby kompilacji jest wyzwalane, gdy projektant sprawdza w nową zawartość.</span><span class="sxs-lookup"><span data-stu-id="2b814-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="2b814-122">Jeśli kompilacja zakończy się powodzeniem, usługa kompilacji uruchamia plik projektu niestandardowe, aby wdrożyć rozwiązanie do środowiska testowego.</span><span class="sxs-lookup"><span data-stu-id="2b814-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="2b814-123">Gdy wyzwolić kompilację, te akcje muszą się zdarzyć:</span><span class="sxs-lookup"><span data-stu-id="2b814-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="2b814-124">Najpierw należy Team Build należy utworzyć rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="2b814-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="2b814-125">W ramach tego procesu Team Build wywoła publikowania potoku sieci Web (WPP) do generowania pakietów wdrażania w sieci web dla poszczególnych projektów aplikacji sieci web w rozwiązaniu.</span><span class="sxs-lookup"><span data-stu-id="2b814-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="2b814-126">Team Build będzie również uruchomić wszystkie testy jednostek skojarzonych z rozwiązaniem.</span><span class="sxs-lookup"><span data-stu-id="2b814-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="2b814-127">W przypadku niepowodzenia kompilacji rozwiązania Team Build powinna przyjmować żadnych dodatkowych czynności.</span><span class="sxs-lookup"><span data-stu-id="2b814-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="2b814-128">Niepowodzenia testu jednostki powinny być traktowane jako niepowodzenie kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="2b814-129">Jeśli kompilacja rozwiązania zakończy się powodzeniem, Team Build należy uruchomić pliku projektu niestandardowego, który kontroluje wdrażania rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="2b814-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="2b814-130">W ramach tego procesu Team Build wywoła (Web Deploy) umożliwia instalowanie aplikacji spakowanych sieci web na serwerach sieci web docelowych Narzędzie wdrażania Web usług Internet Information Services (IIS), a zostaną wywołane uruchamianie tworzenia bazy danych za pomocą narzędzia VSDBCMD.exe skrypty na serwerach docelowych bazy danych.</span><span class="sxs-lookup"><span data-stu-id="2b814-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="2b814-131">Przedstawiono to proces:</span><span class="sxs-lookup"><span data-stu-id="2b814-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="2b814-132">[Menedżera skontaktuj się z](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) przykładowe rozwiązanie obejmuje niestandardowego pliku projektu MSBuild *Publish.proj*, który można uruchomić z programu MSBuild lub Team Build.</span><span class="sxs-lookup"><span data-stu-id="2b814-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="2b814-133">Zgodnie z opisem w [opis procesu kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md), ten plik projektu definiuje logikę, która wdraża Twoje pakiety sieci web i baz danych w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="2b814-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="2b814-134">Plik zawiera logikę pomijające budynku i proces tworzenia pakietu, jeśli została uruchomiona w Team Build, pozostawiając tylko zadania wdrażania do uruchomienia.</span><span class="sxs-lookup"><span data-stu-id="2b814-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="2b814-135">To jest, ponieważ podczas wdrażania w ten sposób można zautomatyzować, zazwyczaj należy zapewnić pomyślnie skompilowaniem rozwiązania i przekazuje wszystkie testy jednostkowe, przed rozpoczęciem procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="2b814-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="2b814-136">Następnej sekcji opisano sposób wykonania tego procesu, tworząc nową definicję kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="2b814-137">Ta procedura&#x2014;, w której jeden automatycznego procesu kompilacji, testy i wdraża rozwiązanie&#x2014;może być najbardziej nadaje się do wdrożenia, aby przetestować środowisk.</span><span class="sxs-lookup"><span data-stu-id="2b814-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="2b814-138">W przypadku środowisk przemieszczania i produkcji prawdopodobnie znacznie więcej chcesz wdrożyć zawartość z poprzedniej kompilacji, która już zweryfikować i sprawdzić poprawności w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="2b814-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="2b814-139">Takie podejście jest opisana w następnym temacie [wdrażanie określonej kompilacji](deploying-a-specific-build.md).</span><span class="sxs-lookup"><span data-stu-id="2b814-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>


### <a name="who-performs-this-procedure"></a><span data-ttu-id="2b814-140">Kto wykonuje tę procedurę?</span><span class="sxs-lookup"><span data-stu-id="2b814-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="2b814-141">Zazwyczaj administratora TFS wykonuje tę procedurę.</span><span class="sxs-lookup"><span data-stu-id="2b814-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="2b814-142">W niektórych przypadkach kierownik zespołu deweloperów może mieć odpowiedzialność dla kolekcji projektów zespołowych TFS.</span><span class="sxs-lookup"><span data-stu-id="2b814-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="2b814-143">Aby utworzyć nową definicję kompilacji, musisz być członkiem **Administratorzy kompilacji kolekcji projektów** grupy dla kolekcji projektów zespołowych, która zawiera rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="2b814-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="2b814-144">Tworzenie definicji kompilacji dla elementu konfiguracji i wdrażania</span><span class="sxs-lookup"><span data-stu-id="2b814-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="2b814-145">Następna procedura opisuje sposób tworzenia definicji kompilacji, która wyzwala elementu konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="2b814-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="2b814-146">Jeśli kompilacja zakończy się powodzeniem, rozwiązanie jest wdrożone przy użyciu logiki w pliku projektu MSBuild niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="2b814-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="2b814-147">**Aby utworzyć definicję kompilacji dla elementu konfiguracji i wdrażania**</span><span class="sxs-lookup"><span data-stu-id="2b814-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="2b814-148">W programie Visual Studio 2010 w **Team Explorer** okna, rozwiń węzeł projektu zespołowego, kliknij prawym przyciskiem myszy **kompilacje**, a następnie kliknij przycisk **nową definicję kompilacji**.</span><span class="sxs-lookup"><span data-stu-id="2b814-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="2b814-149">Na **ogólne** karcie, nadaj nazwę definicji kompilacji (na przykład **DeployToTest**) i opcjonalny opis.</span><span class="sxs-lookup"><span data-stu-id="2b814-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="2b814-150">Na **wyzwalacza** , a następnie wybierz kryteria, na których chcesz wyzwalają nowej kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="2b814-151">Na przykład, jeśli chcesz Skompiluj rozwiązanie i wdrożyć środowiska testowego każdorazowego dewelopera sprawdza w nowy kod, wybierz **ciągłej integracji**.</span><span class="sxs-lookup"><span data-stu-id="2b814-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="2b814-152">Na **kompilacji domyślne** karcie **Kopiuj dane wyjściowe kompilacji do następującego folderu docelowego** wpisz ścieżkę Universal Naming Convention (UNC) z folderu docelowego (na przykład  **\\TFSBUILD\Drops**).</span><span class="sxs-lookup"><span data-stu-id="2b814-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="2b814-153">Ta lokalizacja przechowywania przechowuje kilka kompilacji, w zależności od skonfigurowanych zasad przechowywania.</span><span class="sxs-lookup"><span data-stu-id="2b814-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="2b814-154">Aby opublikować artefaktów wdrożenia z określonej kompilacji w środowisku tymczasowym czy produkcyjnym, należy to znajdziesz je.</span><span class="sxs-lookup"><span data-stu-id="2b814-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="2b814-155">Na **procesu** karcie **pliku procesu kompilacji** listy rozwijanej, pozostaw **DefaultTemplate.xaml** wybrane.</span><span class="sxs-lookup"><span data-stu-id="2b814-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="2b814-156">Jest to jeden z szablonów domyślnych procesów kompilacji, które zostaną dodane do wszystkich nowych projektów zespołowych.</span><span class="sxs-lookup"><span data-stu-id="2b814-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="2b814-157">W **parametrów procesu kompilacji** tabeli, kliknij przycisk **elementów do kompilacji** wiersza, a następnie kliknij przycisk **wielokropka** przycisku.</span><span class="sxs-lookup"><span data-stu-id="2b814-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="2b814-158">W **elementów do kompilacji** okno dialogowe, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="2b814-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="2b814-159">Przejdź do lokalizacji pliku rozwiązania, a następnie kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="2b814-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="2b814-160">W **elementów do kompilacji** okno dialogowe, kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="2b814-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="2b814-161">W **elementów typu** listy rozwijanej wybierz **pliki projektu MSBuild**.</span><span class="sxs-lookup"><span data-stu-id="2b814-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="2b814-162">Przejdź do lokalizacji pliku projektu niestandardowe, z którym można kontrolować proces wdrażania, wybierz plik, a następnie kliknij **OK**.</span><span class="sxs-lookup"><span data-stu-id="2b814-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="2b814-163">**Elementów do kompilacji** okno dialogowe powinna zostać wyświetlona dwa elementy.</span><span class="sxs-lookup"><span data-stu-id="2b814-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="2b814-164">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="2b814-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="2b814-165">Na **procesu** karcie **parametrów procesu kompilacji** tabeli, a następnie rozwiń **zaawansowane** sekcji.</span><span class="sxs-lookup"><span data-stu-id="2b814-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="2b814-166">W **argumenty programu MSBuild** wiersz, należy dodać żadnych argumentów wiersza polecenia programu MSBuild który *albo* elementów do tworzenia wymaga.</span><span class="sxs-lookup"><span data-stu-id="2b814-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="2b814-167">W scenariuszu rozwiązania Menedżera skontaktuj się z tych argumentów są wymagane:</span><span class="sxs-lookup"><span data-stu-id="2b814-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="2b814-168">W tym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="2b814-168">In this example:</span></span>

    1. <span data-ttu-id="2b814-169">**DeployOnBuild = true** i **DeployTarget = pakiet** argumenty są wymagane podczas kompilowania rozwiązania z menedżerem kontaktu.</span><span class="sxs-lookup"><span data-stu-id="2b814-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="2b814-170">To powoduje, że program MSBuild tworzenia pakietów wdrożeniowych sieci web po utworzeniu każdego projektu aplikacji sieci web, zgodnie z opisem w [budynku i projekty aplikacji sieci Web pakowania](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="2b814-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="2b814-171">**TargetEnvPropsFile** argumentu jest wymagany w przypadku kompilowania *Publish.proj* pliku.</span><span class="sxs-lookup"><span data-stu-id="2b814-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="2b814-172">Ta właściwość wskazuje lokalizację pliku konfiguracji specyficznych dla danego środowiska, zgodnie z opisem w [opis procesu kompilacji](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="2b814-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="2b814-173">Na **zasady przechowywania** skonfiguruj kompilacje ile każdego typu, aby zachować zgodnie z potrzebami.</span><span class="sxs-lookup"><span data-stu-id="2b814-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="2b814-174">Kliknij przycisk **zapisać**.</span><span class="sxs-lookup"><span data-stu-id="2b814-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="2b814-175">Kolejkowanie kompilacji</span><span class="sxs-lookup"><span data-stu-id="2b814-175">Queue a Build</span></span>

<span data-ttu-id="2b814-176">W tym momencie utworzono co najmniej jedną nową definicję kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="2b814-177">Proces kompilacji, zdefiniowane przez użytkownika będzie uruchamiana zgodnie z wyzwalaczy, określona w definicji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="2b814-178">Jeśli skonfigurowano definicję kompilacji, aby użyć elementu konfiguracji, można sprawdzić definicję kompilacji na dwa sposoby:</span><span class="sxs-lookup"><span data-stu-id="2b814-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="2b814-179">Sprawdź w części zawartości do projektu zespołowego do wyzwalania automatycznego kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="2b814-180">Kolejka kompilacji ręcznie.</span><span class="sxs-lookup"><span data-stu-id="2b814-180">Queue a build manually.</span></span>

<span data-ttu-id="2b814-181">**Aby ręcznie kolejki kompilację**</span><span class="sxs-lookup"><span data-stu-id="2b814-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="2b814-182">W **Team Explorer** okna, kliknij prawym przyciskiem myszy definicję kompilacji, a następnie kliknij przycisk **Tworzenie nowej kolejki**.</span><span class="sxs-lookup"><span data-stu-id="2b814-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="2b814-183">W **kolejka kompilacji** okno dialogowe, przejrzyj właściwości kompilacji, a następnie kliknij przycisk **kolejki**.</span><span class="sxs-lookup"><span data-stu-id="2b814-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="2b814-184">Aby przejrzeć postęp i wyniki kompilacji&#x2014;niezależnie od tego, czy zostało wyzwolone ręcznie lub automatycznie&#x2014;kliknij dwukrotnie definicję kompilacji w **Team Explorer** okna.</span><span class="sxs-lookup"><span data-stu-id="2b814-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="2b814-185">Spowoduje to otwarcie **Eksplorator kompilacji** kartę.</span><span class="sxs-lookup"><span data-stu-id="2b814-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="2b814-186">W tym miejscu można rozwiązywać problemy kompilacji nie powiodło się.</span><span class="sxs-lookup"><span data-stu-id="2b814-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="2b814-187">Po dwukrotnym kliknięciu poszczególnych kompilacji, możesz wyświetlić informacje podsumowujące i kliknij, aby szczegółowe pliki dzienników.</span><span class="sxs-lookup"><span data-stu-id="2b814-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="2b814-188">Tych informacji umożliwia rozwiązywanie problemów z niepowodzeniem kompilacji i rozwiązania dowolnych problemów przed podjęciem próby innej kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="2b814-189">Kompilacje, które wykonywania logiki wdrożenia są prawdopodobnie niepowodzeniem, dopóki serwer kompilacji udzielono uprawnień wymaganych w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="2b814-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="2b814-190">Aby uzyskać więcej informacji, zobacz [konfigurowania uprawnień dla zespołu wdrażania kompilacji](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="2b814-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>


## <a name="monitor-the-build-process"></a><span data-ttu-id="2b814-191">Monitorowanie procesu kompilacji</span><span class="sxs-lookup"><span data-stu-id="2b814-191">Monitor the Build Process</span></span>

<span data-ttu-id="2b814-192">TFS oferuje szeroką gamę funkcji, które pomagają monitorować proces kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="2b814-193">Na przykład TFS można wysłać wiadomości e-mail lub wyświetlić alerty w obszarze powiadomień paska zadań po ukończeniu kompilacji.</span><span class="sxs-lookup"><span data-stu-id="2b814-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="2b814-194">Aby uzyskać więcej informacji, zobacz [wykonywania i tworzy Monitor](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="2b814-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="2b814-195">Wniosek</span><span class="sxs-lookup"><span data-stu-id="2b814-195">Conclusion</span></span>

<span data-ttu-id="2b814-196">W tym temacie opisano sposób tworzenia definicji kompilacji w programie TFS.</span><span class="sxs-lookup"><span data-stu-id="2b814-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="2b814-197">Definicji kompilacji jest skonfigurowana dla elementu konfiguracji, więc proces kompilacji jest uruchamiana zawsze, gdy projektant sprawdza w zawartości do projektu zespołowego.</span><span class="sxs-lookup"><span data-stu-id="2b814-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="2b814-198">Definicja kompilacji wykonuje niestandardowego pliku projektu MSBuild wdrażać pakiety sieci web i skryptów bazy danych w środowisku serwera docelowego.</span><span class="sxs-lookup"><span data-stu-id="2b814-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="2b814-199">Aby automatycznego wdrażania do pomyślnego jako część procesu kompilacji należy udzielić odpowiednich uprawnień do konta usługi kompilacji na docelowej serwerów sieci web i bazy danych serwera docelowego.</span><span class="sxs-lookup"><span data-stu-id="2b814-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="2b814-200">Końcowe tematu w tym samouczku [konfigurowania uprawnień dla zespołu wdrażania kompilacji](configuring-permissions-for-team-build-deployment.md), opisano sposób identyfikowania i konfigurowania uprawnień wymaganych do automatycznego wdrażania z serwera Team Build.</span><span class="sxs-lookup"><span data-stu-id="2b814-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="2b814-201">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="2b814-201">Further Reading</span></span>

<span data-ttu-id="2b814-202">Aby uzyskać więcej informacji na temat tworzenia definicje kompilacji, zobacz [utworzyć podstawową definicję kompilacji](https://msdn.microsoft.com/library/ms181716.aspx) i [Definiowanie procesu kompilacji](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="2b814-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="2b814-203">Aby uzyskać więcej pomocy w przypadku kompilacji usługi kolejkowania wiadomości, zobacz [kolejki kompilację](https://msdn.microsoft.com/library/ms181722.aspx).</span><span class="sxs-lookup"><span data-stu-id="2b814-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="2b814-204">[Poprzednie](configuring-a-tfs-build-server-for-web-deployment.md)
> [dalej](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="2b814-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>
