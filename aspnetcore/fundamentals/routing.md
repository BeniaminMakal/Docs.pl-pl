---
title: Routing w programie ASP.NET Core
author: ardalis
description: Dowiedz się, jak funkcje routingu platformy ASP.NET Core jest odpowiedzialny za mapowanie przychodzące żądanie do programu obsługi trasy.
ms.author: riande
ms.date: 07/25/2018
uid: fundamentals/routing
ms.openlocfilehash: 19265ac4d19915462c50628061600b1fde04694b
ms.sourcegitcommit: c8e62aa766641aa55105f7db79cdf2b27a6e5977
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 07/25/2018
ms.locfileid: "39254886"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="850d5-103">Routing w programie ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="850d5-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="850d5-104">Przez [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), i [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="850d5-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="850d5-105">Funkcje routingu jest odpowiedzialny za mapowanie przychodzące żądanie do programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="850d5-106">Trasy są zdefiniowane w aplikacji platformy ASP.NET i skonfigurowane podczas uruchamiania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="850d5-106">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="850d5-107">Trasy Opcjonalnie można wyodrębnić wartości z adresu URL zawartych w żądaniu, a te wartości mogą następnie służyć do przetwarzania żądania.</span><span class="sxs-lookup"><span data-stu-id="850d5-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="850d5-108">Korzystając z informacji o trasie z poziomu aplikacji ASP.NET, funkcje routingu jest również możliwe do generowania adresów URL, które mapują do obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-108">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="850d5-109">W związku z tym routingu, można znaleźć programu obsługi trasy na podstawie adresu URL lub adres URL odpowiadający programu obsługi trasy, na podstawie informacji programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-109">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="850d5-110">W tym dokumencie opisano niskopoziomowy odpowiedzialny routingu ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="850d5-110">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="850d5-111">W przypadku routingu platformy ASP.NET Core MVC, zobacz [trasy do akcji kontrolera](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="850d5-111">For ASP.NET Core MVC routing, see [Route to controller actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="850d5-112">[Wyświetlanie lub pobieranie przykładowego kodu](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([sposobu pobierania](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="850d5-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="850d5-113">Podstawy routingu</span><span class="sxs-lookup"><span data-stu-id="850d5-113">Routing basics</span></span>

<span data-ttu-id="850d5-114">Używa routingu *trasy* (implementacje [IRouter](/dotnet/api/microsoft.aspnetcore.routing.irouter)) do:</span><span class="sxs-lookup"><span data-stu-id="850d5-114">Routing uses *routes* (implementations of [IRouter](/dotnet/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="850d5-115">Mapowanie żądań przychodzących do *trasy programów obsługi*</span><span class="sxs-lookup"><span data-stu-id="850d5-115">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="850d5-116">Generowanie adresy URL używane w odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="850d5-116">generate URLs used in responses</span></span>

<span data-ttu-id="850d5-117">Ogólnie rzecz biorąc aplikacja ma jedną kolekcję tras.</span><span class="sxs-lookup"><span data-stu-id="850d5-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="850d5-118">Gdy żądanie dociera, kolekcji tras są przetwarzane w kolejności.</span><span class="sxs-lookup"><span data-stu-id="850d5-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="850d5-119">Żądanie przychodzące szuka trasę, która pasuje do adresu URL żądania, wywołując `RouteAsync` metody w każdej z dostępnych tras w kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="850d5-119">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="850d5-120">Z drugiej strony odpowiedzi można używać routingu do generowania adresów URL (na przykład przekierowanie lub linki), w oparciu o trasach i związku z tym uniknąć trwale kodować adresów URL, który pomaga w utrzymaniu.</span><span class="sxs-lookup"><span data-stu-id="850d5-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="850d5-121">Routing jest podłączony do [oprogramowania pośredniczącego](xref:fundamentals/middleware/index) potoku przez `RouterMiddleware` klasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="850d5-122">[Platforma ASP.NET Core MVC](xref:mvc/overview) dodaje routingu do potoku oprogramowania pośredniczącego w ramach jego konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="850d5-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="850d5-123">Aby dowiedzieć się, przy użyciu routingu jako składnik autonomicznych, zobacz [dzięki oprogramowaniu pośredniczącemu routingu](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="850d5-123">To learn about using routing as a standalone component, see [Using routing middleware](#using-routing-middleware).</span></span>

<a name="url-matching-ref"></a>

### <a name="url-matching"></a><span data-ttu-id="850d5-124">Dopasowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="850d5-124">URL matching</span></span>

<span data-ttu-id="850d5-125">Dopasowanie adresu URL jest proces, który wysyła routingu przychodzącego żądania *obsługi*.</span><span class="sxs-lookup"><span data-stu-id="850d5-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="850d5-126">Proces ten jest zazwyczaj na podstawie danych ze ścieżki adresu URL, ale może zostać rozszerzony do należy wziąć pod uwagę wszystkie dane w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="850d5-126">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="850d5-127">Możliwość wysyłania żądań do rozdzielenia obsługi to klucz do skalowania, rozmiar i złożoność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="850d5-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="850d5-128">Wprowadź żądań przychodzących `RouterMiddleware`, która wywołuje metodę `RouteAsync` metody dla każdej trasy w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="850d5-128">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="850d5-129">`IRouter` Wybierze wystąpienie czy *obsługi* żądania przez ustawienie `RouteContext.Handler` do innych niż null `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="850d5-129">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="850d5-130">Jeśli trasa Ustawia program obsługi żądania, przetwarzanie zostanie zatrzymane i program obsługi trasy zostaną wywołane przetwarzania żądania.</span><span class="sxs-lookup"><span data-stu-id="850d5-130">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="850d5-131">Jeśli wszystkie trasy są sprawdzane i żadna procedura obsługi nie znajduje się na żądanie, oprogramowanie pośredniczące wywołuje *dalej* i następne oprogramowanie pośredniczące w potoku żądania jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="850d5-131">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="850d5-132">Podstawowe dane wejściowe `RouteAsync` jest `RouteContext.HttpContext` skojarzone z bieżącego żądania.</span><span class="sxs-lookup"><span data-stu-id="850d5-132">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="850d5-133">`RouteContext.Handler` i `RouteContext.RouteData` są dane wyjściowe, które zostaną ustawione po trasa pasuje.</span><span class="sxs-lookup"><span data-stu-id="850d5-133">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="850d5-134">Dopasowanie ciągu `RouteAsync` spowoduje także ustawienie właściwości `RouteContext.RouteData` odpowiednie wartości oparte na przetwarzanie żądań, gotowe do tej pory.</span><span class="sxs-lookup"><span data-stu-id="850d5-134">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="850d5-135">Jeśli trasa pasuje do żądania `RouteContext.RouteData` będzie zawierać informacje o stanie ważne informacje *wynik*.</span><span class="sxs-lookup"><span data-stu-id="850d5-135">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="850d5-136">`RouteData.Values` jest słownik *wartości trasy* wyprodukowanych z trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-136">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="850d5-137">Wartości te są zwykle określane przez tokenizowanie adres URL i może służyć do przyjmowania danych wejściowych użytkownika lub dodatkowo dispatching decyzje wewnątrz aplikacji.</span><span class="sxs-lookup"><span data-stu-id="850d5-137">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="850d5-138">`RouteData.DataTokens`  to dodatkowe dane związane z dopasowanej trasy zbiór właściwości.</span><span class="sxs-lookup"><span data-stu-id="850d5-138">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="850d5-139">`DataTokens` podano obsługują kojarzenie stanu, w jakim dopasowane dane za pomocą każdej trasy, aby aplikacja podejmować decyzje później oparte na które trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-139">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="850d5-140">Te wartości są definiowane przez projektanta i wykonaj **nie** mają wpływ na zachowanie routingu w dowolny sposób.</span><span class="sxs-lookup"><span data-stu-id="850d5-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="850d5-141">Ponadto wartości przechowalni w tokeny danych może być dowolnego typu, w przeciwieństwie do wartości trasy, które muszą być łatwo konwertowany do i z ciągów.</span><span class="sxs-lookup"><span data-stu-id="850d5-141">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="850d5-142">`RouteData.Routers` znajduje się lista tras, na których uczestniczyła w pomyślnie dopasowywania żądania.</span><span class="sxs-lookup"><span data-stu-id="850d5-142">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="850d5-143">Trasy mogą być zagnieżdżone wewnątrz siebie nawzajem i `Routers` właściwość odzwierciedla drogę przez drzewo logiczne tras, które spowodowały dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="850d5-143">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="850d5-144">Ogólnie pierwszy element `Routers` jest kolekcją tras i powinna być używana do generowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-144">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="850d5-145">Ostatnim elementem w `Routers` jest programu obsługi trasy, który jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="850d5-145">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="850d5-146">Generowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="850d5-146">URL generation</span></span>

<span data-ttu-id="850d5-147">Generowanie adresu URL to proces, routingu, które można utworzyć ścieżki adresu URL na podstawie zestawu wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-147">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="850d5-148">Dzięki temu do logicznego rozdzielania między inne programy obsługi oraz w adresach URL, które do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="850d5-148">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="850d5-149">Generowanie adresu URL, który następuje podobny proces iteracyjny, ale rozpoczyna się od kodu użytkownika lub framework wywoływanie `GetVirtualPath` metoda kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="850d5-149">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="850d5-150">Każdy *trasy* będzie miał jego `GetVirtualPath` metoda wywoływana w sekwencji, aż do innych niż null `VirtualPathData` jest zwracana.</span><span class="sxs-lookup"><span data-stu-id="850d5-150">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="850d5-151">Podstawowy danych wejściowych do `GetVirtualPath` są:</span><span class="sxs-lookup"><span data-stu-id="850d5-151">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="850d5-152">Trasy przede wszystkim używasz wartości trasy, dostarczone przez `Values` i `AmbientValues` zdecydować, gdzie jest możliwe do generowania adresu URL i wartości, których do uwzględnienia.</span><span class="sxs-lookup"><span data-stu-id="850d5-152">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="850d5-153">`AmbientValues` Zestaw wartości trasy, które zostały utworzone z dopasowywania bieżące żądanie w systemie routingu.</span><span class="sxs-lookup"><span data-stu-id="850d5-153">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="850d5-154">Z kolei `Values` są wartości trasy, które określają sposób generowania żądany adres URL dla bieżącej operacji.</span><span class="sxs-lookup"><span data-stu-id="850d5-154">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="850d5-155">`HttpContext` Znajduje się w przypadku, gdy trasa serwer musi pobrać services lub dodatkowe dane skojarzone z bieżącym kontekstem.</span><span class="sxs-lookup"><span data-stu-id="850d5-155">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="850d5-156">Porada: Traktować `Values` jako zbiór zastąpienia `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="850d5-156">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="850d5-157">Generowanie adresu URL spróbuje ponownie użyć wartości trasy z bieżącego żądania, aby ułatwić do generowania adresów URL dla łącza przy użyciu tego samego trasę lub trasy wartości.</span><span class="sxs-lookup"><span data-stu-id="850d5-157">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="850d5-158">Dane wyjściowe `GetVirtualPath` jest `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="850d5-158">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="850d5-159">`VirtualPathData` jest równolegle z `RouteData`; zawiera on `VirtualPath` dla adresu URL danych wyjściowych i niektóre dodatkowe właściwości, które powinny zostać ustawione przez trasę.</span><span class="sxs-lookup"><span data-stu-id="850d5-159">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="850d5-160">`VirtualPathData.VirtualPath` Właściwość zawiera *ścieżka wirtualna* produkowane przez trasę.</span><span class="sxs-lookup"><span data-stu-id="850d5-160">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="850d5-161">W zależności od potrzeb może być konieczne ścieżkę do dalszego przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="850d5-161">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="850d5-162">Na przykład jeśli chcesz renderować wygenerowany adres URL w formacie HTML należy poprzedzić ścieżki podstawowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="850d5-162">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="850d5-163">`VirtualPathData.Router` Jest odwołaniem do pomyślnie wygenerowano adres URL trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-163">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="850d5-164">`VirtualPathData.DataTokens` Właściwości jest słownikiem dodatkowych danych dotyczących trasy, który wygenerował adresu URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-164">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="850d5-165">Jest to równoległego z `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="850d5-165">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="850d5-166">Tworzenie tras</span><span class="sxs-lookup"><span data-stu-id="850d5-166">Creating routes</span></span>

<span data-ttu-id="850d5-167">Routing zapewnia `Route` klasy jako standardowej implementacji `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="850d5-167">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="850d5-168">`Route` używa *szablon trasy* Składnia umożliwiająca zdefiniowanie wzorców, które zostanie dopasowany do ścieżki adresu URL po `RouteAsync` jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="850d5-168">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="850d5-169">`Route` będzie używał tego samego szablonu trasy do generowania adresu URL po `GetVirtualPath` jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="850d5-169">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="850d5-170">Większość aplikacji będzie utworzyć trasy, wywołując `MapRoute` lub jednego z podobne metody rozszerzenia zdefiniowane na `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="850d5-170">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="850d5-171">Wszystkie te metody spowoduje utworzenie wystąpienia `Route` i dodać go do kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="850d5-171">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="850d5-172">Uwaga: `MapRoute` nie przyjmuje parametr programu obsługi trasy — tylko dodaje trasy, które będą obsługiwane przez `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="850d5-172">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="850d5-173">Ponieważ domyślny program obsługi jest `IRouter`, mogą zdecydować, nie można obsłużyć żądania.</span><span class="sxs-lookup"><span data-stu-id="850d5-173">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="850d5-174">Na przykład platformy ASP.NET MVC jest zazwyczaj skonfigurowany jako domyślny program obsługi, który obsługuje tylko żądania które pasują do dostępnych kontrolerów i akcji.</span><span class="sxs-lookup"><span data-stu-id="850d5-174">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="850d5-175">Aby dowiedzieć się więcej na temat routingu do MVC, zobacz [trasy do akcji kontrolera](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="850d5-175">To learn more about routing to MVC, see [Route to controller actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="850d5-176">Jest to przykład `MapRoute` wywołania używany przez typowy definicję trasy ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="850d5-176">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="850d5-177">Ten szablon będzie odpowiadał Ścieżka adresu URL, takich jak `/Products/Details/17` i Wyodrębnij wartości trasy `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="850d5-177">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="850d5-178">Wartości trasy są określane przez podział Ścieżka adresu URL na segmenty, dopasowanie i każdy z segmentów z *kierowanie parametru* nazwy szablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-178">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="850d5-179">Noszą nazwy parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-179">Route parameters are named.</span></span> <span data-ttu-id="850d5-180">Są one definiowane, umieszczając nazwę parametru w nawiasach klamrowych `{ }`.</span><span class="sxs-lookup"><span data-stu-id="850d5-180">They're defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="850d5-181">Powyższym szablonie może być również zgodna ze ścieżką URL `/` i spowodowało wygenerowanie wartości `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="850d5-181">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="850d5-182">Wynika to z faktu `{controller}` i `{action}` parametrów trasy mają przypisane wartości domyślne, a `id` parametr trasy jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="850d5-182">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="850d5-183">Znak równości `=` logowanie następuje wartość po nazwę parametru trasa określa wartość domyślną dla parametru.</span><span class="sxs-lookup"><span data-stu-id="850d5-183">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="850d5-184">Znak zapytania `?` po nazwy parametru trasy definiuje parametru jako opcjonalną.</span><span class="sxs-lookup"><span data-stu-id="850d5-184">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="850d5-185">Parametry o wartości domyślne trasy *zawsze* uzyskiwania wartości trasy, jeśli trasa odpowiada — następujące parametry opcjonalne nie będzie mieć wartość trasy, jeśli nie było żadnych odpowiadającym segmencie ścieżki adresu URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-185">Route parameters with a default value *always* produce a route value when the route matches - optional parameters won't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="850d5-186">Zobacz [dokumentacja dotycząca szablonów tras](#route-template-reference) uzyskać dokładny opis funkcji szablonu trasy i składni.</span><span class="sxs-lookup"><span data-stu-id="850d5-186">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="850d5-187">Ten przykład obejmuje *trasy ograniczenie*:</span><span class="sxs-lookup"><span data-stu-id="850d5-187">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="850d5-188">Ten szablon będzie odpowiadał Ścieżka adresu URL, takich jak `/Products/Details/17`, ale nie `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="850d5-188">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="850d5-189">Definicji parametru trasy `{id:int}` definiuje *trasy ograniczenie* dla `id` parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-189">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="850d5-190">Implementowanie ograniczenia trasy `IRouteConstraint` i badać wartości trasy, aby je zweryfikować.</span><span class="sxs-lookup"><span data-stu-id="850d5-190">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="850d5-191">W tym przykładzie wartość trasy `id` musi być konwertowany na liczbę całkowitą.</span><span class="sxs-lookup"><span data-stu-id="850d5-191">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="850d5-192">Zobacz [odwołanie w przypadku ograniczenia trasy](#route-constraint-reference) uzyskać bardziej szczegółowy opis ograniczenia trasy, które są dostarczane przez platformę.</span><span class="sxs-lookup"><span data-stu-id="850d5-192">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="850d5-193">Dodatkowe przeciążenia `MapRoute` akceptowanych wartości `constraints`, `dataTokens`, i `defaults`.</span><span class="sxs-lookup"><span data-stu-id="850d5-193">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="850d5-194">Te dodatkowe parametry `MapRoute` są zdefiniowane jako typ `object`.</span><span class="sxs-lookup"><span data-stu-id="850d5-194">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="850d5-195">Jest typowy tych parametrów do przekazania obiektu anonimowo wpisane, gdzie nazwy właściwości typu anonimowego dopasowania trasy nazwy parametrów.</span><span class="sxs-lookup"><span data-stu-id="850d5-195">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="850d5-196">Dwa poniższe przykłady tworzenia tras równoważne:</span><span class="sxs-lookup"><span data-stu-id="850d5-196">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="850d5-197">Porada: Składnię w tekście do definiowania ograniczeń i ustawień domyślnych może być bardziej wygodne do proste trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-197">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="850d5-198">Istnieją jednak funkcji, takich jak tokeny danych, które nie są obsługiwane przez składnię w tekście.</span><span class="sxs-lookup"><span data-stu-id="850d5-198">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="850d5-199">W tym przykładzie przedstawiono kilka dodatkowych funkcji:</span><span class="sxs-lookup"><span data-stu-id="850d5-199">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="850d5-200">Ten szablon będzie odpowiadał Ścieżka adresu URL, takich jak `/Blog/All-About-Routing/Introduction` , który wyodrębnia wartości `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="850d5-200">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="850d5-201">Trasy domyślnej wartości `controller` i `action` są produkowane przez trasy, nawet jeśli w szablonie nie istnieją odpowiednie parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-201">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="850d5-202">Można określić wartości domyślnych w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-202">Default values can be specified in the route template.</span></span> <span data-ttu-id="850d5-203">`article` Parametr trasy jest zdefiniowany jako *wychwytywania* za wyglądu gwiazdki `*` przed nazwą parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-203">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="850d5-204">Parametry trasy wychwytywania przechwytywania pozostałą część ścieżki adresu URL i można także dopasować pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="850d5-204">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="850d5-205">Ten przykład dodaje tokeny ograniczeń i dane trasy:</span><span class="sxs-lookup"><span data-stu-id="850d5-205">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="850d5-206">Ten szablon jest zgodny Ścieżka adresu URL, takich jak `/en-US/Products/5` i wyodrębnia wartości `{ controller = Products, action = Details, id = 5 }` i tokeny danych `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="850d5-206">This template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokeny Windows zmiennych lokalnych](routing/_static/tokens.png)

<a name="id1"></a>

### <a name="url-generation"></a><span data-ttu-id="850d5-208">Generowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="850d5-208">URL generation</span></span>

<span data-ttu-id="850d5-209">`Route` Klasy można również wykonać Generowanie adresu URL, łącząc zestaw wartości trasy przy użyciu szablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-209">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="850d5-210">Jest to logicznie procesu zgodnych ze ścieżką URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-210">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="850d5-211">Porada: Aby lepiej zrozumieć Generowanie adresu URL, Wyobraź sobie adresu URL, które chcesz wygenerować, a następnie zastanów się, jak szablon trasy będzie odpowiadać tego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-211">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="850d5-212">Wartości, których będzie generowany?</span><span class="sxs-lookup"><span data-stu-id="850d5-212">What values would be produced?</span></span> <span data-ttu-id="850d5-213">Jest to równoważne nierównej działania Generowanie adresu URL `Route` klasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-213">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="850d5-214">W tym przykładzie użyto podstawowe trasy stylu platformy ASP.NET MVC:</span><span class="sxs-lookup"><span data-stu-id="850d5-214">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="850d5-215">Za pomocą wartości trasy `{ controller = Products, action = List }`, ta trasa zostanie wygenerowany adres URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="850d5-215">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="850d5-216">Wartości trasy są zastępowane odpowiednich parametrów trasy w celu utworzenia ze ścieżką URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-216">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="850d5-217">Ponieważ `id` jest opcjonalny parametr trasy, to żaden problem, że nie ma wartości.</span><span class="sxs-lookup"><span data-stu-id="850d5-217">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="850d5-218">Za pomocą wartości trasy `{ controller = Home, action = Index }`, ta trasa zostanie wygenerowany adres URL `/`.</span><span class="sxs-lookup"><span data-stu-id="850d5-218">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="850d5-219">Wartości trasy, które zostały dostarczone zgodne z wartościami domyślnymi, dlatego segmentów odpowiadający wartości te można bezpiecznie pominąć.</span><span class="sxs-lookup"><span data-stu-id="850d5-219">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="850d5-220">Pamiętaj, że oba adresy URL generowane będzie obustronne z tą definicją trasy, a następnie generuje te same wartości trasy, które były używane do generowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-220">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="850d5-221">Porada: Należy używać w aplikacji za pomocą platformy ASP.NET MVC `UrlHelper` do generowania adresów URL zamiast wywoływać metodę do routingu bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="850d5-221">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="850d5-222">Aby uzyskać więcej szczegółów na temat procesu tworzenia adresu URL, zobacz [odwołania w przypadku generowania adresu url](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="850d5-222">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="850d5-223">Dzięki oprogramowaniu Pośredniczącemu routingu</span><span class="sxs-lookup"><span data-stu-id="850d5-223">Using Routing Middleware</span></span>

<span data-ttu-id="850d5-224">Dodaj pakiet NuGet "Microsoft.AspNetCore.Routing".</span><span class="sxs-lookup"><span data-stu-id="850d5-224">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="850d5-225">Dodaj routingu do kontenera usługi w *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="850d5-225">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="850d5-226">Tras muszą być skonfigurowane w `Configure` method in Class metoda `Startup` klasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-226">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="850d5-227">Poniższy przykład używa tych interfejsów API:</span><span class="sxs-lookup"><span data-stu-id="850d5-227">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="850d5-228">`MapGet`  Dopasowuje tylko żądania HTTP GET</span><span class="sxs-lookup"><span data-stu-id="850d5-228">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="850d5-229">W poniższej tabeli przedstawiono odpowiedzi z danym identyfikatorów URI.</span><span class="sxs-lookup"><span data-stu-id="850d5-229">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="850d5-230">Identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="850d5-230">URI</span></span> | <span data-ttu-id="850d5-231">Odpowiedź</span><span class="sxs-lookup"><span data-stu-id="850d5-231">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="850d5-232">/Package/Create/3</span><span class="sxs-lookup"><span data-stu-id="850d5-232">/package/create/3</span></span>  | <span data-ttu-id="850d5-233">Cześć!</span><span class="sxs-lookup"><span data-stu-id="850d5-233">Hello!</span></span> <span data-ttu-id="850d5-234">Wartości trasy: [operacji tworzenia], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="850d5-234">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="850d5-235">/ pakietu/śledzenie/3</span><span class="sxs-lookup"><span data-stu-id="850d5-235">/package/track/-3</span></span>  | <span data-ttu-id="850d5-236">Cześć!</span><span class="sxs-lookup"><span data-stu-id="850d5-236">Hello!</span></span> <span data-ttu-id="850d5-237">Wartości trasy: [operacji, Śledź], [identyfikator -3]</span><span class="sxs-lookup"><span data-stu-id="850d5-237">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="850d5-238">/ pakietu/śledzić/3 /</span><span class="sxs-lookup"><span data-stu-id="850d5-238">/package/track/-3/</span></span> | <span data-ttu-id="850d5-239">Cześć!</span><span class="sxs-lookup"><span data-stu-id="850d5-239">Hello!</span></span> <span data-ttu-id="850d5-240">Wartości trasy: [operacji, Śledź], [identyfikator -3]</span><span class="sxs-lookup"><span data-stu-id="850d5-240">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="850d5-241">/ Package/śledzenie /</span><span class="sxs-lookup"><span data-stu-id="850d5-241">/package/track/</span></span> | <span data-ttu-id="850d5-242">\<Przechodzić niezgodności ></span><span class="sxs-lookup"><span data-stu-id="850d5-242">\<Fall through, no match></span></span> |
| <span data-ttu-id="850d5-243">Pobierz /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="850d5-243">GET /hello/Joe</span></span> | <span data-ttu-id="850d5-244">Witaj, Jan!</span><span class="sxs-lookup"><span data-stu-id="850d5-244">Hi, Joe!</span></span> |
| <span data-ttu-id="850d5-245">OPUBLIKUJ /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="850d5-245">POST /hello/Joe</span></span> | <span data-ttu-id="850d5-246">\<Przechodzić, odpowiada tylko HTTP GET ></span><span class="sxs-lookup"><span data-stu-id="850d5-246">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="850d5-247">Pobierz /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="850d5-247">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="850d5-248">\<Przechodzić niezgodności ></span><span class="sxs-lookup"><span data-stu-id="850d5-248">\<Fall through, no match></span></span> |

<span data-ttu-id="850d5-249">Jeśli konfigurujesz jedną trasę wywołać `app.UseRouter` przekazując `IRouter` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="850d5-249">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="850d5-250">Nie trzeba wywoływać `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="850d5-250">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="850d5-251">Framework udostępnia zestaw metod rozszerzenia tworzenie tras, na przykład:</span><span class="sxs-lookup"><span data-stu-id="850d5-251">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="850d5-252">Niektóre z tych metod, takich jak `MapGet` wymagają `RequestDelegate` należy podać.</span><span class="sxs-lookup"><span data-stu-id="850d5-252">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="850d5-253">`RequestDelegate` Będzie służyć jako *programu obsługi trasy* gdy trasa odpowiada.</span><span class="sxs-lookup"><span data-stu-id="850d5-253">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="850d5-254">Inne metody w tej rodzinie umożliwiają konfigurowanie potoku oprogramowania pośredniczącego, które będzie używane jako programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-254">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="850d5-255">Jeśli *mapy* metody nie zaakceptuje program obsługi, takie jak `MapRoute`, a następnie użyje `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="850d5-255">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="850d5-256">`Map[Verb]` Metody używać ograniczeń w celu ograniczenia trasy do czasownik HTTP w nazwie metody.</span><span class="sxs-lookup"><span data-stu-id="850d5-256">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="850d5-257">Na przykład zobacz [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) i [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="850d5-257">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="850d5-258">Odwołanie do szablonu trasy</span><span class="sxs-lookup"><span data-stu-id="850d5-258">Route Template Reference</span></span>

<span data-ttu-id="850d5-259">Tokeny w nawiasy klamrowe (`{ }`) Zdefiniuj *parametry trasy* która powiązana, jeśli trasa jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="850d5-259">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="850d5-260">Można zdefiniować więcej niż jeden parametr trasy w segmencie trasy, ale musi być oddzielony wartości literału.</span><span class="sxs-lookup"><span data-stu-id="850d5-260">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="850d5-261">Na przykład `{controller=Home}{action=Index}` nie bylibyśmy w prawidłową trasę, ponieważ nie ma żadnych wartości literału między `{controller}` i `{action}`.</span><span class="sxs-lookup"><span data-stu-id="850d5-261">For example `{controller=Home}{action=Index}` wouldn't be a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="850d5-262">Te parametry trasy musi mieć nazwę, a może określić dodatkowe atrybuty.</span><span class="sxs-lookup"><span data-stu-id="850d5-262">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="850d5-263">Tekst dosłowny niż parametrów trasy (na przykład `{id}`) i separatora ścieżki `/` musi być zgodna z tekstem w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-263">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="850d5-264">Dopasowywanie tekstu odbywa się bez uwzględniania wielkości liter i jest oparta na zdekodowany reprezentacja ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-264">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="850d5-265">Aby dopasować Ogranicznik parametru trasy literału `{` lub `}`, zmienić jego znaczenie, powtarzając znak (`{{` lub `}}`).</span><span class="sxs-lookup"><span data-stu-id="850d5-265">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="850d5-266">Wzorce adresów URL, które próbują przechwytywania nazwę pliku z rozszerzeniem nazwy pliku opcjonalne mają dodatkowe zagadnienia.</span><span class="sxs-lookup"><span data-stu-id="850d5-266">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="850d5-267">Na przykład przy użyciu szablonu `files/{filename}.{ext?}` — po obu `filename` i `ext` istnieje, obie wartości zostaną wypełnione.</span><span class="sxs-lookup"><span data-stu-id="850d5-267">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="850d5-268">Jeśli tylko `filename` istnieje w adresie URL, dopasowania tras, ponieważ końcowej kropki `.` jest opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="850d5-268">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="850d5-269">Następujące adresy URL będzie odpowiadać tej trasy:</span><span class="sxs-lookup"><span data-stu-id="850d5-269">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="850d5-270">Możesz użyć `*` znak jako prefiks do parametr trasy do powiązania w pozostałej części identyfikatora URI — jest to nazywane *wychwytywania* parametru.</span><span class="sxs-lookup"><span data-stu-id="850d5-270">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="850d5-271">Na przykład `blog/{*slug}` będzie odpowiadać dowolny identyfikator URI, który uruchamiany przy użyciu `/blog` i dowolną wartość z dołączonym (może zostać przypisana do `slug` trasy wartości).</span><span class="sxs-lookup"><span data-stu-id="850d5-271">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="850d5-272">Parametry przechwytującą cały mogą być również zgodna pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="850d5-272">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="850d5-273">Może mieć parametrów trasy *wartości domyślne*magazynu, określając wartość domyślna po nazwie parametru, oddzielone `=`.</span><span class="sxs-lookup"><span data-stu-id="850d5-273">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="850d5-274">Na przykład `{controller=Home}` zdefiniuje `Home` jako wartość domyślna dla `controller`.</span><span class="sxs-lookup"><span data-stu-id="850d5-274">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="850d5-275">Wartością domyślną jest używany, jeśli wartość nie jest obecny w adresie URL, dla parametru.</span><span class="sxs-lookup"><span data-stu-id="850d5-275">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="850d5-276">Oprócz wartości domyślne parametrów trasy, może być opcjonalny (określona przez dołączenie `?` na końcu nazwy parametru, jak `id?`).</span><span class="sxs-lookup"><span data-stu-id="850d5-276">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="850d5-277">Różnica między opcjonalne i "ma default" parametru trasy, z wartością domyślną będzie zawsze daje wartość opcjonalny parametr ma wartość tylko wtedy, gdy zostało ono określone.</span><span class="sxs-lookup"><span data-stu-id="850d5-277">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="850d5-278">Parametry trasy może mieć również ograniczenia, które musi odpowiadać wartości trasy, powiązany z adresu URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-278">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="850d5-279">Dodawanie dwukropek `:` i nazwa ograniczenia po Określa nazwę parametru trasy *ograniczenie w tekście* parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-279">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="850d5-280">Jeśli ograniczenie wymaga argumentów, te znajdują się w nawiasach `( )` po nazwie ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="850d5-280">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="850d5-281">Można określić wiele ograniczeń w tekście, dodając inny dwukropek `:` i nazwa ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="850d5-281">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="850d5-282">Nazwa ograniczenia jest przekazywany do `IInlineConstraintResolver` usługi w celu utworzenia wystąpienia `IRouteConstraint` do użycia podczas przetwarzania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-282">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="850d5-283">Na przykład szablon trasy `blog/{article:minlength(10)}` Określa `minlength` ograniczenie z argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="850d5-283">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="850d5-284">Aby uzyskać więcej ograniczenia trasy opis, a lista ograniczeń dostarczanych przez szablon, zobacz [odwołanie w przypadku ograniczenia trasy](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="850d5-284">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="850d5-285">Poniższa tabela przedstawia niektóre szablony trasy i ich zachowania.</span><span class="sxs-lookup"><span data-stu-id="850d5-285">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="850d5-286">Szablon trasy</span><span class="sxs-lookup"><span data-stu-id="850d5-286">Route Template</span></span> | <span data-ttu-id="850d5-287">Przykładowy adres URL dopasowania</span><span class="sxs-lookup"><span data-stu-id="850d5-287">Example Matching URL</span></span> | <span data-ttu-id="850d5-288">Uwagi</span><span class="sxs-lookup"><span data-stu-id="850d5-288">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="850d5-289">Cześć</span><span class="sxs-lookup"><span data-stu-id="850d5-289">hello</span></span>  | <span data-ttu-id="850d5-290">człon</span><span class="sxs-lookup"><span data-stu-id="850d5-290">/hello</span></span>  | <span data-ttu-id="850d5-291">Jest zgodny tylko pojedynczą ścieżkę `/hello`</span><span class="sxs-lookup"><span data-stu-id="850d5-291">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="850d5-292">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="850d5-292">{Page=Home}</span></span> | / | <span data-ttu-id="850d5-293">Dopasowuje i ustawia `Page` do `Home`</span><span class="sxs-lookup"><span data-stu-id="850d5-293">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="850d5-294">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="850d5-294">{Page=Home}</span></span>  | <span data-ttu-id="850d5-295">/ Contact</span><span class="sxs-lookup"><span data-stu-id="850d5-295">/Contact</span></span>  | <span data-ttu-id="850d5-296">Dopasowuje i ustawia `Page` do `Contact`</span><span class="sxs-lookup"><span data-stu-id="850d5-296">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="850d5-297">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="850d5-297">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="850d5-298">/ / Listy produktów</span><span class="sxs-lookup"><span data-stu-id="850d5-298">/Products/List</span></span> | <span data-ttu-id="850d5-299">Mapuje `Products` kontrolera i `List` akcji</span><span class="sxs-lookup"><span data-stu-id="850d5-299">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="850d5-300">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="850d5-300">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="850d5-301">/ Produkty/szczegóły/123</span><span class="sxs-lookup"><span data-stu-id="850d5-301">/Products/Details/123</span></span>  |  <span data-ttu-id="850d5-302">Mapuje `Products` kontrolera i `Details` akcji.</span><span class="sxs-lookup"><span data-stu-id="850d5-302">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="850d5-303">`id` Ustaw 123</span><span class="sxs-lookup"><span data-stu-id="850d5-303">`id` set to 123</span></span> |
| <span data-ttu-id="850d5-304">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="850d5-304">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="850d5-305">Mapuje `Home` kontrolera i `Index` metody. `id` jest ignorowana.</span><span class="sxs-lookup"><span data-stu-id="850d5-305">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="850d5-306">Przy użyciu szablonu ogólnie jest najprostszym podejściem do obsługi routingu.</span><span class="sxs-lookup"><span data-stu-id="850d5-306">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="850d5-307">Ograniczenia i ustawienia domyślne można również określić poza szablon trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-307">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="850d5-308">Porada: Włączanie [rejestrowania](xref:fundamentals/logging/index) aby zobaczyć, jak tworzone w implementacji routingu, takich jak `Route`, zgodne z żądaniami.</span><span class="sxs-lookup"><span data-stu-id="850d5-308">Tip: Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="850d5-309">Zastrzeżone nazwy routingu</span><span class="sxs-lookup"><span data-stu-id="850d5-309">Reserved routing names</span></span>

<span data-ttu-id="850d5-310">Następujące słowa kluczowe są zarezerwowane nazwy i nie można użyć jako nazwy trasy i parametry:</span><span class="sxs-lookup"><span data-stu-id="850d5-310">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="850d5-311">Odwołanie do ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="850d5-311">Route constraint reference</span></span>

<span data-ttu-id="850d5-312">Ograniczenia trasy wykonania, gdy `Route` ma dopasowane składnia przychodzącego adresu URL i podzielić na tokeny Ścieżka adresu URL do wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-312">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="850d5-313">Ograniczenia trasy ogólnie badać wartości tras skojarzone za pośrednictwem szablon trasy i upewnij prostą tak/nie decyzji o tym, czy wartość jest dopuszczalne.</span><span class="sxs-lookup"><span data-stu-id="850d5-313">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="850d5-314">Niektóre ograniczenia trasy umożliwia należy wziąć pod uwagę, czy żądania można kierować dane poza wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-314">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="850d5-315">Na przykład `HttpMethodRouteConstraint` można zaakceptować lub odrzucić żądanie oparte na jego zlecenie HTTP.</span><span class="sxs-lookup"><span data-stu-id="850d5-315">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="850d5-316">Unikaj używania ograniczenia **sprawdzania danych wejściowych**, ponieważ w ten sposób oznacza, że nieprawidłowe dane wejściowe spowoduje 404 (nie znaleziono), zamiast 400 przy użyciu odpowiedniego komunikatu o błędzie.</span><span class="sxs-lookup"><span data-stu-id="850d5-316">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="850d5-317">Ograniczenia trasy powinien być używany do **odróżnić** między podobne tras, nie można sprawdzić poprawność danych wejściowych dla określonej trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-317">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="850d5-318">Poniższa tabela przedstawia niektóre ograniczenia trasy, a ich oczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="850d5-318">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="850d5-319">ograniczenie</span><span class="sxs-lookup"><span data-stu-id="850d5-319">constraint</span></span> | <span data-ttu-id="850d5-320">Przykład</span><span class="sxs-lookup"><span data-stu-id="850d5-320">Example</span></span> | <span data-ttu-id="850d5-321">Przykład dopasowań</span><span class="sxs-lookup"><span data-stu-id="850d5-321">Example Matches</span></span> | <span data-ttu-id="850d5-322">Uwagi</span><span class="sxs-lookup"><span data-stu-id="850d5-322">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="850d5-323">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="850d5-323">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="850d5-324">Dopasowuje dowolną liczbę całkowitą</span><span class="sxs-lookup"><span data-stu-id="850d5-324">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="850d5-325">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="850d5-325">`true`, `FALSE`</span></span> | <span data-ttu-id="850d5-326">Dopasowuje `true` lub `false` (bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="850d5-326">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="850d5-327">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="850d5-327">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="850d5-328">Pasuje do prawidłowego `DateTime` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="850d5-328">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="850d5-329">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="850d5-329">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="850d5-330">Pasuje do prawidłowego `decimal` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="850d5-330">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="850d5-331">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="850d5-331">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="850d5-332">Pasuje do prawidłowego `double` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="850d5-332">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="850d5-333">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="850d5-333">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="850d5-334">Pasuje do prawidłowego `float` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="850d5-334">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="850d5-335">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="850d5-335">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="850d5-336">Pasuje do prawidłowego `Guid` wartość</span><span class="sxs-lookup"><span data-stu-id="850d5-336">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="850d5-337">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="850d5-337">`123456789`, `-123456789`</span></span> | <span data-ttu-id="850d5-338">Pasuje do prawidłowego `long` wartość</span><span class="sxs-lookup"><span data-stu-id="850d5-338">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="850d5-339">Ciąg musi być co najmniej 4 znaki</span><span class="sxs-lookup"><span data-stu-id="850d5-339">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="850d5-340">Ciąg musi zawierać nie więcej niż 8 znaków</span><span class="sxs-lookup"><span data-stu-id="850d5-340">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="850d5-341">Ciąg musi być dokładnie 12 znaków.</span><span class="sxs-lookup"><span data-stu-id="850d5-341">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="850d5-342">Ciąg musi zawierać co najmniej 8 i nie więcej niż 16 znaków</span><span class="sxs-lookup"><span data-stu-id="850d5-342">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="850d5-343">Wartość całkowita musi być co najmniej 18</span><span class="sxs-lookup"><span data-stu-id="850d5-343">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="850d5-344">Wartość całkowita musi być nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="850d5-344">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="850d5-345">Wartość całkowita musi być co najmniej 18 lat, ale nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="850d5-345">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="850d5-346">Ciąg musi zawierać co najmniej jeden znak alfabetyczny (`a`-`z`, bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="850d5-346">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="850d5-347">Ciąg musi być zgodny z wyrażeniem regularnym (Zobacz porady dotyczące definiując wyrażenie regularne)</span><span class="sxs-lookup"><span data-stu-id="850d5-347">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="850d5-348">Używane do wymuszania, że wartość parametru nie jest obecny podczas generowania adresu URL</span><span class="sxs-lookup"><span data-stu-id="850d5-348">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="850d5-349">Wiele ograniczeń rozdzielana średnikami można zastosować do jednego parametru.</span><span class="sxs-lookup"><span data-stu-id="850d5-349">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="850d5-350">Na przykład następujące ograniczenia ogranicza parametr na wartość całkowitą równą 1 lub większą:</span><span class="sxs-lookup"><span data-stu-id="850d5-350">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

>[!WARNING]
> <span data-ttu-id="850d5-351">Ograniczenia trasy, które pozwalają sprawdzić adres URL można przekonwertować na typ CLR (takie jak `int` lub `DateTime`) zawsze używają niezmiennej kultury — zakładają, że adres URL jest niemożliwe do zlokalizowania.</span><span class="sxs-lookup"><span data-stu-id="850d5-351">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="850d5-352">Ograniczenia trasy dostarczone przez framework nie należy modyfikować wartości przechowywane w wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="850d5-352">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="850d5-353">Wszystkie wartości trasy, przeanalizować z adresu URL będą przechowywane jako ciągi.</span><span class="sxs-lookup"><span data-stu-id="850d5-353">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="850d5-354">Na przykład [ograniczenia trasy Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) zostanie podjęta próba konwersji wartości trasy na format zmiennoprzecinkowy, ale przekonwertowana wartość jest używana tylko po to, aby sprawdzić, może on zostać przekonwertowany na format zmiennoprzecinkowy.</span><span class="sxs-lookup"><span data-stu-id="850d5-354">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="850d5-355">Wyrażenia regularne</span><span class="sxs-lookup"><span data-stu-id="850d5-355">Regular expressions</span></span>

<span data-ttu-id="850d5-356">Dodaje platformę ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` do konstruktora wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="850d5-356">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="850d5-357">Zobacz [wyliczenie RegexOptions](/dotnet/api/system.text.regularexpressions.regexoptions) opis tych elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="850d5-357">See [RegexOptions Enumeration](/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="850d5-358">Wyrażenia regularne używać ograniczników i tokeny podobne do używanych przez usługę Routing i języka C#.</span><span class="sxs-lookup"><span data-stu-id="850d5-358">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="850d5-359">Wyrażenie regularne tokeny muszą być wyjściowym.</span><span class="sxs-lookup"><span data-stu-id="850d5-359">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="850d5-360">Na przykład, aby użyć wyrażenia regularnego `^\d{3}-\d{2}-\d{4}$` w routingu, musi ona mieć `\` znaki wpisane w jako `\\` w pliku źródłowym języka C# jako znak ucieczki `\` ciąg znaku ucieczki (chyba że za pomocą [verbatim Literały ciągu](/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="850d5-360">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="850d5-361">`{` , `}` , "[" I "]" znaków muszą być poprzedzone podwojenie je jako znak ucieczki znaki ogranicznika parametr routingu.</span><span class="sxs-lookup"><span data-stu-id="850d5-361">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="850d5-362">W poniższej tabeli przedstawiono wyrażeń regularnych i wersji o zmienionym znaczeniu.</span><span class="sxs-lookup"><span data-stu-id="850d5-362">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="850d5-363">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="850d5-363">Expression</span></span>               | <span data-ttu-id="850d5-364">Uwaga</span><span class="sxs-lookup"><span data-stu-id="850d5-364">Note</span></span> |
| ----------------- | ------------ |
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="850d5-365">Wyrażenie regularne</span><span class="sxs-lookup"><span data-stu-id="850d5-365">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="850d5-366">Poprzedzone znakiem zmiany znaczenia</span><span class="sxs-lookup"><span data-stu-id="850d5-366">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="850d5-367">Wyrażenie regularne</span><span class="sxs-lookup"><span data-stu-id="850d5-367">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="850d5-368">Poprzedzone znakiem zmiany znaczenia</span><span class="sxs-lookup"><span data-stu-id="850d5-368">Escaped</span></span>  |

<span data-ttu-id="850d5-369">Wyrażenia regularne użyte w routingu często rozpocznie się za pomocą `^` znaków (dopasowanie ciągu pozycję początkową) i kończyć się `$` znak (dopasowanie kończy pozycja w ciągu).</span><span class="sxs-lookup"><span data-stu-id="850d5-369">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="850d5-370">`^` i `$` znaków upewnij się, że wartość parametru trasy całe dopasowanie wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="850d5-370">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="850d5-371">Bez `^` i `$` znaków wyrażeń regularnych będzie odpowiadał na dowolnym podciągu wewnątrz ciągu, który jest często nie mają.</span><span class="sxs-lookup"><span data-stu-id="850d5-371">Without the `^` and `$` characters the regular expression will match any substring within the string, which is often not what you want.</span></span> <span data-ttu-id="850d5-372">W poniższej tabeli przedstawiono kilka przykładów i wyjaśnia, dlaczego zgodne lub nie odpowiada.</span><span class="sxs-lookup"><span data-stu-id="850d5-372">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="850d5-373">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="850d5-373">Expression</span></span>               | <span data-ttu-id="850d5-374">String</span><span class="sxs-lookup"><span data-stu-id="850d5-374">String</span></span> | <span data-ttu-id="850d5-375">Dopasowanie</span><span class="sxs-lookup"><span data-stu-id="850d5-375">Match</span></span> | <span data-ttu-id="850d5-376">Komentarz</span><span class="sxs-lookup"><span data-stu-id="850d5-376">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ |
| `[a-z]{2}` | <span data-ttu-id="850d5-377">Cześć</span><span class="sxs-lookup"><span data-stu-id="850d5-377">hello</span></span> | <span data-ttu-id="850d5-378">Tak</span><span class="sxs-lookup"><span data-stu-id="850d5-378">yes</span></span> | <span data-ttu-id="850d5-379">podciąg dopasowania</span><span class="sxs-lookup"><span data-stu-id="850d5-379">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="850d5-380">123abc456</span><span class="sxs-lookup"><span data-stu-id="850d5-380">123abc456</span></span> | <span data-ttu-id="850d5-381">Tak</span><span class="sxs-lookup"><span data-stu-id="850d5-381">yes</span></span> | <span data-ttu-id="850d5-382">podciąg dopasowania</span><span class="sxs-lookup"><span data-stu-id="850d5-382">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="850d5-383">mz</span><span class="sxs-lookup"><span data-stu-id="850d5-383">mz</span></span> | <span data-ttu-id="850d5-384">Tak</span><span class="sxs-lookup"><span data-stu-id="850d5-384">yes</span></span> | <span data-ttu-id="850d5-385">zgodne z wyrażeniem</span><span class="sxs-lookup"><span data-stu-id="850d5-385">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="850d5-386">MZ</span><span class="sxs-lookup"><span data-stu-id="850d5-386">MZ</span></span> | <span data-ttu-id="850d5-387">Tak</span><span class="sxs-lookup"><span data-stu-id="850d5-387">yes</span></span> | <span data-ttu-id="850d5-388">bez uwzględniania wielkości liter</span><span class="sxs-lookup"><span data-stu-id="850d5-388">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="850d5-389">Cześć</span><span class="sxs-lookup"><span data-stu-id="850d5-389">hello</span></span> | <span data-ttu-id="850d5-390">Brak</span><span class="sxs-lookup"><span data-stu-id="850d5-390">no</span></span> | <span data-ttu-id="850d5-391">zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="850d5-391">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="850d5-392">123abc456</span><span class="sxs-lookup"><span data-stu-id="850d5-392">123abc456</span></span> | <span data-ttu-id="850d5-393">Brak</span><span class="sxs-lookup"><span data-stu-id="850d5-393">no</span></span> | <span data-ttu-id="850d5-394">zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="850d5-394">see `^` and `$` above</span></span> |

<span data-ttu-id="850d5-395">Zapoznaj się [wyrażeń regularnych programu .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) więcej informacji na temat składni wyrażeń regularnych.</span><span class="sxs-lookup"><span data-stu-id="850d5-395">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="850d5-396">Aby ograniczyć parametr znany zestaw możliwych wartości, należy użyć wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="850d5-396">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="850d5-397">Na przykład `{action:regex(^(list|get|create)$)}` jest zgodny tylko `action` trasy wartość `list`, `get`, lub `create`.</span><span class="sxs-lookup"><span data-stu-id="850d5-397">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="850d5-398">Jeśli przekazywana do słownika ograniczenia, ciąg "^ (Lista | get | tworzenie) $" byłaby równoważna.</span><span class="sxs-lookup"><span data-stu-id="850d5-398">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="850d5-399">Ograniczenia, które są przekazywane w słowniku ograniczenia (niewyrównane w szablonie), która nie pasuje do jednej znane ograniczenia również są traktowane jako wyrażenia regularne.</span><span class="sxs-lookup"><span data-stu-id="850d5-399">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="850d5-400">Odwołanie do generowania adresu URL</span><span class="sxs-lookup"><span data-stu-id="850d5-400">URL Generation Reference</span></span>

<span data-ttu-id="850d5-401">W poniższym przykładzie pokazano, jak wygenerować łącze do trasy, biorąc pod uwagę słownika wartości trasy i `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="850d5-401">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="850d5-402">`VirtualPath` Jest generowany na końcu powyższego przykładu `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="850d5-402">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="850d5-403">Drugi parametr `VirtualPathContext` Konstruktor jest kolekcją *otoczenia wartości*.</span><span class="sxs-lookup"><span data-stu-id="850d5-403">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="850d5-404">Wartości otoczenia umożliwiają wygodne przez ograniczenie liczby wartości, które Deweloper należy określić w ramach kontekstu żądania.</span><span class="sxs-lookup"><span data-stu-id="850d5-404">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="850d5-405">Bieżące wartości trasy, bieżącego żądania są traktowane jako wartości otoczenia dotyczącymi generowania łączy.</span><span class="sxs-lookup"><span data-stu-id="850d5-405">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="850d5-406">Na przykład w aplikacji ASP.NET MVC w `About` akcji `HomeController`, nie musisz określić wartość trasy kontrolera, aby połączyć `Index` akcji (otoczenia wartość `Home` będą używane).</span><span class="sxs-lookup"><span data-stu-id="850d5-406">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="850d5-407">Otoczenia wartości, które nie jest zgodny z parametrem są ignorowane, a otoczenia wartości również są ignorowane, gdy jawnie dostarczone przez wartość zastąpienia, go, przechodząc od lewej do prawej w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="850d5-407">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="850d5-408">Wartości jawnie są dostarczane, ale które nie są zgodne niczego są dodawane do ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="850d5-408">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="850d5-409">W poniższej tabeli przedstawiono wyniki, korzystając z szablonu trasy `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="850d5-409">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="850d5-410">Wartości otoczenia</span><span class="sxs-lookup"><span data-stu-id="850d5-410">Ambient Values</span></span> | <span data-ttu-id="850d5-411">Jawne wartości</span><span class="sxs-lookup"><span data-stu-id="850d5-411">Explicit Values</span></span> | <span data-ttu-id="850d5-412">Wynik</span><span class="sxs-lookup"><span data-stu-id="850d5-412">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="850d5-413">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="850d5-413">controller="Home"</span></span> | <span data-ttu-id="850d5-414">action="About"</span><span class="sxs-lookup"><span data-stu-id="850d5-414">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="850d5-415">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="850d5-415">controller="Home"</span></span> | <span data-ttu-id="850d5-416">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="850d5-416">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="850d5-417">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="850d5-417">controller="Home",color="Red"</span></span> | <span data-ttu-id="850d5-418">action="About"</span><span class="sxs-lookup"><span data-stu-id="850d5-418">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="850d5-419">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="850d5-419">controller="Home"</span></span> | <span data-ttu-id="850d5-420">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="850d5-420">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="850d5-421">Jeśli ta wartość nie zostanie podany wprost trasy ma wartość domyślną, która nie jest zgodny z parametrem, musi być zgodna wartość domyślna.</span><span class="sxs-lookup"><span data-stu-id="850d5-421">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="850d5-422">Na przykład:</span><span class="sxs-lookup"><span data-stu-id="850d5-422">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="850d5-423">Generowanie konsolidacji wygeneruje tylko link dla tej trasy udostępniane pasujących wartości dla kontrolerów i akcji.</span><span class="sxs-lookup"><span data-stu-id="850d5-423">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
