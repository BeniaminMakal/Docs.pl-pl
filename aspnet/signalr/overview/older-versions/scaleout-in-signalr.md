---
uid: signalr/overview/older-versions/scaleout-in-signalr
title: Wprowadzenie do skalowania w SignalR 1.x | Dokumentacja firmy Microsoft
author: MikeWasson
description: ''
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/29/2013
ms.topic: article
ms.assetid: 3fd9f11c-799b-4001-bd60-1e70cfc61c19
ms.technology: dotnet-signalr
ms.prod: .net-framework
msc.legacyurl: /signalr/overview/older-versions/scaleout-in-signalr
msc.type: authoredcontent
ms.openlocfilehash: ee3384046bf8a0f363aa6801d7a46f68b2bf125a
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/24/2018
ms.locfileid: "28043749"
---
<a name="introduction-to-scaleout-in-signalr-1x"></a><span data-ttu-id="8184a-102">Wprowadzenie do skalowania w SignalR 1.x</span><span class="sxs-lookup"><span data-stu-id="8184a-102">Introduction to Scaleout in SignalR 1.x</span></span>
====================
<span data-ttu-id="8184a-103">przez [Wasson Jan](https://github.com/MikeWasson), [Patrick Fletcher](https://github.com/pfletcher)</span><span class="sxs-lookup"><span data-stu-id="8184a-103">by [Mike Wasson](https://github.com/MikeWasson), [Patrick Fletcher](https://github.com/pfletcher)</span></span>

<span data-ttu-id="8184a-104">Ogólnie rzecz biorąc, istnieją dwa sposoby można skalować aplikacji sieci web: *skalowanie w górę* i *skalowanie*.</span><span class="sxs-lookup"><span data-stu-id="8184a-104">In general, there are two ways to scale a web application: *scale up* and *scale out*.</span></span>

- <span data-ttu-id="8184a-105">Skalowanie w górę oznacza, że za pomocą większy serwer (lub większych maszyn wirtualnych) z więcej pamięci RAM, procesory itp.</span><span class="sxs-lookup"><span data-stu-id="8184a-105">Scale up means using a larger server (or a larger VM) with more RAM, CPUs, etc.</span></span>
- <span data-ttu-id="8184a-106">Skalowanie w poziomie oznacza dodanie większej liczby serwerów do obsługi obciążenia.</span><span class="sxs-lookup"><span data-stu-id="8184a-106">Scale out means adding more servers to handle the load.</span></span>

<span data-ttu-id="8184a-107">Problem z skalowaniu jest szybkie osiągnęła limit rozmiaru maszyny.</span><span class="sxs-lookup"><span data-stu-id="8184a-107">The problem with scaling up is that you quickly hit a limit on the size of the machine.</span></span> <span data-ttu-id="8184a-108">Ponadto należy do skalowania w poziomie. Jednak gdy skalowanie w poziomie klientów można pobrać kierowane do różnych serwerów.</span><span class="sxs-lookup"><span data-stu-id="8184a-108">Beyond that, you need to scale out. However, when you scale out, clients can get routed to different servers.</span></span> <span data-ttu-id="8184a-109">Klient, który jest podłączony do jednego serwera nie będą otrzymywać wiadomości wysyłane z innego serwera.</span><span class="sxs-lookup"><span data-stu-id="8184a-109">A client that is connected to one server will not receive messages sent from another server.</span></span>

![](scaleout-in-signalr/_static/image1.png)

<span data-ttu-id="8184a-110">Jedno rozwiązanie ma przesyłać dalej komunikatów między serwerami przy użycia składnik o nazwie *płyty montażowej*.</span><span class="sxs-lookup"><span data-stu-id="8184a-110">One solution is to forward messages between servers, using a component called a *backplane*.</span></span> <span data-ttu-id="8184a-111">W środowisku IDE włączone każdego wystąpienia aplikacji wysyła komunikaty do systemu backplane i systemu backplane przekazuje je do wystąpienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8184a-111">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span> <span data-ttu-id="8184a-112">(W electronics, płyty montażowej to grupa równoległych łączników.</span><span class="sxs-lookup"><span data-stu-id="8184a-112">(In electronics, a backplane is a group of parallel connectors.</span></span> <span data-ttu-id="8184a-113">Analogicznie montażowa SignalR łączy wiele serwerów.)</span><span class="sxs-lookup"><span data-stu-id="8184a-113">By analogy, a SignalR backplane connects multiple servers.)</span></span>

![](scaleout-in-signalr/_static/image2.png)

<span data-ttu-id="8184a-114">Biblioteka SignalR udostępnia obecnie trzy montażowych:</span><span class="sxs-lookup"><span data-stu-id="8184a-114">SignalR currently provides three backplanes:</span></span>

- <span data-ttu-id="8184a-115">**Usługa Azure Service Bus**.</span><span class="sxs-lookup"><span data-stu-id="8184a-115">**Azure Service Bus**.</span></span> <span data-ttu-id="8184a-116">Usługa Service Bus jest infrastruktury obsługi wiadomości, umożliwiający składników do wysyłania wiadomości w sposób luźno powiązanych.</span><span class="sxs-lookup"><span data-stu-id="8184a-116">Service Bus is a messaging infrastructure that allows components to send messages in a loosely coupled way.</span></span>
- <span data-ttu-id="8184a-117">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="8184a-117">**Redis**.</span></span> <span data-ttu-id="8184a-118">Redis jest magazyn kluczy i wartości w pamięci.</span><span class="sxs-lookup"><span data-stu-id="8184a-118">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="8184a-119">Redis obsługuje wzorzec publikowania/subskrypcji ("pub/sub") do wysyłania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8184a-119">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>
- <span data-ttu-id="8184a-120">**Program SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="8184a-120">**SQL Server**.</span></span> <span data-ttu-id="8184a-121">Środowiska IDE programu SQL Server zapisuje komunikaty do tabel SQL.</span><span class="sxs-lookup"><span data-stu-id="8184a-121">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="8184a-122">Systemu backplane używa brokera usług dla wydajność obsługi wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8184a-122">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="8184a-123">Jednak działa także jeśli Service Broker jest wyłączona.</span><span class="sxs-lookup"><span data-stu-id="8184a-123">However, it also works if Service Broker is not enabled.</span></span>

<span data-ttu-id="8184a-124">W przypadku wdrożenia aplikacji na platformie Azure, należy rozważyć użycie usługi Azure Service Bus systemu backplane.</span><span class="sxs-lookup"><span data-stu-id="8184a-124">If you deploy your application on Azure, consider using the Azure Service Bus backplane.</span></span> <span data-ttu-id="8184a-125">Jeśli są wdrażane w farmie serwerów, należy wziąć pod uwagę program SQL Server lub montażowych Redis.</span><span class="sxs-lookup"><span data-stu-id="8184a-125">If you are deploying to your own server farm, consider the SQL Server or Redis backplanes.</span></span>

<span data-ttu-id="8184a-126">Samouczki krok po kroku dla każdej płyty montażowej można znaleźć w następujących tematach:</span><span class="sxs-lookup"><span data-stu-id="8184a-126">The following topics contain step-by-step tutorials for each backplane:</span></span>

- [<span data-ttu-id="8184a-127">SignalR — skalowanie w poziomie z użyciem usługi Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="8184a-127">SignalR Scaleout with Azure Service Bus</span></span>](scaleout-with-windows-azure-service-bus.md)
- [<span data-ttu-id="8184a-128">SignalR — skalowanie w poziomie z użyciem pamięci podręcznej Redis</span><span class="sxs-lookup"><span data-stu-id="8184a-128">SignalR Scaleout with Redis</span></span>](scaleout-with-redis.md)
- [<span data-ttu-id="8184a-129">SignalR — skalowanie w poziomie z użyciem programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="8184a-129">SignalR Scaleout with SQL Server</span></span>](scaleout-with-sql-server.md)

## <a name="implementation"></a><span data-ttu-id="8184a-130">Implementacja</span><span class="sxs-lookup"><span data-stu-id="8184a-130">Implementation</span></span>

<span data-ttu-id="8184a-131">W bibliotece SignalR każdy komunikat jest wysyłany za pośrednictwem magistrali komunikatów.</span><span class="sxs-lookup"><span data-stu-id="8184a-131">In SignalR, every message is sent through a message bus.</span></span> <span data-ttu-id="8184a-132">Implementuje magistrali komunikatów [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interfejsu, która dostarcza abstrakcji publikowania/subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="8184a-132">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="8184a-133">Montażowych pracy przez zastąpienie domyślnie **IMessageBus** z magistralą przeznaczone dla tego systemu backplane.</span><span class="sxs-lookup"><span data-stu-id="8184a-133">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span> <span data-ttu-id="8184a-134">Na przykład jest magistrali komunikatu Redis [RedisMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx), i używa pamięci podręcznej Redis [pub/sub](http://redis.io/topics/pubsub) mechanizm do wysyłania i odbierania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="8184a-134">For example, the message bus for Redis is [RedisMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx), and it uses the Redis [pub/sub](http://redis.io/topics/pubsub) mechanism to send and receive messages.</span></span>

<span data-ttu-id="8184a-135">Każde wystąpienie serwera łączy do systemu backplane za pośrednictwem magistrali.</span><span class="sxs-lookup"><span data-stu-id="8184a-135">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="8184a-136">Po wysłaniu komunikatu trafia do systemu backplane i wysyła go do każdego serwera systemu backplane.</span><span class="sxs-lookup"><span data-stu-id="8184a-136">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="8184a-137">Gdy serwer pobiera wiadomość z systemu backplane, umieszcza ją w lokalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="8184a-137">When a server gets a message from the backplane, it puts the message in its local cache.</span></span> <span data-ttu-id="8184a-138">Serwer następnie dostarcza klientom z lokalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="8184a-138">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="8184a-139">Dla każdego połączenia klienta jest śledzony postęp klienta podczas odczytu strumienia komunikatów przy użyciu kursora.</span><span class="sxs-lookup"><span data-stu-id="8184a-139">For each client connection, the client's progress in reading the message stream is tracked using a cursor.</span></span> <span data-ttu-id="8184a-140">(Kursora reprezentuje pozycją w strumieniu komunikat). Jeśli klient zakończy połączenie i następnie ponownie nawiązuje połączenie, zapyta magistrali jakiekolwiek komunikaty, które dotarły po wartości kursora klienta.</span><span class="sxs-lookup"><span data-stu-id="8184a-140">(A cursor represents a position in the message stream.) If a client disconnects and then reconnects, it asks the bus for any messages that arrived after the client's cursor value.</span></span> <span data-ttu-id="8184a-141">To samo się stanie, jeśli połączenie wykorzystuje [długiego sondowania](../getting-started/introduction-to-signalr.md#transports).</span><span class="sxs-lookup"><span data-stu-id="8184a-141">The same thing happens when a connection uses [long polling](../getting-started/introduction-to-signalr.md#transports).</span></span> <span data-ttu-id="8184a-142">Po zakończeniu żądania długiej sondy klienta zostanie otwarte nowe połączenie i prosi o wiadomości, które dotarły po kursora.</span><span class="sxs-lookup"><span data-stu-id="8184a-142">After a long poll request completes, the client opens a new connection and asks for messages that arrived after the cursor.</span></span>

<span data-ttu-id="8184a-143">Kursor działa mechanizm nawet wtedy, gdy klient jest kierowany do innego serwera na Połącz się ponownie.</span><span class="sxs-lookup"><span data-stu-id="8184a-143">The cursor mechanism works even if a client is routed to a different server on reconnect.</span></span> <span data-ttu-id="8184a-144">Systemu backplane zna wszystkie serwery i nie ma znaczenia, który serwer, klient nawiąże połączenie.</span><span class="sxs-lookup"><span data-stu-id="8184a-144">The backplane is aware of all the servers, and it doesn't matter which server a client connects to.</span></span>

## <a name="limitations"></a><span data-ttu-id="8184a-145">Ograniczenia</span><span class="sxs-lookup"><span data-stu-id="8184a-145">Limitations</span></span>

<span data-ttu-id="8184a-146">Przepustowość maksymalna wiadomości za pomocą środowiska IDE, jest mniejsze niż jest w przypadku klientów komunikować się bezpośrednio do węzła pojedynczego serwera.</span><span class="sxs-lookup"><span data-stu-id="8184a-146">Using a backplane, the maximum message throughput is lower than it is when clients talk directly to a single server node.</span></span> <span data-ttu-id="8184a-147">Wynika to z systemu backplane przekazuje każdej wiadomości do każdego węzła, więc systemu backplane może stać się wąskiego gardła.</span><span class="sxs-lookup"><span data-stu-id="8184a-147">That's because the backplane forwards every message to every node, so the backplane can become a bottleneck.</span></span> <span data-ttu-id="8184a-148">Czy to ograniczenie dotyczy problem, zależy od aplikacji.</span><span class="sxs-lookup"><span data-stu-id="8184a-148">Whether this limitation is a problem depends on the application.</span></span> <span data-ttu-id="8184a-149">Na przykład poniżej przedstawiono kilka typowych scenariuszy SignalR:</span><span class="sxs-lookup"><span data-stu-id="8184a-149">For example, here are some typical SignalR scenarios:</span></span>

- <span data-ttu-id="8184a-150">[Emisja serwera](tutorial-server-broadcast-with-aspnet-signalr.md) (np. giełdowych): montażowych działa dobrze w tym scenariuszu, ponieważ serwer określa szybkość, z jaką komunikaty.</span><span class="sxs-lookup"><span data-stu-id="8184a-150">[Server broadcast](tutorial-server-broadcast-with-aspnet-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
- <span data-ttu-id="8184a-151">[Klient do klienta](tutorial-getting-started-with-signalr.md) (np. rozmowę): W tym scenariuszu systemu backplane może być wąskiego gardła, jeśli liczba komunikatów skaluje o liczbie klientów; oznacza to, jeśli liczba komunikatów rozwoju przyłączyć się proporcjonalnie jako większej liczby klientów.</span><span class="sxs-lookup"><span data-stu-id="8184a-151">[Client-to-client](tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
- <span data-ttu-id="8184a-152">[Wysoka częstotliwość w czasie rzeczywistym](tutorial-high-frequency-realtime-with-signalr.md) (np. w czasie rzeczywistym gry): środowisku IDE nie jest zalecane dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="8184a-152">[High-frequency realtime](tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>

## <a name="enabling-tracing-for-signalr-scaleout"></a><span data-ttu-id="8184a-153">Włączanie śledzenia dla skalowania SignalR</span><span class="sxs-lookup"><span data-stu-id="8184a-153">Enabling Tracing For SignalR Scaleout</span></span>

<span data-ttu-id="8184a-154">Aby włączyć śledzenie dla montażowych, Dodaj następujące sekcje do pliku web.config w katalogu głównym **konfiguracji** elementu:</span><span class="sxs-lookup"><span data-stu-id="8184a-154">To enable tracing for the backplanes, add the following sections to the web.config file, under the root **configuration** element:</span></span>

[!code-html[Main](scaleout-in-signalr/samples/sample1.html)]
