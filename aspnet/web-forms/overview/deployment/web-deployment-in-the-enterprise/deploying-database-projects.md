---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: "Wdrażanie projektów bazy danych | Dokumentacja firmy Microsoft"
author: jrjlee
description: "Uwaga: W wielu scenariuszach dla przedsiębiorstwa wdrożenia, potrzebna jest możliwość do publikowania aktualizacji przyrostowych wdrożonej bazy danych. Alternatywą jest odtworzenie..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: aef8229f2920bd026e3dbf063afb57cffb9b21d0
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/10/2017
---
<a name="deploying-database-projects"></a><span data-ttu-id="1e4ff-104">Wdrażanie projektów bazy danych</span><span class="sxs-lookup"><span data-stu-id="1e4ff-104">Deploying Database Projects</span></span>
====================
<span data-ttu-id="1e4ff-105">przez [Lewandowski Jason](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="1e4ff-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="1e4ff-106">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="1e4ff-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="1e4ff-107">W wielu scenariuszach dla przedsiębiorstwa wdrożenia potrzebna jest możliwość do publikowania aktualizacji przyrostowych wdrożonej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="1e4ff-108">Alternatywą jest ponownie utworzyć bazę danych przy każdym wdrożeniu, co oznacza, że zostaną utracone dane w istniejącej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="1e4ff-109">Podczas pracy z programu Visual Studio 2010, przy użyciu VSDBCMD jest zalecane podejście do przyrostowe publikowanie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="1e4ff-110">Jednak na następną wersję programu Visual Studio i Web potok publikowania (WPP) zawiera narzędzia, który obsługuje przyrostowe publikowanie bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>


<span data-ttu-id="1e4ff-111">Po otwarciu menedżera kontaktu przykładowe rozwiązanie w Visual Studio 2010, zobaczysz, że projekt bazy danych zawiera właściwości folderu, który zawiera cztery pliki.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="1e4ff-112">Wraz z pliku projektu (*ContactManager.Database.dbproj* w tym przypadku), te pliki kontrolować różne aspekty procesem kompilacji i wdrażania:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="1e4ff-113">*Database.sqlcmdvars* plik zawiera wartości wszelkich zmiennych SQLCMD można używać do wdrażania projektu.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="1e4ff-114">Każdej konfiguracji rozwiązania (na przykład debug i release) można określić plik różnych .sqlcmdvars.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="1e4ff-115">*Database.sqldeployment* plik zawiera ustawienia charakterystyczne dla wdrożenia, takie jak czy używać sortowania zdefiniowane w projekcie lub sortowanie na serwerze docelowym, czy ponownie utworzyć docelowej bazy danych co czasu lub po prostu zmodyfikować istniejącą bazę danych, aby przełączyć go do daty i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="1e4ff-116">Konfiguracja każdego rozwiązania można określić plik różnych .sqldeployment.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="1e4ff-117">*Database.sqlpermissions* plik jest dokument XML, który służy do definiowania uprawnień, które chcesz dodać do docelowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="1e4ff-118">Wszystkie konfiguracje rozwiązania udostępnianie tego samego pliku .sqlpermissions.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="1e4ff-119">*Database.sqlsettings* plik Określa właściwości poziom bazy danych do użycia podczas tworzenia bazy danych, takich jak sortowania, zachowanie operatory porównania i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="1e4ff-120">Wszystkie konfiguracje rozwiązania udostępnianie tego samego pliku .sqlsettings.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="1e4ff-121">Warto biorąc chwilę, aby otworzyć tych plików w programie Visual Studio i zapoznać się z zawartością.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="1e4ff-122">Podczas kompilowania projektu bazy danych procesu kompilacji tworzy dwa pliki:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="1e4ff-123">A *schematu bazy danych* (plik .dbschema).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="1e4ff-124">Opisuje schemat bazy danych, która ma zostać utworzony w formacie XML.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="1e4ff-125">A *manifest rozmieszczenia* (plik .deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="1e4ff-126">Zawiera wszystkie informacje wymagane do tworzenia i wdrażania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="1e4ff-127">Odwołuje się plik .dbschema oraz inne zasoby, takie jak instrukcje dotyczące wdrażania (plik .sqldeployment) i skrypty SQL przed wdrożeniem lub po wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="1e4ff-128">Oznacza to relacji między tymi zasobami:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="1e4ff-129">Jak widać, plik .sqlsettings i plik .sqlpermissions są dane wejściowe, aby proces kompilacji.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="1e4ff-130">Wraz z pliku projektu bazy danych pliki te są używane do tworzenia pliku schematu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="1e4ff-131">Plik .sqldeployment i plik .sqlcmdvars przechodzą przez proces kompilacji bez zmian.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="1e4ff-132">Manifest rozmieszczenia wskazuje lokalizację schemat bazy danych, plików .sqldeployment pliku .sqlcmdvars i skrypty SQL przed wdrożeniem lub po wdrożeniu.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="1e4ff-133">Dlaczego warto używać VSDBCMD wdrożyć projekt bazy danych?</span><span class="sxs-lookup"><span data-stu-id="1e4ff-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="1e4ff-134">Istnieją różne różne podejścia do wdrażania projektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="1e4ff-135">Jednak nie wszystkie z nich są odpowiednie do wdrażania projektu bazy danych na serwerach zdalnych w środowisku przedsiębiorstwa.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="1e4ff-136">Co należy rozważyć z wdrożenia projektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="1e4ff-137">W scenariuszach wdrażania w przedsiębiorstwie prawdopodobnie chcesz:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="1e4ff-138">Możliwość wdrażania projektu bazy danych z lokalizacji zdalnej.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="1e4ff-139">Możliwość zapewnienia aktualizacji przyrostowych istniejącą bazę danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="1e4ff-140">Zdolność do uwzględnienia przed wdrożeniem lub po wdrożeniu skrypty.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="1e4ff-141">Możliwość dostosowania wdrożenia w wielu środowiskach, w miejsce docelowe.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="1e4ff-142">Możliwość wdrażania projektu bazy danych jako część większego, zwykle uwzględnione w skryptach, wdrożenie rozwiązania pojedynczy krok.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="1e4ff-143">Istnieją trzy główne metody można użyć do wdrożenia projektu bazy danych:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="1e4ff-144">Funkcja wdrożenia z typem projektu bazy danych w Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="1e4ff-145">Podczas tworzenia i wdrażania bazy danych projektu w programie Visual Studio 2010, proces wdrażania używa manifest wdrażania Generowanie pliku wdrożenia na podstawie SQL specyficzne dla konfiguracji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="1e4ff-146">Spowoduje to utworzenie bazy danych, jeśli plik już nie istnieje lub wprowadź niezbędne zmiany w bazie danych, jeśli już istnieje.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="1e4ff-147">SQLCMD.exe umożliwia uruchamianie tego pliku na serwer docelowy, lub możesz ustawić Visual Studio, aby utworzyć i uruchomić plik.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="1e4ff-148">Wadą tego podejścia jest ma tylko ograniczoną kontrolę nad ustawienia wdrażania.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="1e4ff-149">Może być konieczne często również zmodyfikować plik wdrożenia SQL, aby podać wartości zmiennej określonego środowiska.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="1e4ff-150">Takie podejście z komputera można używać tylko z programu Visual Studio 2010, a deweloper musi wiedzieć i Podaj parametry połączenia i poświadczenia do wszystkich środowisk docelowego.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="1e4ff-151">Narzędzie Internet Information Services (IIS) Web Deployment (Web Deploy) służy do [wdrożyć bazę danych w ramach projektu aplikacji sieci web](https://msdn.microsoft.com/en-us/library/dd465343.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/en-us/library/dd465343.aspx).</span></span> <span data-ttu-id="1e4ff-152">Jednak ta metoda jest znacznie bardziej skomplikowane, aby wdrożyć projekt bazy danych, a nie po prostu zreplikować istniejącej lokalnej bazy danych na serwerze docelowym.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="1e4ff-153">Można skonfigurować narzędzie Web Deploy, aby uruchomić skrypt wdrożenia programu SQL, który generuje projekt bazy danych, ale w tym celu, należy utworzyć niestandardowy plik elementów docelowych WPP dla projektu aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="1e4ff-154">Spowoduje to dodanie znacznej ilości złożoności procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="1e4ff-155">Ponadto narzędzia Web Deploy nie obsługuje bezpośrednio aktualizacje przyrostowe istniejących baz danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="1e4ff-156">Aby uzyskać więcej informacji dotyczących tej metody, zobacz [rozszerzanie potoku publikowania w sieci Web, do projektu bazy danych pakietu wdrożonym pliku SQL](https://go.microsoft.com/?linkid=9805121).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="1e4ff-157">Narzędzie VSDBCMD wdrażania bazy danych, za pomocą schematu bazy danych lub manifest wdrażania.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="1e4ff-158">VSDBCMD.exe można wywołać z obiektu docelowego MSBuild, co umożliwia publikowanie baz danych w ramach procesu wdrażania większych i obsługę skryptów.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="1e4ff-159">Można zastąpić zmiennych w pliku .sqlcmdvars i wiele innych właściwości bazy danych z polecenia VSDBCMD, co pozwala na dostosowywanie wdrożenia w różnych środowiskach bez tworzenia wielu konfiguracji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="1e4ff-160">VSDBCMD udostępnia funkcję zróżnicowanie, co oznacza, że szablon wprowadzi tylko niezbędne zmiany, aby były wyrównane z schemat bazy danych w docelowej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="1e4ff-161">VSDBCMD oferuje szeroką gamę opcji wiersza polecenia, które zapewniają precyzyjną kontrolę nad procesem wdrażania.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="1e4ff-162">Z tego przeglądu możesz sprawdzić, czy przy użyciu programu MSBuild przy użyciu VSDBCMD jest najbardziej odpowiednie do scenariusza wdrażania typowego przedsiębiorstwa podejście:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="1e4ff-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="1e4ff-163">Visual Studio 2010</span></span> | <span data-ttu-id="1e4ff-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="1e4ff-164">Web Deploy 2.0</span></span> | <span data-ttu-id="1e4ff-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="1e4ff-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="1e4ff-166">Obsługuje wdrażanie zdalnego?</span><span class="sxs-lookup"><span data-stu-id="1e4ff-166">Supports remote deployment?</span></span> | <span data-ttu-id="1e4ff-167">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-167">Yes</span></span> | <span data-ttu-id="1e4ff-168">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-168">Yes</span></span> | <span data-ttu-id="1e4ff-169">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-169">Yes</span></span> |
| <span data-ttu-id="1e4ff-170">Obsługuje aktualizacji przyrostowych?</span><span class="sxs-lookup"><span data-stu-id="1e4ff-170">Supports incremental updates?</span></span> | <span data-ttu-id="1e4ff-171">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-171">Yes</span></span> | <span data-ttu-id="1e4ff-172">Nie</span><span class="sxs-lookup"><span data-stu-id="1e4ff-172">No</span></span> | <span data-ttu-id="1e4ff-173">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-173">Yes</span></span> |
| <span data-ttu-id="1e4ff-174">Obsługuje skrypty przed/po-deployment?</span><span class="sxs-lookup"><span data-stu-id="1e4ff-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="1e4ff-175">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-175">Yes</span></span> | <span data-ttu-id="1e4ff-176">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-176">Yes</span></span> | <span data-ttu-id="1e4ff-177">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-177">Yes</span></span> |
| <span data-ttu-id="1e4ff-178">Obsługuje środowisko wdrażania?</span><span class="sxs-lookup"><span data-stu-id="1e4ff-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="1e4ff-179">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="1e4ff-179">Limited</span></span> | <span data-ttu-id="1e4ff-180">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="1e4ff-180">Limited</span></span> | <span data-ttu-id="1e4ff-181">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-181">Yes</span></span> |
| <span data-ttu-id="1e4ff-182">Obsługuje wdrożenia inicjowane przez skrypty?</span><span class="sxs-lookup"><span data-stu-id="1e4ff-182">Supports scripted deployment?</span></span> | <span data-ttu-id="1e4ff-183">Ograniczone</span><span class="sxs-lookup"><span data-stu-id="1e4ff-183">Limited</span></span> | <span data-ttu-id="1e4ff-184">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-184">Yes</span></span> | <span data-ttu-id="1e4ff-185">Tak</span><span class="sxs-lookup"><span data-stu-id="1e4ff-185">Yes</span></span> |

<span data-ttu-id="1e4ff-186">W pozostałej części w tym temacie opisuje VSDBCMD przy użyciu programu MSBuild, aby wdrożyć projektów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="1e4ff-187">Opis procesu wdrażania</span><span class="sxs-lookup"><span data-stu-id="1e4ff-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="1e4ff-188">Narzędzie VSDBCMD pozwala wdrożyć bazę danych przy użyciu schematu bazy danych (plik .dbschema) lub manifest rozmieszczenia (plik .deploymanifest).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="1e4ff-189">W praktyce prawie zawsze użyjesz manifest wdrażania, ponieważ manifest wdrażania pozwala podać wartości domyślnej dla różnych właściwości wdrożenia i Znajdź wszystkie przed wdrożeniem lub po wdrożeniu skrypty SQL, który chcesz uruchomić.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="1e4ff-190">Na przykład to polecenie VSDBCMD służy do wdrażania **ContactManager** bazy danych na serwerze bazy danych w środowisku testowym:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>


[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]


<span data-ttu-id="1e4ff-191">W takim przypadku:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-191">In this case:</span></span>

- <span data-ttu-id="1e4ff-192">**/A** (lub **należy**) przełącznik określa, co ma VSDBCMD zrobić.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="1e4ff-193">Możesz ustawić **importu** lub **Wdróż**.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="1e4ff-194">**Importu** opcja jest używana do generowania pliku .dbschema z istniejącej bazy danych i **Wdróż** opcja jest używana do wdrażania pliku .dbschema do docelowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="1e4ff-195">**/Manifest** (lub **/ManifestFile**) przełącznik określa plik .deploymanifest, którą chcesz wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="1e4ff-196">Jeśli chcesz użyć pliku .dbschema zamiast tego należy użyć **/modelu** (lub **/ModelFile**) przełącznika.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="1e4ff-197">**/Cs** (lub **/ConnectionString**) przełącznik udostępnia parametry połączenia dla bazy danych serwera docelowego.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="1e4ff-198">Należy pamiętać, że to nie zawiera nazwy #x 2014; & bazy danych VSDBCMD musi połączyć się z serwerem, można utworzyć bazy danych. nie trzeba nawiązać połączenia z bazą danych poszczególnych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="1e4ff-199">Jeśli plik .deploymanifest zawiera parametry połączenia, można pominąć ten przełącznik.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="1e4ff-200">Jeśli mimo to należy użyć przełącznika, wartość przełącznika spowoduje zastąpienie wartości .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="1e4ff-201">**/P:TargetDatabase** właściwość zawiera nazwę chcesz przypisać do docelowej bazy danych podczas ich tworzenia.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-201">The **/p:TargetDatabase** property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="1e4ff-202">Zastępuje to wartość **TargetDatabase** właściwość w pliku .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-202">This overrides the value of the **TargetDatabase** property in the .deploymanifest file.</span></span> <span data-ttu-id="1e4ff-203">Można użyć **/p:** *[nazwa właściwości]*składni do konfigurowania różnych typów właściwości wdrożenia oraz zastąpić wszystkie zmienne SQLCMD zadeklarowany w pliku .sqlcmdvars.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-203">You can use the **/p:** *[property name]*syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="1e4ff-204">**/Dd+** (lub **/DeployToDatabase+**) przełącznika wskazuje, że chcesz utworzyć wdrożenie, a następnie wdrożyć ją w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="1e4ff-205">Jeśli określisz **/dd-**, lub pominięta, VSDBCMD wygeneruje skryptu wdrażania, ale nie zostaną wdrożone w środowisku docelowym.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="1e4ff-206">Ten przełącznik jest często źródło pomyłek i jest co omówiono bardziej szczegółowo w następnej sekcji.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="1e4ff-207">**/Script** (lub **/DeploymentScriptFile**) przełącznik określa, gdzie chcesz wygenerować skrypt wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="1e4ff-208">Ta wartość nie wpływa na proces wdrażania.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="1e4ff-209">Aby uzyskać więcej informacji o VSDBCMD, zobacz [dotyczące wiersza polecenia dla VSDBCMD. EXE (wdrożenia i importowania schematu)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) i [porady: Przygotowanie bazy danych do wdrożenia z wiersza polecenia przy użyciu VSDBCMD. EXE](https://msdn.microsoft.com/en-us/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/en-us/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/en-us/library/dd193258.aspx).</span></span>

<span data-ttu-id="1e4ff-210">Na przykład stosowania VSDBCMD w pliku projektu MSBuild zobacz [opis procesu kompilacji](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="1e4ff-211">Przykłady sposobu konfigurowania ustawień wdrażania bazy danych w wielu środowiskach, zobacz [Dostosowywanie wdrożenia bazy danych w wielu środowiskach](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="1e4ff-212">Opis przełącznika DeployToDatabase</span><span class="sxs-lookup"><span data-stu-id="1e4ff-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="1e4ff-213">Zachowanie **/dd** lub **/DeployToDatabase** przełącznika zależy od tego, czy używasz VSDBCMD z pliku .dbschema lub .deploymanifest.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="1e4ff-214">Jeśli używasz pliku .dbschema zachowanie jest bardzo prosta:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="1e4ff-215">Jeśli określisz **/dd+** lub **/dd**, VSDBCMD wygenerowania skryptu wdrażania i wdrażania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="1e4ff-216">Jeśli określisz **/dd-** lub pominięta, VSDBCMD wygeneruje tylko skryptu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="1e4ff-217">Jeśli używasz pliku .deploymanifest zachowanie jest znacznie bardziej skomplikowane.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="1e4ff-218">Wynika to z faktu plik .deploymanifest zawiera nazwę właściwości **DeployToDatabase** również określa, czy baza danych jest wdrożona.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>


[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]


<span data-ttu-id="1e4ff-219">Ta właściwość ma wartość zgodnie z właściwości projektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="1e4ff-220">Jeśli ustawisz **wdrażanie akcji** do **utworzyć skrypt wdrożenia (SQL)**, wartość będzie **False**.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="1e4ff-221">Jeśli ustawisz **wdrażanie akcji** do **Tworzenie skryptu wdrażania (SQL) i wdrażanie do bazy danych**, wartość będzie **True**.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="1e4ff-222">Te ustawienia są skojarzone z określonej kompilacji configuration i platform.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="1e4ff-223">Na przykład skonfigurować ustawienia dla **debugowania** konfiguracji, a następnie opublikować za pomocą **wersji** konfiguracji, ustawienia nie będą używane.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>


![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="1e4ff-224">W tym scenariuszu **wdrażanie akcji** powinny być zawsze ustawiony na **utworzyć skrypt wdrożenia (SQL)**, ponieważ nie ma programu Visual Studio 2010, aby wdrożyć bazę danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="1e4ff-225">Innymi słowy **DeployToDatabase** właściwość powinna zawsze być **False**.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>


<span data-ttu-id="1e4ff-226">Gdy **DeployToDatabase** określono właściwości **/dd** przełącznika tylko zastępować właściwość, jeśli wartość właściwości jest **false**:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="1e4ff-227">Jeśli **DeployToDatabase** właściwość jest **False**, i określeniu **/dd+** lub **/dd**, zastąpią VSDBCMD  **DeployToDatabase** właściwości i wdrażania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="1e4ff-228">Jeśli **DeployToDatabase** właściwość jest **False**, i określeniu **/dd-** lub pominięta, VSDBCMD nie wdroży bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="1e4ff-229">Jeśli **DeployToDatabase** właściwość jest **True**, VSDBCMD zignoruje przełącznika i wdrażania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="1e4ff-230">Skrypt wdrożenia jest generowany w każdym przypadku, niezależnie od tego, czy wdrażana również bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="1e4ff-231">Wniosek</span><span class="sxs-lookup"><span data-stu-id="1e4ff-231">Conclusion</span></span>

<span data-ttu-id="1e4ff-232">W tym temacie podano Omówienie procesu tworzenia i wdrażania dla projektów bazy danych w Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="1e4ff-233">Opisano również, jak używasz VSDBCMD.exe przy użyciu programu MSBuild do obsługi wdrożenia bazy danych w skali przedsiębiorstwa.</span><span class="sxs-lookup"><span data-stu-id="1e4ff-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="1e4ff-234">Aby uzyskać więcej informacji o jego działaniu w praktyce, zobacz [Dostosowywanie wdrożenia bazy danych w wielu środowiskach](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="1e4ff-235">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="1e4ff-235">Further Reading</span></span>

<span data-ttu-id="1e4ff-236">Aby uzyskać informacje na temat sposobu dostosowywania wdrożenia bazy danych, tworząc plik konfiguracji wdrożenia osobne dla każdego środowiska, zobacz [Dostosowywanie wdrożenia bazy danych w wielu środowiskach](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="1e4ff-237">Aby uzyskać wskazówki dotyczące sposobu konfigurowania członkostwo roli bazy danych, uruchamiając skrypt po wdrożeniu, zobacz [wdrażanie członkostwo roli bazy danych do środowisk testowych](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="1e4ff-238">Aby uzyskać wskazówki dotyczące zarządzania niektóre wyjątkowe wyzwanie członkostwo baz danych nałożyć, zobacz [wdrażanie baz danych członkostwa w środowiskach przedsiębiorstw](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="1e4ff-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="1e4ff-239">Te tematy w witrynie MSDN zawierają szerszych wskazówki i informacje dla projektów bazy danych programu Visual Studio i procesu wdrażania bazy danych:</span><span class="sxs-lookup"><span data-stu-id="1e4ff-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="1e4ff-240">Projektów dodatku programu SQL Server bazy danych dla programu Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="1e4ff-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/en-us/library/ff678491.aspx)
- [<span data-ttu-id="1e4ff-241">Zarządzanie zmianą bazy danych</span><span class="sxs-lookup"><span data-stu-id="1e4ff-241">Managing Database Change</span></span>](https://msdn.microsoft.com/en-us/library/aa833404.aspx)
- [<span data-ttu-id="1e4ff-242">Porady: Przygotowanie bazy danych do wdrożenia z wiersza polecenia przy użyciu VSDBCMD. WYWOŁANIE PLIKU EXE</span><span class="sxs-lookup"><span data-stu-id="1e4ff-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/en-us/library/dd193258.aspx)
- [<span data-ttu-id="1e4ff-243">Omówienie bazy danych kompilacji i wdrożenia</span><span class="sxs-lookup"><span data-stu-id="1e4ff-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/en-us/library/aa833165.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="1e4ff-244">[Poprzednie](deploying-web-packages.md)
[dalej](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="1e4ff-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
