---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
title: Sortowanie, filtrowanie i stronicowania Entity Framework w aplikacji platformy ASP.NET MVC | Dokumentacja firmy Microsoft
author: tdykstra
description: Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji ASP.NET MVC 5 za pomocą Entity Framework 6 Code First i Visual Studio...
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/01/2015
ms.topic: article
ms.assetid: d5723e46-41fe-4d09-850a-e03b9e285bfa
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: 02b7d988202966dc0011eeed32cd632c6e0565b4
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
---
<a name="sorting-filtering-and-paging-with-the-entity-framework-in-an-aspnet-mvc-application"></a><span data-ttu-id="218b3-103">Sortowanie, filtrowanie i stronicowania Entity Framework w aplikacji platformy ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="218b3-103">Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application</span></span>
====================
<span data-ttu-id="218b3-104">Przez [Dykstra niestandardowy](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="218b3-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="218b3-105">[Pobieranie ukończone projektu](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) lub [pobierania plików PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="218b3-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="218b3-106">Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji ASP.NET MVC 5 za pomocą Entity Framework 6 Code First i Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="218b3-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="218b3-107">Informacje o samouczek serii, zobacz [pierwszy samouczek z tej serii](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="218b3-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>


<span data-ttu-id="218b3-108">W poprzednich instrukcji zaimplementowana zestaw stron sieci web dla podstawowe operacje CRUD na `Student` jednostek.</span><span class="sxs-lookup"><span data-stu-id="218b3-108">In the previous tutorial you implemented a set of web pages for basic CRUD operations for `Student` entities.</span></span> <span data-ttu-id="218b3-109">W tym samouczku można dodać sortowanie, filtrowanie i funkcje stronicowania **studentów** strony indeksu.</span><span class="sxs-lookup"><span data-stu-id="218b3-109">In this tutorial you'll add sorting, filtering, and paging functionality to the **Students** Index page.</span></span> <span data-ttu-id="218b3-110">Utworzysz także strona, która jest prosta grupa.</span><span class="sxs-lookup"><span data-stu-id="218b3-110">You'll also create a page that does simple grouping.</span></span>

<span data-ttu-id="218b3-111">Na poniższej ilustracji przedstawiono wygląd strony po zakończeniu.</span><span class="sxs-lookup"><span data-stu-id="218b3-111">The following illustration shows what the page will look like when you're done.</span></span> <span data-ttu-id="218b3-112">Nagłówki kolumn są łącza, które użytkownik może kliknąć, aby sortować według tej kolumny.</span><span class="sxs-lookup"><span data-stu-id="218b3-112">The column headings are links that the user can click to sort by that column.</span></span> <span data-ttu-id="218b3-113">Kliknięcie nagłówka wielokrotnie kolumny przełączanie się między kolumny sortowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-113">Clicking a column heading repeatedly toggles between ascending and descending sort order.</span></span>

![Students_Index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

## <a name="add-column-sort-links-to-the-students-index-page"></a><span data-ttu-id="218b3-115">Dodaj kolumny sortowania łącza do strony indeksu uczniów lub studentów</span><span class="sxs-lookup"><span data-stu-id="218b3-115">Add Column Sort Links to the Students Index Page</span></span>

<span data-ttu-id="218b3-116">Aby dodać sortowanie do strony indeksu dla użytkowników domowych, zostanie zmieniona `Index` metody `Student` kontrolera i Dodaj kod, aby `Student` Indeksuj zawartości widoku.</span><span class="sxs-lookup"><span data-stu-id="218b3-116">To add sorting to the Student Index page, you'll change the `Index` method of the `Student` controller and add code to the `Student` Index view.</span></span>

### <a name="add-sorting-functionality-to-the-index-method"></a><span data-ttu-id="218b3-117">Dodawanie funkcji do metody indeksu sortowania</span><span class="sxs-lookup"><span data-stu-id="218b3-117">Add Sorting Functionality to the Index Method</span></span>

<span data-ttu-id="218b3-118">W *Controllers\StudentController.cs*, Zastąp `Index` metodę z następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="218b3-118">In *Controllers\StudentController.cs*, replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs)]

<span data-ttu-id="218b3-119">Ten kod odbiera `sortOrder` parametr ciągu zapytania w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="218b3-119">This code receives a `sortOrder` parameter from the query string in the URL.</span></span> <span data-ttu-id="218b3-120">Wartość ciągu kwerendy są udostępniane przez program ASP.NET MVC jako parametr do metody akcji.</span><span class="sxs-lookup"><span data-stu-id="218b3-120">The query string value is provided by ASP.NET MVC as a parameter to the action method.</span></span> <span data-ttu-id="218b3-121">Parametr będzie ciąg, który jest "Name" lub "Date", opcjonalnie, podkreślenia, a ciąg "desc", aby określić w kolejności malejącej.</span><span class="sxs-lookup"><span data-stu-id="218b3-121">The parameter will be a string that's either "Name" or "Date", optionally followed by an underscore and the string "desc" to specify descending order.</span></span> <span data-ttu-id="218b3-122">Domyślna kolejność sortowania jest rosnąca.</span><span class="sxs-lookup"><span data-stu-id="218b3-122">The default sort order is ascending.</span></span>

<span data-ttu-id="218b3-123">Żądana strona indeksu, po raz pierwszy nie jest Brak ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="218b3-123">The first time the Index page is requested, there's no query string.</span></span> <span data-ttu-id="218b3-124">Studenci są wyświetlane w rosnącej kolejności przez `LastName`, co jest ustawieniem domyślnym, zgodnie z ustaleniami w przypadku fall-through `switch` instrukcji.</span><span class="sxs-lookup"><span data-stu-id="218b3-124">The students are displayed in ascending order by `LastName`, which is the default as established by the fall-through case in the `switch` statement.</span></span> <span data-ttu-id="218b3-125">Gdy użytkownik klika hiperłącze nagłówek kolumny, odpowiedni `sortOrder` wartość jest podana w ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="218b3-125">When the user clicks a column heading hyperlink, the appropriate `sortOrder` value is provided in the query string.</span></span>

<span data-ttu-id="218b3-126">Dwa `ViewBag` zmienne są używane, aby widok było skonfigurowanie hiperłącza nagłówek kolumny z wartości typu QueryString odpowiednie:</span><span class="sxs-lookup"><span data-stu-id="218b3-126">The two `ViewBag` variables are used so that the view can configure the column heading hyperlinks with the appropriate query string values:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs)]

<span data-ttu-id="218b3-127">Są to trójargumentowy instrukcje.</span><span class="sxs-lookup"><span data-stu-id="218b3-127">These are ternary statements.</span></span> <span data-ttu-id="218b3-128">Pierwsza z nich Określa, że jeśli `sortOrder` parametr ma wartość null lub pusty, `ViewBag.NameSortParm` powinien być ustawiony na "nazwa\_desc"; w przeciwnym razie należy ustawić pustego ciągu.</span><span class="sxs-lookup"><span data-stu-id="218b3-128">The first one specifies that if the `sortOrder` parameter is null or empty, `ViewBag.NameSortParm` should be set to "name\_desc"; otherwise, it should be set to an empty string.</span></span> <span data-ttu-id="218b3-129">Te dwie instrukcje włączyć widok, aby ustawić hiperłącza nagłówek kolumny w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="218b3-129">These two statements enable the view to set the column heading hyperlinks as follows:</span></span>

| <span data-ttu-id="218b3-130">Bieżącej kolejności sortowania</span><span class="sxs-lookup"><span data-stu-id="218b3-130">Current sort order</span></span> | <span data-ttu-id="218b3-131">Ostatnia nazwa hiperłącza</span><span class="sxs-lookup"><span data-stu-id="218b3-131">Last Name Hyperlink</span></span> | <span data-ttu-id="218b3-132">Data hiperłącza</span><span class="sxs-lookup"><span data-stu-id="218b3-132">Date Hyperlink</span></span> |
| --- | --- | --- |
| <span data-ttu-id="218b3-133">Ostatni nazwy, rosnąco</span><span class="sxs-lookup"><span data-stu-id="218b3-133">Last Name ascending</span></span> | <span data-ttu-id="218b3-134">descending</span><span class="sxs-lookup"><span data-stu-id="218b3-134">descending</span></span> | <span data-ttu-id="218b3-135">ascending</span><span class="sxs-lookup"><span data-stu-id="218b3-135">ascending</span></span> |
| <span data-ttu-id="218b3-136">Ostatni nazwy, malejąco</span><span class="sxs-lookup"><span data-stu-id="218b3-136">Last Name descending</span></span> | <span data-ttu-id="218b3-137">ascending</span><span class="sxs-lookup"><span data-stu-id="218b3-137">ascending</span></span> | <span data-ttu-id="218b3-138">ascending</span><span class="sxs-lookup"><span data-stu-id="218b3-138">ascending</span></span> |
| <span data-ttu-id="218b3-139">Data w kolejności rosnącej</span><span class="sxs-lookup"><span data-stu-id="218b3-139">Date ascending</span></span> | <span data-ttu-id="218b3-140">ascending</span><span class="sxs-lookup"><span data-stu-id="218b3-140">ascending</span></span> | <span data-ttu-id="218b3-141">descending</span><span class="sxs-lookup"><span data-stu-id="218b3-141">descending</span></span> |
| <span data-ttu-id="218b3-142">Data, malejąco</span><span class="sxs-lookup"><span data-stu-id="218b3-142">Date descending</span></span> | <span data-ttu-id="218b3-143">ascending</span><span class="sxs-lookup"><span data-stu-id="218b3-143">ascending</span></span> | <span data-ttu-id="218b3-144">ascending</span><span class="sxs-lookup"><span data-stu-id="218b3-144">ascending</span></span> |

<span data-ttu-id="218b3-145">W metodzie [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) określić kolumnę sortowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-145">The method uses [LINQ to Entities](https://msdn.microsoft.com/library/bb386964.aspx) to specify the column to sort by.</span></span> <span data-ttu-id="218b3-146">Kod tworzy [IQueryable](https://msdn.microsoft.com/library/bb351562.aspx) zmiennej przed `switch` instrukcji, modyfikuje go w `switch` instrukcji i wywołania `ToList` metody po `switch` instrukcji.</span><span class="sxs-lookup"><span data-stu-id="218b3-146">The code creates an [IQueryable](https://msdn.microsoft.com/library/bb351562.aspx) variable before the `switch` statement, modifies it in the `switch` statement, and calls the `ToList` method after the `switch` statement.</span></span> <span data-ttu-id="218b3-147">Podczas tworzenia i modyfikowania `IQueryable` zmiennych, nie zapytanie jest wysyłane do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="218b3-147">When you create and modify `IQueryable` variables, no query is sent to the database.</span></span> <span data-ttu-id="218b3-148">Kwerenda nie została wykonana, do momentu konwersji `IQueryable` obiektu do kolekcji, wywołując metodę, takich jak `ToList`.</span><span class="sxs-lookup"><span data-stu-id="218b3-148">The query is not executed until you convert the `IQueryable` object into a collection by calling a method such as `ToList`.</span></span> <span data-ttu-id="218b3-149">W związku z tym powoduje ten kod w jednym zapytaniu, która nie jest wykonywana do czasu `return View` instrukcji.</span><span class="sxs-lookup"><span data-stu-id="218b3-149">Therefore, this code results in a single query that is not executed until the `return View` statement.</span></span>

<span data-ttu-id="218b3-150">Jako alternatywę do zapisywania różnych instrukcje LINQ dla każdego porządek sortowania można dynamicznie utworzyć instrukcję LINQ.</span><span class="sxs-lookup"><span data-stu-id="218b3-150">As an alternative to writing different LINQ statements for each sort order, you can dynamically create a LINQ statement.</span></span> <span data-ttu-id="218b3-151">Uzyskać informacji o dynamicznych LINQ, zobacz [dynamiczne LINQ](https://go.microsoft.com/fwlink/?LinkID=323957).</span><span class="sxs-lookup"><span data-stu-id="218b3-151">For information about dynamic LINQ, see [Dynamic LINQ](https://go.microsoft.com/fwlink/?LinkID=323957).</span></span>

### <a name="add-column-heading-hyperlinks-to-the-student-index-view"></a><span data-ttu-id="218b3-152">Dodawanie hiperłącza do widoku indeksu uczniów nagłówek kolumny</span><span class="sxs-lookup"><span data-stu-id="218b3-152">Add Column Heading Hyperlinks to the Student Index View</span></span>

<span data-ttu-id="218b3-153">W *Views\Student\Index.cshtml*, Zastąp `<tr>` i `<th>` elementy wiersz nagłówka z wyróżniony kod:</span><span class="sxs-lookup"><span data-stu-id="218b3-153">In *Views\Student\Index.cshtml*, replace the `<tr>` and `<th>` elements for the heading row with the highlighted code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cshtml?highlight=5-15)]

<span data-ttu-id="218b3-154">Ten kod używa tych informacji w `ViewBag` właściwości do skonfigurowania hiperłącza z zapytaniem odpowiednie ciągu wartości.</span><span class="sxs-lookup"><span data-stu-id="218b3-154">This code uses the information in the `ViewBag` properties to set up hyperlinks with the appropriate query string values.</span></span>

<span data-ttu-id="218b3-155">Uruchom strony, a następnie kliknij przycisk **nazwisko** i **Data rejestracji** działa nagłówki kolumn, aby zweryfikować, że sortowanie.</span><span class="sxs-lookup"><span data-stu-id="218b3-155">Run the page and click the **Last Name** and **Enrollment Date** column headings to verify that sorting works.</span></span>

![Students_Index_page_with_sort_hyperlinks](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="218b3-157">Po kliknięciu **nazwisko** nagłówek, studentów są wyświetlane w porządku malejącym ostatnia nazwa.</span><span class="sxs-lookup"><span data-stu-id="218b3-157">After you click the **Last Name** heading, students are displayed in descending last name order.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

## <a name="add-a-search-box-to-the-students-index-page"></a><span data-ttu-id="218b3-158">Dodaj pole wyszukiwania do strony indeksu uczniów lub studentów</span><span class="sxs-lookup"><span data-stu-id="218b3-158">Add a Search Box to the Students Index Page</span></span>

<span data-ttu-id="218b3-159">Aby dodać filtrowanie do strony indeksu studentów, będzie Dodaj pole tekstowe i przycisk Prześlij do widoku i wprowadzić odpowiednie zmiany w `Index` metody.</span><span class="sxs-lookup"><span data-stu-id="218b3-159">To add filtering to the Students Index page, you'll add a text box and a submit button to the view and make corresponding changes in the `Index` method.</span></span> <span data-ttu-id="218b3-160">Pole tekstowe umożliwi wprowadź ciąg do wyszukania w imię pola imienia i nazwiska.</span><span class="sxs-lookup"><span data-stu-id="218b3-160">The text box will let you enter a string to search for in the first name and last name fields.</span></span>

### <a name="add-filtering-functionality-to-the-index-method"></a><span data-ttu-id="218b3-161">Dodawanie funkcji filtrowania do Index — metoda</span><span class="sxs-lookup"><span data-stu-id="218b3-161">Add Filtering Functionality to the Index Method</span></span>

<span data-ttu-id="218b3-162">W *Controllers\StudentController.cs*, Zastąp `Index` metodę z następującym kodem (zmiany zostały wyróżnione):</span><span class="sxs-lookup"><span data-stu-id="218b3-162">In *Controllers\StudentController.cs*, replace the `Index` method with the following code (the changes are highlighted):</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs?highlight=1,7-11)]

<span data-ttu-id="218b3-163">Dodano `searchString` parametr `Index` metody.</span><span class="sxs-lookup"><span data-stu-id="218b3-163">You've added a `searchString` parameter to the `Index` method.</span></span> <span data-ttu-id="218b3-164">Wartość ciągu wyszukiwania są odebrane z pola tekstowego, która zostanie dodana do widoku indeksu.</span><span class="sxs-lookup"><span data-stu-id="218b3-164">The search string value is received from a text box that you'll add to the Index view.</span></span> <span data-ttu-id="218b3-165">Również dodane do instrukcji LINQ `where` klauzuli, który wybiera tylko studentów, w których imię lub nazwisko zawiera ciąg wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="218b3-165">You've also added to the LINQ statement a `where` clause that selects only students whose first name or last name contains the search string.</span></span> <span data-ttu-id="218b3-166">Instrukcja, która dodaje [gdzie](https://msdn.microsoft.com/library/bb535040.aspx) klauzuli jest wykonywane tylko wtedy, gdy wartość do wyszukania.</span><span class="sxs-lookup"><span data-stu-id="218b3-166">The statement that adds the [where](https://msdn.microsoft.com/library/bb535040.aspx) clause is executed only if there's a value to search for.</span></span>

> [!NOTE]
> <span data-ttu-id="218b3-167">W wielu przypadkach można wywołać tej samej metody zestaw jednostek Entity Framework lub jako metodę rozszerzenie w kolekcji w pamięci.</span><span class="sxs-lookup"><span data-stu-id="218b3-167">In many cases you can call the same method either on an Entity Framework entity set or as an extension method on an in-memory collection.</span></span> <span data-ttu-id="218b3-168">Wyniki są zazwyczaj takie same, ale w niektórych przypadkach może się różnić.</span><span class="sxs-lookup"><span data-stu-id="218b3-168">The results are normally the same but in some cases may be different.</span></span>
> 
> <span data-ttu-id="218b3-169">Na przykład, .NET Framework wykonania `Contains` metoda zwraca wszystkie wiersze, gdy przekazać pusty ciąg do niego, ale dostawcy programu Entity Framework dla programu SQL Server Compact 4.0 nie zwraca żadnych wierszy obecność pustych ciągów.</span><span class="sxs-lookup"><span data-stu-id="218b3-169">For example, the .NET Framework implementation of the `Contains` method returns all rows when you pass an empty string to it, but the Entity Framework provider for SQL Server Compact 4.0 returns zero rows for empty strings.</span></span> <span data-ttu-id="218b3-170">W związku z tym kod w przykładzie (umieszczanie `Where` instrukcja wewnątrz `if` instrukcji) zapewnia uzyskać ten sam rezultat dla wszystkich wersji programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="218b3-170">Therefore the code in the example (putting the `Where` statement inside an `if` statement) makes sure that you get the same results for all versions of SQL Server.</span></span> <span data-ttu-id="218b3-171">Ponadto wdrożenia programu .NET Framework z `Contains` metoda wykonuje porównania z uwzględnieniem wielkości liter domyślnie, ale dostawcy programu Entity Framework SQL Server wykonania porównania bez uwzględniania wielkości liter, domyślnie.</span><span class="sxs-lookup"><span data-stu-id="218b3-171">Also, the .NET Framework implementation of the `Contains` method performs a case-sensitive comparison by default, but Entity Framework SQL Server providers perform case-insensitive comparisons by default.</span></span> <span data-ttu-id="218b3-172">W związku z tym wywołaniem `ToUpper` metody, aby jawnie bez uwzględniania wielkości liter testu zapewnia wyników nie należy zmieniać po zmianie kod później do korzystania z repozytorium, która będzie zwracać `IEnumerable` kolekcji zamiast `IQueryable` obiektu.</span><span class="sxs-lookup"><span data-stu-id="218b3-172">Therefore, calling the `ToUpper` method to make the test explicitly case-insensitive ensures that results do not change when you change the code later to use a repository, which will return an `IEnumerable` collection instead of an `IQueryable` object.</span></span> <span data-ttu-id="218b3-173">(Podczas wywoływania `Contains` metoda `IEnumerable` kolekcji, możesz pobrać wdrożenia programu .NET Framework; podczas wywoływania go na `IQueryable` obiektu, możesz uzyskać implementacji dostawcy bazy danych.)</span><span class="sxs-lookup"><span data-stu-id="218b3-173">(When you call the `Contains` method on an `IEnumerable` collection, you get the .NET Framework implementation; when you call it on an `IQueryable` object, you get the database provider implementation.)</span></span>
> 
> <span data-ttu-id="218b3-174">Obsługa null również mogą być inne dla dostawców innej bazy danych lub jeśli używasz `IQueryable` porównywany obiekt, korzystając z `IEnumerable` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="218b3-174">Null handling may also be different for different database providers or when you use an `IQueryable` object compared to when you use an `IEnumerable` collection.</span></span> <span data-ttu-id="218b3-175">Na przykład w niektórych scenariuszach `Where` warunku, takich jak `table.Column != 0` nie może zwracać kolumn, które mają `null` jako wartość.</span><span class="sxs-lookup"><span data-stu-id="218b3-175">For example, in some scenarios a `Where` condition such as `table.Column != 0` may not return columns that have `null` as the value.</span></span> <span data-ttu-id="218b3-176">Aby uzyskać więcej informacji, zobacz [nieprawidłowa obsługa zmiennych wartości null w klauzuli 'where'](https://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015361-incorrect-handling-of-null-variables-in-where-cl).</span><span class="sxs-lookup"><span data-stu-id="218b3-176">For more information, see [Incorrect handling of null variables in 'where' clause](https://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1015361-incorrect-handling-of-null-variables-in-where-cl).</span></span>


### <a name="add-a-search-box-to-the-student-index-view"></a><span data-ttu-id="218b3-177">Dodaj pole wyszukiwania do widoku indeksu dla użytkowników domowych</span><span class="sxs-lookup"><span data-stu-id="218b3-177">Add a Search Box to the Student Index View</span></span>

<span data-ttu-id="218b3-178">W *Views\Student\Index.cshtml*, Dodaj wyróżniony kod bezpośrednio przed rozpoczęciem `table` tag, aby można było utworzyć podpis pola tekstowego, a **wyszukiwania** przycisku.</span><span class="sxs-lookup"><span data-stu-id="218b3-178">In *Views\Student\Index.cshtml*, add the highlighted code immediately before the opening `table` tag in order to create a caption, a text box, and a **Search** button.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cshtml?highlight=5-10)]

<span data-ttu-id="218b3-179">Uruchom strony, wprowadź ciąg wyszukiwania, a następnie kliknij przycisk **wyszukiwania** Aby sprawdzić, czy działa filtrowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-179">Run the page, enter a search string, and click **Search** to verify that filtering is working.</span></span>

![Students_Index_page_with_search_box](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="218b3-181">Należy zauważyć, że adres URL nie zawiera "" ciąg wyszukiwania, co oznacza zakładki tej strony, nie będzie uzyskanie wyfiltrowanej listy używania zakładki.</span><span class="sxs-lookup"><span data-stu-id="218b3-181">Notice the URL doesn't contain the "an" search string, which means that if you bookmark this page, you won't get the filtered list when you use the bookmark.</span></span> <span data-ttu-id="218b3-182">Dotyczy to również łącza sortowania kolumn, ponieważ sortowania całą listę.</span><span class="sxs-lookup"><span data-stu-id="218b3-182">This applies also to the column sort links, as they will sort the whole list.</span></span> <span data-ttu-id="218b3-183">Użytkownik zmieni **wyszukiwania** przycisk, aby użyć ciągów zapytania dla kryteriów filtru później w samouczku.</span><span class="sxs-lookup"><span data-stu-id="218b3-183">You'll change the **Search** button to use query strings for filter criteria later in the tutorial.</span></span>

## <a name="add-paging-to-the-students-index-page"></a><span data-ttu-id="218b3-184">Dodaj stronicowania do strony indeksu uczniów lub studentów</span><span class="sxs-lookup"><span data-stu-id="218b3-184">Add Paging to the Students Index Page</span></span>

<span data-ttu-id="218b3-185">Aby dodać stronicowania do strony indeksu studentów, rozpocznie instalując **PagedList.Mvc** pakietu NuGet.</span><span class="sxs-lookup"><span data-stu-id="218b3-185">To add paging to the Students Index page, you'll start by installing the **PagedList.Mvc** NuGet package.</span></span> <span data-ttu-id="218b3-186">Następnie będzie można wprowadzić dodatkowe zmiany w `Index` — metoda i Dodaj stronicowania łącza do `Index` widoku.</span><span class="sxs-lookup"><span data-stu-id="218b3-186">Then you'll make additional changes in the `Index` method and add paging links to the `Index` view.</span></span> <span data-ttu-id="218b3-187">**PagedList.Mvc** jest jednym z wielu dobrej stronicowania i sortowania pakietów dla platformy ASP.NET MVC i użyć w tym polu jest przeznaczona tylko na przykład nie jako zalecenie dla niego za pośrednictwem innych opcji.</span><span class="sxs-lookup"><span data-stu-id="218b3-187">**PagedList.Mvc** is one of many good paging and sorting packages for ASP.NET MVC, and its use here is intended only as an example, not as a recommendation for it over other options.</span></span> <span data-ttu-id="218b3-188">Na poniższej ilustracji przedstawiono łącza stronicowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-188">The following illustration shows the paging links.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)

### <a name="install-the-pagedlistmvc-nuget-package"></a><span data-ttu-id="218b3-190">Zainstaluj pakiet PagedList.MVC NuGet</span><span class="sxs-lookup"><span data-stu-id="218b3-190">Install the PagedList.MVC NuGet Package</span></span>

<span data-ttu-id="218b3-191">NuGet **PagedList.Mvc** pakiet automatycznie instaluje **PagedList** pakietu jako zależność.</span><span class="sxs-lookup"><span data-stu-id="218b3-191">The NuGet **PagedList.Mvc** package automatically installs the **PagedList** package as a dependency.</span></span> <span data-ttu-id="218b3-192">**PagedList** pakiet instaluje `PagedList` metody typu i rozszerzenia dla kolekcji `IQueryable` i `IEnumerable` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="218b3-192">The **PagedList** package installs a `PagedList` collection type and extension methods for `IQueryable` and `IEnumerable` collections.</span></span> <span data-ttu-id="218b3-193">Metody rozszerzenia tworzenia pojedynczej strony danych w `PagedList` kolekcji z Twojej `IQueryable` lub `IEnumerable`i `PagedList` kolekcji zawiera kilka właściwości i metody, które ułatwiają stronicowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-193">The extension methods create a single page of data in a `PagedList` collection out of your `IQueryable` or `IEnumerable`, and the `PagedList` collection provides several properties and methods that facilitate paging.</span></span> <span data-ttu-id="218b3-194">**PagedList.Mvc** pakiet Instaluje pomocnika stronicowania, który wyświetla przyciski stronicowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-194">The **PagedList.Mvc** package installs a paging helper that displays the paging buttons.</span></span>

<span data-ttu-id="218b3-195">Z **narzędzia** menu, wybierz opcję **Menedżer pakietów biblioteki** , a następnie **Konsola Menedżera pakietów**.</span><span class="sxs-lookup"><span data-stu-id="218b3-195">From the **Tools** menu, select **Library Package Manager** and then **Package Manager Console**.</span></span>

<span data-ttu-id="218b3-196">W **Konsola Menedżera pakietów** okna, upewnij się, że **źródła pakietu** jest **nuget.org** i **domyślny projekt** jest **ContosoUniversity**, a następnie wprowadź następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="218b3-196">In the **Package Manager Console** window, make sure the **Package source** is **nuget.org** and the **Default project** is **ContosoUniversity**, and then enter the following command:</span></span>

`Install-Package PagedList.Mvc`

![Zainstaluj PagedList.Mvc](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="218b3-198">Skompiluj projekt.</span><span class="sxs-lookup"><span data-stu-id="218b3-198">Build the project.</span></span> 

### <a name="add-paging-functionality-to-the-index-method"></a><span data-ttu-id="218b3-199">Dodawanie funkcji stronicowania do Index — metoda</span><span class="sxs-lookup"><span data-stu-id="218b3-199">Add Paging Functionality to the Index Method</span></span>

<span data-ttu-id="218b3-200">W *Controllers\StudentController.cs*, Dodaj `using` instrukcji dla `PagedList` przestrzeni nazw:</span><span class="sxs-lookup"><span data-stu-id="218b3-200">In *Controllers\StudentController.cs*, add a `using` statement for the `PagedList` namespace:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.cs)]

<span data-ttu-id="218b3-201">Zastąp `Index` metodę z następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="218b3-201">Replace the `Index` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample7.cs?highlight=1,3,7-16,41-43)]

<span data-ttu-id="218b3-202">Ten kod dodaje `page` parametru bieżącego parametru kolejność sortowania i bieżącego parametru filtru w podpisie metody:</span><span class="sxs-lookup"><span data-stu-id="218b3-202">This code adds a `page` parameter, a current sort order parameter, and a current filter parameter to the method signature:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample8.cs)]

<span data-ttu-id="218b3-203">Po raz pierwszy, ta strona jest wyświetlana, lub jeśli użytkownik nie kliknął stronicowania i sortowania łącza, wszystkie parametry będzie miała wartość null.</span><span class="sxs-lookup"><span data-stu-id="218b3-203">The first time the page is displayed, or if the user hasn't clicked a paging or sorting link, all the parameters will be null.</span></span> <span data-ttu-id="218b3-204">Po kliknięciu łącza stronicowania `page` zmienna będzie zawierać numer strony do wyświetlenia.</span><span class="sxs-lookup"><span data-stu-id="218b3-204">If a paging link is clicked, the `page` variable will contain the page number to display.</span></span>

<span data-ttu-id="218b3-205">A `ViewBag` właściwości zapewnia widok z bieżącej kolejności sortowania, ponieważ to musi być uwzględniona w łącza stronicowania aby zapewnić porządek sortowania, taka sama podczas stronicowania:</span><span class="sxs-lookup"><span data-stu-id="218b3-205">A `ViewBag` property provides the view with the current sort order, because this must be included in the paging links in order to keep the sort order the same while paging:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample9.cs)]

<span data-ttu-id="218b3-206">Inna właściwość `ViewBag.CurrentFilter`, zapewnia widok bieżący ciąg filtru.</span><span class="sxs-lookup"><span data-stu-id="218b3-206">Another property, `ViewBag.CurrentFilter`, provides the view with the current filter string.</span></span> <span data-ttu-id="218b3-207">Ta wartość musi być uwzględniona w łącza stronicowania w celu utrzymania ustawień filtru podczas stronicowania i go muszą być przywrócone do pola tekstowego, gdy strona zostanie wyświetlony ponownie.</span><span class="sxs-lookup"><span data-stu-id="218b3-207">This value must be included in the paging links in order to maintain the filter settings during paging, and it must be restored to the text box when the page is redisplayed.</span></span> <span data-ttu-id="218b3-208">Jeśli ciąg wyszukiwania została zmieniona podczas stronicowania, strona musi zresetowana do wartości 1, nowy filtr może powodować różnych danych do wyświetlenia.</span><span class="sxs-lookup"><span data-stu-id="218b3-208">If the search string is changed during paging, the page has to be reset to 1, because the new filter can result in different data to display.</span></span> <span data-ttu-id="218b3-209">Ciąg wyszukiwania jest zmieniany, gdy wartość jest wprowadzana w polu tekstowym i kliknięciu przycisku Prześlij.</span><span class="sxs-lookup"><span data-stu-id="218b3-209">The search string is changed when a value is entered in the text box and the submit button is pressed.</span></span> <span data-ttu-id="218b3-210">W takim przypadku `searchString` parametru nie jest zerowa.</span><span class="sxs-lookup"><span data-stu-id="218b3-210">In that case, the `searchString` parameter is not null.</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample10.cs)]

<span data-ttu-id="218b3-211">Na końcu metody `ToPagedList` metody rozszerzenia dla uczniów lub studentów `IQueryable` obiektu konwertuje zapytań uczniów do pojedynczej strony studentów w typ kolekcji, który obsługuje stronicowanie.</span><span class="sxs-lookup"><span data-stu-id="218b3-211">At the end of the method, the `ToPagedList` extension method on the students `IQueryable` object converts the student query to a single page of students in a collection type that supports paging.</span></span> <span data-ttu-id="218b3-212">Tej stronie studentów są następnie przekazywane do widoku:</span><span class="sxs-lookup"><span data-stu-id="218b3-212">That single page of students is then passed to the view:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample11.cs)]

<span data-ttu-id="218b3-213">`ToPagedList` Metoda przyjmuje numer strony.</span><span class="sxs-lookup"><span data-stu-id="218b3-213">The `ToPagedList` method takes a page number.</span></span> <span data-ttu-id="218b3-214">Reprezentuje dwa znaki zapytania [łączenie null operator](https://msdn.microsoft.com/library/ms173224.aspx).</span><span class="sxs-lookup"><span data-stu-id="218b3-214">The two question marks represent the [null-coalescing operator](https://msdn.microsoft.com/library/ms173224.aspx).</span></span> <span data-ttu-id="218b3-215">Wartość domyślna dla typu dopuszczającego wartość null; definiuje operator łączenia wartości null wyrażenie `(page ?? 1)` oznacza zwrócić wartość `page` jeśli jego wartość, lub zwraca 1, jeśli `page` ma wartość null.</span><span class="sxs-lookup"><span data-stu-id="218b3-215">The null-coalescing operator defines a default value for a nullable type; the expression `(page ?? 1)` means return the value of `page` if it has a value, or return 1 if `page` is null.</span></span>

### <a name="add-paging-links-to-the-student-index-view"></a><span data-ttu-id="218b3-216">Dodawania łączy stronicowania w widoku indeksu dla użytkowników domowych</span><span class="sxs-lookup"><span data-stu-id="218b3-216">Add Paging Links to the Student Index View</span></span>

<span data-ttu-id="218b3-217">W *Views\Student\Index.cshtml*, Zastąp istniejący kod następującym kodem.</span><span class="sxs-lookup"><span data-stu-id="218b3-217">In *Views\Student\Index.cshtml*, replace the existing code with the following code.</span></span> <span data-ttu-id="218b3-218">Zmiany zostały wyróżnione.</span><span class="sxs-lookup"><span data-stu-id="218b3-218">The changes are highlighted.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample12.cshtml?highlight=1-3,6,9,14,17,24,30,55-56,58-59)]

<span data-ttu-id="218b3-219">`@model` Instrukcji w górnej części strony określa, czy widok teraz pobiera `PagedList` obiekt zamiast `List` obiektu.</span><span class="sxs-lookup"><span data-stu-id="218b3-219">The `@model` statement at the top of the page specifies that the view now gets a `PagedList` object instead of a `List` object.</span></span>

<span data-ttu-id="218b3-220">`using` Instrukcji dla `PagedList.Mvc` zapewnia dostęp do pomocniczego MVC przycisków stronicowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-220">The `using` statement for `PagedList.Mvc` gives access to the MVC helper for the paging buttons.</span></span>

<span data-ttu-id="218b3-221">Kod używane jest przeciążenie [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) umożliwiająca, aby określić [FormMethod.Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span><span class="sxs-lookup"><span data-stu-id="218b3-221">The code uses an overload of [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) that allows it to specify [FormMethod.Get](https://msdn.microsoft.com/library/system.web.mvc.formmethod(v=vs.100).aspx/css).</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample13.cshtml?highlight=1)]

<span data-ttu-id="218b3-222">Wartość domyślna [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) przesyła dane formularza przy użyciu metody POST, co oznacza, że parametry są przekazywane w treści wiadomości HTTP, a nie w adresie URL jako ciągi zapytań.</span><span class="sxs-lookup"><span data-stu-id="218b3-222">The default [BeginForm](https://msdn.microsoft.com/library/system.web.mvc.html.formextensions.beginform(v=vs.108).aspx) submits form data with a POST, which means that parameters are passed in the HTTP message body and not in the URL as query strings.</span></span> <span data-ttu-id="218b3-223">Po określeniu HTTP GET, formularza dane są przekazywane w adresie URL jako ciągi zapytania, który umożliwia użytkownikom zakładki adres URL.</span><span class="sxs-lookup"><span data-stu-id="218b3-223">When you specify HTTP GET, the form data is passed in the URL as query strings, which enables users to bookmark the URL.</span></span> <span data-ttu-id="218b3-224">[W3C wytyczne dotyczące stosowania HTTP GET](http://www.w3.org/2001/tag/doc/whenToUseGet.html) zaleca, aby powinny używać GET, gdy akcja nie powoduje aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="218b3-224">The [W3C guidelines for the use of HTTP GET](http://www.w3.org/2001/tag/doc/whenToUseGet.html) recommend that you should use GET when the action does not result in an update.</span></span>

<span data-ttu-id="218b3-225">Pole tekstowe jest inicjowany z aktualnie wyszukiwanego ciągu, więc po kliknięciu nowej strony można zobaczyć aktualnie wyszukiwanego ciągu.</span><span class="sxs-lookup"><span data-stu-id="218b3-225">The text box is initialized with the current search string so when you click a new page you can see the current search string.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample14.cshtml?highlight=1)]

<span data-ttu-id="218b3-226">Łącza nagłówka kolumny Użyj ciągu zapytania do przekazania do kontrolera aktualnie wyszukiwanego ciągu, dzięki czemu użytkownik może sortować w wynikach filtrowania:</span><span class="sxs-lookup"><span data-stu-id="218b3-226">The column header links use the query string to pass the current search string to the controller so that the user can sort within filter results:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample15.cshtml?highlight=1)]

<span data-ttu-id="218b3-227">Bieżącej strony i łączna liczba stron wyświetlanych.</span><span class="sxs-lookup"><span data-stu-id="218b3-227">The current page and total number of pages are displayed.</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample16.cshtml)]

<span data-ttu-id="218b3-228">Jeśli nie ma żadnych stron do wyświetlenia, wyświetlany jest "Page 0 0".</span><span class="sxs-lookup"><span data-stu-id="218b3-228">If there are no pages to display, "Page 0 of 0" is shown.</span></span> <span data-ttu-id="218b3-229">(W takim przypadku numer strony jest większa niż liczba stron ponieważ `Model.PageNumber` 1, a `Model.PageCount` to 0.)</span><span class="sxs-lookup"><span data-stu-id="218b3-229">(In that case the page number is greater than the page count because `Model.PageNumber` is 1, and `Model.PageCount` is 0.)</span></span>

<span data-ttu-id="218b3-230">Wyświetlane przyciski stronicowania przez `PagedListPager` pomocy:</span><span class="sxs-lookup"><span data-stu-id="218b3-230">The paging buttons are displayed by the `PagedListPager` helper:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample17.cshtml)]

<span data-ttu-id="218b3-231">`PagedListPager` Pomocnika udostępnia wiele opcji, które można dostosować, w tym adresy URL i style.</span><span class="sxs-lookup"><span data-stu-id="218b3-231">The `PagedListPager` helper provides a number of options that you can customize, including URLs and styling.</span></span> <span data-ttu-id="218b3-232">Aby uzyskać więcej informacji, zobacz [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) w witrynie GitHub.</span><span class="sxs-lookup"><span data-stu-id="218b3-232">For more information, see [TroyGoode / PagedList](https://github.com/TroyGoode/PagedList) on the GitHub site.</span></span>

<span data-ttu-id="218b3-233">Uruchom strony.</span><span class="sxs-lookup"><span data-stu-id="218b3-233">Run the page.</span></span>

![Students_index_page_with_paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image7.png)

<span data-ttu-id="218b3-235">Kliknij łącza stronicowania w różnych sortowania, aby upewnić się, że działa stronicowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-235">Click the paging links in different sort orders to make sure paging works.</span></span> <span data-ttu-id="218b3-236">Następnie wprowadź ciąg wyszukiwania i spróbuj stronicowania ponownie, aby sprawdzić, czy stronicowania również działa poprawnie z sortowania i filtrowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-236">Then enter a search string and try paging again to verify that paging also works correctly with sorting and filtering.</span></span>

![](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image8.png)

## <a name="create-an-about-page-that-shows-student-statistics"></a><span data-ttu-id="218b3-237">Utwórz o stronie, które znajdują się dane statystyczne uczniów</span><span class="sxs-lookup"><span data-stu-id="218b3-237">Create an About Page That Shows Student Statistics</span></span>

<span data-ttu-id="218b3-238">Contoso University witryny sieci Web przez strony będzie wyświetlane liczby studentów zostały zarejestrowane dla każdego dnia rejestracji.</span><span class="sxs-lookup"><span data-stu-id="218b3-238">For the Contoso University website's About page, you'll display how many students have enrolled for each enrollment date.</span></span> <span data-ttu-id="218b3-239">Wymaga to prosty i grupowania obliczeń grup.</span><span class="sxs-lookup"><span data-stu-id="218b3-239">This requires grouping and simple calculations on the groups.</span></span> <span data-ttu-id="218b3-240">W tym celu będzie wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="218b3-240">To accomplish this, you'll do the following:</span></span>

- <span data-ttu-id="218b3-241">Utwórz klasę modelu widoku danych, która należy do przekazania do widoku.</span><span class="sxs-lookup"><span data-stu-id="218b3-241">Create a view model class for the data that you need to pass to the view.</span></span>
- <span data-ttu-id="218b3-242">Modyfikowanie `About` metoda `Home` kontrolera.</span><span class="sxs-lookup"><span data-stu-id="218b3-242">Modify the `About` method in the `Home` controller.</span></span>
- <span data-ttu-id="218b3-243">Modyfikowanie `About` widoku.</span><span class="sxs-lookup"><span data-stu-id="218b3-243">Modify the `About` view.</span></span>

### <a name="create-the-view-model"></a><span data-ttu-id="218b3-244">Tworzenie modelu widoku</span><span class="sxs-lookup"><span data-stu-id="218b3-244">Create the View Model</span></span>

<span data-ttu-id="218b3-245">Utwórz *ViewModels* folderu w folderze projektu.</span><span class="sxs-lookup"><span data-stu-id="218b3-245">Create a *ViewModels* folder in the project folder.</span></span> <span data-ttu-id="218b3-246">W tym folderze, Dodaj plik klasy *EnrollmentDateGroup.cs* i Zastąp kod szablonu z następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="218b3-246">In that folder, add a class file *EnrollmentDateGroup.cs* and replace the template code with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample18.cs)]

### <a name="modify-the-home-controller"></a><span data-ttu-id="218b3-247">Modyfikowanie macierzystego kontrolera</span><span class="sxs-lookup"><span data-stu-id="218b3-247">Modify the Home Controller</span></span>

<span data-ttu-id="218b3-248">W *HomeController.cs*, Dodaj następujący `using` instrukcje w górnej części pliku:</span><span class="sxs-lookup"><span data-stu-id="218b3-248">In *HomeController.cs*, add the following `using` statements at the top of the file:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample19.cs)]

<span data-ttu-id="218b3-249">Dodaj zmienną klasy kontekstu bazy danych bezpośrednio po otwierającym nawiasie klamrowym klasy:</span><span class="sxs-lookup"><span data-stu-id="218b3-249">Add a class variable for the database context immediately after the opening curly brace for the class:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample20.cs?highlight=3)]

<span data-ttu-id="218b3-250">Zastąp `About` metodę z następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="218b3-250">Replace the `About` method with the following code:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample21.cs)]

<span data-ttu-id="218b3-251">Instrukcja LINQ grupy jednostek uczniowie według daty rejestracji oblicza liczbę jednostek w każdej grupie i przechowuje wyniki w kolekcji z `EnrollmentDateGroup` wyświetlić obiekty modelu.</span><span class="sxs-lookup"><span data-stu-id="218b3-251">The LINQ statement groups the student entities by enrollment date, calculates the number of entities in each group, and stores the results in a collection of `EnrollmentDateGroup` view model objects.</span></span>

<span data-ttu-id="218b3-252">Dodaj `Dispose` metody:</span><span class="sxs-lookup"><span data-stu-id="218b3-252">Add a `Dispose` method:</span></span>

[!code-csharp[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample22.cs)]

### <a name="modify-the-about-view"></a><span data-ttu-id="218b3-253">Zmodyfikuj widok — informacje</span><span class="sxs-lookup"><span data-stu-id="218b3-253">Modify the About View</span></span>

<span data-ttu-id="218b3-254">Zastąp kod w *Views\Home\About.cshtml* pliku następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="218b3-254">Replace the code in the *Views\Home\About.cshtml* file with the following code:</span></span>

[!code-cshtml[Main](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample23.cshtml)]

<span data-ttu-id="218b3-255">Uruchom aplikację i kliknij przycisk **o** łącza.</span><span class="sxs-lookup"><span data-stu-id="218b3-255">Run the app and click the **About** link.</span></span> <span data-ttu-id="218b3-256">Liczba studentów dla każdego dnia rejestracji jest wyświetlane w formie tabeli.</span><span class="sxs-lookup"><span data-stu-id="218b3-256">The count of students for each enrollment date is displayed in a table.</span></span>

![About_page](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image9.png)

## <a name="summary"></a><span data-ttu-id="218b3-258">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="218b3-258">Summary</span></span>

<span data-ttu-id="218b3-259">W tym samouczku przedstawiono sposób tworzenia modelu danych i implementować basic CRUD, sortowanie, filtrowanie, stronicowania i funkcja grupowania.</span><span class="sxs-lookup"><span data-stu-id="218b3-259">In this tutorial you've seen how to create a data model and implement basic CRUD, sorting, filtering, paging, and grouping functionality.</span></span> <span data-ttu-id="218b3-260">W następnym samouczku zostaną patrzeć bardziej zaawansowanych tematów, rozwijając modelu danych.</span><span class="sxs-lookup"><span data-stu-id="218b3-260">In the next tutorial you'll begin looking at more advanced topics by expanding the data model.</span></span>

<span data-ttu-id="218b3-261">Wystaw opinię na jak zbędne tego samouczka i co można możemy ulepszyć.</span><span class="sxs-lookup"><span data-stu-id="218b3-261">Please leave feedback on how you liked this tutorial and what we could improve.</span></span> <span data-ttu-id="218b3-262">Możesz również poprosić o nowe tematy w [Pokaż mnie jak z kodu](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span><span class="sxs-lookup"><span data-stu-id="218b3-262">You can also request new topics at [Show Me How With Code](http://aspnet.uservoice.com/forums/228522-show-me-how-with-code).</span></span>

<span data-ttu-id="218b3-263">Linki do innych zasobów programu Entity Framework, można znaleźć w [dostępu do danych programu ASP.NET - zalecane zasobów](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="218b3-263">Links to other Entity Framework resources can be found in [ASP.NET Data Access - Recommended Resources](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="218b3-264">[Poprzednie](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
> [dalej](connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md)</span><span class="sxs-lookup"><span data-stu-id="218b3-264">[Previous](implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application.md)
[Next](connection-resiliency-and-command-interception-with-the-entity-framework-in-an-asp-net-mvc-application.md)</span></span>
