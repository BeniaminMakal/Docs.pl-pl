---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc3/vb/examining-the-edit-methods-and-edit-view
title: Badanie metody edycji i widoku edycji (VB) | Dokumentacja firmy Microsoft
author: Rick-Anderson
description: "Ten samouczek pokazuje podstawowe informacje dotyczące tworzenia aplikacji sieci Web programu ASP.NET MVC przy użyciu Microsoft Visual Web Developer 2010 Express Service Pack 1, która jest..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/12/2011
ms.topic: article
ms.assetid: 5cb3c59b-1e96-464b-b3a8-c55607201872
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc3/vb/examining-the-edit-methods-and-edit-view
msc.type: authoredcontent
ms.openlocfilehash: 9a933324b48d4117d5d4c806920f1691a7ef7849
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/24/2018
---
<a name="examining-the-edit-methods-and-edit-view-vb"></a><span data-ttu-id="9e26a-103">Badanie widoku edycji (VB) i Edytuj metody</span><span class="sxs-lookup"><span data-stu-id="9e26a-103">Examining the Edit Methods and Edit View (VB)</span></span>
====================
<span data-ttu-id="9e26a-104">Przez [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="9e26a-104">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="9e26a-105">Ten samouczek pokazuje podstawowe informacje dotyczące tworzenia aplikacji sieci Web programu ASP.NET MVC przy użyciu Microsoft Visual Web Developer 2010 Express Service Pack 1, która jest bezpłatna wersja programu Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="9e26a-105">This tutorial will teach you the basics of building an ASP.NET MVC Web application using Microsoft Visual Web Developer 2010 Express Service Pack 1, which is a free version of Microsoft Visual Studio.</span></span> <span data-ttu-id="9e26a-106">Przed rozpoczęciem upewnij się, że po zainstalowaniu wymagania wstępne wymienione poniżej.</span><span class="sxs-lookup"><span data-stu-id="9e26a-106">Before you start, make sure you've installed the prerequisites listed below.</span></span> <span data-ttu-id="9e26a-107">Można zainstalować wszystkie z nich, klikając poniższe łącze: [Instalatora platformy sieci Web](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="9e26a-107">You can install all of them by clicking the following link: [Web Platform Installer](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack).</span></span> <span data-ttu-id="9e26a-108">Alternatywnie można zainstalować oddzielnie wymagania wstępne, korzystając z następujących linków:</span><span class="sxs-lookup"><span data-stu-id="9e26a-108">Alternatively, you can individually install the prerequisites using the following links:</span></span>
> 
> - [<span data-ttu-id="9e26a-109">Visual Studio Web Developer Express z dodatkiem SP1 wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="9e26a-109">Visual Studio Web Developer Express SP1 prerequisites</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appid=VWD2010SP1Pack)
> - [<span data-ttu-id="9e26a-110">Aktualizacji narzędzi programu ASP.NET MVC 3</span><span class="sxs-lookup"><span data-stu-id="9e26a-110">ASP.NET MVC 3 Tools Update</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=MVC3)
> - <span data-ttu-id="9e26a-111">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(środowisko uruchomieniowe + narzędzia pomocy technicznej)</span><span class="sxs-lookup"><span data-stu-id="9e26a-111">[SQL Server Compact 4.0](https://www.microsoft.com/web/gallery/install.aspx?appid=SQLCE;SQLCEVSTools_4_0)(runtime + tools support)</span></span>
> 
> <span data-ttu-id="9e26a-112">Jeśli używasz programu Visual Studio 2010, zamiast Visual Web Developer 2010, zainstaluj wymagania wstępne, klikając poniższe łącze: [wymagania wstępne programu Visual Studio 2010](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span><span class="sxs-lookup"><span data-stu-id="9e26a-112">If you're using Visual Studio 2010 instead of Visual Web Developer 2010, install the prerequisites by clicking the following link: [Visual Studio 2010 prerequisites](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=VS2010SP1Pack).</span></span>
> 
> <span data-ttu-id="9e26a-113">Projekt Visual Web Developer z kodem źródłowym VB.NET jest dostępna powiązany z tym tematem.</span><span class="sxs-lookup"><span data-stu-id="9e26a-113">A Visual Web Developer project with VB.NET source code is available to accompany this topic.</span></span> <span data-ttu-id="9e26a-114">[Pobierz wersję VB.NET](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span><span class="sxs-lookup"><span data-stu-id="9e26a-114">[Download the VB.NET version](https://code.msdn.microsoft.com/Introduction-to-MVC-3-10d1b098).</span></span> <span data-ttu-id="9e26a-115">Jeśli wolisz C#, przełącz się do [wersji języka C#](../cs/examining-the-edit-methods-and-edit-view.md) tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="9e26a-115">If you prefer C#, switch to the [C# version](../cs/examining-the-edit-methods-and-edit-view.md) of this tutorial.</span></span>


<span data-ttu-id="9e26a-116">W tej sekcji należy zbadać metod akcji wygenerowanych i widoków dla kontrolera filmu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-116">In this section, you'll examine the generated action methods and views for the movie controller.</span></span> <span data-ttu-id="9e26a-117">Następnie dodasz niestandardową stronę wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="9e26a-117">Then you'll add a custom search page.</span></span>

<span data-ttu-id="9e26a-118">Uruchom aplikację i przejdź do `Movies` kontrolera, dodając */Movies* do adresu URL na pasku adresu przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="9e26a-118">Run the application and browse to the `Movies` controller by appending */Movies* to the URL in the address bar of your browser.</span></span> <span data-ttu-id="9e26a-119">Umieść kursor **Edytuj** łącze, aby wyświetlić adres URL, który jest połączona.</span><span class="sxs-lookup"><span data-stu-id="9e26a-119">Hold the mouse pointer over an **Edit** link to see the URL that it links to.</span></span>

![EditLink_sm](examining-the-edit-methods-and-edit-view/_static/image1.png)

<span data-ttu-id="9e26a-121">**Edytuj** łącza został wygenerowany przez `Html.ActionLink` metody w *Views\Movies\Index.vbhtml* widoku:</span><span class="sxs-lookup"><span data-stu-id="9e26a-121">The **Edit** link was generated by the `Html.ActionLink` method in the *Views\Movies\Index.vbhtml* view:</span></span>

[!code-cshtml[Main](examining-the-edit-methods-and-edit-view/samples/sample1.cshtml)]

<span data-ttu-id="9e26a-122">[![EditLink_sm](examining-the-edit-methods-and-edit-view/_static/image3.png)](examining-the-edit-methods-and-edit-view/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-122">[![EditLink_sm](examining-the-edit-methods-and-edit-view/_static/image3.png)](examining-the-edit-methods-and-edit-view/_static/image2.png)</span></span>

<span data-ttu-id="9e26a-123">`Html` Obiekt jest pomocnika uwidocznionego za pomocą właściwości na `WebViewPage` klasy podstawowej.</span><span class="sxs-lookup"><span data-stu-id="9e26a-123">The `Html` object is a helper that's exposed using a property on the `WebViewPage` base class.</span></span> <span data-ttu-id="9e26a-124">`ActionLink` Metody pomocnika ułatwia dynamicznego generowania hiperłącza HTML, które łącze do metody akcji na kontrolerach.</span><span class="sxs-lookup"><span data-stu-id="9e26a-124">The `ActionLink` method of the helper makes it easy to dynamically generate HTML hyperlinks that link to action methods on controllers.</span></span> <span data-ttu-id="9e26a-125">Pierwszy argument `ActionLink` metoda jest tekst łącza do renderowania (na przykład `<a>Edit Me</a>`).</span><span class="sxs-lookup"><span data-stu-id="9e26a-125">The first argument to the `ActionLink` method is the link text to render (for example, `<a>Edit Me</a>`).</span></span> <span data-ttu-id="9e26a-126">Drugi argument jest nazwą metody akcji do wywołania.</span><span class="sxs-lookup"><span data-stu-id="9e26a-126">The second argument is the name of the action method to invoke.</span></span> <span data-ttu-id="9e26a-127">Ostatni argument jest [obiekt anonimowy](https://weblogs.asp.net/scottgu/archive/2007/05/15/new-orcas-language-feature-anonymous-types.aspx) generujący danych trasy (w tym przypadku identyfikator 4).</span><span class="sxs-lookup"><span data-stu-id="9e26a-127">The final argument is an [anonymous object](https://weblogs.asp.net/scottgu/archive/2007/05/15/new-orcas-language-feature-anonymous-types.aspx) that generates the route data (in this case, the ID of 4).</span></span>

<span data-ttu-id="9e26a-128">Wygenerowane łącze pokazano na poprzedniej ilustracji jest `http://localhost:xxxxx/Movies/Edit/4`.</span><span class="sxs-lookup"><span data-stu-id="9e26a-128">The generated link shown in the previous image is `http://localhost:xxxxx/Movies/Edit/4`.</span></span> <span data-ttu-id="9e26a-129">Trasa domyślna trwa wzorzec URL `{controller}/{action}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="9e26a-129">The default route takes the URL pattern `{controller}/{action}/{id}`.</span></span> <span data-ttu-id="9e26a-130">W związku z tym tłumaczy ASP.NET `http://localhost:xxxxx/Movies/Edit/4` na żądanie, aby `Edit` metody akcji `Movies` kontrolera z parametrem `ID` równa 4.</span><span class="sxs-lookup"><span data-stu-id="9e26a-130">Therefore, ASP.NET translates `http://localhost:xxxxx/Movies/Edit/4` into a request to the `Edit` action method of the `Movies` controller with the parameter `ID` equal to 4.</span></span>

<span data-ttu-id="9e26a-131">Można również przekazać parametry metody akcji przy użyciu ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="9e26a-131">You can also pass action method parameters using a query string.</span></span> <span data-ttu-id="9e26a-132">Na przykład adres URL `http://localhost:xxxxx/Movies/Edit?ID=4` przekazuje także parametr `ID` 4 do `Edit` metody akcji `Movies` kontrolera.</span><span class="sxs-lookup"><span data-stu-id="9e26a-132">For example, the URL `http://localhost:xxxxx/Movies/Edit?ID=4` also passes the parameter `ID` of 4 to the `Edit` action method of the `Movies` controller.</span></span>

<span data-ttu-id="9e26a-133">[![EditQueryString](examining-the-edit-methods-and-edit-view/_static/image5.png)](examining-the-edit-methods-and-edit-view/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-133">[![EditQueryString](examining-the-edit-methods-and-edit-view/_static/image5.png)](examining-the-edit-methods-and-edit-view/_static/image4.png)</span></span>

<span data-ttu-id="9e26a-134">Otwórz `Movies` kontrolera.</span><span class="sxs-lookup"><span data-stu-id="9e26a-134">Open the `Movies` controller.</span></span> <span data-ttu-id="9e26a-135">Dwa `Edit` poniżej przedstawiono metody akcji.</span><span class="sxs-lookup"><span data-stu-id="9e26a-135">The two `Edit` action methods are shown below.</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample3.vb)]

<span data-ttu-id="9e26a-136">Zwróć uwagę, drugi `Edit` metody akcji jest poprzedzony `HttpPost` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-136">Notice the second `Edit` action method is preceded by the `HttpPost` attribute.</span></span> <span data-ttu-id="9e26a-137">Ten atrybut określa, że który przeciążenia z `Edit` metoda może być wywoływana tylko dla żądań POST.</span><span class="sxs-lookup"><span data-stu-id="9e26a-137">This attribute specifies that that overload of the `Edit` method can be invoked only for POST requests.</span></span> <span data-ttu-id="9e26a-138">Można zastosować `HttpGet` pierwszy dla atrybutu Edytuj metodę, ale który nie jest konieczne, ponieważ jest to wartość domyślna.</span><span class="sxs-lookup"><span data-stu-id="9e26a-138">You could apply the `HttpGet` attribute to the first edit method, but that's not necessary because it's the default.</span></span> <span data-ttu-id="9e26a-139">(Firma Microsoft będzie odwoływać się do metod akcji, które są przypisane niejawnie `HttpGet` atrybutu jako `HttpGet` metody.)</span><span class="sxs-lookup"><span data-stu-id="9e26a-139">(We'll refer to action methods that are implicitly assigned the `HttpGet` attribute as `HttpGet` methods.)</span></span>

<span data-ttu-id="9e26a-140">`HttpGet` `Edit` Metoda przyjmuje parametr ID film, wyszukuje filmu przy użyciu programu Entity Framework `Find` metody i zwraca wybrany film do widoku edycji.</span><span class="sxs-lookup"><span data-stu-id="9e26a-140">The `HttpGet` `Edit` method takes the movie ID parameter, looks up the movie using the Entity Framework `Find` method, and returns the selected movie to the Edit view.</span></span> <span data-ttu-id="9e26a-141">Podczas tworzenia widoku edycji systemu szkieletów zbadane `Movie` klasy i kodu do renderowania `<label>` i `<input>` elementy dla każdej właściwości klasy.</span><span class="sxs-lookup"><span data-stu-id="9e26a-141">When the scaffolding system created the Edit view, it examined the `Movie` class and created code to render `<label>` and `<input>` elements for each property of the class.</span></span> <span data-ttu-id="9e26a-142">W poniższym przykładzie pokazano widok edycji został wygenerowany:</span><span class="sxs-lookup"><span data-stu-id="9e26a-142">The following example shows the Edit view that was generated:</span></span>

[!code-vbhtml[Main](examining-the-edit-methods-and-edit-view/samples/sample4.vbhtml)]

<span data-ttu-id="9e26a-143">Zwróć uwagę, jak szablon widoku ma `@ModelType MvcMovie.Models.Movie` instrukcji w górnej części pliku — to ustawienie określa, czy widok oczekuje modelu widoku szablonu typu `Movie`.</span><span class="sxs-lookup"><span data-stu-id="9e26a-143">Notice how the view template has a `@ModelType MvcMovie.Models.Movie` statement at the top of the file — this specifies that the view expects the model for the view template to be of type `Movie`.</span></span>

<span data-ttu-id="9e26a-144">Kod z utworzonym szkieletem używa kilku *metody pomocnicze* uprościć kod znaczników HTML.</span><span class="sxs-lookup"><span data-stu-id="9e26a-144">The scaffolded code uses several *helper methods* to streamline the HTML markup.</span></span> <span data-ttu-id="9e26a-145">[ `Html.LabelFor` ](https://msdn.microsoft.com/library/gg401864(VS.98).aspx) Pomocnika Wyświetla nazwę pola (&quot;tytuł&quot;, &quot;ReleaseDate&quot;, &quot;Genre&quot;, lub &quot;cen &quot;).</span><span class="sxs-lookup"><span data-stu-id="9e26a-145">The [`Html.LabelFor`](https://msdn.microsoft.com/library/gg401864(VS.98).aspx) helper displays the name of the field (&quot;Title&quot;, &quot;ReleaseDate&quot;, &quot;Genre&quot;, or &quot;Price&quot;).</span></span> <span data-ttu-id="9e26a-146">[ `Html.EditorFor` ](https://msdn.microsoft.com/library/system.web.mvc.html.editorextensions.editorfor(VS.98).aspx) Pomocnik wyświetli HTML `<input>` elementu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-146">The [`Html.EditorFor`](https://msdn.microsoft.com/library/system.web.mvc.html.editorextensions.editorfor(VS.98).aspx) helper displays an HTML `<input>` element.</span></span> <span data-ttu-id="9e26a-147">[ `Html.ValidationMessageFor` ](https://msdn.microsoft.com/library/system.web.mvc.html.validationextensions.validationmessagefor(VS.98).aspx) Pomocnik wyświetli żadnych komunikatów dotyczących sprawdzania poprawności skojarzone z tą właściwością.</span><span class="sxs-lookup"><span data-stu-id="9e26a-147">The [`Html.ValidationMessageFor`](https://msdn.microsoft.com/library/system.web.mvc.html.validationextensions.validationmessagefor(VS.98).aspx) helper displays any validation messages associated with that property.</span></span>

<span data-ttu-id="9e26a-148">Uruchom aplikację i przejdź do */Movies* adresu URL.</span><span class="sxs-lookup"><span data-stu-id="9e26a-148">Run the application and navigate to the */Movies* URL.</span></span> <span data-ttu-id="9e26a-149">Kliknij przycisk **Edytuj** łącza.</span><span class="sxs-lookup"><span data-stu-id="9e26a-149">Click an **Edit** link.</span></span> <span data-ttu-id="9e26a-150">W przeglądarce Wyświetl źródło strony.</span><span class="sxs-lookup"><span data-stu-id="9e26a-150">In the browser, view the source for the page.</span></span> <span data-ttu-id="9e26a-151">HTML na stronie wygląda jak w następującym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="9e26a-151">The HTML in the page looks like the following example.</span></span> <span data-ttu-id="9e26a-152">(Znaczników menu został wykluczony, aby były bardziej zrozumiałe).</span><span class="sxs-lookup"><span data-stu-id="9e26a-152">(The menu markup was excluded for clarity.)</span></span>

[!code-html[Main](examining-the-edit-methods-and-edit-view/samples/sample5.html)]

<span data-ttu-id="9e26a-153">`<input>` Elementy są w formacie HTML `<form>` element których `action` ustawiono atrybut do wysłania do */filmów/Edytuj* adresu URL.</span><span class="sxs-lookup"><span data-stu-id="9e26a-153">The `<input>` elements are in an HTML `<form>` element whose `action` attribute is set to post to the */Movies/Edit* URL.</span></span> <span data-ttu-id="9e26a-154">Dane formularza zostaną opublikowane na serwerze po **Edytuj** kliknięciu przycisku.</span><span class="sxs-lookup"><span data-stu-id="9e26a-154">The form data will be posted to the server when the **Edit** button is clicked.</span></span>

## <a name="processing-the-post-request"></a><span data-ttu-id="9e26a-155">Przetwarzanie żądania POST</span><span class="sxs-lookup"><span data-stu-id="9e26a-155">Processing the POST Request</span></span>

<span data-ttu-id="9e26a-156">Poniżej przedstawiono listę `HttpPost` wersji `Edit` metody akcji.</span><span class="sxs-lookup"><span data-stu-id="9e26a-156">The following listing shows the `HttpPost` version of the `Edit` action method.</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample6.vb)]

<span data-ttu-id="9e26a-157">Integrator modelu framework ASP.NET przyjmuje wartości przesłanego formularza i tworzy `Movie` obiekt, który jest przekazywany jako `movie` parametru.</span><span class="sxs-lookup"><span data-stu-id="9e26a-157">The ASP.NET framework model binder takes the posted form values and creates a `Movie` object that's passed as the `movie` parameter.</span></span> <span data-ttu-id="9e26a-158">`ModelState.IsValid` Wyboru w kodzie sprawdza, czy dane dostarczone w formie może służyć do modyfikowania `Movie` obiektu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-158">The `ModelState.IsValid` check in the code verifies that the data submitted in the form can be used to modify a `Movie` object.</span></span> <span data-ttu-id="9e26a-159">Jeśli dane są prawidłowe, kod zapisuje dane filmu `Movies` Kolekcja `MovieDBContext` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="9e26a-159">If the data is valid, the code saves the movie data to the `Movies` collection of the `MovieDBContext` instance.</span></span> <span data-ttu-id="9e26a-160">Kod zapisze nowe dane filmu do bazy danych przez wywołanie metody `SaveChanges` metoda `MovieDBContext`, której będzie się powtarzał zmiany w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-160">The code then saves the new movie data to the database by calling the `SaveChanges` method of `MovieDBContext`, which persists changes to the database.</span></span> <span data-ttu-id="9e26a-161">Po zapisaniu danych, kod przekierowuje użytkownika do `Index` metody akcji `MoviesController` klasy, która powoduje, że zaktualizowano film będzie wyświetlana na liście filmów.</span><span class="sxs-lookup"><span data-stu-id="9e26a-161">After saving the data, the code redirects the user to the `Index` action method of the `MoviesController` class, which causes the updated movie to be displayed in the listing of movies.</span></span>

<span data-ttu-id="9e26a-162">Jeśli przesłanych wartości nie są prawidłowe, są wyświetlane ponownie w formularzu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-162">If the posted values aren't valid, they are redisplayed in the form.</span></span> <span data-ttu-id="9e26a-163">`Html.ValidationMessageFor` Pomocników w *Edit.vbhtml* widok szablonu zajmie się wyświetlanie odpowiednie komunikaty o błędach.</span><span class="sxs-lookup"><span data-stu-id="9e26a-163">The `Html.ValidationMessageFor` helpers in the *Edit.vbhtml* view template take care of displaying appropriate error messages.</span></span>

<span data-ttu-id="9e26a-164">[![abcNotValid](examining-the-edit-methods-and-edit-view/_static/image7.png)](examining-the-edit-methods-and-edit-view/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-164">[![abcNotValid](examining-the-edit-methods-and-edit-view/_static/image7.png)](examining-the-edit-methods-and-edit-view/_static/image6.png)</span></span>

> <span data-ttu-id="9e26a-165">**Uwaga dotycząca ustawień regionalnych** zwykle pracy z ustawień regionalnych innych niż angielski, zobacz [obsługi platformy ASP.NET MVC 3 weryfikacji z innym niż angielski.](https://msdn.microsoft.com/library/gg674880(VS.98).aspx)</span><span class="sxs-lookup"><span data-stu-id="9e26a-165">**Note about locales** If you normally work with a locale other than English, see [Supporting ASP.NET MVC 3 Validation with Non-English Locales.](https://msdn.microsoft.com/library/gg674880(VS.98).aspx)</span></span>


## <a name="making-the-edit-method-more-robust"></a><span data-ttu-id="9e26a-166">Tworzenie bardziej niezawodna metoda edycji</span><span class="sxs-lookup"><span data-stu-id="9e26a-166">Making the Edit Method More Robust</span></span>

<span data-ttu-id="9e26a-167">`HttpGet` `Edit` Metody generowany przez system szkieletów nie sprawdza, czy identyfikator, który jest przekazywany do niego jest prawidłowa.</span><span class="sxs-lookup"><span data-stu-id="9e26a-167">The `HttpGet` `Edit` method generated by the scaffolding system doesn't check that the ID that's passed to it is valid.</span></span> <span data-ttu-id="9e26a-168">Jeśli użytkownik usunie identyfikator segmentu z adresu URL (`http://localhost:xxxxx/Movies/Edit`), zostanie wyświetlony następujący błąd:</span><span class="sxs-lookup"><span data-stu-id="9e26a-168">If a user removes the ID segment from the URL (`http://localhost:xxxxx/Movies/Edit`), the following error is displayed:</span></span>

<span data-ttu-id="9e26a-169">[![Null_ID](examining-the-edit-methods-and-edit-view/_static/image9.png)](examining-the-edit-methods-and-edit-view/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-169">[![Null_ID](examining-the-edit-methods-and-edit-view/_static/image9.png)](examining-the-edit-methods-and-edit-view/_static/image8.png)</span></span>

<span data-ttu-id="9e26a-170">Użytkownik może także podać identyfikator, który nie istnieje w bazie danych, takich jak `http://localhost:xxxxx/Movies/Edit/1234`.</span><span class="sxs-lookup"><span data-stu-id="9e26a-170">A user could also pass an ID that doesn't exist in the database, such as `http://localhost:xxxxx/Movies/Edit/1234`.</span></span> <span data-ttu-id="9e26a-171">Można utworzyć dwie zmiany `HttpGet` `Edit` metody akcji w celu rozwiązania tego ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="9e26a-171">You can make two changes to the `HttpGet` `Edit` action method to address this limitation.</span></span> <span data-ttu-id="9e26a-172">Najpierw należy zmienić `ID` parametr ma wartość domyślną równą zero, jeśli identyfikator nie jest jawnie przekazany.</span><span class="sxs-lookup"><span data-stu-id="9e26a-172">First, change the `ID` parameter to have a default value of zero when an ID isn't explicitly passed.</span></span> <span data-ttu-id="9e26a-173">Można również sprawdzić, które `Find` metody faktycznie znaleziono filmu przed zwróceniem obiekt filmu do szablonu widoku.</span><span class="sxs-lookup"><span data-stu-id="9e26a-173">You can also check that the `Find` method actually found a movie before returning the movie object to the view template.</span></span> <span data-ttu-id="9e26a-174">Zaktualizowany interfejs `Edit` metody są wyświetlane poniżej.</span><span class="sxs-lookup"><span data-stu-id="9e26a-174">The updated `Edit` method is shown below.</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample7.vb)]

<span data-ttu-id="9e26a-175">Jeśli film nie zostanie znaleziony, `HttpNotFound` metoda jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="9e26a-175">If no movie is found, the `HttpNotFound` method is called.</span></span>

<span data-ttu-id="9e26a-176">Wszystkie `HttpGet` metody wykonaj podobnego wzorca.</span><span class="sxs-lookup"><span data-stu-id="9e26a-176">All the `HttpGet` methods follow a similar pattern.</span></span> <span data-ttu-id="9e26a-177">Otrzymują obiektu movie (lub listę obiektów, w przypadku `Index`) i przekazać model widoku.</span><span class="sxs-lookup"><span data-stu-id="9e26a-177">They get a movie object (or list of objects, in the case of `Index`), and pass the model to the view.</span></span> <span data-ttu-id="9e26a-178">`Create` — Metoda przekazuje filmu pusty obiekt do tworzenia widoku.</span><span class="sxs-lookup"><span data-stu-id="9e26a-178">The `Create` method passes an empty movie object to the Create view.</span></span> <span data-ttu-id="9e26a-179">Wszystkie metody, które tworzenia, edytowania, usuwania lub modyfikację danych należy więc w `HttpPost` przeciążenia metody.</span><span class="sxs-lookup"><span data-stu-id="9e26a-179">All the methods that create, edit, delete, or otherwise modify data do so in the `HttpPost` overload of the method.</span></span> <span data-ttu-id="9e26a-180">Modyfikowanie danych w metodzie HTTP GET stanowi zagrożenie bezpieczeństwa, zgodnie z opisem w wpis w blogu post [ASP.NET MVC Porada 46 — nie używaj usunąć łącza, ponieważ mogą one tworzyć luk w zabezpieczeniach](http://stephenwalther.com/blog/archive/2009/01/21/asp.net-mvc-tip-46-ndash-donrsquot-use-delete-links-because.aspx).</span><span class="sxs-lookup"><span data-stu-id="9e26a-180">Modifying data in an HTTP GET method is a security risk, as described in the blog post entry [ASP.NET MVC Tip #46 – Don't use Delete Links because they create Security Holes](http://stephenwalther.com/blog/archive/2009/01/21/asp.net-mvc-tip-46-ndash-donrsquot-use-delete-links-because.aspx).</span></span> <span data-ttu-id="9e26a-181">Modyfikowanie danych w metodzie GET również narusza HTTP najlepszych rozwiązań i wzorzec architektury REST, który określa, że żądania GET nie należy zmieniać stanu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="9e26a-181">Modifying data in a GET method also violates HTTP best practices and the architectural REST pattern, which specifies that GET requests should not change the state of your application.</span></span> <span data-ttu-id="9e26a-182">Innymi słowy wykonanie operacji GET powinny być bezpieczne operację, która nie ma skutków ubocznych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-182">In other words, performing a GET operation should be a safe operation that has no side effects.</span></span>

## <a name="adding-a-search-method-and-search-view"></a><span data-ttu-id="9e26a-183">Dodawanie metody wyszukiwania i widoku wyszukiwania</span><span class="sxs-lookup"><span data-stu-id="9e26a-183">Adding a Search Method and Search View</span></span>

<span data-ttu-id="9e26a-184">W tej sekcji dodasz `SearchIndex` metody akcji, która umożliwia wyszukiwanie filmów genre lub nazwę.</span><span class="sxs-lookup"><span data-stu-id="9e26a-184">In this section you'll add a `SearchIndex` action method that lets you search movies by genre or name.</span></span> <span data-ttu-id="9e26a-185">Będzie to dostępne przy użyciu */filmów/SearchIndex* adresu URL.</span><span class="sxs-lookup"><span data-stu-id="9e26a-185">This will be available using the */Movies/SearchIndex* URL.</span></span> <span data-ttu-id="9e26a-186">Żądanie spowoduje wyświetlenie formularza HTML, który zawiera elementy wejściowe użytkownika można wprowadzić w celu wyszukania filmu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-186">The request will display an HTML form that contains input elements that a user can fill in in order to search for a movie.</span></span> <span data-ttu-id="9e26a-187">Gdy użytkownik przesyła formularz, metoda akcji wartości wyszukiwania zapisane przez użytkownika, a Użyj wartości do wyszukania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-187">When a user submits the form, the action method will get the search values posted by the user and use the values to search the database.</span></span>

![SearchIndx_SM](examining-the-edit-methods-and-edit-view/_static/image10.png)

## <a name="displaying-the-searchindex-form"></a><span data-ttu-id="9e26a-189">Wyświetlanie w formularzu SearchIndex</span><span class="sxs-lookup"><span data-stu-id="9e26a-189">Displaying the SearchIndex Form</span></span>

<span data-ttu-id="9e26a-190">Rozpocznij od dodania `SearchIndex` metody akcji do istniejącej `MoviesController` klasy.</span><span class="sxs-lookup"><span data-stu-id="9e26a-190">Start by adding a `SearchIndex` action method to the existing `MoviesController` class.</span></span> <span data-ttu-id="9e26a-191">Metoda zwraca widok zawierający formularza HTML.</span><span class="sxs-lookup"><span data-stu-id="9e26a-191">The method will return a view that contains an HTML form.</span></span> <span data-ttu-id="9e26a-192">Oto kod:</span><span class="sxs-lookup"><span data-stu-id="9e26a-192">Here's the code:</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample8.vb)]

<span data-ttu-id="9e26a-193">W pierwszym wierszu `SearchIndex` metoda tworzy następujące [LINQ](https://msdn.microsoft.com/library/bb397926.aspx) zapytanie, aby wybrać filmy:</span><span class="sxs-lookup"><span data-stu-id="9e26a-193">The first line of the `SearchIndex` method creates the following [LINQ](https://msdn.microsoft.com/library/bb397926.aspx) query to select the movies:</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample9.vb)]

<span data-ttu-id="9e26a-194">Zapytanie jest zdefiniowany w tym momencie, ale nie został jeszcze uruchomiony przed magazynu danych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-194">The query is defined at this point, but hasn't yet been run against the data store.</span></span>

<span data-ttu-id="9e26a-195">Jeśli `searchString` parametru zawiera ciąg, filmy zapytania są modyfikowane w celu filtrowania wartość ciągu wyszukiwania, używając następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="9e26a-195">If the `searchString` parameter contains a string, the movies query is modified to filter on the value of the search string, using the following code:</span></span>

<span data-ttu-id="9e26a-196">Jeśli nie jest następnie String.IsNullOrEmpty(searchString)</span><span class="sxs-lookup"><span data-stu-id="9e26a-196">If Not String.IsNullOrEmpty(searchString) Then</span></span>   
 <span data-ttu-id="9e26a-197">filmy = filmów. Gdzie (funkcje s.Title.Contains(searchString))</span><span class="sxs-lookup"><span data-stu-id="9e26a-197">movies = movies.Where(Function(s) s.Title.Contains(searchString))</span></span>   
 <span data-ttu-id="9e26a-198">Jeśli wewnętrzne</span><span class="sxs-lookup"><span data-stu-id="9e26a-198">End If</span></span>

<span data-ttu-id="9e26a-199">Zapytania LINQ nie są wykonywane, gdy są one zdefiniowane lub modyfikacji przez wywołanie metody, takie jak `Where` lub `OrderBy`.</span><span class="sxs-lookup"><span data-stu-id="9e26a-199">LINQ queries are not executed when they are defined or when they are modified by calling a method such as `Where` or `OrderBy`.</span></span> <span data-ttu-id="9e26a-200">Zamiast tego wykonywania zapytania jest opóźnione, co oznacza, że obliczania wyrażenia jest opóźnione aż do jej wartość rzeczywista jest rzeczywiście iterowane za pośrednictwem lub [ `ToList` ](https://msdn.microsoft.com/library/bb342261.aspx) metoda jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="9e26a-200">Instead, query execution is deferred, which means that the evaluation of an expression is delayed until its realized value is actually iterated over or the [`ToList`](https://msdn.microsoft.com/library/bb342261.aspx) method is called.</span></span> <span data-ttu-id="9e26a-201">W `SearchIndex` przykładowe zapytanie jest wykonywane w widoku SearchIndex.</span><span class="sxs-lookup"><span data-stu-id="9e26a-201">In the `SearchIndex` sample, the query is executed in the SearchIndex view.</span></span> <span data-ttu-id="9e26a-202">Aby uzyskać więcej informacji na temat wykonywania zapytań odroczonych, zobacz [wykonywania zapytania](https://msdn.microsoft.com/library/bb738633.aspx).</span><span class="sxs-lookup"><span data-stu-id="9e26a-202">For more information about deferred query execution, see [Query Execution](https://msdn.microsoft.com/library/bb738633.aspx).</span></span>

<span data-ttu-id="9e26a-203">Teraz można wdrożyć `SearchIndex` widok, który będzie wyświetlany formularz dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="9e26a-203">Now you can implement the `SearchIndex` view that will display the form to the user.</span></span> <span data-ttu-id="9e26a-204">Kliknij prawym przyciskiem myszy wewnątrz `SearchIndex` metody, a następnie kliknij przycisk **Dodaj widok**.</span><span class="sxs-lookup"><span data-stu-id="9e26a-204">Right-click inside the `SearchIndex` method and then click **Add View**.</span></span> <span data-ttu-id="9e26a-205">W **Dodaj widok** oknie dialogowym Określ, że zamierzasz przekazać `Movie` obiekt w szablonie widoku, jak jego klasa modelu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-205">In the **Add View** dialog box, specify that you're going to pass a `Movie` object to the view template as its model class.</span></span> <span data-ttu-id="9e26a-206">W **szablonu szkieletu** wybierz **listy**, następnie kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="9e26a-206">In the **Scaffold template** list, choose **List**, then click **Add**.</span></span>

<span data-ttu-id="9e26a-207">[![AddSearchView](examining-the-edit-methods-and-edit-view/_static/image12.png)](examining-the-edit-methods-and-edit-view/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-207">[![AddSearchView](examining-the-edit-methods-and-edit-view/_static/image12.png)](examining-the-edit-methods-and-edit-view/_static/image11.png)</span></span>

<span data-ttu-id="9e26a-208">Po kliknięciu **Dodaj** przycisku *Views\Movies\SearchIndex.vbhtml* jest tworzony widok szablonu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-208">When you click the **Add** button, the *Views\Movies\SearchIndex.vbhtml* view template is created.</span></span> <span data-ttu-id="9e26a-209">Ponieważ wybrano **listy** w **szablonu szkieletu** listy Visual Web Developer generowane automatycznie (szkieletu) niektórych domyślnej zawartości w widoku.</span><span class="sxs-lookup"><span data-stu-id="9e26a-209">Because you selected **List** in the **Scaffold template** list, Visual Web Developer automatically generated (scaffolded) some default content in the view.</span></span> <span data-ttu-id="9e26a-210">Rusztowania utworzyć formularza HTML.</span><span class="sxs-lookup"><span data-stu-id="9e26a-210">The scaffolding created an HTML form.</span></span> <span data-ttu-id="9e26a-211">Ją zbadać `Movie` klasy i kodu do renderowania `<label>` elementy dla każdej właściwości klasy.</span><span class="sxs-lookup"><span data-stu-id="9e26a-211">It examined the `Movie` class and created code to render `<label>` elements for each property of the class.</span></span> <span data-ttu-id="9e26a-212">Lista poniżej zawiera widok Utwórz, który został wygenerowany:</span><span class="sxs-lookup"><span data-stu-id="9e26a-212">The listing below shows the Create view that was generated:</span></span>

[!code-vbhtml[Main](examining-the-edit-methods-and-edit-view/samples/sample10.vbhtml)]

<span data-ttu-id="9e26a-213">Uruchom aplikację i przejdź do */filmów/SearchIndex*.</span><span class="sxs-lookup"><span data-stu-id="9e26a-213">Run the application and navigate to */Movies/SearchIndex*.</span></span> <span data-ttu-id="9e26a-214">Dołącz ciąg zapytania, takie jak `?searchString=ghost` do adresu URL.</span><span class="sxs-lookup"><span data-stu-id="9e26a-214">Append a query string such as `?searchString=ghost` to the URL.</span></span> <span data-ttu-id="9e26a-215">Filtrowane filmów są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="9e26a-215">The filtered movies are displayed.</span></span>

<span data-ttu-id="9e26a-216">[![SearchQryStr](examining-the-edit-methods-and-edit-view/_static/image14.png)](examining-the-edit-methods-and-edit-view/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-216">[![SearchQryStr](examining-the-edit-methods-and-edit-view/_static/image14.png)](examining-the-edit-methods-and-edit-view/_static/image13.png)</span></span>

<span data-ttu-id="9e26a-217">Jeśli zmienisz podpis `SearchIndex` metoda ma parametr o nazwie `id`, `id` parametr będzie odpowiadać `{id}` symbolu zastępczego dla domyślnej kieruje zestawu w *Global.asax* pliku.</span><span class="sxs-lookup"><span data-stu-id="9e26a-217">If you change the signature of the `SearchIndex` method to have a parameter named `id`, the `id` parameter will match the `{id}` placeholder for the default routes set in the *Global.asax* file.</span></span>

[!code-json[Main](examining-the-edit-methods-and-edit-view/samples/sample11.json)]

<span data-ttu-id="9e26a-218">Zmodyfikowane `SearchIndex` metoda będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="9e26a-218">The modified `SearchIndex` method would look as follows:</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample12.vb)]

<span data-ttu-id="9e26a-219">Tytuł wyszukiwania mogą być obecnie przekazywane jako dane trasy (segment adresu URL) zamiast jako wartość ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="9e26a-219">You can now pass the search title as route data (a URL segment) instead of as a query string value.</span></span>

<span data-ttu-id="9e26a-220">[![SearchRouteData](examining-the-edit-methods-and-edit-view/_static/image16.png)](examining-the-edit-methods-and-edit-view/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-220">[![SearchRouteData](examining-the-edit-methods-and-edit-view/_static/image16.png)](examining-the-edit-methods-and-edit-view/_static/image15.png)</span></span>

<span data-ttu-id="9e26a-221">Nie można jednak spodziewać się użytkowników, aby zmodyfikować adres URL, za każdym razem, gdy chcą, aby wyszukać filmu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-221">However, you can't expect users to modify the URL every time they want to search for a movie.</span></span> <span data-ttu-id="9e26a-222">Tak, teraz możesz dodasz interfejsu użytkownika w celu ich filtrowania filmów.</span><span class="sxs-lookup"><span data-stu-id="9e26a-222">So now you you'll add UI to help them filter movies.</span></span> <span data-ttu-id="9e26a-223">Zmiana podpisu `SearchIndex` metody do testowania sposób przekazywania parametru Identyfikatora trasy wiązaniem, zmień ją tak, że Twoje `SearchIndex` metoda przyjmuje parametr ciągu o nazwie `searchString`:</span><span class="sxs-lookup"><span data-stu-id="9e26a-223">If you changed the signature of the `SearchIndex` method to test how to pass the route-bound ID parameter, change it back so that your `SearchIndex` method takes a string parameter named `searchString`:</span></span>

<span data-ttu-id="9e26a-224">Otwórz *Views\Movies\SearchIndex.vbhtml* pliku, a tylko po `@Html.ActionLink("Create New", "Create")`, Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="9e26a-224">Open the *Views\Movies\SearchIndex.vbhtml* file, and just after `@Html.ActionLink("Create New", "Create")`, add the following:</span></span>

[!code-vbhtml[Main](examining-the-edit-methods-and-edit-view/samples/sample13.vbhtml)]

<span data-ttu-id="9e26a-225">`Html.BeginForm` Pomocnika tworzy otwierania `<form>` tagu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-225">The `Html.BeginForm` helper creates an opening `<form>` tag.</span></span> <span data-ttu-id="9e26a-226">`Html.BeginForm` Pomocnika powoduje, że formularz publikowania do samej siebie, gdy użytkownik przesyła formularz, klikając **filtru** przycisku.</span><span class="sxs-lookup"><span data-stu-id="9e26a-226">The `Html.BeginForm` helper causes the form to post to itself when the user submits the form by clicking the **Filter** button.</span></span>

<span data-ttu-id="9e26a-227">Uruchom aplikację i spróbuj wykonać wyszukiwanie filmu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-227">Run the application and try searching for a movie.</span></span>

<span data-ttu-id="9e26a-228">[![SearchIndxIE9_title](examining-the-edit-methods-and-edit-view/_static/image18.png)](examining-the-edit-methods-and-edit-view/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-228">[![SearchIndxIE9_title](examining-the-edit-methods-and-edit-view/_static/image18.png)](examining-the-edit-methods-and-edit-view/_static/image17.png)</span></span>

<span data-ttu-id="9e26a-229">Brak nie `HttpPost` przeciążenia z `SearchIndex` metody.</span><span class="sxs-lookup"><span data-stu-id="9e26a-229">There's no `HttpPost` overload of the `SearchIndex` method.</span></span> <span data-ttu-id="9e26a-230">Nie jest konieczne, ponieważ metoda nie jest zmiana stanu aplikacji, po prostu filtrowania danych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-230">You don't need it, because the method isn't changing the state of the application, just filtering data.</span></span> <span data-ttu-id="9e26a-231">Jeśli dodano następujące `HttpPost` `SearchIndex` metody, wywołujący akcji spowoduje dopasowanie `HttpPost` `SearchIndex` metody i `HttpPost` `SearchIndex` metoda może działać, jak pokazano na poniższej ilustracji.</span><span class="sxs-lookup"><span data-stu-id="9e26a-231">If you added the following `HttpPost` `SearchIndex` method, the action invoker would match the `HttpPost` `SearchIndex` method, and the `HttpPost` `SearchIndex` method would run as shown in the image below.</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample14.vb)]

<span data-ttu-id="9e26a-232">[![SearchPostGhost](examining-the-edit-methods-and-edit-view/_static/image20.png)](examining-the-edit-methods-and-edit-view/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="9e26a-232">[![SearchPostGhost](examining-the-edit-methods-and-edit-view/_static/image20.png)](examining-the-edit-methods-and-edit-view/_static/image19.png)</span></span>

## <a name="adding-search-by-genre"></a><span data-ttu-id="9e26a-233">Dodawanie wyszukiwania według rodzaju</span><span class="sxs-lookup"><span data-stu-id="9e26a-233">Adding Search by Genre</span></span>

<span data-ttu-id="9e26a-234">Jeśli dodano `HttpPost` wersji `SearchIndex` metody, usuń go teraz.</span><span class="sxs-lookup"><span data-stu-id="9e26a-234">If you added the `HttpPost` version of the `SearchIndex` method, delete it now.</span></span>

<span data-ttu-id="9e26a-235">Następnie dodasz funkcji, aby umożliwić użytkownikom wyszukiwanie filmów według rodzaju.</span><span class="sxs-lookup"><span data-stu-id="9e26a-235">Next, you'll add a feature to let users search for movies by genre.</span></span> <span data-ttu-id="9e26a-236">Zastąp `SearchIndex` metodę z następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="9e26a-236">Replace the `SearchIndex` method with the following code:</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample15.vb)]

<span data-ttu-id="9e26a-237">Ta wersja `SearchIndex` metoda przyjmuje dodatkowych parametrów, a mianowicie `movieGenre`.</span><span class="sxs-lookup"><span data-stu-id="9e26a-237">This version of the `SearchIndex` method takes an additional parameter, namely `movieGenre`.</span></span> <span data-ttu-id="9e26a-238">Tworzenie pierwszego kilku wierszy kodu `List` obiektu do przechowywania genres film z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-238">The first few lines of code create a `List` object to hold movie genres from the database.</span></span>

<span data-ttu-id="9e26a-239">Następujący kod jest zapytania LINQ, która pobiera wszystkie genres z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-239">The following code is a LINQ query that retrieves all the genres from the database.</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample16.vb)]

<span data-ttu-id="9e26a-240">W kodzie użyto `AddRange` metody ogólnej `List` kolekcji można dodać do listy wszystkich unikatowych genres.</span><span class="sxs-lookup"><span data-stu-id="9e26a-240">The code uses the `AddRange` method of the generic `List` collection to add all the distinct genres to the list.</span></span> <span data-ttu-id="9e26a-241">(Bez `Distinct` modyfikator, zostanie dodany genres zduplikowane — na przykład zostanie dodany Komedia dwa razy w naszym przykładzie).</span><span class="sxs-lookup"><span data-stu-id="9e26a-241">(Without the `Distinct` modifier, duplicate genres would be added — for example, comedy would be added twice in our sample).</span></span> <span data-ttu-id="9e26a-242">Kod następnie przechowuje listę gatunkami muzyki w `ViewBag` obiektu.</span><span class="sxs-lookup"><span data-stu-id="9e26a-242">The code then stores the list of genres in the `ViewBag` object.</span></span>

<span data-ttu-id="9e26a-243">Poniższy kod przedstawia sposób sprawdzania `movieGenre` parametru.</span><span class="sxs-lookup"><span data-stu-id="9e26a-243">The following code shows how to check the `movieGenre` parameter.</span></span> <span data-ttu-id="9e26a-244">Jeśli nie jest on pusty kodu ogranicza kwerendę filmy i ograniczyć wybranego filmów do określonego rodzaju.</span><span class="sxs-lookup"><span data-stu-id="9e26a-244">If it's not empty the code further constrains the movies query to limit the selected movies to the specified genre.</span></span>

[!code-vb[Main](examining-the-edit-methods-and-edit-view/samples/sample17.vb)]

## <a name="adding-markup-to-the-searchindex-view-to-support-search-by-genre"></a><span data-ttu-id="9e26a-245">Dodawanie znaczników do widoku SearchIndex obsługuje wyszukiwania według rodzaju</span><span class="sxs-lookup"><span data-stu-id="9e26a-245">Adding Markup to the SearchIndex View to Support Search by Genre</span></span>

<span data-ttu-id="9e26a-246">Dodaj `Html.DropDownList` Pomocnika *Views\Movies\SearchIndex.vbhtml* pliku tuż przed `TextBox` pomocnika.</span><span class="sxs-lookup"><span data-stu-id="9e26a-246">Add an `Html.DropDownList` helper to the *Views\Movies\SearchIndex.vbhtml* file, just before the `TextBox` helper.</span></span> <span data-ttu-id="9e26a-247">Poniżej przedstawiono wypełniony kod znaczników:</span><span class="sxs-lookup"><span data-stu-id="9e26a-247">The completed markup is shown below:</span></span>

[!code-vbhtml[Main](examining-the-edit-methods-and-edit-view/samples/sample18.vbhtml)]

<span data-ttu-id="9e26a-248">Uruchom aplikację i przejdź do */filmów/SearchIndex*.</span><span class="sxs-lookup"><span data-stu-id="9e26a-248">Run the application and browse to */Movies/SearchIndex*.</span></span> <span data-ttu-id="9e26a-249">Spróbować przeprowadzić wyszukiwanie według rodzaju, nazwa filmu i oba kryteria.</span><span class="sxs-lookup"><span data-stu-id="9e26a-249">Try a search by genre, by movie name, and by both criteria.</span></span>

<span data-ttu-id="9e26a-250">W tej sekcji zbadać metod akcji CRUD i widoki generowane przez platformę.</span><span class="sxs-lookup"><span data-stu-id="9e26a-250">In this section you examined the CRUD action methods and views generated by the framework.</span></span> <span data-ttu-id="9e26a-251">Utworzono metody akcji wyszukiwania i widok, który zezwala użytkownikom na wyszukiwanie według tytuł filmu i rodzaju.</span><span class="sxs-lookup"><span data-stu-id="9e26a-251">You created a search action method and view that let users search by movie title and genre.</span></span> <span data-ttu-id="9e26a-252">W następnej sekcji, możesz wyjaśniono, jak dodać właściwości do `Movie` modelu oraz sposobu dodawania inicjatora automatycznie utworzy testowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="9e26a-252">In the next section, you'll look at how to add a property to the `Movie` model and how to add an initializer that will automatically create a test database.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="9e26a-253">[Poprzednie](accessing-your-models-data-from-a-controller.md)
[dalej](adding-a-new-field.md)</span><span class="sxs-lookup"><span data-stu-id="9e26a-253">[Previous](accessing-your-models-data-from-a-controller.md)
[Next](adding-a-new-field.md)</span></span>
