---
uid: web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
title: Tworzenie konta użytkownika (C#) | Dokumentacja firmy Microsoft
author: rick-anderson
description: W tym samouczku przeanalizujemy, tworzenie nowych kont użytkowników przy użyciu członkostwa w ramach (za pośrednictwem SqlMembershipProvider). Należy sprawdzić, jak utworzyć nowe nam...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/18/2008
ms.topic: article
ms.assetid: f175278c-6079-4d91-b9b4-2493ed43d9ec
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-user-accounts-cs
msc.type: authoredcontent
ms.openlocfilehash: e00417639fba71083cbf392db5d5078561ab26e3
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
---
<a name="creating-user-accounts-c"></a><span data-ttu-id="1365e-104">Tworzenie konta użytkownika (C#)</span><span class="sxs-lookup"><span data-stu-id="1365e-104">Creating User Accounts (C#)</span></span>
====================
<span data-ttu-id="1365e-105">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1365e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="1365e-106">[Pobierz kod](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip) lub [pobierania plików PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="1365e-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_05_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial05_CreatingUsers_cs.pdf)</span></span>

> <span data-ttu-id="1365e-107">W tym samouczku przeanalizujemy, tworzenie nowych kont użytkowników przy użyciu członkostwa w ramach (za pośrednictwem SqlMembershipProvider).</span><span class="sxs-lookup"><span data-stu-id="1365e-107">In this tutorial we will explore using the Membership framework (via the SqlMembershipProvider) to create new user accounts.</span></span> <span data-ttu-id="1365e-108">Przedstawiono sposób tworzenia nowych użytkowników programowo i za pośrednictwem ASP. NET przez wbudowane formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-108">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>


## <a name="introduction"></a><span data-ttu-id="1365e-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="1365e-109">Introduction</span></span>

<span data-ttu-id="1365e-110">W <a id="_msoanchor_1"> </a> [poprzedniego samouczek](creating-the-membership-schema-in-sql-server-cs.md) zainstalowano schemat usług aplikacji w bazie danych, co dodać tabel, widoków i wymagane przez procedury składowane `SqlMembershipProvider` i `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="1365e-110">In the <a id="_msoanchor_1"></a>[preceding tutorial](creating-the-membership-schema-in-sql-server-cs.md) we installed the application services schema in a database, which added the tables, views, and stored procedures needed by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span> <span data-ttu-id="1365e-111">To utworzyć infrastruktury, które są wymagane w pozostałej części w tej serii samouczków.</span><span class="sxs-lookup"><span data-stu-id="1365e-111">This created the infrastructure we will need for the remainder of the tutorials in this series.</span></span> <span data-ttu-id="1365e-112">W tym samouczku przeanalizujemy, przy użyciu platformy członkostwa (za pośrednictwem `SqlMembershipProvider`) do tworzenia nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1365e-112">In this tutorial we will explore using the Membership framework (via the `SqlMembershipProvider`) to create new user accounts.</span></span> <span data-ttu-id="1365e-113">Przedstawiono sposób tworzenia nowych użytkowników programowo i za pośrednictwem ASP. NET przez wbudowane formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-113">We will see how to create new users programmatically and through ASP.NET's built-in CreateUserWizard control.</span></span>

<span data-ttu-id="1365e-114">Oprócz dowiedzieć, jak utworzyć nowe konta użytkowników, będą również należy zaktualizować pokaz witryny sieci Web, utworzyliśmy najpierw w *<a id="_msoanchor_2"> </a> [omówienie uwierzytelniania formularzy](../introduction/an-overview-of-forms-authentication-cs.md)* samouczek, a następnie rozszerzone w  *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"> </a> konfiguracji uwierzytelniania formularzy i Tematy zaawansowane* samouczka.</span><span class="sxs-lookup"><span data-stu-id="1365e-114">In addition to learning how to create new user accounts, we will also need to update the demo website we first created in the *<a id="_msoanchor_2"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial and then enhanced in the *<a id="https://www.asp.net/learn/security/tutorial-03-cs.aspx"></a> Forms Authentication Configuration and Advanced Topics* tutorial.</span></span> <span data-ttu-id="1365e-115">Pokaz aplikacji sieci web ma strony logowania, która weryfikuje poświadczenia użytkowników przed pary ustalony nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="1365e-115">Our demo web application has a login page that validates users' credentials against hard-coded username/password pairs.</span></span> <span data-ttu-id="1365e-116">Ponadto `Global.asax` zawiera kod, który tworzy niestandardowe `IPrincipal` i `IIdentity` obiektów dla uwierzytelnionych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1365e-116">Moreover, `Global.asax` includes code that creates custom `IPrincipal` and `IIdentity` objects for authenticated users.</span></span> <span data-ttu-id="1365e-117">Aktualizujemy strony logowania do zweryfikowania poświadczeń użytkowników przed framework członkostwa i usunąć niestandardowej logiki podmiot zabezpieczeń i tożsamości.</span><span class="sxs-lookup"><span data-stu-id="1365e-117">We will update the login page to validate users' credentials against the Membership framework and remove the custom principal and identity logic.</span></span>

<span data-ttu-id="1365e-118">Dzieła!</span><span class="sxs-lookup"><span data-stu-id="1365e-118">Let's get started!</span></span>

## <a name="the-forms-authentication-and-membership-checklist"></a><span data-ttu-id="1365e-119">Uwierzytelnianie formularzy i Lista kontrolna członkostwa</span><span class="sxs-lookup"><span data-stu-id="1365e-119">The Forms Authentication and Membership Checklist</span></span>

<span data-ttu-id="1365e-120">Zanim zaczniemy pracy z członkostwa w ramach wytłumaczone przeczytaj ważne czynności, które przekierowaliśmy osiągnąć tego punktu.</span><span class="sxs-lookup"><span data-stu-id="1365e-120">Before we begin working with the Membership framework, let's take a moment to review the important steps we have taken to reach this point.</span></span> <span data-ttu-id="1365e-121">Korzystając z członkostwa w ramach `SqlMembershipProvider` w przypadku uwierzytelniania formularzy, należy wykonać przed Implementowanie funkcjonalności członkostwa w aplikacji sieci web następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="1365e-121">When using the Membership framework with the `SqlMembershipProvider` in a forms-based authentication scenario, the following steps need to be performed prior to implementing Membership functionality in your web application:</span></span>

1. <span data-ttu-id="1365e-122">**Włącz uwierzytelnianie oparte na formularzach.**</span><span class="sxs-lookup"><span data-stu-id="1365e-122">**Enable forms-based authentication.**</span></span> <span data-ttu-id="1365e-123">Jak wspomniano w  *<a id="_msoanchor_4"> </a> [omówienie uwierzytelniania formularzy](../introduction/an-overview-of-forms-authentication-cs.md)*, uwierzytelnianie formularzy jest włączone, edytując `Web.config` i ustawienie `<authentication>` elementu `mode` atrybutu `Forms`.</span><span class="sxs-lookup"><span data-stu-id="1365e-123">As we discussed in *<a id="_msoanchor_4"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)*, forms authentication is enabled by editing `Web.config` and setting the `<authentication>` element's `mode` attribute to `Forms`.</span></span> <span data-ttu-id="1365e-124">Z włączone uwierzytelnianie formularzy, każde żądanie przychodzące jest pod kątem *biletu uwierzytelniania formularzy*, jeśli jest obecny, identyfikuje obiekt żądający.</span><span class="sxs-lookup"><span data-stu-id="1365e-124">With forms authentication enabled, each incoming request is examined for a *forms authentication ticket*, which, if present, identifies the requestor.</span></span>
2. <span data-ttu-id="1365e-125">**Dodaj schemat usług aplikacji z odpowiednią bazą danych.**</span><span class="sxs-lookup"><span data-stu-id="1365e-125">**Add the application services schema to the appropriate database.**</span></span> <span data-ttu-id="1365e-126">Korzystając z `SqlMembershipProvider` musimy zainstalować schemat usług aplikacji do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1365e-126">When using the `SqlMembershipProvider` we need to install the application services schema to a database.</span></span> <span data-ttu-id="1365e-127">Zazwyczaj ten schemat zostanie dodany do tej samej bazy danych, który zawiera model danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-127">Usually this schema is added to the same database that holds the application's data model.</span></span> <span data-ttu-id="1365e-128">*<a id="_msoanchor_5"> </a> [Tworzenie schematu członkostwa w programie SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* samouczek przeglądał przy użyciu `aspnet_regsql.exe` narzędzia w tym celu.</span><span class="sxs-lookup"><span data-stu-id="1365e-128">The *<a id="_msoanchor_5"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial looked at using the `aspnet_regsql.exe` tool to accomplish this.</span></span>
3. <span data-ttu-id="1365e-129">**Dostosowywanie ustawień aplikacji sieci Web, aby odwoływać się do bazy danych z kroku 2.**</span><span class="sxs-lookup"><span data-stu-id="1365e-129">**Customize the Web Application's Settings to reference the database from step 2.**</span></span> <span data-ttu-id="1365e-130">*Tworzenie schematu członkostwa w programie SQL Server* samouczku przedstawiono dwa sposoby konfigurowania aplikacji sieci web, aby `SqlMembershipProvider` użyje bazy danych wybranej w kroku 2: modyfikując `LocalSqlServer` Nazwa ciągu połączenia; lub dodanie nowego dostawcę zarejestrowanych do listy dostawców członkostwa framework i dostosowując tego nowego dostawcy na potrzeby używania bazy danych z kroku 2.</span><span class="sxs-lookup"><span data-stu-id="1365e-130">The *Creating the Membership Schema in SQL Server* tutorial showed two ways to configure the web application so that the `SqlMembershipProvider` would use the database selected in step 2: by modifying the `LocalSqlServer` connection string name; or by adding a new registered provider to the list of Membership framework providers and customizing that new provider to use the database from step 2.</span></span>

<span data-ttu-id="1365e-131">Podczas tworzenia aplikacji sieci web, która używa `SqlMembershipProvider` i uwierzytelnianie oparte na formularzach, konieczne będzie wykonywać te trzy kroki przed użyciem `Membership` klasy lub kontrolek logowania programu ASP.NET w sieci Web.</span><span class="sxs-lookup"><span data-stu-id="1365e-131">When building a web application that uses the `SqlMembershipProvider` and forms-based authentication, you will need to perform these three steps before using the `Membership` class or the ASP.NET Login Web controls.</span></span> <span data-ttu-id="1365e-132">Ponieważ już wykonane następujące kroki w poprzednim samouczki, możemy gotowe do rozpoczęcia przy użyciu platformy członkostwa!</span><span class="sxs-lookup"><span data-stu-id="1365e-132">Since we already performed these steps in previous tutorials, we are ready to start using the Membership framework!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="1365e-133">Krok 1: Dodawanie nowych stron ASP.NET</span><span class="sxs-lookup"><span data-stu-id="1365e-133">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="1365e-134">W tym samouczku i dalej trzech firma Microsoft będzie można badanie różne funkcje dotyczące członkostwa i możliwości.</span><span class="sxs-lookup"><span data-stu-id="1365e-134">In this tutorial and the next three we will be examining various Membership-related functions and capabilities.</span></span> <span data-ttu-id="1365e-135">Szereg stron ASP.NET do zaimplementowania tematy zbadać w całym te samouczki są wymagane.</span><span class="sxs-lookup"><span data-stu-id="1365e-135">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="1365e-136">Utwórz tych stron, a następnie plik mapy witryny `(Web.sitemap)`.</span><span class="sxs-lookup"><span data-stu-id="1365e-136">Let's create those pages and then a site map file `(Web.sitemap)`.</span></span>

<span data-ttu-id="1365e-137">Rozpocznij od utworzenia nowego folderu do projektu o nazwie `Membership`.</span><span class="sxs-lookup"><span data-stu-id="1365e-137">Start by creating a new folder in the project named `Membership`.</span></span> <span data-ttu-id="1365e-138">Następnie dodaj pięć nowych stron ASP.NET do `Membership` folderu łączenie każdej strony zawierającej `Site.master` strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="1365e-138">Next, add five new ASP.NET pages to the `Membership` folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="1365e-139">Nazwa strony:</span><span class="sxs-lookup"><span data-stu-id="1365e-139">Name the pages:</span></span>

- `CreatingUserAccounts.aspx`
- `UserBasedAuthorization.aspx`
- `EnhancedCreateUserWizard.aspx`
- `AdditionalUserInfo.aspx`
- `Guestbook.aspx`

<span data-ttu-id="1365e-140">W tym momencie projektu Eksploratora rozwiązań powinien wyglądać podobnie do ekranu zrzut pokazano na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="1365e-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>


<span data-ttu-id="1365e-141">[![Dodano pięć nowych stron w folderze członkostwa](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-141">[![Five New Pages Have Been Added to the Membership Folder](creating-user-accounts-cs/_static/image2.png)](creating-user-accounts-cs/_static/image1.png)</span></span>

<span data-ttu-id="1365e-142">**Rysunek 1**: pięć nowych stron zostały dodane do `Membership` Folder ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-142">**Figure 1**: Five New Pages Have Been Added to the `Membership` Folder  ([Click to view full-size image](creating-user-accounts-cs/_static/image3.png))</span></span>


<span data-ttu-id="1365e-143">Każdej strony w tym momencie powinna mieć dwóch formantów zawartości, jeden dla każdej strony wzorcowej Elementy ContentPlaceHolders: `MainContent` i `LoginContent`.</span><span class="sxs-lookup"><span data-stu-id="1365e-143">Each page should, at this point, have the two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample1.aspx)]

<span data-ttu-id="1365e-144">Odwołania, który `LoginContent` znaczników domyślnego elementu ContentPlaceHolder na zawiera łącze do logowania się lub wylogowywania lokacji, w zależności od tego, czy użytkownik jest uwierzytelniony.</span><span class="sxs-lookup"><span data-stu-id="1365e-144">Recall that the `LoginContent` ContentPlaceHolder's default markup displays a link to log on or log off the site, depending on whether the user is authenticated.</span></span> <span data-ttu-id="1365e-145">Obecność `Content2` formantu zawartości, jednak zastępuje znaczników domyślnej strony wzorcowej.</span><span class="sxs-lookup"><span data-stu-id="1365e-145">The presence of the `Content2` Content control, however, overrides the master page's default markup.</span></span> <span data-ttu-id="1365e-146">Jak wspomniano w *<a id="_msoanchor_6"> </a> [omówienie uwierzytelniania formularzy](../introduction/an-overview-of-forms-authentication-cs.md)* samouczek, jest to przydatne w którym firma Microsoft nie ma być wyświetlane opcje związane z logowaniem w lewej kolumnie strony.</span><span class="sxs-lookup"><span data-stu-id="1365e-146">As we discussed in *<a id="_msoanchor_6"></a>[An Overview of Forms Authentication](../introduction/an-overview-of-forms-authentication-cs.md)* tutorial, this is useful in pages where we do not want to display login-related options in the left column.</span></span>

<span data-ttu-id="1365e-147">Dla tych pięć stron, jednak chęć pokazania znaczników domyślnej strony wzorcowej dla `LoginContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="1365e-147">For these five pages, however, we want to show the master page's default markup for the `LoginContent` ContentPlaceHolder.</span></span> <span data-ttu-id="1365e-148">W związku z tym usunąć deklaratywne kod znaczników dla `Content2` zawartości formantu.</span><span class="sxs-lookup"><span data-stu-id="1365e-148">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="1365e-149">Po wykonaniu tej czynności, każdej strony pięć znacznika powinna zawierać tylko jeden formant zawartości.</span><span class="sxs-lookup"><span data-stu-id="1365e-149">After doing so, each of the five page's markup should contain just one Content control.</span></span>

## <a name="step-2-creating-the-site-map"></a><span data-ttu-id="1365e-150">Krok 2: Tworzenie mapy witryny</span><span class="sxs-lookup"><span data-stu-id="1365e-150">Step 2: Creating the Site Map</span></span>

<span data-ttu-id="1365e-151">Wszystkie, oprócz najbardziej trivial witryn sieci Web muszą implementować jakiegoś interfejs użytkownika nawigacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-151">All but the most trivial websites need to implement some form of a navigational user interface.</span></span> <span data-ttu-id="1365e-152">Interfejs użytkownika nawigacji może być to prosta lista łącza do różnych sekcji witryny.</span><span class="sxs-lookup"><span data-stu-id="1365e-152">The navigation user interface may be a simple list of links to the various sections of the site.</span></span> <span data-ttu-id="1365e-153">Alternatywnie można organizować te linki do menu lub widok drzewa.</span><span class="sxs-lookup"><span data-stu-id="1365e-153">Alternatively, these links may be arranged into menus or tree views.</span></span> <span data-ttu-id="1365e-154">Jako strony deweloperów tworzenie interfejs użytkownika nawigacji jest tylko połowę wątku.</span><span class="sxs-lookup"><span data-stu-id="1365e-154">As page developers, creating the navigational user interface is only half of the story.</span></span> <span data-ttu-id="1365e-155">Należy także niektóre oznacza, że do definiowania struktury logicznej witryny w sposób łatwy w obsłudze i można aktualizować.</span><span class="sxs-lookup"><span data-stu-id="1365e-155">We also need some means to define the site's logical structure in a maintainable and updateable fashion.</span></span> <span data-ttu-id="1365e-156">Nowe strony są dodawane lub usuwane istniejących stron, chcemy można było zaktualizować pojedyncze źródło — mapy witryny — i mają te zmiany zostaną uwzględnione przez interfejs użytkownika nawigacji witryny.</span><span class="sxs-lookup"><span data-stu-id="1365e-156">As new pages are added or existing pages removed, we want to be able to update a single source – the site map – and have those modifications reflected across the site's navigational user interface.</span></span>

<span data-ttu-id="1365e-157">Te dwa zadania — Definiowanie mapy witryny i implementującej interfejs użytkownika nawigacji, oparte na mapie witryny — można łatwo osiągnąć dzięki użyciu framework mapy witryny i dodać formantów nawigacji w sieci Web w programie ASP.NET w wersji 2.0.</span><span class="sxs-lookup"><span data-stu-id="1365e-157">These two tasks – defining the site map and implementing a navigational user interface based on the site map – are easy to accomplish thanks to the Site Map framework and the Navigation Web controls added in ASP.NET version 2.0.</span></span> <span data-ttu-id="1365e-158">Umożliwia framework mapy witryny dla deweloperów zdefiniować mapy witryny sieci Web, a następnie do niej dostęp za pośrednictwem programowe interfejsu API ( [ `SiteMap` klasy](https://msdn.microsoft.com/library/system.web.sitemap.aspx)).</span><span class="sxs-lookup"><span data-stu-id="1365e-158">The Site Map framework allows for a developer to define a site map and then to access it through a programmatic API (the [`SiteMap` class](https://msdn.microsoft.com/library/system.web.sitemap.aspx)).</span></span> <span data-ttu-id="1365e-159">Wbudowane formanty nawigacji w sieci Web obejmują [Menu sterowania](https://msdn.microsoft.com/library/bz09dy46.aspx), [formantu TreeView](https://msdn.microsoft.com/library/3eafky27.aspx)i [kontrolki ścieżki mapy witryny](https://msdn.microsoft.com/library/3eafky27.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-159">The built-in Navigation Web controls include a [Menu control](https://msdn.microsoft.com/library/bz09dy46.aspx), the [TreeView control](https://msdn.microsoft.com/library/3eafky27.aspx), and the [SiteMapPath control](https://msdn.microsoft.com/library/3eafky27.aspx).</span></span>

<span data-ttu-id="1365e-160">Takie jak członkostwo i role struktur, została stworzona framework mapy witryny [modelu dostawcy](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-160">Like the Membership and Roles frameworks, the Site Map framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx).</span></span> <span data-ttu-id="1365e-161">Zadanie klasa dostawcy mapy witryny polega na generowaniu struktury w pamięci używane przez `SiteMap` klasy z magazynu danych, takich jak plik XML lub tabeli bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1365e-161">The job of the Site Map provider class is to generate the in-memory structure used by the `SiteMap` class from a persistent data store, such as an XML file or a database table.</span></span> <span data-ttu-id="1365e-162">.NET Framework jest dostarczany z domyślnego dostawcy mapy witryny, która odczytuje dane mapy witryny z pliku XML ([`XmlSiteMapProvider`](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx)), a jest to dostawca użyjemy w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="1365e-162">The .NET Framework ships with a default Site Map provider that reads the site map data from an XML file ([`XmlSiteMapProvider`](https://msdn.microsoft.com/library/system.web.xmlsitemapprovider.aspx)), and this is the provider we will be using in this tutorial.</span></span> <span data-ttu-id="1365e-163">Niektóre alternatywnych implementacji dostawcy mapy witryny zapoznaj się z rozdziałem dalsze odczyty na końcu tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="1365e-163">For some alternate Site Map provider implementations, refer to the Further Readings section at the end of this tutorial.</span></span>

<span data-ttu-id="1365e-164">Domyślny dostawca mapy witryny oczekuje poprawnie sformatowany plik XML o nazwie `Web.sitemap` istnieje katalog główny.</span><span class="sxs-lookup"><span data-stu-id="1365e-164">The default Site Map provider expects a properly-formatted XML file named `Web.sitemap` to exist the root directory.</span></span> <span data-ttu-id="1365e-165">Ponieważ używamy tego domyślnego dostawcę, należy dodać taki plik i definiowania struktury mapy witryny w odpowiednim formacie XML.</span><span class="sxs-lookup"><span data-stu-id="1365e-165">Since we are using this default provider, we need to add such a file and define the site map's structure in the appropriate XML format.</span></span> <span data-ttu-id="1365e-166">Aby dodać plik, kliknij prawym przyciskiem myszy nazwę projektu w Eksploratorze rozwiązań i wybierz polecenie Dodaj nowy element.</span><span class="sxs-lookup"><span data-stu-id="1365e-166">To add the file, right-click on the project name in Solution Explorer and choose Add New Item.</span></span> <span data-ttu-id="1365e-167">W oknie dialogowym opt można dodać pliku mapy witryny o nazwie typu `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="1365e-167">From the dialog box, opt to add a file of type Site Map named `Web.sitemap`.</span></span>


<span data-ttu-id="1365e-168">[![Dodaj plik o nazwie Web.sitemap do katalogu głównego projektu](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-168">[![Add a File Named Web.sitemap to the Project's Root Directory](creating-user-accounts-cs/_static/image5.png)](creating-user-accounts-cs/_static/image4.png)</span></span>

<span data-ttu-id="1365e-169">**Rysunek 2**: Dodaj plik o nazwie `Web.sitemap` do katalogu głównego projektu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-169">**Figure 2**: Add a File Named `Web.sitemap` to the Project's Root Directory  ([Click to view full-size image](creating-user-accounts-cs/_static/image6.png))</span></span>


<span data-ttu-id="1365e-170">Plik mapy witryny XML definiuje strukturę witryny sieci Web jako hierarchia.</span><span class="sxs-lookup"><span data-stu-id="1365e-170">The XML site map file defines the website's structure as a hierarchy.</span></span> <span data-ttu-id="1365e-171">Ta hierarchiczną relację w modelu w pliku XML za pomocą pochodzenia z `<siteMapNode>` elementów.</span><span class="sxs-lookup"><span data-stu-id="1365e-171">This hierarchical relationship is modeled in the XML file via the ancestry of the `<siteMapNode>` elements.</span></span> <span data-ttu-id="1365e-172">`Web.sitemap` Musi rozpoczynać się od `<siteMap>` węzła nadrzędnego, który ma dokładnie jedno `<siteMapNode>` podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="1365e-172">The `Web.sitemap` must start with a `<siteMap>` parent node that has precisely one `<siteMapNode>` child.</span></span> <span data-ttu-id="1365e-173">Tym najwyższego poziomu `<siteMapNode>` — element reprezentuje element główny hierarchii i może mieć dowolną liczbę węzłów podrzędnych.</span><span class="sxs-lookup"><span data-stu-id="1365e-173">This top-level `<siteMapNode>` element represents the root of the hierarchy, and may have an arbitrary number of descendent nodes.</span></span> <span data-ttu-id="1365e-174">Każdy `<siteMapNode>` musi zawierać element `title` atrybutu i opcjonalnie mogą obejmować `url` i `description` atrybuty, między innymi; każdego niepustym `url` atrybutu musi być unikatowa.</span><span class="sxs-lookup"><span data-stu-id="1365e-174">Each `<siteMapNode>` element must include a `title` attribute and may optionally include `url` and `description` attributes, among others; each non-empty `url` attribute must be unique.</span></span>

<span data-ttu-id="1365e-175">Wprowadź następujący kod XML w `Web.sitemap` pliku:</span><span class="sxs-lookup"><span data-stu-id="1365e-175">Enter the following XML into the `Web.sitemap` file:</span></span>

[!code-xml[Main](creating-user-accounts-cs/samples/sample2.xml)]

<span data-ttu-id="1365e-176">Powyżej znaczników mapy witryny definiuje hierarchii pokazany na rysunku 3.</span><span class="sxs-lookup"><span data-stu-id="1365e-176">The above site map markup defines the hierarchy shown in Figure 3.</span></span>


<span data-ttu-id="1365e-177">[![Mapy witryny reprezentuje strukturę hierarchiczną nawigacji](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-177">[![The Site Map Represents a Hierarchical Navigational Structure](creating-user-accounts-cs/_static/image8.png)](creating-user-accounts-cs/_static/image7.png)</span></span>

<span data-ttu-id="1365e-178">**Rysunek 3**: mapy witryny reprezentuje strukturę hierarchiczną nawigacji ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-178">**Figure 3**: The Site Map Represents a Hierarchical Navigational Structure  ([Click to view full-size image](creating-user-accounts-cs/_static/image9.png))</span></span>


## <a name="step-3-updating-the-master-page-to-include-a-navigational-user-interface"></a><span data-ttu-id="1365e-179">Krok 3: Aktualizowanie strony wzorcowej, aby uwzględnić interfejs użytkownika nawigacji</span><span class="sxs-lookup"><span data-stu-id="1365e-179">Step 3: Updating the Master Page to Include a Navigational User Interface</span></span>

<span data-ttu-id="1365e-180">Program ASP.NET zawiera szereg związanych z nawigacją formantów sieci Web podczas projektowania interfejsu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-180">ASP.NET includes a number of navigation-related Web controls for designing a user interface.</span></span> <span data-ttu-id="1365e-181">Obejmują one Menu, TreeView i kontrolki ścieżki mapy witryny.</span><span class="sxs-lookup"><span data-stu-id="1365e-181">These include the Menu, TreeView, and the SiteMapPath controls.</span></span> <span data-ttu-id="1365e-182">Formanty TreeView i Menu renderowania struktury mapy witryny w menu lub drzewo, odpowiednio, natomiast ścieżki mapy witryny Wyświetla ślad, który pokazuje bieżący węzeł odwiedzana oraz jego obiektów nadrzędnych.</span><span class="sxs-lookup"><span data-stu-id="1365e-182">The Menu and TreeView controls render the site map structure in a menu or a tree, respectively, whereas the SiteMapPath displays a breadcrumb that shows the current node being visited as well as its ancestors.</span></span> <span data-ttu-id="1365e-183">Dane mapy witryny może być powiązana z innymi danymi formanty sieci Web przy użyciu SiteMapDataSource i można uzyskać programistycznie przy użyciu `SiteMap` klasy.</span><span class="sxs-lookup"><span data-stu-id="1365e-183">The site map data can be bound to other data Web controls using the SiteMapDataSource and can be accessed programmatically via the `SiteMap` class.</span></span>

<span data-ttu-id="1365e-184">Ponieważ dogłębną dyskusję framework mapy witryny i formantów nawigacji wykracza poza zakres tego samouczka serii, zamiast niż poświęcić czas teraz obsługuje tworzenie własnej interfejs użytkownika nawigacji zamiast przekazania używaną w mojej *[ Praca z danymi w programie ASP.NET 2.0](../../data-access/index.md)* samouczka serii, używanym w kontrolce elementu powtarzanego do wyświetlania listy punktowanej dwa bezpośrednich łączy nawigacji, jak pokazano na rysunku 4.</span><span class="sxs-lookup"><span data-stu-id="1365e-184">Since a thorough discussion of the Site Map framework and the Navigation controls is beyond the scope of this tutorial series, rather than spend time crafting our own navigational user interface let's instead borrow the one used in my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series, which uses a Repeater control to display a two-deep bulleted list of navigation links, as shown in Figure 4.</span></span>

### <a name="adding-a-two-level-list-of-links-in-the-left-column"></a><span data-ttu-id="1365e-185">Dodawanie listy dwupoziomowej łączy w lewej kolumnie</span><span class="sxs-lookup"><span data-stu-id="1365e-185">Adding a Two-Level List of Links in the Left Column</span></span>

<span data-ttu-id="1365e-186">Aby utworzyć ten interfejs, Dodaj następujący znacznik deklaratywne `Site.master` lewej strony wzorcowej formantu kolumny gdzie tekst "TODO: Menu zostanie w tym miejscu..." się teraz znajduje.</span><span class="sxs-lookup"><span data-stu-id="1365e-186">To create this interface, add the following declarative markup to the `Site.master` master page's left column where the text "TODO: Menu will go here..." currently resides.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample3.aspx)]

<span data-ttu-id="1365e-187">Powyżej znaczników wiąże kontrolce elementu powtarzanego o nazwie `menu` do SiteMapDataSource, która zwraca zdefiniowany w hierarchii mapy witryny `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="1365e-187">The above markup binds a Repeater control named `menu` to a SiteMapDataSource, which returns the site map hierarchy defined in `Web.sitemap`.</span></span> <span data-ttu-id="1365e-188">Ponieważ formant SiteMapDataSource [ `ShowStartingNode` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) ma wartość False, uruchamia, zwracając hierarchii mapy witryny, począwszy od elementów podrzędnych węzła "Home".</span><span class="sxs-lookup"><span data-stu-id="1365e-188">Since the SiteMapDataSource control's [`ShowStartingNode` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.sitemapdatasource.showstartingnode.aspx) is set to False it starts returning the site map's hierarchy starting with the descendents of the "Home" node.</span></span> <span data-ttu-id="1365e-189">Wyświetla powtarzanego każdego z tych węzłów (obecnie tylko "członkostwa") w `<li>` elementu.</span><span class="sxs-lookup"><span data-stu-id="1365e-189">The Repeater displays each of these nodes (currently just "Membership") in an `<li>` element.</span></span> <span data-ttu-id="1365e-190">Inny, wewnętrzny elementu powtarzanego. następnie wyświetla elementy podrzędne bieżącego węzła w nieuporządkowaną listę zagnieżdżoną.</span><span class="sxs-lookup"><span data-stu-id="1365e-190">Another, inner Repeater then displays the current node's children in a nested unordered list.</span></span>

<span data-ttu-id="1365e-191">Na rysunku 4 przedstawiono powyżej znaczników przetworzonych wyników ze strukturą mapy witryny utworzone w kroku 2.</span><span class="sxs-lookup"><span data-stu-id="1365e-191">Figure 4 shows the above markup's rendered output with the site map structure we created in Step 2.</span></span> <span data-ttu-id="1365e-192">Powtarzanego renderuje podstawowego nieuporządkowaną listę znaczników; reguły arkusza stylów kaskadowych zdefiniowane w `Styles.css` są odpowiedzialne za aesthetically czytelnych układu.</span><span class="sxs-lookup"><span data-stu-id="1365e-192">The Repeater renders vanilla unordered list markup; the cascading style sheet rules defined in `Styles.css` are responsible for the aesthetically-pleasing layout.</span></span> <span data-ttu-id="1365e-193">Aby uzyskać bardziej szczegółowy opis działania powyżej znaczników, zapoznaj się [stron wzorcowych i nawigacji w witrynie](https://asp.net/learn/data-access/tutorial-03-cs.aspx) samouczka.</span><span class="sxs-lookup"><span data-stu-id="1365e-193">For a more detailed description of how the above markup works, refer to the [Master Pages and Site Navigation](https://asp.net/learn/data-access/tutorial-03-cs.aspx) tutorial.</span></span>


<span data-ttu-id="1365e-194">[![Nawigacyjne interfejs użytkownika jest renderowany przy użyciu zagnieżdżone nieuporządkowaną listy](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-194">[![The Navigational User Interface is Rendered Using Nested Unordered Lists](creating-user-accounts-cs/_static/image11.png)](creating-user-accounts-cs/_static/image10.png)</span></span>

<span data-ttu-id="1365e-195">**Rysunek 4**: interfejs użytkownika nawigacji jest renderowany przy użyciu zagnieżdżone nieuporządkowaną wymieniono ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-195">**Figure 4**: The Navigational User Interface is Rendered Using Nested Unordered Lists  ([Click to view full-size image](creating-user-accounts-cs/_static/image12.png))</span></span>


### <a name="adding-breadcrumb-navigation"></a><span data-ttu-id="1365e-196">Dodawanie nadrzędnych</span><span class="sxs-lookup"><span data-stu-id="1365e-196">Adding Breadcrumb Navigation</span></span>

<span data-ttu-id="1365e-197">Oprócz listy łącza w lewej kolumnie, umożliwia również mieć wyświetlania każdej strony [stron nadrzędnych](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29).</span><span class="sxs-lookup"><span data-stu-id="1365e-197">In addition to the list of links in the left column, let's also have each page display a [breadcrumb](http://en.wikipedia.org/wiki/Breadcrumb_%28navigation%29).</span></span> <span data-ttu-id="1365e-198">Ślad jest elementem interfejsu użytkownika nawigacji, pokazujący szybko użytkownikom ich bieżącą pozycję w hierarchii lokacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-198">A breadcrumb is a navigational user interface element that quickly shows users their current position within the site hierarchy.</span></span> <span data-ttu-id="1365e-199">Kontrolki ścieżki mapy witryny używa framework mapy witryny w celu określenia lokalizacji bieżącej strony mapy witryny, a następnie wyświetla ślad na podstawie tych informacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-199">The SiteMapPath control uses the Site Map framework to determine the current page's location in the site map and then displays a breadcrumb based on this information.</span></span>

<span data-ttu-id="1365e-200">W szczególności dodać `<span>` element do nagłówka strony wzorcowej `<div>` element i ustaw nowy `<span>` elementu `class` atrybutu "nawigacją".</span><span class="sxs-lookup"><span data-stu-id="1365e-200">Specifically, add a `<span>` element to the master page's header `<div>` element, and set the new `<span>` element's `class` attribute to "breadcrumb".</span></span> <span data-ttu-id="1365e-201">( `Styles.css` Klasa zawiera reguły dla klasy "nawigacją".) Następnie dodaj ścieżki mapy witryny w tym nowych `<span>` elementu.</span><span class="sxs-lookup"><span data-stu-id="1365e-201">(The `Styles.css` class contains a rule for a "breadcrumb" class.) Next, add a SiteMapPath to this new `<span>` element.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample4.aspx)]

<span data-ttu-id="1365e-202">Rysunek 5. pokazuje wyniki ścieżki mapy witryny podczas odwiedzania `~/Membership/CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="1365e-202">Figure 5 shows the output of the SiteMapPath when visiting `~/Membership/CreatingUserAccounts.aspx`.</span></span>


<span data-ttu-id="1365e-203">[![Łączach Wyświetla bieżącą stronę i zamapuj jego elementy nadrzędne w lokacji](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-203">[![The Breadcrumb Displays the Current Page and its Ancestors in the Site Map](creating-user-accounts-cs/_static/image14.png)](creating-user-accounts-cs/_static/image13.png)</span></span>

<span data-ttu-id="1365e-204">**Rysunek 5**: łączach Wyświetla bieżącą stronę i jego elementy nadrzędne mapy witryny ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-204">**Figure 5**: The Breadcrumb Displays the Current Page and its Ancestors in the Site Map  ([Click to view full-size image](creating-user-accounts-cs/_static/image15.png))</span></span>


## <a name="step-4-removing-the-custom-principal-and-identity-logic"></a><span data-ttu-id="1365e-205">Krok 4: Usunięcie niestandardowego podmiotu i logiki tożsamości</span><span class="sxs-lookup"><span data-stu-id="1365e-205">Step 4: Removing the Custom Principal and Identity Logic</span></span>

<span data-ttu-id="1365e-206">W *<a id="_msoanchor_7"> </a> [konfiguracji uwierzytelniania formularzy i Tematy zaawansowane](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)* samouczek widzieliśmy jak skojarzyć niestandardowe obiekty podmiot zabezpieczeń i tożsamość uwierzytelnionego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-206">In the *<a id="_msoanchor_7"></a>[Forms Authentication Configuration and Advanced Topics](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md)* tutorial we saw how to associate custom principal and identity objects to the authenticated user.</span></span> <span data-ttu-id="1365e-207">Firma Microsoft to realizowane przez tworzenie obsługi zdarzeń w `Global.asax` dla aplikacji `PostAuthenticateRequest` zdarzenie, które są generowane po `FormsAuthenticationModule` uwierzytelnieniu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-207">We accomplished this by creating an event handler in `Global.asax` for the application's `PostAuthenticateRequest` event, which fires after the `FormsAuthenticationModule` has authenticated the user.</span></span> <span data-ttu-id="1365e-208">W tej obsłudze zdarzeń możemy zastąpić `GenericPrincipal` i `FormsIdentity` obiektów dodanych przez `FormsAuthenticationModule` z `CustomPrincipal` i `CustomIdentity` obiekty utworzyliśmy w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="1365e-208">In this event handler we replaced the `GenericPrincipal` and `FormsIdentity` objects added by the `FormsAuthenticationModule` with the `CustomPrincipal` and `CustomIdentity` objects we created in that tutorial.</span></span>

<span data-ttu-id="1365e-209">Niestandardowe obiekty Principal role i tożsamości są przydatne w niektórych scenariuszach, w większości przypadków `GenericPrincipal` i `FormsIdentity` obiekty są wystarczające.</span><span class="sxs-lookup"><span data-stu-id="1365e-209">While custom principal and identity objects are useful in certain scenarios, in most cases the `GenericPrincipal` and `FormsIdentity` objects are sufficient.</span></span> <span data-ttu-id="1365e-210">W rezultacie myślę, że będzie zastanowić, aby powrócić do domyślnego zachowania.</span><span class="sxs-lookup"><span data-stu-id="1365e-210">Consequently, I think it would be worthwhile to return to the default behavior.</span></span> <span data-ttu-id="1365e-211">To zrobić przez usunięcie lub komentarzy limit `PostAuthenticateRequest` obsługi zdarzeń lub usuwając `Global.asax` całkowicie pliku.</span><span class="sxs-lookup"><span data-stu-id="1365e-211">Make this change by either removing or commenting out the `PostAuthenticateRequest` event handler or by deleting the `Global.asax` file entirely.</span></span>

## <a name="step-5-programmatically-creating-a-new-user"></a><span data-ttu-id="1365e-212">Krok 5: Programowe tworzenie nowego użytkownika</span><span class="sxs-lookup"><span data-stu-id="1365e-212">Step 5: Programmatically Creating a New User</span></span>

<span data-ttu-id="1365e-213">Aby utworzyć nowe konto użytkownika przy użyciu framework członkostwa `Membership` klasy [ `CreateUser` metody](https://msdn.microsoft.com/library/system.web.security.membership.createuser.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-213">To create a new user account through the Membership framework use the `Membership` class's [`CreateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.createuser.aspx).</span></span> <span data-ttu-id="1365e-214">Ta metoda ma wejściowych parametry dla nazwy użytkownika, hasła i inne pola dotyczące użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1365e-214">This method has input parameters for the username, password, and other user-related fields.</span></span> <span data-ttu-id="1365e-215">Na wywołanie, deleguje Tworzenie nowego konta użytkownika do skonfigurowanego dostawcy członkostwa, a następnie zwraca [ `MembershipUser` obiektu](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) reprezentujący właśnie utworzonego konta.</span><span class="sxs-lookup"><span data-stu-id="1365e-215">On invocation, it delegates the creation of the new user account to the configured Membership provider and then returns a [`MembershipUser` object](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) representing the just-created user account.</span></span>

<span data-ttu-id="1365e-216">`CreateUser` Metoda ma cztery przeciążenia każdego akceptowanie różne liczby parametrów wejściowych:</span><span class="sxs-lookup"><span data-stu-id="1365e-216">The `CreateUser` method has four overloads, each accepting a different number of input parameters:</span></span>

- [`CreateUser(username, password)`](https://msdn.microsoft.com/library/d8t4h2es.aspx)
- [`CreateUser(username, password, email)`](https://msdn.microsoft.com/library/t8yy6w3h.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, MembershipCreateStatus)`](https://msdn.microsoft.com/library/82xx2e62.aspx)
- [`CreateUser(username, password, email, passwordQuestion, passwordAnswer, isApproved, providerUserKey, MembershipCreateStatus)`](https://msdn.microsoft.com/library/ms152012.aspx)

<span data-ttu-id="1365e-217">Te cztery przeciążenia różnią się ilości zbieranych informacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-217">These four overloads differ on the amount of information that is collected.</span></span> <span data-ttu-id="1365e-218">Pierwszy przeciążenia wymaga na przykład tylko nazwę użytkownika i hasło dla nowego konta użytkownika, a drugi wymaga również adres e-mail użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-218">The first overload, for example, requires just the username and password for the new user account, whereas the second one also requires the user's email address.</span></span>

<span data-ttu-id="1365e-219">Te przeciążenia istnieje, ponieważ informacje wymagane do utworzenia nowego konta użytkownika zależy od ustawień konfiguracji dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-219">These overloads exist because the information needed to create a new user account depends on the Membership provider's configuration settings.</span></span> <span data-ttu-id="1365e-220">W *<a id="_msoanchor_8"> </a> [tworzenie schematu członkostwa w programie SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* możemy zbadać określania ustawień konfiguracji dostawcy członkostwa w samouczku `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="1365e-220">In the *<a id="_msoanchor_8"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial we examined specifying Membership provider configuration settings in `Web.config`.</span></span> <span data-ttu-id="1365e-221">Tabela 2 uwzględnione pełną listę ustawień konfiguracyjnych.</span><span class="sxs-lookup"><span data-stu-id="1365e-221">Table 2 included a complete list of the configuration settings.</span></span>

<span data-ttu-id="1365e-222">Jeden taki członkostwa dostawcy ustawienie konfiguracji, które ma wpływ na co `CreateUser` przeciążenia, które mogą być używane jest `requiresQuestionAndAnswer` ustawienie.</span><span class="sxs-lookup"><span data-stu-id="1365e-222">One such Membership provider configuration setting that impacts what `CreateUser` overloads may be used is the `requiresQuestionAndAnswer` setting.</span></span> <span data-ttu-id="1365e-223">Jeśli `requiresQuestionAndAnswer` ma ustawioną wartość `true` (ustawienie domyślne), a następnie podczas tworzenia nowego konta użytkownika firma Microsoft Wprowadź pytanie zabezpieczające i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="1365e-223">If `requiresQuestionAndAnswer` is set to `true` (the default), then when creating a new user account we must specify a security question and answer.</span></span> <span data-ttu-id="1365e-224">Te informacje są używane później, jeśli użytkownik musi zresetować lub zmienić swoje hasło.</span><span class="sxs-lookup"><span data-stu-id="1365e-224">This information is later used if the user needs to reset or change their password.</span></span> <span data-ttu-id="1365e-225">W szczególności w tym czasie są wyświetlane na pytanie zabezpieczające i wprowadzić poprawną odpowiedź w celu resetowania lub zmiany hasła.</span><span class="sxs-lookup"><span data-stu-id="1365e-225">Specifically, at that time they are shown the security question and they must enter the correct answer in order to reset or change their password.</span></span> <span data-ttu-id="1365e-226">W związku z tym jeśli `requiresQuestionAndAnswer` ustawiono `true` , a następnie podczas wywoływania jednej z dwóch pierwszych `CreateUser` overloads powoduje wyjątek, ponieważ brakuje pytanie zabezpieczające i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="1365e-226">Consequently, if the `requiresQuestionAndAnswer` is set to `true` then calling either of the first two `CreateUser` overloads results in an exception because the security question and answer are missing.</span></span> <span data-ttu-id="1365e-227">Ponieważ naszej aplikacji jest obecnie skonfigurowany do wymagają pytanie zabezpieczające i odpowiedzi, możemy należy użyć jednej z ostatnie dwa przeciążenia programowe tworzenie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-227">Since our application is currently configured to require a security question and answer, we will need to use one of the latter two overloads when creating user's programmatically.</span></span>

<span data-ttu-id="1365e-228">Aby zilustrować przy użyciu `CreateUser` metody, Utwórzmy interfejsu użytkownika, w którym firma Microsoft monit o podanie nazwy, hasła, poczty e-mail i odpowiedzi na pytanie zabezpieczające wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="1365e-228">To illustrate using the `CreateUser` method, let's create a user interface where we prompt the user for their name, password, email, and an answer to a pre-defined security question.</span></span> <span data-ttu-id="1365e-229">Otwórz `CreatingUserAccounts.aspx` strony `Membership` folderu i dodaj następujące formantów sieci Web do kontroli zawartości:</span><span class="sxs-lookup"><span data-stu-id="1365e-229">Open the `CreatingUserAccounts.aspx` page in the `Membership` folder and add the following Web controls to the Content control:</span></span>

- <span data-ttu-id="1365e-230">Pole tekstowe o nazwie `Username`</span><span class="sxs-lookup"><span data-stu-id="1365e-230">A TextBox named `Username`</span></span>
- <span data-ttu-id="1365e-231">Pole tekstowe o nazwie `Password`, których `TextMode` ma ustawioną wartość właściwości `Password`</span><span class="sxs-lookup"><span data-stu-id="1365e-231">A TextBox named `Password`, whose `TextMode` property is set to `Password`</span></span>
- <span data-ttu-id="1365e-232">Pole tekstowe o nazwie `Email`</span><span class="sxs-lookup"><span data-stu-id="1365e-232">A TextBox named `Email`</span></span>
- <span data-ttu-id="1365e-233">Etykieta o nazwie `SecurityQuestion` z jego `Text` wyczyścić właściwości</span><span class="sxs-lookup"><span data-stu-id="1365e-233">A Label named `SecurityQuestion` with its `Text` property cleared out</span></span>
- <span data-ttu-id="1365e-234">Pole tekstowe o nazwie `SecurityAnswer`</span><span class="sxs-lookup"><span data-stu-id="1365e-234">A TextBox named `SecurityAnswer`</span></span>
- <span data-ttu-id="1365e-235">Przycisk o nazwie `CreateAccountButton` których właściwość tekst ma wartość "Utwórz konto użytkownika"</span><span class="sxs-lookup"><span data-stu-id="1365e-235">A Button named `CreateAccountButton` whose Text property is set to "Create the User Account"</span></span>
- <span data-ttu-id="1365e-236">Etykieta o nazwie `CreateAccountResults` z jego `Text` wyczyścić właściwości</span><span class="sxs-lookup"><span data-stu-id="1365e-236">A Label control named `CreateAccountResults` with its `Text` property cleared out</span></span>

<span data-ttu-id="1365e-237">W tym momencie ekranie powinien wyglądać podobnie do ekranu zrzut pokazano na rysunku 6.</span><span class="sxs-lookup"><span data-stu-id="1365e-237">At this point your screen should look similar to the screen shot shown in Figure 6.</span></span>


<span data-ttu-id="1365e-238">[![Na stronie CreatingUserAccounts.aspx Dodaj różnych formantów sieci Web](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-238">[![Add the Various Web Controls to the CreatingUserAccounts.aspx Page](creating-user-accounts-cs/_static/image17.png)](creating-user-accounts-cs/_static/image16.png)</span></span>

<span data-ttu-id="1365e-239">**Rysunek 6**: Dodaj formanty sieci Web różnych `CreatingUserAccounts.aspx` strony ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-239">**Figure 6**: Add the Various Web Controls to the `CreatingUserAccounts.aspx` Page  ([Click to view full-size image](creating-user-accounts-cs/_static/image18.png))</span></span>


<span data-ttu-id="1365e-240">`SecurityQuestion` Etykiety i `SecurityAnswer` pole tekstowe są przeznaczone do wyświetlenia pytanie zabezpieczające wstępnie zdefiniowane i zbieranie odpowiedzi użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-240">The `SecurityQuestion` Label and `SecurityAnswer` TextBox are intended to display a pre-defined security question and collect the user's answer.</span></span> <span data-ttu-id="1365e-241">Należy pamiętać, że zarówno pytanie i odpowiedź zabezpieczeń są przechowywane na zasadzie użytkownika według, można pozwolić każdemu użytkownikowi na definiowanie własnych pytanie zabezpieczające.</span><span class="sxs-lookup"><span data-stu-id="1365e-241">Note that both the security question and answer are stored on a user-by-user basis, so it is possible to allow each user to define their own security question.</span></span> <span data-ttu-id="1365e-242">Jednak w tym przykładzie, I zdecydował się użyć pytanie zabezpieczające uniwersalnego, to znaczy: "Co to jest Twoje ulubione kolor?"</span><span class="sxs-lookup"><span data-stu-id="1365e-242">However, for this example I have decided to use a universal security question, namely: "What is your favorite color?"</span></span>

<span data-ttu-id="1365e-243">Aby zaimplementować to pytanie zabezpieczeń wstępnie zdefiniowane, należy dodać stałą do strony związane z kodem klasę o nazwie `passwordQuestion`, przypisywania go na pytanie zabezpieczające.</span><span class="sxs-lookup"><span data-stu-id="1365e-243">To implement this pre-defined security question, add a constant to the page's code-behind class named `passwordQuestion`, assigning it the security question.</span></span> <span data-ttu-id="1365e-244">Następnie w `Page_Load` obsługi zdarzeń, przypisz tym stała przeznaczona do `SecurityQuestion` etykiety `Text` właściwości:</span><span class="sxs-lookup"><span data-stu-id="1365e-244">Then, in the `Page_Load` event handler, assign this constant to the `SecurityQuestion` Label's `Text` property:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample5.cs)]

<span data-ttu-id="1365e-245">Następnie należy utworzyć programu obsługi zdarzeń dla `CreateAccountButton`w `Click` zdarzeń i Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="1365e-245">Next, create an event handler for the `CreateAccountButton`'s `Click` event and add the following code:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample6.cs)]

<span data-ttu-id="1365e-246">`Click` Uruchamia program obsługi zdarzeń, definiując zmiennej o nazwie `createStatus` typu [ `MembershipCreateStatus` ](https://msdn.microsoft.com/library/system.web.security.membershipcreatestatus.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-246">The `Click` event handler starts by defining a variable named `createStatus` of type [`MembershipCreateStatus`](https://msdn.microsoft.com/library/system.web.security.membershipcreatestatus.aspx).</span></span> <span data-ttu-id="1365e-247">`MembershipCreateStatus` to wyliczenie, które wskazuje stan `CreateUser` operacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-247">`MembershipCreateStatus` is an enumeration that indicates the status of the `CreateUser` operation.</span></span> <span data-ttu-id="1365e-248">Na przykład, jeśli konto użytkownika jest została pomyślnie utworzona, powstałe w ten sposób `MembershipCreateStatus` wystąpienie zostanie ustawiona na wartość `Success`; w drugim ręcznie, jeśli operacja nie powiedzie się, ponieważ już istnieje użytkownik o tej samej nazwy użytkownika, zostanie ustawiona na wartość `DuplicateUserName`.</span><span class="sxs-lookup"><span data-stu-id="1365e-248">For example, if the user account is created successfully, the resulting `MembershipCreateStatus` instance will be set to a value of `Success`; on the other hand, if the operation fails because there already exists a user with the same username, it will be set to a value of `DuplicateUserName`.</span></span> <span data-ttu-id="1365e-249">W `CreateUser` przeciążenia używamy, należy przekazać `MembershipCreateStatus` wystąpienie do metody jako `out` parametru.</span><span class="sxs-lookup"><span data-stu-id="1365e-249">In the `CreateUser` overload we use, we need to pass a `MembershipCreateStatus` instance into the method as an `out` parameter.</span></span> <span data-ttu-id="1365e-250">Ten parametr ma wartość odpowiednią wartość w `CreateUser` — metoda i firma Microsoft, można sprawdzić jego wartość po wywołaniu metody do określenia, czy konto użytkownika zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="1365e-250">This parameter is set to the appropriate value within the `CreateUser` method, and we can examine its value after the method call to determine whether the user account was successfully created.</span></span>

<span data-ttu-id="1365e-251">Po wywołaniu `CreateUser`, przekazując `createStatus`, `switch` instrukcji jest używany do wypełniania wyjściowego odpowiedni komunikat w zależności od wartość przypisana do `createStatus`.</span><span class="sxs-lookup"><span data-stu-id="1365e-251">After calling `CreateUser`, passing in `createStatus`, a `switch` statement is used to output an appropriate message depending on the value assigned to `createStatus`.</span></span> <span data-ttu-id="1365e-252">Rysunki 7 przedstawiono dane wyjściowe, gdy nowy użytkownik został pomyślnie utworzony.</span><span class="sxs-lookup"><span data-stu-id="1365e-252">Figures 7 shows the output when a new user has successfully been created.</span></span> <span data-ttu-id="1365e-253">Rysunki 8 do 9 wyświetlić dane wyjściowe, gdy konto użytkownika nie jest tworzone.</span><span class="sxs-lookup"><span data-stu-id="1365e-253">Figures 8 and 9 show the output when the user account is not created.</span></span> <span data-ttu-id="1365e-254">Na rysunku 8 obiekt odwiedzający wprowadzone hasło pięciu litery, który nie spełnia wymagania dotyczące siły hasła, które zostały zapisane w ustawienia konfiguracji dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-254">In Figure 8, the visitor entered a five-letter password, which does not meet the password strength requirements spelled out in the Membership provider's configuration settings.</span></span> <span data-ttu-id="1365e-255">Na rysunku nr 9 użytkownik próbuje utworzyć konto użytkownika z istniejącą nazwą użytkownika (utworzonym na rysunku 7).</span><span class="sxs-lookup"><span data-stu-id="1365e-255">In Figure 9, the visitor is attempting to create a user account with an existing username (the one created in Figure 7).</span></span>


<span data-ttu-id="1365e-256">[![Nowe konto użytkownika jest pomyślnie utworzony](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-256">[![A New User Account is Successfully Created](creating-user-accounts-cs/_static/image20.png)](creating-user-accounts-cs/_static/image19.png)</span></span>

<span data-ttu-id="1365e-257">**Rysunek 7**: A nowego konta użytkownika jest pomyślnie utworzony ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-257">**Figure 7**: A New User Account is Successfully Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image21.png))</span></span>


<span data-ttu-id="1365e-258">[![Nie utworzono konta użytkownika, ponieważ podane hasło jest zbyt słabe](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-258">[![The User Account is Not Created Because the Supplied Password is Too Weak](creating-user-accounts-cs/_static/image23.png)](creating-user-accounts-cs/_static/image22.png)</span></span>

<span data-ttu-id="1365e-259">**Rysunek 8**: nie utworzono konto użytkownika, ponieważ podane hasło jest zbyt słabe ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-259">**Figure 8**: The User Account is Not Created Because the Supplied Password is Too Weak  ([Click to view full-size image](creating-user-accounts-cs/_static/image24.png))</span></span>


<span data-ttu-id="1365e-260">[![To konto użytkownika nie utworzone, ponieważ nazwa użytkownika jest już w użyciu](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-260">[![The User Account is Not Created Because the Username is Already in Use](creating-user-accounts-cs/_static/image26.png)](creating-user-accounts-cs/_static/image25.png)</span></span>

<span data-ttu-id="1365e-261">**Rysunek 9**: konto użytkownika jest nie utworzone, ponieważ nazwa użytkownika jest już w użyciu ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-261">**Figure 9**: The User Account is Not Created Because the Username is Already in Use  ([Click to view full-size image](creating-user-accounts-cs/_static/image27.png))</span></span>


> [!NOTE]
> <span data-ttu-id="1365e-262">Możesz się zastanawiać, jak do ustalenia powodzenia lub niepowodzenia przy użyciu jednej z dwóch pierwszych `CreateUser` metoda przeciąża ani z którego ma parametr typu `MembershipCreateStatus`.</span><span class="sxs-lookup"><span data-stu-id="1365e-262">You may be wondering how to determine success or failure when using one of the first two `CreateUser` method overloads, neither of which has a parameter of type `MembershipCreateStatus`.</span></span> <span data-ttu-id="1365e-263">Throw tych dwóch pierwszych przeciążenia [ `MembershipCreateUserException` wyjątek](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.aspx) w wypadku awarii, która obejmuje [ `StatusCode` właściwości](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.statuscode.aspx) typu `MembershipCreateStatus`.</span><span class="sxs-lookup"><span data-stu-id="1365e-263">These first two overloads throw a [`MembershipCreateUserException` exception](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.aspx) in the face of a failure, which includes a [`StatusCode` property](https://msdn.microsoft.com/library/system.web.security.membershipcreateuserexception.statuscode.aspx) of type `MembershipCreateStatus`.</span></span>


<span data-ttu-id="1365e-264">Po utworzeniu kilka kont użytkowników, sprawdź, czy konta zostały utworzone przez wyświetlania zawartości `aspnet_Users` i `aspnet_Membership` tabelach `SecurityTutorials.mdf` bazy danych.</span><span class="sxs-lookup"><span data-stu-id="1365e-264">After creating a few user accounts, verify that the accounts have been created by listing the contents of the `aspnet_Users` and `aspnet_Membership` tables in the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="1365e-265">Jak pokazano na rysunku nr 10, po dodaniu dwóch użytkowników za pośrednictwem `CreatingUserAccounts.aspx` strony: Tito i Bruce.</span><span class="sxs-lookup"><span data-stu-id="1365e-265">As Figure 10 shows, I have added two users via the `CreatingUserAccounts.aspx` page: Tito and Bruce.</span></span>


<span data-ttu-id="1365e-266">[![Istnieją dwa użytkowników w magazynie użytkownika członkostwa: Tito i Bruce](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-266">[![There are Two Users in the Membership User Store: Tito and Bruce](creating-user-accounts-cs/_static/image29.png)](creating-user-accounts-cs/_static/image28.png)</span></span>

<span data-ttu-id="1365e-267">**Na rysunku nr 10**: Brak dwóch użytkowników w magazynie użytkownika członkostwa: Tito i Bruce ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-267">**Figure 10**: There are Two Users in the Membership User Store: Tito and Bruce  ([Click to view full-size image](creating-user-accounts-cs/_static/image30.png))</span></span>


<span data-ttu-id="1365e-268">Gdy magazynie członkostwa użytkownika zawiera teraz informacje o koncie Bruce i jego Tito, musimy jeszcze implementuje funkcje, które umożliwia Bruce lub Tito do logowania się do witryny.</span><span class="sxs-lookup"><span data-stu-id="1365e-268">While the Membership user store now includes Bruce and Tito's account information, we have yet to implement functionality that allows for Bruce or Tito to log on to the site.</span></span> <span data-ttu-id="1365e-269">Obecnie `Login.aspx` sprawdza poprawność poświadczeń użytkownika przed ustalony zbiór par nazwa użytkownika i hasło — robi *nie* sprawdzanie poprawności podanych poświadczeń przed framework członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-269">Currently, `Login.aspx` validates the user's credentials against a hard-coded set of username/password pairs – it does *not* validate the supplied credentials against the Membership framework.</span></span> <span data-ttu-id="1365e-270">Przy przeglądaniu teraz nowych kont użytkowników w `aspnet_Users` i `aspnet_Membership` tabel będzie musiał wystarczające.</span><span class="sxs-lookup"><span data-stu-id="1365e-270">For now seeing the new user accounts in the `aspnet_Users` and `aspnet_Membership` tables will have to suffice.</span></span> <span data-ttu-id="1365e-271">W następnym samouczku  *<a id="_msoanchor_9"> </a> [sprawdzania poprawności użytkownika poświadczeń przed członkostwa użytkownika przechowywania](validating-user-credentials-against-the-membership-user-store-cs.md)*, firma Microsoft będzie aktualizować strony logowania na potrzeby sprawdzania poprawności magazynu członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-271">In the next tutorial, *<a id="_msoanchor_9"></a>[Validating User Credentials Against the Membership User Store](validating-user-credentials-against-the-membership-user-store-cs.md)*, we will update the login page to validate against the Membership store.</span></span>

> [!NOTE]
> <span data-ttu-id="1365e-272">Jeśli nie ma żadnych użytkowników w Twojej `SecurityTutorials.mdf` bazy danych, może to być spowodowane aplikacji sieci web używa domyślnego dostawcę członkostwa `AspNetSqlMembershipProvider`, który korzysta z `ASPNETDB.mdf` bazy danych jako jego magazynu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-272">If you do not see any users in your `SecurityTutorials.mdf` database, it may be because your web application is using the default Membership provider, `AspNetSqlMembershipProvider`, which uses the `ASPNETDB.mdf` database as its user store.</span></span> <span data-ttu-id="1365e-273">Aby ustalić, czy na tym polega problem, kliknij przycisk Odśwież w Eksploratorze rozwiązań.</span><span class="sxs-lookup"><span data-stu-id="1365e-273">To determine if this is the problem, click the Refresh button in the Solution Explorer.</span></span> <span data-ttu-id="1365e-274">Jeśli w bazie danych o nazwie `ASPNETDB.mdf` został dodany do `App_Data` folderu, na tym polega problem.</span><span class="sxs-lookup"><span data-stu-id="1365e-274">If a database named `ASPNETDB.mdf` has been added to the `App_Data` folder, this is the problem.</span></span> <span data-ttu-id="1365e-275">Wróć do kroku 4 *<a id="_msoanchor_10"> </a> [tworzenie schematu członkostwa w programie SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* samouczek, w jaki sposób poprawnie skonfigurować dostawcę członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-275">Return to Step 4 of the *<a id="_msoanchor_10"></a>[Creating the Membership Schema in SQL Server](creating-the-membership-schema-in-sql-server-cs.md)* tutorial for instructions on how to properly configure the Membership provider.</span></span>


<span data-ttu-id="1365e-276">W większości Utwórz użytkownika scenariusze konta, użytkownik zobaczy niektórych interfejsu, aby wprowadzić swoją nazwę użytkownika, hasło, poczty e-mail i inne ważne informacje, w którym utworzono nowe konto.</span><span class="sxs-lookup"><span data-stu-id="1365e-276">In most create user account scenarios, the visitor is presented with some interface to enter their username, password, email, and other essential information, at which point a new account is created.</span></span> <span data-ttu-id="1365e-277">W tym kroku będziemy przeglądał ręcznego tworzenia takiego interfejsu i następnie pokazano, jak używać `Membership.CreateUser` metoda programowo dodać nowe konto użytkownika oparta na danych wprowadzonych przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-277">In this step we looked at building such an interface by hand and then saw how to use the `Membership.CreateUser` method to programmatically add the new user account based on the user's inputs.</span></span> <span data-ttu-id="1365e-278">Naszego kodu, jednak tylko utworzyć nowe konto użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-278">Our code, however, just created the new user account.</span></span> <span data-ttu-id="1365e-279">Nie wykonał wszelkich dalszych akcji, takich jak logowanie użytkownika do witryny przy użyciu konta użytkownika właśnie utworzony lub wysyłania do użytkownika wiadomość e-mail z potwierdzeniem.</span><span class="sxs-lookup"><span data-stu-id="1365e-279">It did not perform any follow up actions, like logging in the user to the site under the just-created user account, or sending a confirmation email to the user.</span></span> <span data-ttu-id="1365e-280">Te dodatkowe kroki wymagają dodatkowy kod w przycisku `Click` obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="1365e-280">These additional steps would require additional code in the Button's `Click` event handler.</span></span>

<span data-ttu-id="1365e-281">Program ASP.NET jest dostarczany z formancie CreateUserWizard, przeznaczoną do obsługi procesu tworzenia konta użytkownika, z renderowania interfejs użytkownika służący do tworzenia nowych kont użytkowników, do tworzenia konta w ramach członkostwa do wykonania po konta Tworzenie zadań, takich jak wysyła wiadomość e-mail z potwierdzeniem i logowania użytkownika właśnie utworzony w lokacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-281">ASP.NET ships with the CreateUserWizard control, which is designed to handle the user account creation process, from rendering a user interface for creating new user accounts, to creating the account in the Membership framework and performing post-account creation tasks, such as sending a confirmation email and logging the just-created user into the site.</span></span> <span data-ttu-id="1365e-282">Używanie w formancie CreateUserWizard jest tak proste, jak przeciąganie formancie CreateUserWizard z przybornika do strony, a następnie ustawić kilka właściwości.</span><span class="sxs-lookup"><span data-stu-id="1365e-282">Using the CreateUserWizard control is as simple as dragging the CreateUserWizard control from the Toolbox onto a page, and then setting a few properties.</span></span> <span data-ttu-id="1365e-283">W większości przypadków nie musisz zapisywać pojedynczy wiersz kodu.</span><span class="sxs-lookup"><span data-stu-id="1365e-283">In most cases, you won't need to write a single line of code.</span></span> <span data-ttu-id="1365e-284">Przeanalizujemy tego formantu pomysłowych szczegółowo w kroku 6.</span><span class="sxs-lookup"><span data-stu-id="1365e-284">We will explore this nifty control in detail in Step 6.</span></span>

<span data-ttu-id="1365e-285">Jeśli nowe konta użytkowników są tworzone tylko za pośrednictwem typowej strony sieci web Utwórz konto, jest mało prawdopodobne, że będzie trzeba napisać kod, który używa `CreateUser` metody jako formancie CreateUserWizard będzie prawdopodobnie odpowiadają Twoim potrzebom.</span><span class="sxs-lookup"><span data-stu-id="1365e-285">If new user accounts are only created through a typical Create Account web page, it is unlikely that you will ever need to write code that uses the `CreateUser` method, as the CreateUserWizard control will likely meet your needs.</span></span> <span data-ttu-id="1365e-286">Jednak `CreateUser` metoda jest przydatne w scenariuszach wymagających wysoce dostosowane środowisko użytkownika Utwórz konto lub konieczność programowane tworzenie nowych kont użytkowników za pomocą interfejsu alternatywnych.</span><span class="sxs-lookup"><span data-stu-id="1365e-286">However, the `CreateUser` method is handy in scenarios where you need a highly customized Create Account user experience or when you need to programmatically create new user accounts through an alternative interface.</span></span> <span data-ttu-id="1365e-287">Na przykład może być strona, która umożliwia użytkownikom przekazywanie pliku XML, który zawiera informacje o użytkowniku z innej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="1365e-287">For example, you might have a page that allows a user to upload an XML file that contains user information from some other application.</span></span> <span data-ttu-id="1365e-288">Strona może analizuje zawartość XML przekazanego pliku i utworzyć nowe konto dla każdego użytkownika reprezentowane w kodzie XML przez wywołanie metody `CreateUser` metody.</span><span class="sxs-lookup"><span data-stu-id="1365e-288">The page might parses the contents of the uploaded XML file and create a new account for each user represented in the XML by calling the `CreateUser` method.</span></span>

## <a name="step-6-creating-a-new-user-with-the-createuserwizard-control"></a><span data-ttu-id="1365e-289">Krok 6: Tworzenie nowego użytkownika z formancie CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="1365e-289">Step 6: Creating a New User with the CreateUserWizard Control</span></span>

<span data-ttu-id="1365e-290">Program ASP.NET jest dostarczany z kilku formantów sieci Web logowania.</span><span class="sxs-lookup"><span data-stu-id="1365e-290">ASP.NET ships with a number of Login Web controls.</span></span> <span data-ttu-id="1365e-291">Formanty pomocy w wielu typowych użytkownika dotyczące kont i logowania scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="1365e-291">These controls aid in many common user account- and login-related scenarios.</span></span> <span data-ttu-id="1365e-292">[Formancie CreateUserWizard](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx) jest jeden formant, przeznaczony do prezentowania interfejs użytkownika umożliwiający dodanie nowego konta użytkownika do struktury członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-292">The [CreateUserWizard control](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx) is one such control that is designed to present a user interface for adding a new user account to the Membership framework.</span></span>

<span data-ttu-id="1365e-293">Podobnie jak wiele innych kontrolek związane z logowaniem sieci Web można CreateUserWizard bez pisania pojedynczy wiersz kodu.</span><span class="sxs-lookup"><span data-stu-id="1365e-293">Like many of the other Login-related Web controls, the CreateUserWizard can be used without writing a single line of code.</span></span> <span data-ttu-id="1365e-294">Intuicyjnie udostępnia interfejs użytkownika na podstawie dostawcy członkostwa ustawienia konfiguracji i wewnętrznie wywołania `Membership` klasy `CreateUser` metody po użytkownik wprowadza niezbędne informacje i kliknie przycisk "Utwórz użytkownika".</span><span class="sxs-lookup"><span data-stu-id="1365e-294">It intuitively provides a user interface based on the Membership provider's configuration settings and internally calls the `Membership` class's `CreateUser` method after the user enters the necessary information and clicks the "Create User" button.</span></span> <span data-ttu-id="1365e-295">W formancie CreateUserWizard jest bardzo można dostosowywać.</span><span class="sxs-lookup"><span data-stu-id="1365e-295">The CreateUserWizard control is extremely customizable.</span></span> <span data-ttu-id="1365e-296">Brak hosta zdarzeń uruchamianych na różnych etapach procesu tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="1365e-296">There are a host of events that fire during various stages of the account creation process.</span></span> <span data-ttu-id="1365e-297">Można utworzyć procedury obsługi zdarzeń, w razie potrzeby można wstawić niestandardowej logiki do przepływu pracy tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="1365e-297">We can create event handlers, as needed, to inject custom logic into the account creation workflow.</span></span> <span data-ttu-id="1365e-298">Ponadto CreateUserWizard wygląd jest bardzo elastyczny.</span><span class="sxs-lookup"><span data-stu-id="1365e-298">Furthermore, the CreateUserWizard's appearance is very flexible.</span></span> <span data-ttu-id="1365e-299">Istnieje wiele właściwości, które definiują wygląd domyślny interfejs; w razie potrzeby formantu można przekonwertować szablon lub rejestracja użytkownika dodatkowe "kroki" mogą być dodane.</span><span class="sxs-lookup"><span data-stu-id="1365e-299">There are a number of properties that define the appearance of the default interface; if necessary, the control can be converted into a template or additional user registration "steps" may be added.</span></span>

<span data-ttu-id="1365e-300">Zacznijmy od przyjrzeć się przy użyciu domyślnego interfejsu i zachowanie formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-300">Let's start with a look at using the CreateUserWizard control's default interface and behavior.</span></span> <span data-ttu-id="1365e-301">Firma Microsoft będzie następnie eksplorować jak dostosować wygląd za pośrednictwem właściwości i zdarzeń formantu.</span><span class="sxs-lookup"><span data-stu-id="1365e-301">We'll then explore how to customize the appearance via the control's properties and events.</span></span>

### <a name="examining-the-createuserwizards-default-interface-and-behavior"></a><span data-ttu-id="1365e-302">Badanie CreateUserWizard domyślnego interfejsu i zachowania</span><span class="sxs-lookup"><span data-stu-id="1365e-302">Examining the CreateUserWizard's Default Interface and Behavior</span></span>

<span data-ttu-id="1365e-303">Wróć do `CreatingUserAccounts.aspx` strony `Membership` folderu, Przełącz do trybu projektowania lub podziału, a następnie dodaj formancie CreateUserWizard do górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="1365e-303">Return to the `CreatingUserAccounts.aspx` page in the `Membership` folder, switch to the Design or Split mode, and then add a CreateUserWizard control to the top of the page.</span></span> <span data-ttu-id="1365e-304">W sekcji Formanty logowania przybornika usterki w formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-304">The CreateUserWizard control is filed under the Toolbox's Login controls section.</span></span> <span data-ttu-id="1365e-305">Po dodaniu formantu, ustaw jej `ID` właściwości `RegisterUser`.</span><span class="sxs-lookup"><span data-stu-id="1365e-305">After adding the control, set its `ID` property to `RegisterUser`.</span></span> <span data-ttu-id="1365e-306">Jak zrzut ekranu w przedstawia rysunek 11, CreateUserWizard renderuje interfejs z pól tekstowych o nazwę użytkownika, hasło nowego użytkownika, adres e-mail i pytanie zabezpieczające i odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="1365e-306">As the screen shot in Figure 11 shows, the CreateUserWizard renders an interface with textboxes for the new user's username, password, email address, and security question and answer.</span></span>


<span data-ttu-id="1365e-307">[![Renderuje formancie CreateUserWizard ogólnego Tworzenie interfejsu użytkownika](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-307">[![The CreateUserWizard Control Renders a Generic Create User Interface](creating-user-accounts-cs/_static/image32.png)](creating-user-accounts-cs/_static/image31.png)</span></span>

<span data-ttu-id="1365e-308">**Rysunek 11**: formancie CreateUserWizard renderuje ogólne Tworzenie interfejsu użytkownika ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-308">**Figure 11**: The CreateUserWizard Control Renders a Generic Create User Interface  ([Click to view full-size image](creating-user-accounts-cs/_static/image33.png))</span></span>


<span data-ttu-id="1365e-309">Załóżmy Poświęć chwilę, aby porównać domyślny interfejs użytkownika generowane w formancie CreateUserWizard z interfejsem utworzonego w kroku 5.</span><span class="sxs-lookup"><span data-stu-id="1365e-309">Let's take a moment to compare the default user interface generated by the CreateUserWizard control with the interface we created in Step 5.</span></span> <span data-ttu-id="1365e-310">Po pierwsze w formancie CreateUserWizard umożliwia obiektu odwiedzającego określić pytanie zabezpieczające i odpowiedzi, naszych interfejsu utworzone ręcznie stosować pytanie zabezpieczające wstępnie zdefiniowane.</span><span class="sxs-lookup"><span data-stu-id="1365e-310">For starters, the CreateUserWizard control allows the visitor to specify both the security question and answer, whereas our manually-created interface used a pre-defined security question.</span></span> <span data-ttu-id="1365e-311">Interfejs w formancie CreateUserWizard także formanty walidacji konieczne było jeszcze do implementacji sprawdzania poprawności na naszych interfejsu pól formularza.</span><span class="sxs-lookup"><span data-stu-id="1365e-311">The CreateUserWizard control's interface also includes validation controls, whereas we had yet to implement validation on our interface's form fields.</span></span> <span data-ttu-id="1365e-312">I interfejsie kontroli CreateUserWizard zawiera pole tekstowe "Potwierdź hasło" (wraz z CompareValidator aby upewnić się, że wprowadzony tekst "Password" i "Password porównania" pola tekstowe są takie same).</span><span class="sxs-lookup"><span data-stu-id="1365e-312">And the CreateUserWizard control interface includes a "Confirm Password" textbox (along with a CompareValidator to ensure that the text entered the "Password" and "Compare Password" textboxes are equal).</span></span>

<span data-ttu-id="1365e-313">Interesujące jest to, że w formancie CreateUserWizard sprawdza ustawienia konfiguracji dostawcy członkostwa, podczas renderowania interfejs użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-313">What's interesting is that the CreateUserWizard control consults the Membership provider's configuration settings when rendering its user interface.</span></span> <span data-ttu-id="1365e-314">Na przykład pól tekstowych pytanie i odpowiedź zabezpieczeń są wyświetlane tylko wtedy, jeśli `requiresQuestionAndAnswer` ma wartość True.</span><span class="sxs-lookup"><span data-stu-id="1365e-314">For example, the security question and answer textboxes are only displayed if `requiresQuestionAndAnswer` is set to True.</span></span> <span data-ttu-id="1365e-315">Podobnie, CreateUserWizard automatycznie dodaje kontrolkę RegularExpressionValidator, aby upewnić się, że spełniono wymagania dotyczące siły hasła i ustawia jej `ErrorMessage` i `ValidationExpression` na podstawie właściwości `minRequiredPasswordLength`, `minRequiredNonalphanumericCharacters`i `passwordStrengthRegularExpression` ustawienia konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="1365e-315">Likewise, CreateUserWizard automatically adds a RegularExpressionValidator control to ensure that the password strength requirements are met, and sets its `ErrorMessage` and `ValidationExpression` properties based on the `minRequiredPasswordLength`, `minRequiredNonalphanumericCharacters`, and `passwordStrengthRegularExpression` configuration settings.</span></span>

<span data-ttu-id="1365e-316">Formancie CreateUserWizard, jak jego nazwa wskazuje, jest określana na podstawie [formantu kreatora](https://msdn.microsoft.com/library/s2etd1ek.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-316">The CreateUserWizard control, as its name implies, is derived from the [Wizard control](https://msdn.microsoft.com/library/s2etd1ek.aspx).</span></span> <span data-ttu-id="1365e-317">Kreator formantów są przeznaczone do zapewniają interfejs do wykonywania zadań wieloetapowych.</span><span class="sxs-lookup"><span data-stu-id="1365e-317">Wizard controls are designed to provide an interface for completing multi-step tasks.</span></span> <span data-ttu-id="1365e-318">Kreator formantu może mieć dowolną liczbę `WizardSteps`, z których każdy jest szablon, który definiuje HTML oraz formanty sieci Web dla tego kroku.</span><span class="sxs-lookup"><span data-stu-id="1365e-318">A Wizard control may have an arbitrary number of `WizardSteps`, each of which is a template that defines the HTML and Web controls for that step.</span></span> <span data-ttu-id="1365e-319">Kontrola Kreator wyświetla początkowo pierwszy `WizardStep`, wraz z kontrolki, które umożliwiają użytkownikowi przejść od jednego kroku do następnej lub wrócić do poprzednich kroków.</span><span class="sxs-lookup"><span data-stu-id="1365e-319">The Wizard control initially displays the first `WizardStep`, along with navigation controls that permit the user to proceed from one step to the next, or to return to previous steps.</span></span>

<span data-ttu-id="1365e-320">Jak pokazano na deklaratywne znaczników w rysunek 11, formancie CreateUserWizard domyślny interfejs zawiera dwie `WizardSteps:`</span><span class="sxs-lookup"><span data-stu-id="1365e-320">As the declarative markup in Figure 11 shows, the CreateUserWizard control's default interface includes two `WizardSteps:`</span></span>

- <span data-ttu-id="1365e-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizardstep.aspx) — renderuje interfejsu zbierać informacje dotyczące tworzenia nowego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-321">[`CreateUserWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizardstep.aspx) – renders the interface to collect information for creating the new user account.</span></span> <span data-ttu-id="1365e-322">Jest to krok pokazano na rysunku nr 11.</span><span class="sxs-lookup"><span data-stu-id="1365e-322">This is the step shown in Figure 11.</span></span>
- <span data-ttu-id="1365e-323">[`CompleteWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.completewizardstep.aspx) — Wyświetla komunikat informujący, że konto zostało pomyślnie utworzone.</span><span class="sxs-lookup"><span data-stu-id="1365e-323">[`CompleteWizardStep`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.completewizardstep.aspx) – renders a message indicating that the account has successfully been created.</span></span>

<span data-ttu-id="1365e-324">Wygląd i zachowanie CreateUserWizard można modyfikować, konwertując jeden z tych kroków do szablonów lub przez dodanie własnych `WizardSteps`.</span><span class="sxs-lookup"><span data-stu-id="1365e-324">The CreateUserWizard's appearance and behavior can be modified by converting either of these steps to templates, or by adding your own `WizardSteps`.</span></span> <span data-ttu-id="1365e-325">Zajmiemy Dodawanie `WizardStep` interfejsu rejestracji w *przechowywania dodatkowych informacji użytkownika* samouczka.</span><span class="sxs-lookup"><span data-stu-id="1365e-325">We will look at adding a `WizardStep` to the registration interface in the *Storing Additional User Information* tutorial.</span></span>

<span data-ttu-id="1365e-326">Zobaczmy formancie CreateUserWizard w akcji.</span><span class="sxs-lookup"><span data-stu-id="1365e-326">Let's see the CreateUserWizard control in action.</span></span> <span data-ttu-id="1365e-327">Odwiedź stronę `CreatingUserAccounts.aspx` strony za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="1365e-327">Visit the `CreatingUserAccounts.aspx` page through a browser.</span></span> <span data-ttu-id="1365e-328">Najpierw wprowadź niektóre nieprawidłowe wartości w interfejsie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-328">Start by entering some invalid values into the CreateUserWizard's interface.</span></span> <span data-ttu-id="1365e-329">Spróbuj wprowadzić hasło, które nie jest zgodna z wymagań odnośnie siły hasła lub pusty textbox zostawianie "Nazwa użytkownika".</span><span class="sxs-lookup"><span data-stu-id="1365e-329">Try entering a password that doesn't conform to the password strength requirements, or leaving the "User Name" textbox empty.</span></span> <span data-ttu-id="1365e-330">CreateUserWizard wyświetli odpowiedni komunikat o błędzie.</span><span class="sxs-lookup"><span data-stu-id="1365e-330">The CreateUserWizard will display an appropriate error message.</span></span> <span data-ttu-id="1365e-331">Rysunek 12 przedstawiono dane wyjściowe podczas próby utworzenia użytkownika z niewystarczająco silne hasło.</span><span class="sxs-lookup"><span data-stu-id="1365e-331">Figure 12 shows the output when attempting to create a user with an insufficiently strong password.</span></span>


<span data-ttu-id="1365e-332">[![CreateUserWizard automatycznie Injects formanty walidacji](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-332">[![The CreateUserWizard Automatically Injects Validation Controls](creating-user-accounts-cs/_static/image35.png)](creating-user-accounts-cs/_static/image34.png)</span></span>

<span data-ttu-id="1365e-333">**Rysunek 12**: CreateUserWizard automatycznie wprowadza formanty walidacji ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-333">**Figure 12**: The CreateUserWizard Automatically Injects Validation Controls  ([Click to view full-size image](creating-user-accounts-cs/_static/image36.png))</span></span>


<span data-ttu-id="1365e-334">Następnie wprowadź odpowiednie wartości w CreateUserWizard i kliknij przycisk "Utwórz użytkownika".</span><span class="sxs-lookup"><span data-stu-id="1365e-334">Next, enter appropriate values into the CreateUserWizard and click the "Create User" button.</span></span> <span data-ttu-id="1365e-335">Zakładając, że wymagane pola zostały wprowadzone i siły hasła jest wystarczająca, CreateUserWizard utworzy nowe konto użytkownika za pośrednictwem członkostwa w ramach i wyświetl `CompleteWizardStep`obiektu interfejsu (patrz rysunek 13).</span><span class="sxs-lookup"><span data-stu-id="1365e-335">Assuming the required fields have been entered and the password's strength is sufficient, the CreateUserWizard will create a new user account through the Membership framework and then display the `CompleteWizardStep`'s interface (see Figure 13).</span></span> <span data-ttu-id="1365e-336">W tle wywołuje CreateUserWizard `Membership.CreateUser` — metoda, podobnie jak robiliśmy w kroku 5.</span><span class="sxs-lookup"><span data-stu-id="1365e-336">Behind the scenes, the CreateUserWizard calls the `Membership.CreateUser` method, just like we did in Step 5.</span></span>


<span data-ttu-id="1365e-337">[![Nowe konto użytkownika ma pomyślnie utworzone](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-337">[![A New User Account has Successfully Been Created](creating-user-accounts-cs/_static/image38.png)](creating-user-accounts-cs/_static/image37.png)</span></span>

<span data-ttu-id="1365e-338">**Rysunek 13**: A nowego konta użytkownika została pomyślnie zostały utworzone ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-338">**Figure 13**: A New User Account has Successfully Been Created  ([Click to view full-size image](creating-user-accounts-cs/_static/image39.png))</span></span>


> [!NOTE]
> <span data-ttu-id="1365e-339">Jak pokazano na rysunku 13, `CompleteWizardStep`przez interfejs zawiera przycisku Kontynuuj.</span><span class="sxs-lookup"><span data-stu-id="1365e-339">As Figure 13 shows, the `CompleteWizardStep`'s interface includes a Continue button.</span></span> <span data-ttu-id="1365e-340">Jednak w tym momencie kliknięcie tak powoduje wykonanie odświeżania strony, pozostawiając obiekt odwiedzający na tej samej stronie.</span><span class="sxs-lookup"><span data-stu-id="1365e-340">However, at this point clicking it just performs a postback, leaving the visitor on the same page.</span></span> <span data-ttu-id="1365e-341">W sekcji "Dostosowanie wyglądu i zachowania za pośrednictwem jego właściwości CreateUserWizard" przedstawiono, jak mogą mieć ten przycisk wysłać użytkownika `Default.aspx` (lub innej strony).</span><span class="sxs-lookup"><span data-stu-id="1365e-341">In the "Customizing the CreateUserWizard's Appearance and Behavior Through Its Properties" section we will look at how you can have this button send the visitor to `Default.aspx` (or some other page).</span></span>


<span data-ttu-id="1365e-342">Po utworzeniu nowego konta użytkownika, wróć do programu Visual Studio i sprawdź, czy `aspnet_Users` i `aspnet_Membership` tabel, takich jak robiliśmy na rysunku nr 10, aby sprawdzić, czy konto została pomyślnie utworzona.</span><span class="sxs-lookup"><span data-stu-id="1365e-342">After creating a new user account, return to Visual Studio and examine the `aspnet_Users` and `aspnet_Membership` tables like we did in Figure 10 to verify that the account was successfully created.</span></span>

### <a name="customizing-the-createuserwizards-behavior-and-appearance-through-its-properties"></a><span data-ttu-id="1365e-343">Dostosowywanie zachowania i wyglądu w jego właściwościach CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="1365e-343">Customizing the CreateUserWizard's Behavior and Appearance Through Its Properties</span></span>

<span data-ttu-id="1365e-344">Na różne sposoby, za pomocą właściwości, można dostosować CreateUserWizard `WizardSteps`i procedury obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="1365e-344">The CreateUserWizard can be customized in a variety of ways, through properties, `WizardSteps`, and event handlers.</span></span> <span data-ttu-id="1365e-345">W tej sekcji przedstawiono, jak dostosować wygląd formantu za pośrednictwem jej właściwości; Następna sekcja analizuje rozszerzanie zachowanie formantu za pomocą programów obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="1365e-345">In this section we will look at how to customize the control's appearance through its properties; the next section looks at extending the control's behavior through event handlers.</span></span>

<span data-ttu-id="1365e-346">Praktycznie cały tekst wyświetlany w formancie CreateUserWizard domyślnego interfejsu użytkownika można dostosować za pomocą jego nadmiarem właściwości.</span><span class="sxs-lookup"><span data-stu-id="1365e-346">Virtually all of the text displayed in the CreateUserWizard control's default user interface can be customized through its plethora of properties.</span></span> <span data-ttu-id="1365e-347">Na przykład "Nazwa użytkownika", "Password", "Potwierdź hasło", "E-mail", "Pytanie zabezpieczające" i "Odpowiedź zabezpieczeń" etykiety wyświetlane z lewej strony pól tekstowych może zostać dostosowane przez [ `UserNameLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx), [ `PasswordLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx), [ `ConfirmPasswordLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx), [ `EmailLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx), [ `QuestionLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx), i [ `AnswerLabelText` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx)właściwości, odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="1365e-347">For example, the "User Name", "Password", "Confirm Password", "E-mail", "Security Question", and "Security Answer" labels displayed to the left of the textboxes can be customized by the [`UserNameLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.usernamelabeltext.aspx), [`PasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.passwordlabeltext.aspx), [`ConfirmPasswordLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.confirmpasswordlabeltext.aspx), [`EmailLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.emaillabeltext.aspx), [`QuestionLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.questionlabeltext.aspx), and [`AnswerLabelText`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.answerlabeltext.aspx) properties, respectively.</span></span> <span data-ttu-id="1365e-348">Podobnie, nie ma właściwości określająca tekst "Tworzenie użytkownika" i "Continue" przycisków w `CreateUserWizardStep` i `CompleteWizardStep`, jak również tak, jakby tych przycisków są renderowane jako przyciski, LinkButtons lub ImageButtons.</span><span class="sxs-lookup"><span data-stu-id="1365e-348">Likewise, there are properties for specifying the text for the "Create User" and "Continue" buttons in the `CreateUserWizardStep` and `CompleteWizardStep`, as well as if these buttons are rendered as Buttons, LinkButtons, or ImageButtons.</span></span>

<span data-ttu-id="1365e-349">Kolory, czcionki, obramowania i inne elementy wizualne mogą być konfigurowane przez hosta właściwości stylu.</span><span class="sxs-lookup"><span data-stu-id="1365e-349">The colors, borders, fonts, and other visual elements are configurable through a host of style properties.</span></span> <span data-ttu-id="1365e-350">Wspólne właściwości stylu formantu sieci Web — ma CreateUserWizard formancie `BackColor`, `BorderStyle`, `CssClass`, `Font`i tak dalej — i kilka właściwości stylu do definiowania wyglądu dla poszczególnych sekcji Interfejs w CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-350">The CreateUserWizard control itself has the common Web control style properties – `BackColor`, `BorderStyle`, `CssClass`, `Font`, and so on – and there are a number of style properties for defining the appearance for particular sections of the CreateUserWizard's interface.</span></span> <span data-ttu-id="1365e-351">[ `TextBoxStyle` Właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx), na przykład określa style dla pól tekstowych w `CreateUserWizardStep`, gdy [ `TitleTextStyle` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx) definiuje styl tytułu ("zamówić Twoje nowe Konto").</span><span class="sxs-lookup"><span data-stu-id="1365e-351">The [`TextBoxStyle` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.textboxstyle.aspx), for instance, defines the styles for the textboxes in the `CreateUserWizardStep`, while the [`TitleTextStyle` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.titletextstyle.aspx) defines the style for the title ("Sign Up for Your New Account").</span></span>

<span data-ttu-id="1365e-352">Oprócz właściwości związanych z wygląd istnieje wiele właściwości, które wpływają na działanie w formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-352">In addition to the appearance-related properties, there are a number of properties that affect the CreateUserWizard control's behavior.</span></span> <span data-ttu-id="1365e-353">[ `DisplayCancelButton` Właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx), jeśli jest ustawiona na wartość True, wskazuje przycisk Anuluj, obok przycisku "Tworzenie użytkownika" (wartość domyślna to False).</span><span class="sxs-lookup"><span data-stu-id="1365e-353">The [`DisplayCancelButton` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.wizard.displaycancelbutton.aspx), if set to True, displays a Cancel button next to the "Create User" button (the default value is False).</span></span> <span data-ttu-id="1365e-354">Po wyświetleniu przycisk Anuluj, należy również ustawić [ `CancelDestinationPageUrl` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx), który określa stronę użytkownika są wysyłane do po kliknięciu przycisku Anuluj.</span><span class="sxs-lookup"><span data-stu-id="1365e-354">If you display the Cancel button, be sure to also set the [`CancelDestinationPageUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx), which specifies the page the user is sent to after clicking Cancel.</span></span> <span data-ttu-id="1365e-355">Jak wspomniano w poprzedniej sekcji, przycisku Kontynuuj w `CompleteWizardStep`przez interfejs powoduje odświeżenie strony, ale pozostawia obiekt odwiedzający na tej samej stronie.</span><span class="sxs-lookup"><span data-stu-id="1365e-355">As noted in the previous section, the Continue button in the `CompleteWizardStep`'s interface causes a postback, but leaves the visitor on the same page.</span></span> <span data-ttu-id="1365e-356">Aby wysłać obiekt odwiedzający do innej strony po kliknięciu przycisku Kontynuuj, wystarczy określić adres URL w [ `ContinueDestinationPageUrl` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-356">To send the visitor to some other page after clicking the Continue button, simply specify the URL in the [`ContinueDestinationPageUrl` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.continuedestinationpageurl.aspx).</span></span>

<span data-ttu-id="1365e-357">Ta funkcja pozwala zaktualizować `RegisterUser` formancie CreateUserWizard przycisk Anuluj i wysłać użytkownika `Default.aspx` po kliknięciu przycisku Anuluj lub Kontynuuj.</span><span class="sxs-lookup"><span data-stu-id="1365e-357">Let's update the `RegisterUser` CreateUserWizard control to show a Cancel button and to send the visitor to `Default.aspx` when the Cancel or Continue buttons are clicked.</span></span> <span data-ttu-id="1365e-358">Aby to zrobić, ustaw `DisplayCancelButton` właściwości na wartość True, a oba `CancelDestinationPageUrl` i `ContinueDestinationPageUrl` właściwości "~ / Default.aspx".</span><span class="sxs-lookup"><span data-stu-id="1365e-358">To accomplish this, set the `DisplayCancelButton` property to True and both the `CancelDestinationPageUrl` and `ContinueDestinationPageUrl` properties to "~/Default.aspx".</span></span> <span data-ttu-id="1365e-359">Rysunek 14 zawiera zaktualizowane CreateUserWizard widzianego za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="1365e-359">Figure 14 shows the updated CreateUserWizard when viewed through a browser.</span></span>


<span data-ttu-id="1365e-360">[![Element CreateUserWizardStep zawiera przycisk Anuluj](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-360">[![The CreateUserWizardStep Includes a Cancel Button](creating-user-accounts-cs/_static/image41.png)](creating-user-accounts-cs/_static/image40.png)</span></span>

<span data-ttu-id="1365e-361">**Rysunek 14**: `CreateUserWizardStep` zawiera przycisk Anuluj ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-361">**Figure 14**: The `CreateUserWizardStep` Includes a Cancel Button  ([Click to view full-size image](creating-user-accounts-cs/_static/image42.png))</span></span>


<span data-ttu-id="1365e-362">Gdy użytkownik wprowadza nazwę użytkownika, hasła, adres e-mail i pytanie zabezpieczające i odpowiedzi i kliknie przycisk "Utwórz użytkownika", tworzone jest nowe konto użytkownika, a użytkownik jest zalogowany jako nowo utworzony użytkownik.</span><span class="sxs-lookup"><span data-stu-id="1365e-362">When a visitor enters a username, password, email address, and security question and answer and clicks "Create User," a new user account is created and the visitor is logged in as that newly created user.</span></span> <span data-ttu-id="1365e-363">Przy założeniu, że osoby, odwiedzając stronę tworzy nowe konto dla siebie, prawdopodobnie jest zamierzone zachowanie.</span><span class="sxs-lookup"><span data-stu-id="1365e-363">Assuming that the person visiting the page is creating a new account for themselves, this is likely the desired behavior.</span></span> <span data-ttu-id="1365e-364">Można jednak administratorzy mogą dodawać nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1365e-364">However, you may want to allow Administrators to add new user accounts.</span></span> <span data-ttu-id="1365e-365">W ten sposób może zostać utworzone konto użytkownika, ale Administrator pozostanie zalogowany jako Administrator (a nie nowo utworzonych kont).</span><span class="sxs-lookup"><span data-stu-id="1365e-365">In doing so, the user account would be created, but the Administrator would remain logged in as an Administrator (and not as the newly created account).</span></span> <span data-ttu-id="1365e-366">To zachowanie można modyfikować za pomocą typu Boolean [ `LoginCreatedUser` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-366">This behavior can be modified through the Boolean [`LoginCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx).</span></span>

<span data-ttu-id="1365e-367">Konta użytkowników w ramach członkostwa zawierają zatwierdzonych flagi; Nie można zalogować się do witryny są użytkownicy, którzy nie zostały zatwierdzone.</span><span class="sxs-lookup"><span data-stu-id="1365e-367">User accounts in the Membership framework contain an approved flag; users who are not approved are unable to log into the site.</span></span> <span data-ttu-id="1365e-368">Domyślnie nowo utworzonego konta jest oznaczony jako zatwierdzone, umożliwiając użytkownikowi natychmiast zalogować się do witryny.</span><span class="sxs-lookup"><span data-stu-id="1365e-368">By default, a newly created account is marked as approved, allowing the user to log into the site immediately.</span></span> <span data-ttu-id="1365e-369">Jest to możliwe, jednak mieć oznaczenie niezatwierdzonych nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1365e-369">It is possible, however, to have new user accounts marked as unapproved.</span></span> <span data-ttu-id="1365e-370">Możesz określić ma administratorowi ręcznie zatwierdzić nowych użytkowników, zanim będzie mógł logować lub może być, aby sprawdzić, czy przed pozwalające użytkownikowi na logowanie jest prawidłowy adres e-mail wprowadzony podczas rejestracji.</span><span class="sxs-lookup"><span data-stu-id="1365e-370">Perhaps you want an Administrator to manually approve new users before they can log in; or maybe you want to verify that the email address entered at signup is valid before permitting a user to log on.</span></span> <span data-ttu-id="1365e-371">Niezależnie od przypadku, może mieć nowo utworzonego konta użytkownika oznaczona jako niezatwierdzonych przez ustawienie w formancie CreateUserWizard [ `DisableCreatedUser` właściwość](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx) na wartość True (wartość domyślna to False).</span><span class="sxs-lookup"><span data-stu-id="1365e-371">Whatever the case may be, you can have the newly created user account marked as unapproved by setting the CreateUserWizard control's [`DisableCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx) to True (the default is False).</span></span>

<span data-ttu-id="1365e-372">Inne właściwości związane z zachowaniem notatki obejmują `AutoGeneratePassword` i `MailDefinition`.</span><span class="sxs-lookup"><span data-stu-id="1365e-372">Other behavior-related properties of note include `AutoGeneratePassword` and `MailDefinition`.</span></span> <span data-ttu-id="1365e-373">Jeśli [ `AutoGeneratePassword` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx) ma wartość True, `CreateUserWizardStep` nie są wyświetlane pola tekstowe "Password" i "Potwierdź hasło"; zamiast tego nowo utworzone hasło użytkownika jest generowana automatycznie przy użyciu `Membership` klasy [ `GeneratePassword` metody](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-373">If the [`AutoGeneratePassword` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.autogeneratepassword.aspx) is set to True, the `CreateUserWizardStep` does not display the "Password" and "Confirm Password" textboxes; instead, the newly-created user's password is automatically generated using the `Membership` class's [`GeneratePassword` method](https://msdn.microsoft.com/library/system.web.security.membership.generatepassword.aspx).</span></span> <span data-ttu-id="1365e-374">`GeneratePassword` Metoda tworzy hasło o określonej długości i z wystarczającą liczbą znaków innych niż alfanumeryczne, aby spełniać wymagania dotyczące siły haseł skonfigurowane.</span><span class="sxs-lookup"><span data-stu-id="1365e-374">The `GeneratePassword` method constructs a password of a specified length and with a sufficient number of non-alphanumeric characters to satisfy the configured password strength requirements.</span></span>

<span data-ttu-id="1365e-375">[ `MailDefinition` Właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) jest przydatne, jeśli chcesz wysłać wiadomość e-mail na adres e-mail określony w trakcie procesu tworzenia konta.</span><span class="sxs-lookup"><span data-stu-id="1365e-375">The [`MailDefinition` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) is useful if you want to send an email to the email address specified during the account creation process.</span></span> <span data-ttu-id="1365e-376">`MailDefinition` Właściwość zawiera szereg właściwości podrzędnych do definiowania informacji na temat wiadomości e-mail skonstruowane.</span><span class="sxs-lookup"><span data-stu-id="1365e-376">The `MailDefinition` property includes a series of subproperties for defining information about the constructed email message.</span></span> <span data-ttu-id="1365e-377">Te właściwości obejmują opcje, takie jak `Subject`, `Priority`, `IsBodyHtml`, `From`, `CC`, i `BodyFileName`.</span><span class="sxs-lookup"><span data-stu-id="1365e-377">These subproperties include options like `Subject`, `Priority`, `IsBodyHtml`, `From`, `CC`, and `BodyFileName`.</span></span> <span data-ttu-id="1365e-378">[ `BodyFileName` Właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) wskazuje tekst lub pliku HTML, który zawiera treść wiadomości e-mail.</span><span class="sxs-lookup"><span data-stu-id="1365e-378">The [`BodyFileName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.maildefinition.bodyfilename.aspx) points to a text or HTML file that contains the body for the email message.</span></span> <span data-ttu-id="1365e-379">Treść obsługuje dwa wstępnie zdefiniowane symbole zastępcze: `<%UserName%>` i `<%Password%>`.</span><span class="sxs-lookup"><span data-stu-id="1365e-379">The body supports two pre-defined placeholders: `<%UserName%>` and `<%Password%>`.</span></span> <span data-ttu-id="1365e-380">Te symbole, jeśli jest obecny w `BodyFileName` pliku, zostanie zastąpiony nazwę i hasło użytkownika właśnie utworzony.</span><span class="sxs-lookup"><span data-stu-id="1365e-380">These placeholders, if present in the `BodyFileName` file, will be replaced with the just-created user's name and password.</span></span>

> [!NOTE]
> <span data-ttu-id="1365e-381">`CreateUserWizard` Formantu `MailDefinition` właściwość określa tylko szczegóły dotyczące wiadomości e-mail, który jest wysyłany, gdy tworzone jest nowe konto.</span><span class="sxs-lookup"><span data-stu-id="1365e-381">The `CreateUserWizard` control's `MailDefinition` property just specifies details about the email message that is sent when a new account is created.</span></span> <span data-ttu-id="1365e-382">Nie ma żadnych szczegółów w sposób faktycznie zostanie wysłana wiadomość e-mail (oznacza to, czy używany jest katalog serwera lub przechowywania poczty usługi SMTP, wszystkie informacje dotyczące uwierzytelniania i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="1365e-382">It does not include any details on how the email message is actually sent (that is, whether an SMTP server or mail drop directory is used, any authentication information, and so on).</span></span> <span data-ttu-id="1365e-383">Te informacje niskiego poziomu, które muszą być zdefiniowane w `<system.net>` sekcji `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="1365e-383">These low-level details need to be defined in the `<system.net>` section in `Web.config`.</span></span> <span data-ttu-id="1365e-384">Więcej informacji na temat tych ustawień konfiguracji i wysyłania wiadomości e-mail z programu ASP.NET 2.0, ogólnie rzecz biorąc, można znaleźć w [— często zadawane pytania na SystemNetMail.com](http://www.systemnetmail.com/) i Moje artykułu [wysyłania poczty E-mail w programie ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-384">For more information on these configuration settings and on sending email from ASP.NET 2.0 in general, refer to the [FAQs at SystemNetMail.com](http://www.systemnetmail.com/) and my article, [Sending Email in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span></span>


### <a name="extending-the-createuserwizards-behavior-using-event-handlers"></a><span data-ttu-id="1365e-385">Rozszerzanie zachowanie CreateUserWizard przy użyciu programów obsługi zdarzeń</span><span class="sxs-lookup"><span data-stu-id="1365e-385">Extending the CreateUserWizard's Behavior Using Event Handlers</span></span>

<span data-ttu-id="1365e-386">W formancie CreateUserWizard podnosi liczbę zdarzeń podczas jego przepływu pracy.</span><span class="sxs-lookup"><span data-stu-id="1365e-386">The CreateUserWizard control raises a number of events during its workflow.</span></span> <span data-ttu-id="1365e-387">Na przykład użytkownik wprowadza swoją nazwę użytkownika, hasło i inne istotne informacje i kliknie przycisk "Utwórz użytkownika", zgłasza formancie CreateUserWizard jego [ `CreatingUser` zdarzeń](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span><span class="sxs-lookup"><span data-stu-id="1365e-387">For example, after a visitor enters their username, password, and other pertinent information and clicks the "Create User" button, the CreateUserWizard control raises its [`CreatingUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.creatinguser.aspx).</span></span> <span data-ttu-id="1365e-388">Jeśli występuje problem podczas procesu tworzenia [ `CreateUserError` zdarzeń](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) jest uruchamiany; jednak, jeśli użytkownik została pomyślnie utworzona, a następnie [ `CreatedUser` zdarzeń](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) jest wywoływane.</span><span class="sxs-lookup"><span data-stu-id="1365e-388">If there is a problem during the create process, the [`CreateUserError` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createusererror.aspx) is fired; however, if the user is successfully created, then the [`CreatedUser` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.createduser.aspx) is raised.</span></span> <span data-ttu-id="1365e-389">Istnieją dodatkowe zdarzenia kontroli CreateUserWizard, które uzyskać zgłoszone, ale są to te trzy najbardziej istotnego znaczenia.</span><span class="sxs-lookup"><span data-stu-id="1365e-389">There are additional CreateUserWizard control events that get raised, but these are the three most germane ones.</span></span>

<span data-ttu-id="1365e-390">W pewnych sytuacjach może chcemy naciśnij w przepływie pracy CreateUserWizard, którego możemy tworząc program obsługi zdarzeń dla odpowiedniego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="1365e-390">In certain scenarios we may want to tap into the CreateUserWizard workflow, which we can do by creating an event handler for the appropriate event.</span></span> <span data-ttu-id="1365e-391">Na przykład możemy ulepszyć `RegisterUser` formancie CreateUserWizard w celu uwzględnienia niektórych niestandardowego sprawdzania poprawności nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="1365e-391">To illustrate this, let's enhance the `RegisterUser` CreateUserWizard control to include some custom validation on the username and password.</span></span> <span data-ttu-id="1365e-392">W szczególności umożliwia także poprawiania komfortu naszych CreateUserWizard tak, aby nazwy użytkowników nie może zawierać spacji wiodących i końcowych i nazwa użytkownika nie może występować w dowolnym miejscu w haśle.</span><span class="sxs-lookup"><span data-stu-id="1365e-392">In particular, let's enhance our CreateUserWizard so that usernames cannot contain leading or trailing spaces and the username cannot appear anywhere in the password.</span></span> <span data-ttu-id="1365e-393">Krótko mówiąc chcemy uniemożliwić niepowołanym tworzenia nazwę użytkownika, takie jak "Scott", lub o kombinacja nazwy użytkownika i hasła, takie jak "Scott" i "Scott.1234".</span><span class="sxs-lookup"><span data-stu-id="1365e-393">In short, we want to prevent someone from creating a username like "Scott ", or having a username/password combination like "Scott" and "Scott.1234".</span></span>

<span data-ttu-id="1365e-394">Zostanie utworzony moduł obsługi zdarzeń w tym celu `CreatingUser` zdarzenia do naszej sprawdzana jest poprawność dodatkowe.</span><span class="sxs-lookup"><span data-stu-id="1365e-394">To accomplish this we will create an event handler for the `CreatingUser` event to perform our extra validation checks.</span></span> <span data-ttu-id="1365e-395">Podane dane są nieprawidłowe musimy anulować proces tworzenia.</span><span class="sxs-lookup"><span data-stu-id="1365e-395">If the supplied data is not valid we need to cancel the creation process.</span></span> <span data-ttu-id="1365e-396">Musimy również dodawanie formantu etykiety w sieci Web do strony, aby wyświetlić komunikat wyjaśniający, że nazwa użytkownika lub hasło jest nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="1365e-396">We also need to add a Label Web control to the page to display a message explaining that the username or password is invalid.</span></span> <span data-ttu-id="1365e-397">Rozpocznij od dodania formantu etykiety pod formancie CreateUserWizard, ustawienie jej `ID` właściwości `InvalidUserNameOrPasswordMessage` i jego `ForeColor` właściwości `Red`.</span><span class="sxs-lookup"><span data-stu-id="1365e-397">Start by adding a Label control beneath the CreateUserWizard control, setting its `ID` property to `InvalidUserNameOrPasswordMessage` and its `ForeColor` property to `Red`.</span></span> <span data-ttu-id="1365e-398">Czyści jej `Text` właściwości i zestaw jej `EnableViewState` i `Visible` właściwości na wartość False.</span><span class="sxs-lookup"><span data-stu-id="1365e-398">Clear out its `Text` property and set its `EnableViewState` and `Visible` properties to False.</span></span>

[!code-aspx[Main](creating-user-accounts-cs/samples/sample7.aspx)]

<span data-ttu-id="1365e-399">Następnie należy utworzyć programu obsługi zdarzeń dla formancie CreateUserWizard `CreatingUser` zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="1365e-399">Next, create an event handler for the CreateUserWizard control's `CreatingUser` event.</span></span> <span data-ttu-id="1365e-400">Aby utworzyć program obsługi zdarzeń, wybierz kontrolkę w projektancie, a następnie przejdź do okna właściwości.</span><span class="sxs-lookup"><span data-stu-id="1365e-400">To create an event handler, select the control in the Designer and then go to the Properties window.</span></span> <span data-ttu-id="1365e-401">Z tego miejsca kliknij ikonę błyskawicy, a następnie kliknij dwukrotnie odpowiednie zdarzenia w celu utworzenia programu obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="1365e-401">From there, click on the lightning bolt icon and then double-click the appropriate event to create the event handler.</span></span>

<span data-ttu-id="1365e-402">Dodaj następujący kod do `CreatingUser` obsługi zdarzeń:</span><span class="sxs-lookup"><span data-stu-id="1365e-402">Add the following code to the `CreatingUser` event handler:</span></span>

[!code-csharp[Main](creating-user-accounts-cs/samples/sample8.cs)]

<span data-ttu-id="1365e-403">Należy pamiętać, że nazwa użytkownika i hasło w formancie CreateUserWizard są dostępne za pośrednictwem jego [ `UserName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx) i [ `Password` właściwości](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.password.aspx)odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="1365e-403">Note that the username and password entered into the CreateUserWizard control are available through its [`UserName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.username.aspx) and [`Password` properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.password.aspx), respectively.</span></span> <span data-ttu-id="1365e-404">Używamy tych właściwości w powyższym programu obsługi zdarzeń w celu określenia, czy podana nazwa użytkownika zawiera spacji wiodących i końcowych i określa, czy nazwa użytkownika znajduje się w obrębie hasło.</span><span class="sxs-lookup"><span data-stu-id="1365e-404">We use these properties in the above event handler to determine whether the supplied username contains leading or trailing spaces and whether the username is found within the password.</span></span> <span data-ttu-id="1365e-405">Jeśli jest spełniony jeden z tych warunków, komunikat o błędzie jest wyświetlany w `InvalidUserNameOrPasswordMessage` etykiety i program obsługi zdarzeń `e.Cancel` właściwość jest ustawiona na `true`.</span><span class="sxs-lookup"><span data-stu-id="1365e-405">If either of these conditions is met, an error message is displayed in the `InvalidUserNameOrPasswordMessage` Label and the event handler's `e.Cancel` property is set to `true`.</span></span> <span data-ttu-id="1365e-406">Jeśli `e.Cancel` ma ustawioną wartość `true`, CreateUserWizard short-circuits jego przepływu pracy, efektywnie anulowanie procesu tworzenia konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1365e-406">If `e.Cancel` is set to `true`, the CreateUserWizard short-circuits its workflow, effectively cancelling the user account creation process.</span></span>

<span data-ttu-id="1365e-407">Zrzut ekranu przedstawia rysunek 15 `CreatingUserAccounts.aspx` gdy użytkownik wprowadza nazwę użytkownika z spacje początkowe.</span><span class="sxs-lookup"><span data-stu-id="1365e-407">Figure 15 shows a screen shot of `CreatingUserAccounts.aspx` when the user enters a username with leading spaces.</span></span>


<span data-ttu-id="1365e-408">[![Nazwy użytkowników z wiodące lub końcowe spacje są niedozwolone.](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="1365e-408">[![Usernames with Leading or Trailing Spaces are not Permitted](creating-user-accounts-cs/_static/image44.png)](creating-user-accounts-cs/_static/image43.png)</span></span>

<span data-ttu-id="1365e-409">**Rysunek 15**: nazwy użytkowników z wiodące lub końcowe spacje nie są dozwolone ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](creating-user-accounts-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="1365e-409">**Figure 15**: Usernames with Leading or Trailing Spaces are not Permitted  ([Click to view full-size image](creating-user-accounts-cs/_static/image45.png))</span></span>


> [!NOTE]
> <span data-ttu-id="1365e-410">Przykład użycia formancie CreateUserWizard zostanie wyświetlone `CreatedUser` zdarzenia w *<a id="_msoanchor_11"> </a> [przechowywania dodatkowych informacji użytkownika](storing-additional-user-information-cs.md)* samouczka.</span><span class="sxs-lookup"><span data-stu-id="1365e-410">We will see an example of using the CreateUserWizard control's `CreatedUser` event in the *<a id="_msoanchor_11"></a>[Storing Additional User Information](storing-additional-user-information-cs.md)* tutorial.</span></span>


## <a name="summary"></a><span data-ttu-id="1365e-411">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="1365e-411">Summary</span></span>

<span data-ttu-id="1365e-412">`Membership` Klasy `CreateUser` metoda tworzy nowe konto użytkownika w ramach członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-412">The `Membership` class's `CreateUser` method creates a new user account in the Membership framework.</span></span> <span data-ttu-id="1365e-413">Robi to przez delegowanie wywołanie skonfigurowanego dostawcy członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-413">It does so by delegating the call to the configured Membership provider.</span></span> <span data-ttu-id="1365e-414">W przypadku liczby `SqlMembershipProvider`, `CreateUser` metoda dodaje rekord `aspnet_Users` i `aspnet_Membership` tabel bazy danych programu.</span><span class="sxs-lookup"><span data-stu-id="1365e-414">In the case of the `SqlMembershipProvider`, the `CreateUser` method adds a record to the `aspnet_Users` and `aspnet_Membership` database tables.</span></span>

<span data-ttu-id="1365e-415">Gdy programowo (jak widzieliśmy w kroku 5) można utworzyć nowych kont użytkowników, szybciej i łatwiej rozwiązaniem jest użycie w formancie CreateUserWizard.</span><span class="sxs-lookup"><span data-stu-id="1365e-415">While new user accounts can be created programmatically (as we saw in Step 5), a faster and easier approach is to use the CreateUserWizard control.</span></span> <span data-ttu-id="1365e-416">Ten formant renderuje interfejs użytkownika wieloetapowych zbierania informacji o użytkowniku i tworzenia nowego użytkownika w ramach członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-416">This control renders a multi-step user interface for collecting user information and creating a new user in the Membership framework.</span></span> <span data-ttu-id="1365e-417">Poniżej obejmuje, ta kontrola korzysta takie same `Membership.CreateUser` metoda w kroku 5, ale formant tworzy interfejs użytkownika, formanty walidacji i odpowiada błędów tworzenia konta użytkownika bez konieczności pisania lizawki kodu.</span><span class="sxs-lookup"><span data-stu-id="1365e-417">Underneath the covers, this control uses the same `Membership.CreateUser` method as examined in Step 5, but the control creates the user interface, validation controls, and responds to user account creation errors without having to write a lick of code.</span></span>

<span data-ttu-id="1365e-418">W tym momencie mamy funkcji w celu tworzenia nowych kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="1365e-418">At this point we have the functionality in place to create new user accounts.</span></span> <span data-ttu-id="1365e-419">Jednak strony logowania nadal jest sprawdzanie poprawności względem tych poświadczeń ustalony określone w drugim samouczka.</span><span class="sxs-lookup"><span data-stu-id="1365e-419">However, the login page still is validating against those hard-coded credentials we specified back in the second tutorial.</span></span> <span data-ttu-id="1365e-420">W <a id="_msoanchor_12"> </a> [następny samouczek](validating-user-credentials-against-the-membership-user-store-cs.md) modyfikacjom `Login.aspx` sprawdza, czy użytkownik na dostarczone poświadczenia w ramach członkostwa.</span><span class="sxs-lookup"><span data-stu-id="1365e-420">In the <a id="_msoanchor_12"></a>[next tutorial](validating-user-credentials-against-the-membership-user-store-cs.md) we will update `Login.aspx` to validate the user's supplied credentials against the Membership framework.</span></span>

<span data-ttu-id="1365e-421">Programowanie przyjemność!</span><span class="sxs-lookup"><span data-stu-id="1365e-421">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="1365e-422">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="1365e-422">Further Reading</span></span>

<span data-ttu-id="1365e-423">Więcej informacji dotyczących tematów omówionych w tym samouczku można znaleźć w następujących zasobach:</span><span class="sxs-lookup"><span data-stu-id="1365e-423">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="1365e-424">`CreateUser` Dokumentacja techniczna</span><span class="sxs-lookup"><span data-stu-id="1365e-424">`CreateUser` Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.security.membershipprovider.createuser.aspx)
- [<span data-ttu-id="1365e-425">Informacje o formancie CreateUserWizard</span><span class="sxs-lookup"><span data-stu-id="1365e-425">CreateUserWizard Control Overview</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/createuserwizard.aspx)
- [<span data-ttu-id="1365e-426">Tworzenie dostawcy mapy witryny opartej na systemie plików</span><span class="sxs-lookup"><span data-stu-id="1365e-426">Creating a File System-Based Site Map Provider</span></span>](http://aspnet.4guysfromrolla.com/articles/020106-1.aspx)
- [<span data-ttu-id="1365e-427">Tworzenie za pomocą programu ASP.NET 2.0 Kreator formantu interfejsu użytkownika krok po kroku</span><span class="sxs-lookup"><span data-stu-id="1365e-427">Creating a Step-by-Step User Interface with the ASP.NET 2.0 Wizard Control</span></span>](http://aspnet.4guysfromrolla.com/articles/061406-1.aspx)
- [<span data-ttu-id="1365e-428">Badanie ASP.NET 2.0 do nawigacji w witrynie</span><span class="sxs-lookup"><span data-stu-id="1365e-428">Examining ASP.NET 2.0's Site Navigation</span></span>](http://aspnet.4guysfromrolla.com/articles/111605-1.aspx)
- [<span data-ttu-id="1365e-429">Strony wzorcowej i nawigacji w witrynie</span><span class="sxs-lookup"><span data-stu-id="1365e-429">Master Pages and Site Navigation</span></span>](https://asp.net/learn/data-access/tutorial-03-vb.aspx)
- [<span data-ttu-id="1365e-430">Dostawcy mapy witryny SQL oczekiwania dla</span><span class="sxs-lookup"><span data-stu-id="1365e-430">The SQL Site Map Provider You've Been Waiting For</span></span>](https://msdn.microsoft.com/msdnmag/issues/06/02/WickedCode/default.aspx)

### <a name="about-the-author"></a><span data-ttu-id="1365e-431">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="1365e-431">About the Author</span></span>

<span data-ttu-id="1365e-432">Scott Bento, Utwórz wiele książek ASP/ASP.NET i twórcę 4GuysFromRolla.com, pracuje z technologii Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="1365e-432">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1365e-433">Scott działa jako niezależnego konsultanta trainer i składnika zapisywania.</span><span class="sxs-lookup"><span data-stu-id="1365e-433">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1365e-434">Jest jego najnowszej książki  *[Sams nauczyć się ASP.NET 2.0 w ciągu 24 godzin](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="1365e-434">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="1365e-435">Scott jest osiągalny w [ mitchell@4guysfromrolla.com ](mailto:mitchell@4guysfromrolla.com) lub za pośrednictwem jego blogu w [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="1365e-435">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="1365e-436">Specjalne podziękowania dla...</span><span class="sxs-lookup"><span data-stu-id="1365e-436">Special Thanks To…</span></span>

<span data-ttu-id="1365e-437">Ten samouczek serii zostało sprawdzone przez wiele recenzentów przydatne.</span><span class="sxs-lookup"><span data-stu-id="1365e-437">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="1365e-438">Recenzenta realizacji w tym samouczku został Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="1365e-438">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="1365e-439">Zainteresowani recenzowania Moje nadchodzących artykuły MSDN?</span><span class="sxs-lookup"><span data-stu-id="1365e-439">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="1365e-440">Jeśli tak, Porzuć mnie linii w [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="1365e-440">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1365e-441">[Poprzednie](creating-the-membership-schema-in-sql-server-cs.md)
> [dalej](validating-user-credentials-against-the-membership-user-store-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1365e-441">[Previous](creating-the-membership-schema-in-sql-server-cs.md)
[Next](validating-user-credentials-against-the-membership-user-store-cs.md)</span></span>
