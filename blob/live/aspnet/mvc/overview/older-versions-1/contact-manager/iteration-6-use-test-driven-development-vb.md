---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: "Iteracja #6 — użyj test-driven development (VB) | Dokumentacja firmy Microsoft"
author: microsoft
description: "W tym szóstego iteracji dodania nowych funkcji do naszej aplikacji najpierw pisania testów jednostkowych i pisanie kodu dla testów jednostkowych. W tym iteracji..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: 9b558df9c0b44f5f76115270d361b6022658f9f9
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/10/2017
---
<a name="iteration-6--use-test-driven-development-vb"></a><span data-ttu-id="31c05-104">Iteracja #6 — użyj test-driven development (VB)</span><span class="sxs-lookup"><span data-stu-id="31c05-104">Iteration #6 – Use test-driven development (VB)</span></span>
====================
<span data-ttu-id="31c05-105">przez [firmy Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="31c05-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="31c05-106">Pobierz kod</span><span class="sxs-lookup"><span data-stu-id="31c05-106">Download Code</span></span>](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> <span data-ttu-id="31c05-107">W tym szóstego iteracji dodania nowych funkcji do naszej aplikacji najpierw pisania testów jednostkowych i pisanie kodu dla testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="31c05-108">W tym iteracji dodamy grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="31c05-109">Tworzenie aplikacji ASP.NET MVC kontaktu administracyjnego (VB)</span><span class="sxs-lookup"><span data-stu-id="31c05-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>
  

<span data-ttu-id="31c05-110">W tej serii samouczków budujemy całej aplikacji zarządzania skontaktuj się z od początku do zakończenia.</span><span class="sxs-lookup"><span data-stu-id="31c05-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="31c05-111">Aplikacji skontaktuj się z Menedżera umożliwia przechowywanie informacji kontaktowych - nazwy, numerów telefonów i adresów e-mail — lista osób.</span><span class="sxs-lookup"><span data-stu-id="31c05-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="31c05-112">Firma Microsoft kompilowania aplikacji za pośrednictwem przejść przez wiele iteracji.</span><span class="sxs-lookup"><span data-stu-id="31c05-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="31c05-113">Przy każdej iteracji firma Microsoft stopniowego zwiększenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="31c05-114">Celem tego podejścia wiele iteracji jest ułatwia zrozumienie przyczyn, dla każdej zmiany.</span><span class="sxs-lookup"><span data-stu-id="31c05-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="31c05-115">Iteracja #1 — Tworzenie aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="31c05-116">W pierwszej iteracji utworzymy menedżera kontaktu w najprostszym sposobem możliwe.</span><span class="sxs-lookup"><span data-stu-id="31c05-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="31c05-117">Możemy dodać obsługę operacji podstawowej bazy danych: tworzenia, odczytu, aktualizacji i usuwania (CRUD).</span><span class="sxs-lookup"><span data-stu-id="31c05-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="31c05-118">Iteracji #2 — należy Szukaj nieuprzywilejowany aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="31c05-119">W tym iteracji możemy ulepszyć wyglądu aplikacji przez zmodyfikowanie domyślnych strony wzorcowej widoku programu ASP.NET MVC i kaskadowych arkuszy stylów.</span><span class="sxs-lookup"><span data-stu-id="31c05-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="31c05-120">Iteracja #3 — Dodawanie walidacji formularza.</span><span class="sxs-lookup"><span data-stu-id="31c05-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="31c05-121">W trzecim iteracji dodamy podstawowej postaci weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="31c05-122">Firma Microsoft uniemożliwiać przesyłanie formularza nie kończą działania wymaganych pól formularza.</span><span class="sxs-lookup"><span data-stu-id="31c05-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="31c05-123">Możemy zweryfikować adresy e-mail i numerów telefonów.</span><span class="sxs-lookup"><span data-stu-id="31c05-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="31c05-124">Iteracji #4 — należy luźno powiązane z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="31c05-125">W tym trzeci iteracji możemy korzystać z kilku wzorce projektowe oprogramowania do ułatwiają obsługiwanie i modyfikowanie aplikacji Menedżera skontaktuj się z pomocą.</span><span class="sxs-lookup"><span data-stu-id="31c05-125">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="31c05-126">Na przykład firma Microsoft Refaktoryzuj naszej aplikacji do korzystania z wzorca repozytorium i wzorzec iniekcji zależności.</span><span class="sxs-lookup"><span data-stu-id="31c05-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="31c05-127">Iteracja #5 - tworzenia testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="31c05-128">W piątym iteracji możemy ułatwić naszej aplikacji obsługiwanie i modyfikowanie przez dodanie testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="31c05-129">Firma Microsoft mock naszej klasy modelu danych i tworzenie testów jednostkowych dla naszych kontrolerów i logiki sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="31c05-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="31c05-130">Iteracja #6 - użyj test-driven development.</span><span class="sxs-lookup"><span data-stu-id="31c05-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="31c05-131">W tym szóstego iteracji dodania nowych funkcji do naszej aplikacji najpierw pisania testów jednostkowych i pisanie kodu dla testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="31c05-132">W tym iteracji dodamy grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="31c05-133">Iteracja #7 - dodawania funkcjonalności interfejsu Ajax.</span><span class="sxs-lookup"><span data-stu-id="31c05-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="31c05-134">Siódmego iteracji możemy ulepszyć czas reakcji i wydajności aplikacji, dodając obsługę technologii Ajax.</span><span class="sxs-lookup"><span data-stu-id="31c05-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="31c05-135">Tej iteracji</span><span class="sxs-lookup"><span data-stu-id="31c05-135">This Iteration</span></span>

<span data-ttu-id="31c05-136">W poprzedniej iteracji aplikacji menedżera kontaktu utworzyliśmy testów jednostkowych do zapewnienia zabezpieczenie na naszego kodu.</span><span class="sxs-lookup"><span data-stu-id="31c05-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="31c05-137">Motywacją do tworzenia testów jednostkowych było naszego kodu bardziej odporne na zmiany.</span><span class="sxs-lookup"><span data-stu-id="31c05-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="31c05-138">Testy jednostkowe w miejscu możemy happily wprowadzenie zmian do naszego kodu i od razu wiedzieć, czy możemy przerwane istniejące funkcje.</span><span class="sxs-lookup"><span data-stu-id="31c05-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="31c05-139">W tym iteracji używamy testów jednostkowych w zupełnie innego celu.</span><span class="sxs-lookup"><span data-stu-id="31c05-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="31c05-140">W tej iteracji, testy jednostkowe używany jako część aplikacji zasady projektowania klas o nazwie *test-driven development,*.</span><span class="sxs-lookup"><span data-stu-id="31c05-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="31c05-141">Ćwiczenie test-driven development, należy najpierw zapisać testy i następnie pisać kod dla testów.</span><span class="sxs-lookup"><span data-stu-id="31c05-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="31c05-142">Ściślej, gdy ćwiczenia test-driven development, istnieją trzy kroki, które zostaną wykonane podczas tworzenia kodu (czerwony / zielony/Zrefaktoryzuj):</span><span class="sxs-lookup"><span data-stu-id="31c05-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="31c05-143">Zapis testu jednostkowego, który zakończy się niepowodzeniem (czerwony)</span><span class="sxs-lookup"><span data-stu-id="31c05-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="31c05-144">Pisanie kodu, który przekazuje testu jednostkowego (zielony)</span><span class="sxs-lookup"><span data-stu-id="31c05-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="31c05-145">Zrefaktoryzuj kod (Zrefaktoryzuj)</span><span class="sxs-lookup"><span data-stu-id="31c05-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="31c05-146">Najpierw należy zapisać testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="31c05-146">First, you write the unit test.</span></span> <span data-ttu-id="31c05-147">Test jednostkowy powinien express zamiaru zachowanie dla jak ma być kodu.</span><span class="sxs-lookup"><span data-stu-id="31c05-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="31c05-148">Po utworzeniu testu jednostkowego testu jednostkowego powinna zakończyć się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="31c05-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="31c05-149">Test powinna zakończyć się niepowodzeniem, ponieważ nie zostały jeszcze zapisane kodu aplikacji, który spełnia testu.</span><span class="sxs-lookup"><span data-stu-id="31c05-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="31c05-150">Następnie należy napisać kod wystarczającego w kolejności dla testu jednostkowego do przekazania.</span><span class="sxs-lookup"><span data-stu-id="31c05-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="31c05-151">Celem jest pisanie kodu w sposób laziest, sloppiest oraz najszybciej możliwe.</span><span class="sxs-lookup"><span data-stu-id="31c05-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="31c05-152">Należy nie marnować czas planowania architektury aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="31c05-153">Zamiast tego należy skoncentrować się na zapisywanie minimalnej ilości kodu niezbędne do spełnienia zamiar wyrażonych przez test jednostkowy.</span><span class="sxs-lookup"><span data-stu-id="31c05-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="31c05-154">Na koniec po wystarczającej ilości kodu zostały zapisane, możesz ponownie krok i należy wziąć pod uwagę ogólna Architektura aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="31c05-155">W tym kroku przepisywania (zrefaktoryzuj) kodu dzięki wykorzystaniu projektowania oprogramowania wzorce — takich jak wzorzec repozytorium — tak, aby kod jest łatwy w obsłudze więcej.</span><span class="sxs-lookup"><span data-stu-id="31c05-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="31c05-156">Kod w tym kroku można przepisać fearlessly, ponieważ kod jest objęta testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="31c05-157">Istnieje wiele korzyści wynikających z test-driven development, korzystających z metodologii.</span><span class="sxs-lookup"><span data-stu-id="31c05-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="31c05-158">Po pierwsze, test-driven development wymusza pozwala skupić się na kod, który faktycznie do zapisania.</span><span class="sxs-lookup"><span data-stu-id="31c05-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="31c05-159">Ponieważ są stale koncentruje się na właśnie pisanie wystarczającej ilości kodu do przekazania poszczególnego testu, będą mogli wandering do gąszcz i zapisywanie olbrzymich ilości kodu, który nigdy nie będzie używany.</span><span class="sxs-lookup"><span data-stu-id="31c05-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="31c05-160">Po drugie metodologię projektowania "test najpierw" wymusza napisać kod z punktu widzenia użycia kodu.</span><span class="sxs-lookup"><span data-stu-id="31c05-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="31c05-161">Innymi słowy gdy ćwiczenia test-driven development, stale pisania testów z punktu widzenia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="31c05-162">W związku z tym test-driven development, może spowodować czyszczący i bardziej zrozumiałe interfejsów API.</span><span class="sxs-lookup"><span data-stu-id="31c05-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="31c05-163">Na koniec test-driven development, wymusza pisać testy jednostkowe w ramach normalnego procesu pisania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="31c05-164">Jak zbliża się termin projektu testowania jest zwykle najpierw, który jest przesyłany okno.</span><span class="sxs-lookup"><span data-stu-id="31c05-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="31c05-165">Podczas ćwiczeń test-driven development z drugiej strony, możesz są bardziej prawdopodobną virtuous temat pisania testów jednostkowych, ponieważ test-driven development, sprawia, że testy jednostkowe centralnej do procesu tworzenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="31c05-166">Aby dowiedzieć się więcej na temat test-driven development, I zaleca się przeczytanie książki piór Michael **pracy skutecznie z kodem starszych**.</span><span class="sxs-lookup"><span data-stu-id="31c05-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="31c05-167">W tym iteracji dodania do naszej aplikacji Menedżera skontaktuj się z nowej funkcji.</span><span class="sxs-lookup"><span data-stu-id="31c05-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="31c05-168">Możemy dodać obsługę skontaktuj się z grupy.</span><span class="sxs-lookup"><span data-stu-id="31c05-168">We add support for Contact Groups.</span></span> <span data-ttu-id="31c05-169">Można użyć, skontaktuj się z grup do organizowania na kategorie, takie jak firm kontaktów i grup Friend.</span><span class="sxs-lookup"><span data-stu-id="31c05-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="31c05-170">Ta nowa funkcja zostanie dodany do naszej aplikacji w procesie projektowania opartego na test.</span><span class="sxs-lookup"><span data-stu-id="31c05-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="31c05-171">Firma Microsoft będzie najpierw zapisać Nasze testy jednostkowe i firma Microsoft będzie zapisanie wszystkich naszego kodu względem tych testów.</span><span class="sxs-lookup"><span data-stu-id="31c05-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="31c05-172">Pobiera co przetestowane</span><span class="sxs-lookup"><span data-stu-id="31c05-172">What Gets Tested</span></span>

<span data-ttu-id="31c05-173">Jak wspomniano w poprzedniej iteracji, zwykle nie pisania testów jednostkowych dla logika dostępu do danych lub wyświetlić logiki.</span><span class="sxs-lookup"><span data-stu-id="31c05-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="31c05-174">Zrobisz testów jednostkowych zapisu t logika dostępu do danych, ponieważ uzyskanie dostępu do bazy danych jest stosunkowo wolne działanie.</span><span class="sxs-lookup"><span data-stu-id="31c05-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="31c05-175">Zrobisz testów jednostkowych zapisu t logiki widoku, ponieważ dostęp do widoku wymaga Obracająca się z serwerem sieci web, który jest stosunkowo wolne działanie.</span><span class="sxs-lookup"><span data-stu-id="31c05-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="31c05-176">T nie powinien zapisać testu jednostkowego, chyba że testu mogą być wykonywane wielokrotnie bardzo szybkiej</span><span class="sxs-lookup"><span data-stu-id="31c05-176">You shouldn t write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="31c05-177">Ponieważ test-driven development, wynikają z testów jednostkowych, możemy skupić się początkowo o pisaniu kontrolera i logiki biznesowej.</span><span class="sxs-lookup"><span data-stu-id="31c05-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="31c05-178">Firma Microsoft nie dotknięcie bazy danych lub widoków.</span><span class="sxs-lookup"><span data-stu-id="31c05-178">We avoid touching the database or views.</span></span> <span data-ttu-id="31c05-179">Firma Microsoft kupione t modyfikacji bazy danych lub Utwórz widoki naszych aż do zakończenia bardzo tego samouczka.</span><span class="sxs-lookup"><span data-stu-id="31c05-179">We won t modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="31c05-180">Możemy zaczynać co można przetestować.</span><span class="sxs-lookup"><span data-stu-id="31c05-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="31c05-181">Tworzenie przypadków użycia</span><span class="sxs-lookup"><span data-stu-id="31c05-181">Creating User Stories</span></span>

<span data-ttu-id="31c05-182">Podczas ćwiczeń test-driven development, należy zawsze uruchomić pisząc testu.</span><span class="sxs-lookup"><span data-stu-id="31c05-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="31c05-183">Natychmiast zgłasza to pytanie: jak użytkownik zdecyduje jakie test, aby najpierw zapisać?</span><span class="sxs-lookup"><span data-stu-id="31c05-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="31c05-184">Aby odpowiedzieć na to pytanie, należy zapisać zestaw [ *scenariuszy użytkownika*](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="31c05-184">To answer this question, you should write a set of [*user stories*](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="31c05-185">Scenariusza użytkownika jest bardzo krótki opis wymaganie dotyczące oprogramowania (zazwyczaj jedno zdanie).</span><span class="sxs-lookup"><span data-stu-id="31c05-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="31c05-186">Należy go nietechnicznych opis wymagań zapisywane z punktu widzenia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="31c05-187">S zbiór scenariuszy użytkownika, które opisują funkcje wymagane przez nowe funkcje grupy skontaktuj się z tutaj:</span><span class="sxs-lookup"><span data-stu-id="31c05-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="31c05-188">Użytkownika można wyświetlić listę grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="31c05-189">Użytkownik może utworzyć nowej grupy kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="31c05-190">Użytkownik może usunąć istniejącą grupę kontaktu.</span><span class="sxs-lookup"><span data-stu-id="31c05-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="31c05-191">Użytkownik może wybrać grupy kontaktów, podczas tworzenia nowego kontaktu.</span><span class="sxs-lookup"><span data-stu-id="31c05-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="31c05-192">Użytkownik może wybrać grupy kontaktów podczas edycji istniejącego kontaktu.</span><span class="sxs-lookup"><span data-stu-id="31c05-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="31c05-193">Lista grup kontaktów jest wyświetlany w widoku indeksu.</span><span class="sxs-lookup"><span data-stu-id="31c05-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="31c05-194">Gdy użytkownik kliknie grupy kontaktów, zostanie wyświetlona lista zgodnych kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="31c05-195">Należy zauważyć, że ta lista scenariuszy użytkownika jest całkowicie zrozumiały dla klienta.</span><span class="sxs-lookup"><span data-stu-id="31c05-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="31c05-196">Nie ma nie wymieniono szczegóły implementacji technicznej.</span><span class="sxs-lookup"><span data-stu-id="31c05-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="31c05-197">Gdy podczas tworzenia aplikacji, zestaw scenariuszy użytkownika może stać się bardziej precyzyjnych.</span><span class="sxs-lookup"><span data-stu-id="31c05-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="31c05-198">Wiele wątków (wymagania) może podzielić scenariusza użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="31c05-199">Na przykład można zdecydować, że utworzenie nowej grupy kontaktów powinny obejmować sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="31c05-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="31c05-200">Przesyłanie grupy kontaktów bez nazwy powinien zwrócić błąd sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="31c05-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="31c05-201">Po utworzeniu listę scenariuszy użytkownika, możesz przystąpić do pisania Twojego pierwszego testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="31c05-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="31c05-202">Zaczniemy od utworzenia testu jednostkowego do wyświetlania na liście grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="31c05-203">Wyświetlanie listy grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="31c05-203">Listing Contact Groups</span></span>

<span data-ttu-id="31c05-204">Nasze pierwszego scenariusza użytkownika to, czy użytkownik powinien móc wyświetlić listę grup kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="31c05-205">Musimy express tego wątku z testem.</span><span class="sxs-lookup"><span data-stu-id="31c05-205">We need to express this story with a test.</span></span>

<span data-ttu-id="31c05-206">Tworzenie nowego testu jednostkowego, klikając prawym przyciskiem myszy folder kontrolery w projekcie ContactManager.Tests wybranie **Add, przetestuj nowe**i wybierając **testu jednostkowego** szablonu (zobacz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="31c05-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="31c05-207">Nazwa nowej jednostki testowanie GroupControllerTest.vb i kliknij przycisk **OK** przycisku.</span><span class="sxs-lookup"><span data-stu-id="31c05-207">Name the new unit test GroupControllerTest.vb and click the **OK** button.</span></span>


<span data-ttu-id="31c05-208">[![Dodawanie testu jednostkowego GroupControllerTest](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span></span>

<span data-ttu-id="31c05-209">**Rysunek 01**: Dodawanie testu jednostkowego GroupControllerTest ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image2.png))</span></span>


<span data-ttu-id="31c05-210">Nasze pierwszego testu jednostkowego znajduje się w 1 wyświetlania.</span><span class="sxs-lookup"><span data-stu-id="31c05-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="31c05-211">Ten test sprawdza, czy metoda indeks() kontrolera grupy zwraca zbiór grup.</span><span class="sxs-lookup"><span data-stu-id="31c05-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="31c05-212">Test sprawdza, czy kolekcję grup, jest zwracany w widoku danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="31c05-213">**Wyświetlanie listy 1 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

<span data-ttu-id="31c05-214">Podczas wpisywania tekstu najpierw kod w wyświetlania 1 programu Visual Studio, uzyskasz dużo czerwoną linie dowolnym kształcie.</span><span class="sxs-lookup"><span data-stu-id="31c05-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="31c05-215">Nie utworzono klasy GroupController lub grupy.</span><span class="sxs-lookup"><span data-stu-id="31c05-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="31c05-216">W tym momencie możesz nawet kompilacji t naszej aplikacji, dlatego firma Microsoft można wykonać naszych pierwszego testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="31c05-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="31c05-217">Tego dobrej s.</span><span class="sxs-lookup"><span data-stu-id="31c05-217">That s good.</span></span> <span data-ttu-id="31c05-218">Który traktowana jako niepowodzenie testu.</span><span class="sxs-lookup"><span data-stu-id="31c05-218">That counts as a failing test.</span></span> <span data-ttu-id="31c05-219">W związku z tym teraz mamy uprawnień, aby rozpocząć pisanie kodu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="31c05-220">Należy zapisać za mało kod do wykonania naszym teście.</span><span class="sxs-lookup"><span data-stu-id="31c05-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="31c05-221">Klasa kontrolera grupy wyświetlania 2 zawiera podstawowe czynności kod wymagany do przekazania testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="31c05-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="31c05-222">Akcja indeks() zwraca listę statycznie kodowane grupy (klasy grupy jest zdefiniowany w wyświetlania 3).</span><span class="sxs-lookup"><span data-stu-id="31c05-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="31c05-223">**Wyświetlanie listy 2 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-223">**Listing 2 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

<span data-ttu-id="31c05-224">**Wyświetlanie listy 3 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-224">**Listing 3 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

<span data-ttu-id="31c05-225">Po dodamy klasy GroupController i grupy do naszej projektu naszych pierwszego testu jednostkowego zakończy się pomyślnie (patrz rysunek 2).</span><span class="sxs-lookup"><span data-stu-id="31c05-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="31c05-226">Firma Microsoft to zostało zrobione minimalna pracy wymaganej w celu przekazania testu.</span><span class="sxs-lookup"><span data-stu-id="31c05-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="31c05-227">Nadszedł czas udanej sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="31c05-227">It is time to celebrate.</span></span>


<span data-ttu-id="31c05-228">[![Powodzenie!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-228">[![Success!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span></span>

<span data-ttu-id="31c05-229">**Rysunek 02**: sukcesu! () [Kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="31c05-230">Tworzenie grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="31c05-230">Creating Contact Groups</span></span>

<span data-ttu-id="31c05-231">Teraz możesz teraz przystąpić do drugiego scenariusza użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="31c05-232">Potrzebujemy można było tworzyć nowe grupy kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="31c05-233">Musimy express zamiar z testem.</span><span class="sxs-lookup"><span data-stu-id="31c05-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="31c05-234">Testu w listę 4 sprawdza, czy wywołanie Create() metody z nową grupą dodaje do listy grup zwracany przez metodę indeks() grupę.</span><span class="sxs-lookup"><span data-stu-id="31c05-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="31c05-235">Innymi słowy Jeśli I utworzyć nową grupę następnie I powinien móc odzyskać nową grupę z listy grup zwracany przez metodę indeks().</span><span class="sxs-lookup"><span data-stu-id="31c05-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="31c05-236">**Wyświetlanie listy 4 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

<span data-ttu-id="31c05-237">Testu w listę 4 wywołuje kontrolera grupy Create() metody za pomocą nowego skontaktuj się z grupą.</span><span class="sxs-lookup"><span data-stu-id="31c05-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="31c05-238">Następnie testu sprawdza, czy wywołanie kontrolera grupy indeks() — metoda zwraca nową grupę w widoku danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="31c05-239">Zmodyfikowane kontrolera grupy w listę 5 zawiera podstawowe czynności zmiany wymagane do przekazania nowego testu.</span><span class="sxs-lookup"><span data-stu-id="31c05-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="31c05-240">**Wyświetlanie listy 5 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-240">**Listing 5 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="31c05-241">Kontroler grupy w listę 5 ma nową akcję Create().</span><span class="sxs-lookup"><span data-stu-id="31c05-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="31c05-242">Ta akcja dodaje grupę do kolekcji grup.</span><span class="sxs-lookup"><span data-stu-id="31c05-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="31c05-243">Zwróć uwagę, że akcja indeks() został zmodyfikowany w celu zwrócenia zawartości kolekcję grup.</span><span class="sxs-lookup"><span data-stu-id="31c05-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="31c05-244">Ponownie firma Microsoft wykonali systemu od zera minimalna ilość pracy wymaganej w celu przekazania testu jednostkowego.</span><span class="sxs-lookup"><span data-stu-id="31c05-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="31c05-245">Po możemy wprowadzić te zmiany do kontrolera grupy, wszystkie jednostki Nasze testy przebiegu.</span><span class="sxs-lookup"><span data-stu-id="31c05-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="31c05-246">Dodawanie walidacji</span><span class="sxs-lookup"><span data-stu-id="31c05-246">Adding Validation</span></span>

<span data-ttu-id="31c05-247">To wymaganie nie zostało określone jawnie w scenariusza użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="31c05-248">Istnieje uzasadnione wymagają, aby grupa miał nazwę.</span><span class="sxs-lookup"><span data-stu-id="31c05-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="31c05-249">W przeciwnym razie organizowanie kontakty do grupy nie będzie bardzo przydatne.</span><span class="sxs-lookup"><span data-stu-id="31c05-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="31c05-250">Wyświetlanie listy 6 zawiera określającym zamiar nowego testu.</span><span class="sxs-lookup"><span data-stu-id="31c05-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="31c05-251">Ten test sprawdza, czy próby utworzenia grupy bez podawania nazwy spowoduje komunikat o błędzie weryfikacji w stanie modelu.</span><span class="sxs-lookup"><span data-stu-id="31c05-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="31c05-252">**Wyświetlanie listy 6 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

<span data-ttu-id="31c05-253">W celu spełnienia tego testu, należy dodać właściwość nazwy do klasy nasze grupy (zobacz listę 7).</span><span class="sxs-lookup"><span data-stu-id="31c05-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="31c05-254">Ponadto należy dodać niewielki rozmiar nieco logikę weryfikacji do kontrolera grupy s Create() akcji (patrz lista 8).</span><span class="sxs-lookup"><span data-stu-id="31c05-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="31c05-255">**Wyświetlanie listy 7 - Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-255">**Listing 7 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

<span data-ttu-id="31c05-256">**Wyświetlanie listy 8 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-256">**Listing 8 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

<span data-ttu-id="31c05-257">Należy zauważyć, że kontroler grupy akcji Create() teraz zawiera logikę zarówno sprawdzania poprawności, jak i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="31c05-258">Obecnie bazy danych używanej przez grupę kontroler składa się z nic więcej niż kolekcji w pamięci.</span><span class="sxs-lookup"><span data-stu-id="31c05-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="31c05-259">Czas do refaktoryzacji</span><span class="sxs-lookup"><span data-stu-id="31c05-259">Time to Refactor</span></span>

<span data-ttu-id="31c05-260">Trzeci krok w Zrefaktoryzuj-czerwony/zielony jest częścią refaktoryzacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="31c05-261">W tym momencie musimy kroku z naszego kodu i należy wziąć pod uwagę, jak firma Microsoft Refaktoryzuj naszej aplikacji, aby zwiększyć jego projekt.</span><span class="sxs-lookup"><span data-stu-id="31c05-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="31c05-262">W ramach refaktoryzacji jest na etapie, jaką naszym zdaniem twardym o najlepszym sposobem stosowania zasad projektowania oprogramowania i wzorce.</span><span class="sxs-lookup"><span data-stu-id="31c05-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="31c05-263">Firma Microsoft mogą zmodyfikować naszego kodu w żaden sposób wybranego zwiększające projekt kodu.</span><span class="sxs-lookup"><span data-stu-id="31c05-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="31c05-264">Mamy zabezpieczenie testów jednostkowych, które uniemożliwiają nam fundamentalne istniejące funkcje.</span><span class="sxs-lookup"><span data-stu-id="31c05-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="31c05-265">Teraz, kontrolera grupy jest bałagan z punktu widzenia dobre projektu.</span><span class="sxs-lookup"><span data-stu-id="31c05-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="31c05-266">Kontroler grupy zawiera plątaniną bałagan sprawdzania i kod dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="31c05-267">Aby uniknąć naruszenia jednej zasady odpowiedzialności, musimy podzielić te problemy na różnych klas.</span><span class="sxs-lookup"><span data-stu-id="31c05-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="31c05-268">Klasy kontrolera nasze refactored grupy znajduje się w wyświetlania 9.</span><span class="sxs-lookup"><span data-stu-id="31c05-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="31c05-269">Kontroler został zmodyfikowany w celu użycia ContactManager warstwy usługi.</span><span class="sxs-lookup"><span data-stu-id="31c05-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="31c05-270">Jest to tej samej warstwie usługi korzystające z skontaktuj się z kontrolerem.</span><span class="sxs-lookup"><span data-stu-id="31c05-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="31c05-271">Wyświetlanie listy 10 zawiera nowych metod dodane do warstwy usług ContactManager do obsługi sprawdzania poprawności, wyświetlania i tworzenia grup.</span><span class="sxs-lookup"><span data-stu-id="31c05-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="31c05-272">Interfejs IContactManagerService został zaktualizowano w celu uwzględnienia nowych metod.</span><span class="sxs-lookup"><span data-stu-id="31c05-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="31c05-273">Wyświetlanie listy 11 zawiera nową klasę FakeContactManagerRepository, który implementuje interfejs IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="31c05-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="31c05-274">W odróżnieniu od klasy EntityContactManagerRepository, który też implementuje interfejs IContactManagerRepository naszej nowej klasy FakeContactManagerRepository nie komunikują się z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="31c05-275">Klasa FakeContactManagerRepository korzysta z kolekcji w pamięci, a jako serwer proxy dla bazy danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="31c05-276">Użyjemy tej klasy w naszych testów jednostkowych jako warstwa fałszywych repozytorium.</span><span class="sxs-lookup"><span data-stu-id="31c05-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="31c05-277">**Wyświetlanie listy 9 - Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-277">**Listing 9 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

<span data-ttu-id="31c05-278">**Wyświetlanie listy 10 - Controllers\ContactManagerService.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-278">**Listing 10 - Controllers\ContactManagerService.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

<span data-ttu-id="31c05-279">**Wyświetlanie listy 11 - Controllers\FakeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-279">**Listing 11 - Controllers\FakeContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]


<span data-ttu-id="31c05-280">Modyfikowanie IContactManagerRepository wymaga interfejsu używać do implementowania CreateGroup() i ListGroups() metody w klasie EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="31c05-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="31c05-281">Laziest i najszybszym sposobem na tym jest dodawanie szkieletu metody, które wyglądają następująco:</span><span class="sxs-lookup"><span data-stu-id="31c05-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]


<span data-ttu-id="31c05-282">Ponadto te zmiany do projektu aplikacji wymagają nam w tworzeniu modyfikacji niektórych testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="31c05-283">Teraz musisz użyć FakeContactManagerRepository podczas przeprowadzania testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="31c05-284">Zaktualizowano klasy GroupControllerTest znajduje się w wyświetlania 12.</span><span class="sxs-lookup"><span data-stu-id="31c05-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="31c05-285">**Wyświetlanie listy 12 - Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

<span data-ttu-id="31c05-286">Po wykonujemy wszystkie te zmiany, ponownie, wszystkich naszych przebiegu testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="31c05-287">Firma Microsoft zakończył cały cykl Zrefaktoryzuj-czerwony/zielony.</span><span class="sxs-lookup"><span data-stu-id="31c05-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="31c05-288">Wdrożyliśmy pierwszy dwóch scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="31c05-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="31c05-289">Mamy teraz obsługi testów jednostkowych dla wymagań wyrażone w scenariuszy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="31c05-290">Wdrażanie w pozostałej części scenariuszy użytkownika obejmuje powtarzające się tego samego cyklu Zrefaktoryzuj-czerwony/zielony.</span><span class="sxs-lookup"><span data-stu-id="31c05-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="31c05-291">Modyfikowanie naszej bazie danych</span><span class="sxs-lookup"><span data-stu-id="31c05-291">Modifying our Database</span></span>

<span data-ttu-id="31c05-292">Niestety mimo że firma Microsoft zostały spełnione wszystkie wymagania dotyczące wyrażonych przez nasze testy jednostek, pracę nie została wykonana.</span><span class="sxs-lookup"><span data-stu-id="31c05-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="31c05-293">Nadal trzeba zmodyfikować naszej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-293">We still need to modify our database.</span></span>

<span data-ttu-id="31c05-294">Należy utworzyć nową tabelę bazy danych grupy.</span><span class="sxs-lookup"><span data-stu-id="31c05-294">We need to create a new Group database table.</span></span> <span data-ttu-id="31c05-295">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="31c05-295">Follow these steps:</span></span>

1. <span data-ttu-id="31c05-296">W oknie Eksploratora serwera, kliknij prawym przyciskiem myszy folder Tabele i wybierz opcję menu **Dodaj nową tabelę**.</span><span class="sxs-lookup"><span data-stu-id="31c05-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="31c05-297">Wprowadź dwie kolumny opisane poniżej w Projektancie tabel.</span><span class="sxs-lookup"><span data-stu-id="31c05-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="31c05-298">Oznacz jako klucz podstawowy i kolumny tożsamości w kolumnie identyfikator.</span><span class="sxs-lookup"><span data-stu-id="31c05-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="31c05-299">Zapisz nową tabelę przy użyciu nazwy grup, klikając ikonę dyskietek.</span><span class="sxs-lookup"><span data-stu-id="31c05-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.12_table01"></a>


| <span data-ttu-id="31c05-300">**Nazwa kolumny**</span><span class="sxs-lookup"><span data-stu-id="31c05-300">**Column Name**</span></span> | <span data-ttu-id="31c05-301">**Typ danych**</span><span class="sxs-lookup"><span data-stu-id="31c05-301">**Data Type**</span></span> | <span data-ttu-id="31c05-302">**Dopuszcza wartości null**</span><span class="sxs-lookup"><span data-stu-id="31c05-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="31c05-303">Identyfikator</span><span class="sxs-lookup"><span data-stu-id="31c05-303">Id</span></span> | <span data-ttu-id="31c05-304">int</span><span class="sxs-lookup"><span data-stu-id="31c05-304">int</span></span> | <span data-ttu-id="31c05-305">False</span><span class="sxs-lookup"><span data-stu-id="31c05-305">False</span></span> |
| <span data-ttu-id="31c05-306">Nazwa</span><span class="sxs-lookup"><span data-stu-id="31c05-306">Name</span></span> | <span data-ttu-id="31c05-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="31c05-307">nvarchar(50)</span></span> | <span data-ttu-id="31c05-308">False</span><span class="sxs-lookup"><span data-stu-id="31c05-308">False</span></span> |


<span data-ttu-id="31c05-309">Następnie należy usunąć wszystkie dane z tabeli kontaktów (w przeciwnym razie możemy won t można utworzyć relacji między tabelami kontaktów i grup).</span><span class="sxs-lookup"><span data-stu-id="31c05-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won t be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="31c05-310">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="31c05-310">Follow these steps:</span></span>

1. <span data-ttu-id="31c05-311">Kliknij prawym przyciskiem myszy tabeli kontaktów i wybierz opcję menu **Pokaż dane tabeli**.</span><span class="sxs-lookup"><span data-stu-id="31c05-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="31c05-312">Usuń wszystkie wiersze.</span><span class="sxs-lookup"><span data-stu-id="31c05-312">Delete all of the rows.</span></span>

<span data-ttu-id="31c05-313">Następnie należy zdefiniować relacji między tabelą bazy danych grupy i istniejącej tabeli kontaktów w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="31c05-314">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="31c05-314">Follow these steps:</span></span>

1. <span data-ttu-id="31c05-315">Kliknij dwukrotnie tabelę Kontakty w oknie Eksploratora serwera, aby otworzyć projektanta tabel.</span><span class="sxs-lookup"><span data-stu-id="31c05-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="31c05-316">Dodaj nową kolumnę całkowitą do tabeli kontaktów o nazwie identyfikatora grupy.</span><span class="sxs-lookup"><span data-stu-id="31c05-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="31c05-317">Kliknij przycisk relacji, aby otworzyć okno dialogowe relacje klucza obcego (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="31c05-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="31c05-318">Kliknij przycisk Dodaj.</span><span class="sxs-lookup"><span data-stu-id="31c05-318">Click the Add button.</span></span>
5. <span data-ttu-id="31c05-319">Kliknij przycisk wielokropka obok przycisku tabeli i specyfikacja kolumn.</span><span class="sxs-lookup"><span data-stu-id="31c05-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="31c05-320">W oknie dialogowym tabele i kolumny wybierz grupę jako tabeli klucza podstawowego i identyfikator jako kolumna klucza podstawowego.</span><span class="sxs-lookup"><span data-stu-id="31c05-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="31c05-321">Wybierz kontakty jako tabela klucza obcego i GroupId jako kolumna klucza obcego (patrz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="31c05-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="31c05-322">Kliknij przycisk OK.</span><span class="sxs-lookup"><span data-stu-id="31c05-322">Click the OK button.</span></span>
7. <span data-ttu-id="31c05-323">W obszarze **INSERT i UPDATE specyfikacji**, wybierz wartość **Cascade** dla **Usuń regułę**.</span><span class="sxs-lookup"><span data-stu-id="31c05-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="31c05-324">Kliknij przycisk Zamknij, aby zamknąć okno dialogowe relacje klucza obcego.</span><span class="sxs-lookup"><span data-stu-id="31c05-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="31c05-325">Kliknij przycisk Zapisz, aby zapisać zmiany w tabeli kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="31c05-326">[![Tworzenie relacji tabeli bazy danych](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span></span>

<span data-ttu-id="31c05-327">**Rysunek 03**: tworzenie relacji tabeli bazy danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image6.png))</span></span>


<span data-ttu-id="31c05-328">[![Określanie relacji między tabelami](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-328">[![Specifying table relationships](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span></span>

<span data-ttu-id="31c05-329">**Rysunek 04**: Określanie relacji między tabelami ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="31c05-330">Aktualizowanie modelu danych</span><span class="sxs-lookup"><span data-stu-id="31c05-330">Updating our Data Model</span></span>

<span data-ttu-id="31c05-331">Następnie należy zaktualizować nasz model danych do reprezentowania nowej tabeli bazy danych.</span><span class="sxs-lookup"><span data-stu-id="31c05-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="31c05-332">Wykonaj następujące kroki:</span><span class="sxs-lookup"><span data-stu-id="31c05-332">Follow these steps:</span></span>

1. <span data-ttu-id="31c05-333">Kliknij dwukrotnie plik ContactManagerModel.edmx w folderze modele, aby otworzyć program Entity Designer.</span><span class="sxs-lookup"><span data-stu-id="31c05-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="31c05-334">Kliknij prawym przyciskiem myszy powierzchnię projektanta i wybierz opcję menu **modelu aktualizacji z bazy danych**.</span><span class="sxs-lookup"><span data-stu-id="31c05-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="31c05-335">W Kreatorze aktualizacji wybierz grupy tabeli i kliknij przycisk Zakończ przycisk (patrz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="31c05-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="31c05-336">Kliknij prawym przyciskiem myszy obiekt grupy, a następnie wybierz opcję menu **zmienić**.</span><span class="sxs-lookup"><span data-stu-id="31c05-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="31c05-337">Zmień nazwę *grup* jednostki do *grupy* (w liczbie pojedynczej).</span><span class="sxs-lookup"><span data-stu-id="31c05-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="31c05-338">Kliknij prawym przyciskiem myszy właściwość nawigacji grupy, która pojawia się w dolnej części obiektu Kontakt.</span><span class="sxs-lookup"><span data-stu-id="31c05-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="31c05-339">Zmień nazwę *grup* właściwości nawigacji do *grupy* (w liczbie pojedynczej).</span><span class="sxs-lookup"><span data-stu-id="31c05-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="31c05-340">[![Aktualizowanie modelu programu Entity Framework z bazy danych](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span></span>

<span data-ttu-id="31c05-341">**Rysunek 05**: aktualizowanie modelu programu Entity Framework z bazy danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image10.png))</span></span>


<span data-ttu-id="31c05-342">Po wykonaniu tych kroków modelu danych będzie reprezentować kontaktów i grup tabel.</span><span class="sxs-lookup"><span data-stu-id="31c05-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="31c05-343">Obie te jednostki powinny być widoczne w programie Entity Designer (patrz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="31c05-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="31c05-344">[![Wyświetlanie grupy i skontaktuj się z programu Entity Designer](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span></span>

<span data-ttu-id="31c05-345">**Rysunek 06**: wyświetlanie grupy i skontaktuj się z programu Entity Designer ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="31c05-346">Tworzenie klas naszym repozytorium</span><span class="sxs-lookup"><span data-stu-id="31c05-346">Creating our Repository Classes</span></span>

<span data-ttu-id="31c05-347">Następnie należy zaimplementować klasy nasze repozytorium.</span><span class="sxs-lookup"><span data-stu-id="31c05-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="31c05-348">W trakcie tej iteracji dodano kilka nowych metod interfejsu IContactManagerRepository podczas pisania kodu do zaspokojenia naszych testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="31c05-349">Z ostateczną wersją interfejsu IContactManagerRepository znajduje się w wyświetlania 14.</span><span class="sxs-lookup"><span data-stu-id="31c05-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="31c05-350">**Wyświetlanie listy 14 - Models\IContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-350">**Listing 14 - Models\IContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

<span data-ttu-id="31c05-351">Firma Microsoft był t faktycznie dowolnej z metod powiązany z pracą z grup kontaktów w naszym rzeczywistych klasy EntityContactManagerRepository zaimplementowana.</span><span class="sxs-lookup"><span data-stu-id="31c05-351">We haven t actually implemented any of the methods related to working with contact groups in our real EntityContactManagerRepository class.</span></span> <span data-ttu-id="31c05-352">Klasa EntityContactManagerRepository ma obecnie, metod klasy zastępczej dla każdej z metod grupy kontaktów wyświetlane w interfejsie IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="31c05-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="31c05-353">Na przykład metoda ListGroups() obecnie wygląda następująco:</span><span class="sxs-lookup"><span data-stu-id="31c05-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

<span data-ttu-id="31c05-354">Metody klasy zastępczej włączone nam kompilowania aplikacji i przekazania testów jednostkowych.</span><span class="sxs-lookup"><span data-stu-id="31c05-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="31c05-355">Jednak teraz nadszedł czas na faktycznie zaimplementować te metody.</span><span class="sxs-lookup"><span data-stu-id="31c05-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="31c05-356">Z ostateczną wersją klasy EntityContactManagerRepository znajduje się w 13 wyświetlania.</span><span class="sxs-lookup"><span data-stu-id="31c05-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="31c05-357">**Wyświetlanie listy 13 - Models\EntityContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="31c05-357">**Listing 13 - Models\EntityContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a><span data-ttu-id="31c05-358">Tworzenie widoków</span><span class="sxs-lookup"><span data-stu-id="31c05-358">Creating the Views</span></span>

<span data-ttu-id="31c05-359">Aplikacji ASP.NET MVC, korzystając z domyślny aparat widoku programu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="31c05-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="31c05-360">Tak ADAM t tworzyć widoki w odpowiedzi na test określonej jednostki.</span><span class="sxs-lookup"><span data-stu-id="31c05-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="31c05-361">Jednakże, ponieważ aplikacja będzie bezużyteczny bez widoków, możemy t zakończyć bez tworzenia i modyfikowania widoków zawartych w aplikacji Menedżera skontaktuj się z tą iterację.</span><span class="sxs-lookup"><span data-stu-id="31c05-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="31c05-362">Należy utworzyć następujące nowe widoki zarządzania grup kontaktów (patrz rysunek 7):</span><span class="sxs-lookup"><span data-stu-id="31c05-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="31c05-363">Views\Group\Index.aspx - Wyświetla listę grup kontaktów</span><span class="sxs-lookup"><span data-stu-id="31c05-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="31c05-364">Views\Group\Delete.aspx - Wyświetla formularza Potwierdzenie usuwania grupy kontaktów</span><span class="sxs-lookup"><span data-stu-id="31c05-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="31c05-365">[![Widok indeksu grupy](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-365">[![The Group Index view](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span></span>

<span data-ttu-id="31c05-366">**Rysunek 07**: widok indeksu grupy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image14.png))</span></span>


<span data-ttu-id="31c05-367">Należy zmodyfikować następujące istniejących widoków, aby zawierały grup kontaktów:</span><span class="sxs-lookup"><span data-stu-id="31c05-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="31c05-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="31c05-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="31c05-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="31c05-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="31c05-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="31c05-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="31c05-371">Widać zmodyfikowanych widoków analizując aplikacji Visual Studio, dołączony w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="31c05-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="31c05-372">Na przykład rysunku 8 przedstawiono widok indeksu kontaktów.</span><span class="sxs-lookup"><span data-stu-id="31c05-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="31c05-373">[![Widok indeksu kontaktów](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="31c05-373">[![The Contact Index view](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span></span>

<span data-ttu-id="31c05-374">**Rysunek 08**: widok indeksu kontaktów ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](iteration-6-use-test-driven-development-vb/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="31c05-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="31c05-375">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="31c05-375">Summary</span></span>

<span data-ttu-id="31c05-376">W tym iteracji dodaliśmy nowe funkcje do naszej aplikacji kontaktów Menedżerze wykonując test-driven development, metodologię projektowania aplikacji.</span><span class="sxs-lookup"><span data-stu-id="31c05-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="31c05-377">Możemy uruchomić dzięki utworzeniu zestawu scenariuszy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="31c05-378">Utworzono zestaw testów jednostkowych zgodne z wymogami wyrażona scenariuszy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="31c05-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="31c05-379">Na koniec napisaliśmy wystarczającego kodu by spełnić ich wymagań wyrażonych przez testy jednostkowe.</span><span class="sxs-lookup"><span data-stu-id="31c05-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="31c05-380">Po zakończeniu pisania kodu za mało by spełnić ich wymagań wyrażonych przez testy jednostek, możemy zaktualizować bazę danych i widoków.</span><span class="sxs-lookup"><span data-stu-id="31c05-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="31c05-381">Możemy dodać nową tabelę grup do naszej bazie danych i zaktualizować naszych modelu danych programu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="31c05-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="31c05-382">Możemy również tworzone i modyfikowane zestaw widoków.</span><span class="sxs-lookup"><span data-stu-id="31c05-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="31c05-383">W następnej iteracji — iteracji końcowego--możemy przepisywania naszej aplikacji, aby móc korzystać z technologii Ajax.</span><span class="sxs-lookup"><span data-stu-id="31c05-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="31c05-384">Dzięki wykorzystaniu technologii Ajax, możemy zwiększyć czas reakcji i wydajności aplikacji, skontaktuj się z Menedżera.</span><span class="sxs-lookup"><span data-stu-id="31c05-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="31c05-385">[Poprzednie](iteration-5-create-unit-tests-vb.md)
[dalej](iteration-7-add-ajax-functionality-vb.md)</span><span class="sxs-lookup"><span data-stu-id="31c05-385">[Previous](iteration-5-create-unit-tests-vb.md)
[Next](iteration-7-add-ajax-functionality-vb.md)</span></span>
