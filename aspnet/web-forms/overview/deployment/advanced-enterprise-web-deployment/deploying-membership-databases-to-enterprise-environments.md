---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: "Wdrożenie bazy danych członkostwa w środowiskach przedsiębiorstw | Dokumentacja firmy Microsoft"
author: jrjlee
description: "W tym temacie opisano najważniejsze kwestie związane z a wyzwania, które należy rozwiązać podczas obsługi administracyjnej bazy danych usług aplikacji platformy ASP.NET (więcej wspólne..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 27fade9fc5cae917579d4963da7bca12f6a5cda1
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/24/2018
---
<a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="ea269-103">Wdrożenie bazy danych członkostwa w środowiskach przedsiębiorstw</span><span class="sxs-lookup"><span data-stu-id="ea269-103">Deploying Membership Databases to Enterprise Environments</span></span>
====================
<span data-ttu-id="ea269-104">przez [Lewandowski Jason](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="ea269-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="ea269-105">Pobierz plik PDF</span><span class="sxs-lookup"><span data-stu-id="ea269-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="ea269-106">W tym temacie opisano najważniejsze kwestie związane z a wyzwania napotykane przez należy rozwiązać, gdy świadczenia aplikacji ASP.NET usług baz danych (określone częściej członkostwa bazy danych) w środowisku testowym, tymczasowym czy produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="ea269-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="ea269-107">Omówiono także podejścia, których można użyć, aby spełnić te problemy.</span><span class="sxs-lookup"><span data-stu-id="ea269-107">It also describes approaches you can use to meet these challenges.</span></span>


<span data-ttu-id="ea269-108">Ten temat jest częścią serii samouczków na podstawie tych wymagań związanych z przedsiębiorstwa wdrażaniem fikcyjnej firmy o nazwie firmy Fabrikam, Inc. Ten samouczek serii używa przykładowe rozwiązanie & #x 2014; [rozwiązania z menedżerem skontaktuj się z](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)& #x 2014; do reprezentowania aplikacji sieci web z realistyczne poziom złożoności, w tym aplikacji ASP.NET MVC 3, systemu Windows Usługi Communication Foundation (WCF), a projekt bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="ea269-109">Istotą te samouczki metody wdrażania opiera się na podejście pliku projektu podziału opisane w [opis pliku projektu](../web-deployment-in-the-enterprise/understanding-the-project-file.md), w którym jest kontrolowany przez proces kompilacji projektu dwa pliki & #x 2014; jeden zawierający Tworzenie instrukcji, które mają zastosowanie do każdego środowiska docelowego i dysk zawierający ustawienia kompilacji i wdrożenia określonego środowiska.</span><span class="sxs-lookup"><span data-stu-id="ea269-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="ea269-110">W czasie kompilacji pliku projektu określonego środowiska jest scalany pliku projektu niezależny od środowiska pełny zestaw instrukcji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="ea269-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="ea269-111">Jakie problemy podczas wdrażania bazy danych członkostwa?</span><span class="sxs-lookup"><span data-stu-id="ea269-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="ea269-112">W większości przypadków gdy opracować strategię wdrażania bazy danych, w pierwszej kolejności należy wziąć pod uwagę jest jakie dane mają zostać wdrożone.</span><span class="sxs-lookup"><span data-stu-id="ea269-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="ea269-113">W środowisku programowania lub testowym można wdrożyć danych konta użytkownika, aby ułatwić szybkie i łatwe testowanie.</span><span class="sxs-lookup"><span data-stu-id="ea269-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="ea269-114">W środowisku tymczasowym czy produkcyjnym jest bardzo prawdopodobne, czy chcesz wdrożyć dane konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ea269-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="ea269-115">Niestety bazy danych członkostwa ASP.NET wprowadzić niektóre określonych wyzwania, które podjęcie tej decyzji znacznie bardziej złożonych:</span><span class="sxs-lookup"><span data-stu-id="ea269-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="ea269-116">Wdrożenie tylko schematu pozostawi bazie danych członkostwa w stanie działającym stanie.</span><span class="sxs-lookup"><span data-stu-id="ea269-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="ea269-117">Jest to spowodowane bazie danych członkostwa zawiera niektóre dane konfiguracji (w **aspnet\_SchemaVersions** tabeli), która baza danych wymaga prawidłowego działania.</span><span class="sxs-lookup"><span data-stu-id="ea269-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="ea269-118">Tak można wykonać wdrożenie tylko schematu bazy danych członkostwa w celu wykluczenia danych konta użytkownika, należy uruchomić skrypt po wdrożeniu, aby dodać dane konfiguracji niezbędne.</span><span class="sxs-lookup"><span data-stu-id="ea269-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="ea269-119">W zależności od konfiguracji bazy danych członkostwa Dostawca członkostwa może używać klucza komputera do szyfrowania haseł i przechowywania ich w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="ea269-120">W takim przypadku danych z konta użytkownika, które wdrażasz z bazą danych stanie się bezużyteczne na serwerze docelowym.</span><span class="sxs-lookup"><span data-stu-id="ea269-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="ea269-121">Z tego powodu wdrażanie dane konto użytkownika nie jest obsługiwanym scenariuszem.</span><span class="sxs-lookup"><span data-stu-id="ea269-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="ea269-122">Wybieranie strategii bazy danych członkostwa</span><span class="sxs-lookup"><span data-stu-id="ea269-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="ea269-123">Po wybraniu udostępnianie bazy danych członkostwa w środowisku przedsiębiorstwa serwera, użyj poniższych wskazówek:</span><span class="sxs-lookup"><span data-stu-id="ea269-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="ea269-124">Gdy jest to możliwe, nie należy wdrażać bazy danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ea269-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="ea269-125">Zamiast tego należy utworzyć bazy danych członkostwa ręcznie na docelowym serwerze bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="ea269-126">Jeśli nie zostały dostosowane schemat bazy danych członkostwa, możesz po prostu utworzyć nowy na miejscu docelowym za pomocą [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="ea269-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="ea269-127">Jeśli nie jest dostępna opcja, ale aby wdrożyć bazy danych członkostwa & #x 2014; na przykład, jeśli dokonano rozległych modyfikacji schematu bazy danych & #x 2014; należy wykonać wdrożenie tylko do schematu bazy danych członkostwa, aby wykluczyć danych konta użytkownika, a następnie należy uruchomić skrypt po wdrożeniu można dodać żadnych danych konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="ea269-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="ea269-128">Szerokie wskazówki można znaleźć w tych metod w [porady: Wdrażanie ASP.NET członkostwa bazy danych bez tym kont użytkowników](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="ea269-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="ea269-129">Należy pamiętać, że *schemat bazy danych członkostwa jest może być dość statycznych*.</span><span class="sxs-lookup"><span data-stu-id="ea269-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="ea269-130">Nawet wtedy, gdy został dostosowany bazie danych członkostwa, jest mało prawdopodobne, że konieczne będzie zaktualizowanie schematu w regularnych odstępach czasu & #x 2014; nie będzie można zmienić z taką samą częstotliwością jako kod w aplikacji sieci web lub projektu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="ea269-131">Tak nie należy dołączyć wszystkie procesy wdrażania automatycznego lub pojedynczy krok bazie danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ea269-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="ea269-132">Aby zaktualizować schemat bazy danych członkostwa przy użyciu VSDBCMD</span><span class="sxs-lookup"><span data-stu-id="ea269-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="ea269-133">Jeśli zmodyfikujesz struktury bazy danych członkostwa po wdrożeniu pierwszej, możesz nie Internet Information Services (IIS) Narzędzie wdrażania Web (Web Deploy) umożliwia wdrożenie bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="ea269-134">Funkcja wdrażania bazy danych w sieci Web wdrażanie nie zawiera możliwości nawiązać aktualizacje różnicowe do docelowej bazy danych & #x 2014; zamiast tego narzędzia Web Deploy porzucić i ponownie utworzyć bazę danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="ea269-135">Oznacza to, że utracić istniejących danych konta użytkownika, który jest zwykle niepożądanych w środowisku tymczasowym czy produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="ea269-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="ea269-136">Alternatywą jest użycie narzędzia VSDBCMD do aktualizacji schematu docelowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="ea269-137">VSDBCMD zawiera dwie ważne funkcje.</span><span class="sxs-lookup"><span data-stu-id="ea269-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="ea269-138">Najpierw należy go zaimportować schemat z istniejącej bazy danych do pliku .dbschema.</span><span class="sxs-lookup"><span data-stu-id="ea269-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="ea269-139">Po drugie go wdrożyć pliku .dbschema istniejącą bazę danych jako aktualizacji różnicowych, co oznacza, że ułatwia tylko zmiany potrzebne do docelowej bazy danych na bieżąco, a nie utracić żadnych danych.</span><span class="sxs-lookup"><span data-stu-id="ea269-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="ea269-140">Następujące ogólne kroki służy do aktualizacji schematu bazy danych członkostwa:</span><span class="sxs-lookup"><span data-stu-id="ea269-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="ea269-141">Użyj VSDBCMD **importu** akcji, aby wygenerować plik .dbschema dla źródłowej bazy danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ea269-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="ea269-142">Ta procedura jest opisana w [porady: Importowanie schematu z wiersza polecenia](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="ea269-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="ea269-143">Użyj VSDBCMD **Wdróż** akcji można wdrożyć pliku .dbschema do docelowej bazy danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ea269-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="ea269-144">Ta procedura jest opisana w [dotyczące wiersza polecenia dla VSDBCMD. EXE (wdrożenia i importowania schematu)](https://msdn.microsoft.com/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="ea269-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="ea269-145">Wniosek</span><span class="sxs-lookup"><span data-stu-id="ea269-145">Conclusion</span></span>

<span data-ttu-id="ea269-146">W tym temacie opisano niektóre wyzwania, które mogą się spodziewać po aprowizacji bazy danych członkostwa ASP.NET w różnych środowiskach docelowych.</span><span class="sxs-lookup"><span data-stu-id="ea269-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="ea269-147">W szczególności wyjaśnić, dlaczego wdrożeń tylko schematu spowoduje pozostawienie bazy danych członkostwa w stanie niedziałającą i dlaczego wdrażanie dane konto użytkownika nie jest obsługiwany.</span><span class="sxs-lookup"><span data-stu-id="ea269-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="ea269-148">Temat także przedstawione wskazówki na temat sposobu udostępniania, wdrażanie i zaktualizować bazy danych członkostwa w różnych scenariuszach.</span><span class="sxs-lookup"><span data-stu-id="ea269-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="ea269-149">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="ea269-149">Further Reading</span></span>

<span data-ttu-id="ea269-150">Aby uzyskać więcej wskazówki i przykłady dotyczące używania VSDBCMD, zobacz [dotyczące wiersza polecenia dla VSDBCMD. EXE (wdrożenia i importowania schematu)](https://msdn.microsoft.com/library/dd193283.aspx) i [porady: Importowanie schematu z wiersza polecenia](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="ea269-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span> <span data-ttu-id="ea269-151">Aby uzyskać więcej informacji na temat używania aspnet\_regsql.exe do tworzenia baz danych członkostwa, zobacz [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="ea269-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="ea269-152">Zawiera ogólne wskazówki dotyczące wdrażania bazy danych członkostwa, zobacz [porady: Wdrażanie ASP.NET członkostwa bazy danych bez tym kont użytkowników](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="ea269-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="ea269-153">[Poprzednie](deploying-database-role-memberships-to-test-environments.md)
[dalej](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="ea269-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
