---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Wprowadzenie do korzystania z bazy danych programu Entity Framework 4.0 najpierw i platformy ASP.NET 4 sieci Web Forms — część 6 | Dokumentacja firmy Microsoft
author: tdykstra
description: Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu programu Entity Framework. Przykładowa aplikacja jest...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: b76be25501275ba676c9a9acca8e73333439ee70
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
ms.locfileid: "30888802"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="c7f47-104">Wprowadzenie do korzystania z bazy danych programu Entity Framework 4.0 najpierw i formularzy sieci Web 4 ASP.NET - część 6</span><span class="sxs-lookup"><span data-stu-id="c7f47-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>
====================
<span data-ttu-id="c7f47-105">Przez [Dykstra niestandardowy](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="c7f47-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="c7f47-106">Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu programu Entity Framework 4.0 i Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="c7f47-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="c7f47-107">Informacje o samouczek serii, zobacz [pierwszy samouczek z tej serii](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="c7f47-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="c7f47-108">Wdrażanie tabeli na hierarchii dziedziczenia</span><span class="sxs-lookup"><span data-stu-id="c7f47-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="c7f47-109">W poprzednich instrukcji pracy z powiązanych danych przez dodawanie i usuwanie relacji i dodając nowe jednostki, która ma relację z istniejącej jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="c7f47-110">Ten samouczek przedstawia sposób wykonania dziedziczenia w modelu danych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="c7f47-111">W programowanie zorientowane obiektowo dziedziczenia służy do ułatwienia pracy z powiązanymi klasami.</span><span class="sxs-lookup"><span data-stu-id="c7f47-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="c7f47-112">Na przykład można utworzyć `Instructor` i `Student` klasy, które pochodzą z `Person` klasy podstawowej.</span><span class="sxs-lookup"><span data-stu-id="c7f47-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="c7f47-113">Możesz utworzyć te same rodzaje dziedziczenia struktury jednostek w programu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="c7f47-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="c7f47-114">W tej części samouczka nie tworzenie nowych stron sieci web.</span><span class="sxs-lookup"><span data-stu-id="c7f47-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="c7f47-115">Zamiast tego będzie dodać pochodnych jednostki do modelu danych i modyfikowania istniejących stron do używania nowych jednostek.</span><span class="sxs-lookup"><span data-stu-id="c7f47-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="c7f47-116">Tabela na hierarchii i dziedziczenie tabeli według typu</span><span class="sxs-lookup"><span data-stu-id="c7f47-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="c7f47-117">Bazy danych można przechowywać informacje o powiązanych obiektów, w jednej tabeli lub wiele tabel.</span><span class="sxs-lookup"><span data-stu-id="c7f47-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="c7f47-118">Na przykład w `School` bazy danych, `Person` tabela zawiera informacje o studentów i instruktorów w jednej tabeli.</span><span class="sxs-lookup"><span data-stu-id="c7f47-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="c7f47-119">Niektóre kolumny dotyczą tylko instruktorów (`HireDate`), niektórych tylko dla uczniów lub studentów (`EnrollmentDate`), a niektóre zarówno (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="c7f47-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="c7f47-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="c7f47-121">Można skonfigurować programu Entity Framework, aby utworzyć `Instructor` i `Student` jednostek, które dziedziczą z `Person` jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="c7f47-122">Ten wzorzec generowania strukturę jednostek dziedziczenia z tabeli pojedynczej bazy danych jest nazywany *tabeli na hierarchii* dziedziczenia (TPH).</span><span class="sxs-lookup"><span data-stu-id="c7f47-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="c7f47-123">Kursów `School` baza danych używa innego wzorca.</span><span class="sxs-lookup"><span data-stu-id="c7f47-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="c7f47-124">Szkoleń w trybie online i szkoleń w siedzibie organizacji są przechowywane w oddzielnych tabelach, z których każdy ma element foreign key, który wskazuje `Course` tabeli.</span><span class="sxs-lookup"><span data-stu-id="c7f47-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="c7f47-125">Informacje o wspólnych dla obu typów kursu są przechowywane tylko w `Course` tabeli.</span><span class="sxs-lookup"><span data-stu-id="c7f47-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="c7f47-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="c7f47-127">Można skonfigurować programu Entity Framework modelu danych, aby `OnlineCourse` i `OnsiteCourse` jednostek dziedziczyć `Course` jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="c7f47-128">Ten wzorzec generowania strukturze dziedziczenia obiektu z oddzielnych tabelach dla każdego typu z każdym osobnej tabeli dotyczące tabeli, która przechowuje dane wspólne dla wszystkich typów, jest nazywany *tabel na typ* dziedziczenia (TPT).</span><span class="sxs-lookup"><span data-stu-id="c7f47-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="c7f47-129">Wzorce dziedziczenia TPH zazwyczaj zapewniają lepszą wydajność w ramach jednostki niż w przypadku wzorców dziedziczenia TPT wzorce TPT może powodować sprzężenia złożonych zapytań.</span><span class="sxs-lookup"><span data-stu-id="c7f47-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="c7f47-130">W tym przewodniku pokazano, jak zaimplementować dziedziczenia TPH.</span><span class="sxs-lookup"><span data-stu-id="c7f47-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="c7f47-131">Należy to zrobić, wykonując następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="c7f47-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="c7f47-132">Utwórz `Instructor` i `Student` typy jednostek, które pochodzą z `Person`.</span><span class="sxs-lookup"><span data-stu-id="c7f47-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="c7f47-133">Przenoszenie właściwości, które odnoszą się do jednostek pochodnych z `Person` jednostki do jednostki pochodne.</span><span class="sxs-lookup"><span data-stu-id="c7f47-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="c7f47-134">Ustaw ograniczenia dotyczące właściwości w typach pochodnych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="c7f47-135">Wprowadź `Person` jednostki abstrakcyjnej jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="c7f47-136">Mapa każdego pochodnych jednostki do `Person` tabeli z warunek, który określa, jak ustalić, czy `Person` wiersz reprezentuje, które typu pochodnego.</span><span class="sxs-lookup"><span data-stu-id="c7f47-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="c7f47-137">Dodawanie instruktora i uczniów jednostki</span><span class="sxs-lookup"><span data-stu-id="c7f47-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="c7f47-138">Otwórz <em>SchoolModel.edmx</em> pliku, kliknij prawym przyciskiem myszy obszar wolne w projektancie, wybierz opcję <strong>Dodaj</strong>, a następnie wybierz pozycję <strong>jednostki</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="c7f47-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="c7f47-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="c7f47-140">W **Dodaj jednostki** okno dialogowe, nazwa jednostki `Instructor` i ustawić jej **typ podstawowy** opcji w celu `Person`.</span><span class="sxs-lookup"><span data-stu-id="c7f47-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="c7f47-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="c7f47-142">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-142">Click **OK**.</span></span> <span data-ttu-id="c7f47-143">Tworzy projektanta `Instructor` jednostki, która jest pochodną `Person` jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="c7f47-144">Nowa jednostka nie ma jeszcze żadnych właściwości.</span><span class="sxs-lookup"><span data-stu-id="c7f47-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="c7f47-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="c7f47-146">Powtórz procedurę, aby utworzyć `Student` jednostki, która również jest pochodną `Person`.</span><span class="sxs-lookup"><span data-stu-id="c7f47-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="c7f47-147">Tylko instruktorów mają dat, więc musisz przenieść tej właściwości z `Person` jednostki do `Instructor` jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="c7f47-148">W `Person` jednostki, kliknij prawym przyciskiem myszy `HireDate` właściwości i kliknij przycisk **Wytnij**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="c7f47-149">Kliknij prawym przyciskiem myszy **właściwości** w `Instructor` jednostki i kliknij przycisk **Wklej**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="c7f47-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="c7f47-151">Daty zatrudnienia `Instructor` jednostki nie może mieć wartości null.</span><span class="sxs-lookup"><span data-stu-id="c7f47-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="c7f47-152">Kliknij prawym przyciskiem myszy `HireDate` właściwości, kliknij przycisk **właściwości**, a następnie w **właściwości** okna zmiany `Nullable` do `False`.</span><span class="sxs-lookup"><span data-stu-id="c7f47-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="c7f47-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="c7f47-154">Powtórz procedurę, aby przenieść `EnrollmentDate` właściwość z `Person` jednostki do `Student` jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="c7f47-155">Upewnij się, że można również ustawić `Nullable` do `False` dla `EnrollmentDate` właściwości.</span><span class="sxs-lookup"><span data-stu-id="c7f47-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="c7f47-156">Teraz, gdy `Person` jednostki ma właściwości, które są wspólne dla `Instructor` i `Student` jednostek (jako uzupełnienie właściwości nawigacji, które nie przenosisz), można użyć tylko jednostki jako podstawowa jednostka w strukturze dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="c7f47-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="c7f47-157">W związku z tym należy się upewnić, że nigdy nie jest traktowany jako niezależne jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="c7f47-158">Kliknij prawym przyciskiem myszy `Person` jednostki, wybierz opcję **właściwości**, a następnie w **właściwości** okna Zmień wartość **abstrakcyjny** właściwości  **Wartość true,**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="c7f47-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="c7f47-160">Mapowanie instruktora i uczniów jednostek do tabeli osoby</span><span class="sxs-lookup"><span data-stu-id="c7f47-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="c7f47-161">Teraz należy sprawdzić programu Entity Framework, jak do rozróżniania `Instructor` i `Student` jednostek w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="c7f47-162">Kliknij prawym przyciskiem myszy `Instructor` jednostki i wybierz **mapowania tabeli,**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="c7f47-163">W **szczegóły mapowania** okna, kliknij przycisk **Dodaj tabelę lub widok** i wybierz **osoby**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="c7f47-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="c7f47-165">Kliknij przycisk **Dodaj warunek**, a następnie wybierz **DataZatrudnienia**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="c7f47-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="c7f47-167">Zmień **Operator** do **jest** i **wartość / właściwości** do **Not Null**.</span><span class="sxs-lookup"><span data-stu-id="c7f47-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="c7f47-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="c7f47-169">Powtórz procedurę `Students` jednostki, określając, że ta jednostka jest mapowana do `Person` tabeli, gdy `EnrollmentDate` kolumna nie jest zerowa.</span><span class="sxs-lookup"><span data-stu-id="c7f47-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="c7f47-170">Następnie zapisz i zamknij modelu danych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-170">Then save and close the data model.</span></span>

<span data-ttu-id="c7f47-171">Skompiluj projekt do tworzenia nowych obiektów w postaci klas i udostępnić je w projektancie.</span><span class="sxs-lookup"><span data-stu-id="c7f47-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="c7f47-172">Przy użyciu instruktora i uczniów jednostek</span><span class="sxs-lookup"><span data-stu-id="c7f47-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="c7f47-173">Podczas tworzenia stron sieci web, które współpracują z danych dla użytkowników domowych i instruktora z danymi należy je, aby `Person` zestaw jednostek i filtrowane wg `HireDate` lub `EnrollmentDate` właściwości, aby ograniczyć dane zwrotne do studentów lub instruktorów.</span><span class="sxs-lookup"><span data-stu-id="c7f47-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="c7f47-174">Jednak obecnie po powiązaniu każdego formantu źródła danych do `Person` zestaw jednostek, można określić jedynie `Student` lub `Instructor` należy wybrać typy jednostek.</span><span class="sxs-lookup"><span data-stu-id="c7f47-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="c7f47-175">Ponieważ programu Entity Framework potrafi rozróżnianie studentów i instruktorów w `Person` zestaw jednostek, możesz usunąć `Where` wprowadzić ręcznie w tym celu ustawienia właściwości.</span><span class="sxs-lookup"><span data-stu-id="c7f47-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="c7f47-176">W projektancie programu Visual Studio, można określić typu jednostki `EntityDataSource` kontroli należy wybrać w **właściwość EntityTypeFilter** w polu listy rozwijanej `Configure Data Source` kreatora, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="c7f47-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="c7f47-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="c7f47-178">I w **właściwości** można usunąć okno `Where` klauzuli wartości, które nie są już potrzebne, jak pokazano w poniższym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="c7f47-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="c7f47-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="c7f47-180">Jednak ponieważ zmieniono kod znaczników dla `EntityDataSource` kontrolek używanych `ContextTypeName` atrybutu, nie można uruchomić **skonfiguruj źródło danych** kreatora na `EntityDataSource` formantów, które zostały już utworzone.</span><span class="sxs-lookup"><span data-stu-id="c7f47-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="c7f47-181">W związku z tym będzie wprowadzić wymagane zmiany, zmieniając zamiast tego znacznika.</span><span class="sxs-lookup"><span data-stu-id="c7f47-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="c7f47-182">Otwórz *Students.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="c7f47-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="c7f47-183">W `StudentsEntityDataSource` kontrolować, Usuń `Where` atrybutu i Dodaj `EntityTypeFilter="Student"` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="c7f47-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="c7f47-184">Kod znaczników będzie teraz podobne do następujących:</span><span class="sxs-lookup"><span data-stu-id="c7f47-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="c7f47-185">Ustawienie `EntityTypeFilter` atrybutu upewnia się, że `EntityDataSource` formant będzie wybierać tylko określony typ jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="c7f47-186">Jeśli chcesz pobrać zarówno `Student` i `Instructor` typy jednostek, czy nie ustawisz ten atrybut.</span><span class="sxs-lookup"><span data-stu-id="c7f47-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="c7f47-187">(Jest dostępna opcja pobierania wiele typów jednostek o jednym `EntityDataSource` kontroli tylko wtedy, gdy formant używaną na potrzeby dostępu do danych tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="c7f47-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="c7f47-188">Jeśli używasz `EntityDataSource` do wstawiania, aktualizacji lub usuwania jednostek kontrolować, a jeśli zestaw jednostek, jest on powiązany z może zawierać wiele typów może pracować tylko z jedną jednostkę typu, i należy ustawić wartość tego atrybutu.)</span><span class="sxs-lookup"><span data-stu-id="c7f47-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="c7f47-189">Powtórz procedurę `SearchEntityDataSource` kontrolować, z wyjątkiem usunąć tylko część `Where` atrybut, który wybiera `Student` jednostek zamiast całkowicie usunąć właściwość.</span><span class="sxs-lookup"><span data-stu-id="c7f47-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="c7f47-190">Otwierający tag formantu zostanie teraz podobne do następujących:</span><span class="sxs-lookup"><span data-stu-id="c7f47-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="c7f47-191">Uruchomić stronę, aby sprawdzić, czy nadal działa tak jak poprzednio.</span><span class="sxs-lookup"><span data-stu-id="c7f47-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="c7f47-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="c7f47-193">Zaktualizuj następujące strony utworzonych w starszych samouczki tak, aby były używane nowe `Student` i `Instructor` jednostek zamiast `Person` jednostek, i uruchom je, aby sprawdzić, czy działają tak samo jak przed:</span><span class="sxs-lookup"><span data-stu-id="c7f47-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="c7f47-194">W *StudentsAdd.aspx*, Dodaj `EntityTypeFilter="Student"` do `StudentsEntityDataSource` formantu.</span><span class="sxs-lookup"><span data-stu-id="c7f47-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="c7f47-195">Kod znaczników będzie teraz podobne do następujących:</span><span class="sxs-lookup"><span data-stu-id="c7f47-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="c7f47-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="c7f47-197">W *About.aspx*, Dodaj `EntityTypeFilter="Student"` do `StudentStatisticsEntityDataSource` kontroli i Usuń `Where="it.EnrollmentDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="c7f47-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="c7f47-198">Kod znaczników będzie teraz podobne do następujących:</span><span class="sxs-lookup"><span data-stu-id="c7f47-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="c7f47-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="c7f47-200">W *Instructors.aspx* i *InstructorsCourses.aspx*, Dodaj `EntityTypeFilter="Instructor"` do `InstructorsEntityDataSource` kontroli i Usuń `Where="it.HireDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="c7f47-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="c7f47-201">Znaczniki w *Instructors.aspx* teraz podobnego do następującego:</span><span class="sxs-lookup"><span data-stu-id="c7f47-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="c7f47-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="c7f47-203">Znaczniki w *InstructorsCourses.aspx* będzie teraz wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="c7f47-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="c7f47-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="c7f47-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="c7f47-205">W wyniku tych zmian została ulepszona utrzymanie aplikacji Contoso University na kilka sposobów.</span><span class="sxs-lookup"><span data-stu-id="c7f47-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="c7f47-206">Przeniósł wybór i weryfikacji logiki poza warstwy interfejsu użytkownika (*.aspx* znaczników) i jego integralną częścią Warstwa dostępu do danych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="c7f47-207">Pozwala to izolować kod aplikacji z zmiany, które można wprowadzać w przyszłości schemat bazy danych lub modelu danych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="c7f47-208">Na przykład można zdecydować, że studentów może dzierżawione jako nauczycieli pomocy i w związku z tym jak data zatrudnienia.</span><span class="sxs-lookup"><span data-stu-id="c7f47-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="c7f47-209">Następnie można dodać nowych właściwości w celu odróżnienia studentów z instruktorów i aktualizowanie modelu danych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="c7f47-210">Brak kodu w aplikacji sieci web należy zmienić z wyjątkiem przypadków, w którym chcesz wyświetlić datę zatrudnienia dla uczniów lub studentów.</span><span class="sxs-lookup"><span data-stu-id="c7f47-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="c7f47-211">Inną zaletą Dodawanie `Instructor` i `Student` jednostek jest czy kod jest łatwiej zrozumiałe niż podczas jego określonych `Person` obiektów, które zostały faktycznie studentów lub instruktorów.</span><span class="sxs-lookup"><span data-stu-id="c7f47-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="c7f47-212">Teraz przedstawiono jeden ze sposobów implementują wzorzec dziedziczenia w ramach jednostki.</span><span class="sxs-lookup"><span data-stu-id="c7f47-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="c7f47-213">Następujące samouczka dowiesz się, jak używane procedury składowane w celu większą kontrolę nad jak Entity Framework uzyskuje dostęp do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="c7f47-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c7f47-214">[Poprzednie](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [dalej](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="c7f47-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
