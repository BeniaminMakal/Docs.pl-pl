---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
title: Wprowadzenie do korzystania z bazy danych programu Entity Framework 4.0 najpierw i platformy ASP.NET 4 sieci Web Forms — część 3 | Dokumentacja firmy Microsoft
author: tdykstra
description: Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu programu Entity Framework. Przykładowa aplikacja jest...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: ccdc3f8c-2568-40a7-8f8b-3c23d2e05388
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-3
msc.type: authoredcontent
ms.openlocfilehash: 654f3556af5d05ec186e1811421966bbaffd2e21
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-3"></a><span data-ttu-id="b701f-104">Wprowadzenie do korzystania z bazy danych programu Entity Framework 4.0 najpierw i formularzy sieci Web 4 ASP.NET — część 3</span><span class="sxs-lookup"><span data-stu-id="b701f-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 3</span></span>
====================
<span data-ttu-id="b701f-105">Przez [Dykstra niestandardowy](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="b701f-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="b701f-106">Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu programu Entity Framework 4.0 i Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="b701f-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="b701f-107">Informacje o samouczek serii, zobacz [pierwszy samouczek z tej serii](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="b701f-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="filtering-ordering-and-grouping-data"></a><span data-ttu-id="b701f-108">Filtrowanie, kolejność i grupowanie danych</span><span class="sxs-lookup"><span data-stu-id="b701f-108">Filtering, Ordering, and Grouping Data</span></span>

<span data-ttu-id="b701f-109">W poprzednich samouczku użyto `EntityDataSource` formantu, aby wyświetlić i edytować dane.</span><span class="sxs-lookup"><span data-stu-id="b701f-109">In the previous tutorial you used the `EntityDataSource` control to display and edit data.</span></span> <span data-ttu-id="b701f-110">W tym samouczku będzie filtru, kolejności i grupowania danych.</span><span class="sxs-lookup"><span data-stu-id="b701f-110">In this tutorial you'll filter, order, and group data.</span></span> <span data-ttu-id="b701f-111">Po wykonaniu tej przez ustawienie właściwości `EntityDataSource` formantu, składnia różni się od innych kontrolki źródła danych.</span><span class="sxs-lookup"><span data-stu-id="b701f-111">When you do this by setting properties of the `EntityDataSource` control, the syntax is different from other data source controls.</span></span> <span data-ttu-id="b701f-112">Jak można zauważyć, jednak można użyć `QueryExtender` kontroli w celu zminimalizowania tych różnic.</span><span class="sxs-lookup"><span data-stu-id="b701f-112">As you'll see, however, you can use the `QueryExtender` control to minimize these differences.</span></span>

<span data-ttu-id="b701f-113">Użytkownik zmieni *Students.aspx* strony do filtrowania dla uczniów lub studentów, sortowanie według nazwy i wyszukiwania dla nazwy.</span><span class="sxs-lookup"><span data-stu-id="b701f-113">You'll change the *Students.aspx* page to filter for students, sort by name, and search on name.</span></span> <span data-ttu-id="b701f-114">Zostanie również zmienić *Courses.aspx* stronę, aby wyświetlić szkoleń dla wybranego działu i wyszukaj kursów według nazwy.</span><span class="sxs-lookup"><span data-stu-id="b701f-114">You'll also change the *Courses.aspx* page to display courses for the selected department and search for courses by name.</span></span> <span data-ttu-id="b701f-115">Na koniec zostanie dodana statystyki uczniowie *About.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="b701f-115">Finally, you'll add student statistics to the *About.aspx* page.</span></span>

<span data-ttu-id="b701f-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-116">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image1.png)</span></span>

<span data-ttu-id="b701f-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-117">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image3.png)</span></span>

<span data-ttu-id="b701f-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-118">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image5.png)</span></span>

<span data-ttu-id="b701f-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-119">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image7.png)</span></span>

## <a name="using-the-entitydatasource-where-property-to-filter-data"></a><span data-ttu-id="b701f-120">Przy użyciu obiektu EntityDataSource "Gdzie" właściwości do filtrowania danych</span><span class="sxs-lookup"><span data-stu-id="b701f-120">Using the EntityDataSource "Where" Property to Filter Data</span></span>

<span data-ttu-id="b701f-121">Otwórz *Students.aspx* strony utworzoną w poprzedniej samouczka.</span><span class="sxs-lookup"><span data-stu-id="b701f-121">Open the *Students.aspx* page that you created in the previous tutorial.</span></span> <span data-ttu-id="b701f-122">Zgodnie z obecną konfiguracją `GridView` kontrolki na stronie wyświetla wszystkie nazwy z `People` zestawu jednostek.</span><span class="sxs-lookup"><span data-stu-id="b701f-122">As currently configured, the `GridView` control in the page displays all the names from the `People` entity set.</span></span> <span data-ttu-id="b701f-123">Jednak chcesz pokazać tylko studentów, który można znaleźć po wybraniu `Person` obiektów, które mają daty rejestracji inną niż null.</span><span class="sxs-lookup"><span data-stu-id="b701f-123">However, you want to show only students, which you can find by selecting `Person` entities that have non-null enrollment dates.</span></span>

<span data-ttu-id="b701f-124">Przełącz się do **projekt** wyświetlać i wybierać `EntityDataSource` formantu.</span><span class="sxs-lookup"><span data-stu-id="b701f-124">Switch to **Design** view and select the `EntityDataSource` control.</span></span> <span data-ttu-id="b701f-125">W **właściwości** ustaw `Where` właściwości `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="b701f-125">In the **Properties** window, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>

<span data-ttu-id="b701f-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-126">[![Image01](the-entity-framework-and-aspnet-getting-started-part-3/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image9.png)</span></span>

<span data-ttu-id="b701f-127">Składnia w `Where` właściwość `EntityDataSource` formant jest SQL jednostki.</span><span class="sxs-lookup"><span data-stu-id="b701f-127">The syntax you use in the `Where` property of the `EntityDataSource` control is Entity SQL.</span></span> <span data-ttu-id="b701f-128">Jednostka SQL jest podobny do języka Transact-SQL, ale jest dostosowana do użycia z jednostek, a nie obiekty bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b701f-128">Entity SQL is similar to Transact-SQL, but it's customized for use with entities rather than database objects.</span></span> <span data-ttu-id="b701f-129">W wyrażeniu `it.EnrollmentDate is not null`, słowa `it` reprezentuje odwołanie do jednostki zwróconych przez kwerendę.</span><span class="sxs-lookup"><span data-stu-id="b701f-129">In the expression `it.EnrollmentDate is not null`, the word `it` represents a reference to the entity returned by the query.</span></span> <span data-ttu-id="b701f-130">W związku z tym `it.EnrollmentDate` odwołuje się do `EnrollmentDate` właściwość `Person` jednostki który `EntityDataSource` kontrolować zwraca.</span><span class="sxs-lookup"><span data-stu-id="b701f-130">Therefore, `it.EnrollmentDate` refers to the `EnrollmentDate` property of the `Person` entity that the `EntityDataSource` control returns.</span></span>

<span data-ttu-id="b701f-131">Uruchom strony.</span><span class="sxs-lookup"><span data-stu-id="b701f-131">Run the page.</span></span> <span data-ttu-id="b701f-132">Lista studentów zawiera teraz tylko studentów.</span><span class="sxs-lookup"><span data-stu-id="b701f-132">The students list now contains only students.</span></span> <span data-ttu-id="b701f-133">(Nie ma żadnych wierszy, w którym wyświetlana jest data nie rejestracji.)</span><span class="sxs-lookup"><span data-stu-id="b701f-133">(There are no rows displayed where there's no enrollment date.)</span></span>

<span data-ttu-id="b701f-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-3/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image11.png)</span></span>

## <a name="using-the-entitydatasource-orderby-property-to-order-data"></a><span data-ttu-id="b701f-135">Za pomocą właściwości "OrderBy" obiektu EntityDataSource kolejność danych</span><span class="sxs-lookup"><span data-stu-id="b701f-135">Using the EntityDataSource "OrderBy" Property to Order Data</span></span>

<span data-ttu-id="b701f-136">Należy zawsze być według nazwy, gdy jest najpierw wyświetlany dla tej listy.</span><span class="sxs-lookup"><span data-stu-id="b701f-136">You also want this list to be in name order when it's first displayed.</span></span> <span data-ttu-id="b701f-137">Z *Students.aspx* strony jest wciąż otwarty w **projektu** widoku i `EntityDataSource` kontroli jest wybrana, w **właściwości** zestaw okna  **OrderBy** właściwości `it.LastName`.</span><span class="sxs-lookup"><span data-stu-id="b701f-137">With the *Students.aspx* page still open in **Design** view, and with the `EntityDataSource` control still selected, in the **Properties** window set the **OrderBy** property to `it.LastName`.</span></span>

<span data-ttu-id="b701f-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-138">[![Image05](the-entity-framework-and-aspnet-getting-started-part-3/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image13.png)</span></span>

<span data-ttu-id="b701f-139">Uruchom strony.</span><span class="sxs-lookup"><span data-stu-id="b701f-139">Run the page.</span></span> <span data-ttu-id="b701f-140">Lista studentów jest teraz w kolejności według nazwiska.</span><span class="sxs-lookup"><span data-stu-id="b701f-140">The students list is now in order by last name.</span></span>

<span data-ttu-id="b701f-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-141">[![Image04](the-entity-framework-and-aspnet-getting-started-part-3/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image15.png)</span></span>

## <a name="using-a-control-parameter-to-set-the-where-property"></a><span data-ttu-id="b701f-142">Za pomocą parametru formantu można ustawić właściwości "Gdzie"</span><span class="sxs-lookup"><span data-stu-id="b701f-142">Using a Control Parameter to Set the "Where" Property</span></span>

<span data-ttu-id="b701f-143">Zgodnie z innymi kontrolki źródła danych, można podać wartości parametrów do `Where` właściwości.</span><span class="sxs-lookup"><span data-stu-id="b701f-143">As with other data source controls, you can pass parameter values to the `Where` property.</span></span> <span data-ttu-id="b701f-144">Na *Courses.aspx* strony, że został utworzony w część 2 samouczka, ta metoda służy do wyświetlenia kursów, które są skojarzone z działu, które użytkownik wybiera z listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="b701f-144">On the *Courses.aspx* page that you created in part 2 of the tutorial, you can use this method to display courses that are associated with the department that a user selects from the drop-down list.</span></span>

<span data-ttu-id="b701f-145">Otwórz *Courses.aspx* i przejdź do **projekt** widoku.</span><span class="sxs-lookup"><span data-stu-id="b701f-145">Open *Courses.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="b701f-146">Dodaj drugi `EntityDataSource` do strony i nadaj mu nazwę `CoursesEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b701f-146">Add a second `EntityDataSource` control to the page, and name it `CoursesEntityDataSource`.</span></span> <span data-ttu-id="b701f-147">Połącz go z `SchoolEntities` modelu, a następnie wybierz `Courses` jako **EntitySetName** wartości.</span><span class="sxs-lookup"><span data-stu-id="b701f-147">Connect it to the `SchoolEntities` model, and select `Courses` as the **EntitySetName** value.</span></span>

<span data-ttu-id="b701f-148">W **właściwości** okna, kliknij przycisk wielokropka w **gdzie** pole właściwości.</span><span class="sxs-lookup"><span data-stu-id="b701f-148">In the **Properties** window, click the ellipsis in the **Where** property box.</span></span> <span data-ttu-id="b701f-149">(Upewnij się, że `CoursesEntityDataSource` przed użyciem nadal jest wybrana kontrolka **właściwości** okna.)</span><span class="sxs-lookup"><span data-stu-id="b701f-149">(Make sure the `CoursesEntityDataSource` control is still selected before using the **Properties** window.)</span></span>

<span data-ttu-id="b701f-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-150">[![Image06](the-entity-framework-and-aspnet-getting-started-part-3/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image17.png)</span></span>

<span data-ttu-id="b701f-151">**Edytora wyrażeń** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="b701f-151">The **Expression Editor** dialog box is displayed.</span></span> <span data-ttu-id="b701f-152">W tym oknie dialogowym wybierz **automatycznego generowania klauzuli Where wyrażenia na podstawie podanych parametrów**, a następnie kliknij przycisk **Dodaj parametr**.</span><span class="sxs-lookup"><span data-stu-id="b701f-152">In this dialog box, select **Automatically generate the Where expression based on the provided parameters**, and then click **Add Parameter**.</span></span> <span data-ttu-id="b701f-153">Nazwa parametru `DepartmentID`, wybierz pozycję **kontroli** jako **źródło parametru** wartość, a następnie wybierz **DepartmentsDropDownList** jako **ControlID**  wartość.</span><span class="sxs-lookup"><span data-stu-id="b701f-153">Name the parameter `DepartmentID`, select **Control** as the **Parameter source** value, and select **DepartmentsDropDownList** as the **ControlID** value.</span></span>

<span data-ttu-id="b701f-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-154">[![Image07](the-entity-framework-and-aspnet-getting-started-part-3/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image19.png)</span></span>

<span data-ttu-id="b701f-155">Kliknij przycisk **Pokaż zaawansowane właściwości**i w **właściwości** okna **edytora wyrażeń** okno dialogowe, zmień `Type` właściwości `Int32`.</span><span class="sxs-lookup"><span data-stu-id="b701f-155">Click **Show advanced properties**, and in the **Properties** window of the **Expression Editor** dialog box, change the `Type` property to `Int32`.</span></span>

<span data-ttu-id="b701f-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-156">[![Image15](the-entity-framework-and-aspnet-getting-started-part-3/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image21.png)</span></span>

<span data-ttu-id="b701f-157">Gdy wszystko będzie gotowe, kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="b701f-157">When you're done, click **OK**.</span></span>

<span data-ttu-id="b701f-158">Poniżej listy rozwijanej, Dodaj `GridView` do strony i nadaj mu nazwę `CoursesGridView`.</span><span class="sxs-lookup"><span data-stu-id="b701f-158">Below the drop-down list, add a `GridView` control to the page and name it `CoursesGridView`.</span></span> <span data-ttu-id="b701f-159">Połącz go z `CoursesEntityDataSource` źródła danych formantu, kliknij przycisk **Odśwież schemat**, kliknij przycisk **Edytowanie kolumn**i Usuń `DepartmentID` kolumny.</span><span class="sxs-lookup"><span data-stu-id="b701f-159">Connect it to the `CoursesEntityDataSource` data source control, click **Refresh Schema**, click **Edit Columns**, and remove the `DepartmentID` column.</span></span> <span data-ttu-id="b701f-160">`GridView` Kontroli znaczników podobnego do następującego.</span><span class="sxs-lookup"><span data-stu-id="b701f-160">The `GridView` control markup resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample1.aspx)]

<span data-ttu-id="b701f-161">Gdy użytkownik zmieni się na liście rozwijanej wybranego działu, ma listę skojarzone kursy zmienić automatycznie.</span><span class="sxs-lookup"><span data-stu-id="b701f-161">When the user changes the selected department in the drop-down list, you want the list of associated courses to change automatically.</span></span> <span data-ttu-id="b701f-162">Aby to zrobić, wybierz z listy rozwijanej i **właściwości** zestaw okna `AutoPostBack` właściwości `True`.</span><span class="sxs-lookup"><span data-stu-id="b701f-162">To make this happen, select the drop-down list, and in the **Properties** window set the `AutoPostBack` property to `True`.</span></span>

<span data-ttu-id="b701f-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-163">[![Image08](the-entity-framework-and-aspnet-getting-started-part-3/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image23.png)</span></span>

<span data-ttu-id="b701f-164">Teraz, gdy wszystko jest gotowe, przy użyciu narzędzia Projektant, przełącz się do **źródła** wyświetlić i Zastąp `ConnectionString` i `DefaultContainer` nazwy właściwości `CoursesEntityDataSource` sterować za pomocą `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="b701f-164">Now that you're finished using the designer, switch to **Source** view and replace the `ConnectionString` and `DefaultContainer` name properties of the `CoursesEntityDataSource` control with the `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="b701f-165">Gdy wszystko będzie gotowe, znaczników dla formantu będzie wyglądać jak w następującym przykładzie.</span><span class="sxs-lookup"><span data-stu-id="b701f-165">When you're done, the markup for the control will look like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample2.aspx)]

<span data-ttu-id="b701f-166">Uruchom strony i użyj listy rozwijanej, aby wybrać różnych działów.</span><span class="sxs-lookup"><span data-stu-id="b701f-166">Run the page and use the drop-down list to select different departments.</span></span> <span data-ttu-id="b701f-167">Są wyświetlane tylko kursów dostępnych w ramach wybranego działu `GridView` formantu.</span><span class="sxs-lookup"><span data-stu-id="b701f-167">Only courses that are offered by the selected department are displayed in the `GridView` control.</span></span>

<span data-ttu-id="b701f-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-168">[![Image09](the-entity-framework-and-aspnet-getting-started-part-3/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image25.png)</span></span>

## <a name="using-the-entitydatasource-groupby-property-to-group-data"></a><span data-ttu-id="b701f-169">Za pomocą właściwości "GroupBy" obiektu EntityDataSource do grupowania danych</span><span class="sxs-lookup"><span data-stu-id="b701f-169">Using the EntityDataSource "GroupBy" Property to Group Data</span></span>

<span data-ttu-id="b701f-170">Załóżmy, że Contoso University chce wstrzymać statystykami uczniów treści na stronie o.</span><span class="sxs-lookup"><span data-stu-id="b701f-170">Suppose Contoso University wants to put some student-body statistics on its About page.</span></span> <span data-ttu-id="b701f-171">W szczególności potrzebuje do pokazywania podział liczby studentów według daty, które są zarejestrowane.</span><span class="sxs-lookup"><span data-stu-id="b701f-171">Specifically, it wants to show a breakdown of numbers of students by the date they enrolled.</span></span>

<span data-ttu-id="b701f-172">Otwórz *About.aspx*i w **źródła** wyświetlić, Zastąp istniejącą zawartość elementu `BodyContent` sterować za pomocą "Uczniów treści statystyki" między `h2` tagów:</span><span class="sxs-lookup"><span data-stu-id="b701f-172">Open *About.aspx*, and in **Source** view, replace the existing contents of the `BodyContent` control with "Student Body Statistics" between `h2` tags:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample3.aspx)]

<span data-ttu-id="b701f-173">Po pozycji, Dodaj `EntityDataSource` kontroli i nadaj mu nazwę `StudentStatisticsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="b701f-173">After the heading, add an `EntityDataSource` control and name it `StudentStatisticsEntityDataSource`.</span></span> <span data-ttu-id="b701f-174">Połącz go z `SchoolEntities`, wybierz pozycję `People` jednostki ustawić i pozostawić **wybierz** pola kreatora bez zmian.</span><span class="sxs-lookup"><span data-stu-id="b701f-174">Connect it to `SchoolEntities`, select the `People` entity set, and leave the **Select** box in the wizard unchanged.</span></span> <span data-ttu-id="b701f-175">Ustaw następujące właściwości **właściwości** okno:</span><span class="sxs-lookup"><span data-stu-id="b701f-175">Set the following properties in the **Properties** window:</span></span>

- <span data-ttu-id="b701f-176">Aby filtrować dla uczniów lub studentów tylko, ustaw `Where` właściwości `it.EnrollmentDate is not null`.</span><span class="sxs-lookup"><span data-stu-id="b701f-176">To filter for students only, set the `Where` property to `it.EnrollmentDate is not null`.</span></span>
- <span data-ttu-id="b701f-177">Aby pogrupować wyniki według daty rejestracji, ustaw `GroupBy` właściwości `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="b701f-177">To group the results by the enrollment date, set the `GroupBy` property to `it.EnrollmentDate`.</span></span>
- <span data-ttu-id="b701f-178">Aby wybrać datę rejestracji i liczby studentów, ustaw `Select` właściwości `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span><span class="sxs-lookup"><span data-stu-id="b701f-178">To select the enrollment date and the number of students, set the `Select` property to `it.EnrollmentDate, Count(it.EnrollmentDate) AS NumberOfStudents`.</span></span>
- <span data-ttu-id="b701f-179">Aby zamówić wyniki według daty rejestracji, ustaw `OrderBy` właściwości `it.EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="b701f-179">To order the results by the enrollment date, set the `OrderBy` property to `it.EnrollmentDate`.</span></span>

<span data-ttu-id="b701f-180">W **źródła** wyświetlić, Zastąp `ConnectionString` i `DefaultContainer` nazwy właściwości, do których `ContextTypeName` właściwości.</span><span class="sxs-lookup"><span data-stu-id="b701f-180">In **Source** view, replace the `ConnectionString` and `DefaultContainer` name properties with a `ContextTypeName` property.</span></span> <span data-ttu-id="b701f-181">`EntityDataSource` Znacznika kontrolki teraz podobnego do następującego.</span><span class="sxs-lookup"><span data-stu-id="b701f-181">The `EntityDataSource` control markup now resembles the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample4.aspx)]

<span data-ttu-id="b701f-182">Składnia `Select`, `GroupBy`, i `Where` właściwości podobny języka Transact-SQL, z wyjątkiem `it` — słowo kluczowe, który określa bieżącego obiektu.</span><span class="sxs-lookup"><span data-stu-id="b701f-182">The syntax of the `Select`, `GroupBy`, and `Where` properties resembles Transact-SQL except for the `it` keyword that specifies the current entity.</span></span>

<span data-ttu-id="b701f-183">Dodaj następujący kod, aby utworzyć `GridView` formantu, aby wyświetlić dane.</span><span class="sxs-lookup"><span data-stu-id="b701f-183">Add the following markup to create a `GridView` control to display the data.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample5.aspx)]

<span data-ttu-id="b701f-184">Uruchomić stronę, aby wyświetlić listę zawierającą liczbę studentów według daty rejestracji.</span><span class="sxs-lookup"><span data-stu-id="b701f-184">Run the page to see a list showing the number of students by enrollment date.</span></span>

<span data-ttu-id="b701f-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-185">[![Image10](the-entity-framework-and-aspnet-getting-started-part-3/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image27.png)</span></span>

## <a name="using-the-queryextender-control-for-filtering-and-ordering"></a><span data-ttu-id="b701f-186">Używanie formantu klasą QueryExtender filtrowania i kolejności</span><span class="sxs-lookup"><span data-stu-id="b701f-186">Using the QueryExtender Control for Filtering and Ordering</span></span>

<span data-ttu-id="b701f-187">`QueryExtender` Kontrola zapewnia możliwość określenia filtrowanie i sortowanie w znaczniku.</span><span class="sxs-lookup"><span data-stu-id="b701f-187">The `QueryExtender` control provides a way to specify filtering and sorting in markup.</span></span> <span data-ttu-id="b701f-188">Składnia jest niezależna od używany system zarządzania bazami (danych DBMS).</span><span class="sxs-lookup"><span data-stu-id="b701f-188">The syntax is independent of the database management system (DBMS) you're using.</span></span> <span data-ttu-id="b701f-189">Jest również zwykle niezależnie od programu Entity Framework, z wyjątkiem, że składnia używanych w przypadku właściwości nawigacji jest unikatowy dla programu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="b701f-189">It's also generally independent of the Entity Framework, with the exception that syntax you use for navigation properties is unique to the Entity Framework.</span></span>

<span data-ttu-id="b701f-190">W tej części samouczka użyjesz `QueryExtender` formantu do filtrowania i określania kolejności danych, a jedno z pól według będzie właściwości nawigacji.</span><span class="sxs-lookup"><span data-stu-id="b701f-190">In this part of the tutorial you'll use a `QueryExtender` control to filter and order data, and one of the order-by fields will be a navigation property.</span></span>

<span data-ttu-id="b701f-191">(Jeśli wolisz użyć kodu zamiast znaczników, aby rozszerzyć zapytań, które są automatycznie generowane przez `EntityDataSource` kontroli, możesz to zrobić obsługi `QueryCreated` zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b701f-191">(If you prefer to use code instead of markup to extend the queries that are automatically generated by the `EntityDataSource` control, you can do that by handling the `QueryCreated` event.</span></span> <span data-ttu-id="b701f-192">Jest to sposób `QueryExtender` rozszerza kontroli `EntityDataSource` także kontrola zapytań.)</span><span class="sxs-lookup"><span data-stu-id="b701f-192">This is how the `QueryExtender` control extends `EntityDataSource` control queries also.)</span></span>

<span data-ttu-id="b701f-193">Otwórz *Courses.aspx* strony i poniżej znaczników dodaniu wcześniej, Wstaw następujący kod w celu utworzenia nagłówka, pole tekstowe do wprowadzania ciągów wyszukiwania, przycisk wyszukiwania i `EntityDataSource` formant, który jest powiązany z `Courses` zestawu jednostek.</span><span class="sxs-lookup"><span data-stu-id="b701f-193">Open the *Courses.aspx* page, and below the markup you added previously, insert the following markup to create a heading, a text box for entering search strings, a search button, and an `EntityDataSource` control that's bound to the `Courses` entity set.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample6.aspx)]

<span data-ttu-id="b701f-194">Zwróć uwagę, że `EntityDataSource` formantu `Include` właściwość jest ustawiona na `Department`.</span><span class="sxs-lookup"><span data-stu-id="b701f-194">Notice that the `EntityDataSource` control's `Include` property is set to `Department`.</span></span> <span data-ttu-id="b701f-195">W bazie danych `Course` tabela nie zawiera nazwę działu; zawiera `DepartmentID` kolumny klucza obcego.</span><span class="sxs-lookup"><span data-stu-id="b701f-195">In the database, the `Course` table does not contain the department name; it contains a `DepartmentID` foreign key column.</span></span> <span data-ttu-id="b701f-196">Jeśli zostały kwerendy bazy danych bezpośrednio, można uzyskać nazwy działu wraz z danymi kursu, trzeba będzie sprzęgać `Course` i `Department` tabel.</span><span class="sxs-lookup"><span data-stu-id="b701f-196">If you were querying the database directly, to get the department name along with course data, you would have to join the `Course` and `Department` tables.</span></span> <span data-ttu-id="b701f-197">Przez ustawienie `Include` właściwości `Department`, możesz określić, że programu Entity Framework powinien wykonać pracy pobierania pokrewny `Department` jednostki, gdy otrzymuje `Course` jednostki.</span><span class="sxs-lookup"><span data-stu-id="b701f-197">By setting the `Include` property to `Department`, you specify that the Entity Framework should do the work of getting the related `Department` entity when it gets a `Course` entity.</span></span> <span data-ttu-id="b701f-198">`Department` Jednostki są następnie przechowywane w `Department` właściwość nawigacji `Course` jednostki.</span><span class="sxs-lookup"><span data-stu-id="b701f-198">The `Department` entity is then stored in the `Department` navigation property of the `Course` entity.</span></span> <span data-ttu-id="b701f-199">(Domyślnie `SchoolEntities` klasy, który został wygenerowany przez projektanta modelu danych pobiera dane dotyczące po jest wymagana i kontroli źródła danych został powiązany z tej klasy, więc ustawienie `Include` właściwość nie jest konieczne.</span><span class="sxs-lookup"><span data-stu-id="b701f-199">(By default, the `SchoolEntities` class that was generated by the data model designer retrieves related data when it's needed, and you've bound the data source control to that class, so setting the `Include` property is not necessary.</span></span> <span data-ttu-id="b701f-200">Jednak ustawieniem dla niego zwiększa wydajność strony, ponieważ w przeciwnym razie programu Entity Framework spowodowałoby, oddziel wywołania do bazy danych do pobierania danych dla `Course` jednostek i pokrewny `Department` jednostek.)</span><span class="sxs-lookup"><span data-stu-id="b701f-200">However, setting it improves performance of the page, because otherwise the Entity Framework would make separate calls to the database to retrieve data for the `Course` entities and for the related `Department` entities.)</span></span>

<span data-ttu-id="b701f-201">Po `EntityDataSource` formant został właśnie utworzony, Wstaw następujący kod, aby utworzyć `QueryExtender` formant, który jest powiązany z tym, że `EntityDataSource` formantu.</span><span class="sxs-lookup"><span data-stu-id="b701f-201">After the `EntityDataSource` control you just created, insert the following markup to create a `QueryExtender` control that's bound to that `EntityDataSource` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample7.aspx)]

<span data-ttu-id="b701f-202">`SearchExpression` Element określa, czy chcesz wybrać kursy o tytułach zgodnych wartości wprowadzonej w polu tekstowym.</span><span class="sxs-lookup"><span data-stu-id="b701f-202">The `SearchExpression` element specifies that you want to select courses whose titles match the value entered in the text box.</span></span> <span data-ttu-id="b701f-203">Tylko liczby znaków są wprowadzane w polu tekstowym zostaną porównane, ponieważ `SearchType` określa właściwości `StartsWith`.</span><span class="sxs-lookup"><span data-stu-id="b701f-203">Only as many characters as are entered in the text box will be compared, because the `SearchType` property specifies `StartsWith`.</span></span>

<span data-ttu-id="b701f-204">`OrderByExpression` Element określa, że w skład zestawu wyników będzie uporządkowany według tytuł kursu w dziale nazwa.</span><span class="sxs-lookup"><span data-stu-id="b701f-204">The `OrderByExpression` element specifies that the result set will be ordered by course title within department name.</span></span> <span data-ttu-id="b701f-205">Zwróć uwagę, jak określono nazwę działu: `Department.Name`.</span><span class="sxs-lookup"><span data-stu-id="b701f-205">Notice how department name is specified: `Department.Name`.</span></span> <span data-ttu-id="b701f-206">Ponieważ skojarzenie między `Course` jednostki i `Department` jednostka jest jeden do jednego, `Department` zawiera właściwość nawigacji `Department` jednostki.</span><span class="sxs-lookup"><span data-stu-id="b701f-206">Because the association between the `Course` entity and the `Department` entity is one-to-one, the `Department` navigation property contains a `Department` entity.</span></span> <span data-ttu-id="b701f-207">(Jeśli były to relacji jeden do wielu, właściwości czy zawiera kolekcję). Aby uzyskać nazwę działu, należy określić `Name` właściwość `Department` jednostki.</span><span class="sxs-lookup"><span data-stu-id="b701f-207">(If this were a one-to-many relationship, the property would contain a collection.) To get the department name, you must specify the `Name` property of the `Department` entity.</span></span>

<span data-ttu-id="b701f-208">Na koniec należy dodać `GridView` formantu, aby wyświetlić listę kursów:</span><span class="sxs-lookup"><span data-stu-id="b701f-208">Finally, add a `GridView` control to display the list of courses:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample8.aspx)]

<span data-ttu-id="b701f-209">Pierwsza kolumna jest pole szablonu, który wyświetla nazwę działu.</span><span class="sxs-lookup"><span data-stu-id="b701f-209">The first column is a template field that displays the department name.</span></span> <span data-ttu-id="b701f-210">Określa wyrażenie wiązania z danymi `Department.Name`, tak jak przedstawiono w `QueryExtender` formantu.</span><span class="sxs-lookup"><span data-stu-id="b701f-210">The databinding expression specifies `Department.Name`, just as you saw in the `QueryExtender` control.</span></span>

<span data-ttu-id="b701f-211">Uruchom strony.</span><span class="sxs-lookup"><span data-stu-id="b701f-211">Run the page.</span></span> <span data-ttu-id="b701f-212">Początkowej wyświetlania zawiera listę wszystkich kursów w kolejności według działów, a następnie według tytuł kursu.</span><span class="sxs-lookup"><span data-stu-id="b701f-212">The initial display shows a list of all courses in order by department and then by course title.</span></span>

<span data-ttu-id="b701f-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-213">[![Image11](the-entity-framework-and-aspnet-getting-started-part-3/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image29.png)</span></span>

<span data-ttu-id="b701f-214">Wprowadź "m", a następnie kliknij przycisk **wyszukiwania** aby zobaczyć wszystkie kursy o tytułach rozpoczynać się od "m" (wyszukiwanie jest nie przypadek poufne).</span><span class="sxs-lookup"><span data-stu-id="b701f-214">Enter an "m" and click **Search** to see all courses whose titles begin with "m" (the search is not case sensitive).</span></span>

<span data-ttu-id="b701f-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-215">[![Image12](the-entity-framework-and-aspnet-getting-started-part-3/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image31.png)</span></span>

## <a name="using-the-like-operator-to-filter-data"></a><span data-ttu-id="b701f-216">Filtrowanie danych za pomocą operatora "Like"</span><span class="sxs-lookup"><span data-stu-id="b701f-216">Using the "Like" Operator to Filter Data</span></span>

<span data-ttu-id="b701f-217">Podobnie jak efekt można uzyskać `QueryExtender` formantu `StartsWith`, `Contains`, i `EndsWith` wyszukiwania typów przy użyciu `Like` operatora w `EntityDataSource` formantu `Where` właściwości.</span><span class="sxs-lookup"><span data-stu-id="b701f-217">You can achieve an effect similar to the `QueryExtender` control's `StartsWith`, `Contains`, and `EndsWith` search types by using a `Like` operator in the `EntityDataSource` control's `Where` property.</span></span> <span data-ttu-id="b701f-218">W tej części samouczka zobaczysz sposób użycia `Like` operatora, aby wyszukać studenta według nazwy.</span><span class="sxs-lookup"><span data-stu-id="b701f-218">In this part of the tutorial, you'll see how to use the `Like` operator to search for a student by name.</span></span>

<span data-ttu-id="b701f-219">Otwórz *Students.aspx* w **źródła** widoku.</span><span class="sxs-lookup"><span data-stu-id="b701f-219">Open *Students.aspx* in **Source** view.</span></span> <span data-ttu-id="b701f-220">Po `GridView` kontrolować, Dodaj następujący kod:</span><span class="sxs-lookup"><span data-stu-id="b701f-220">After the `GridView` control, add the following markup:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-3/samples/sample9.aspx)]

<span data-ttu-id="b701f-221">Ten kod znaczników jest podobny do opisane wcześniej z wyjątkiem `Where` wartości właściwości.</span><span class="sxs-lookup"><span data-stu-id="b701f-221">This markup is similar to what you've seen earlier except for the `Where` property value.</span></span> <span data-ttu-id="b701f-222">Druga część `Where` wyrażenie definiuje wyszukiwania podciągu (`LIKE %FirstMidName% or LIKE %LastName%`) który wyszukuje zarówno imiona i nazwiska na dowolnym została wprowadzona w polu tekstowym.</span><span class="sxs-lookup"><span data-stu-id="b701f-222">The second part of the `Where` expression defines a substring search (`LIKE %FirstMidName% or LIKE %LastName%`) that searches both the first and last names for whatever is entered in the text box.</span></span>

<span data-ttu-id="b701f-223">Uruchom strony.</span><span class="sxs-lookup"><span data-stu-id="b701f-223">Run the page.</span></span> <span data-ttu-id="b701f-224">Początkowo dostępne dla Ciebie studentów, ponieważ wartość domyślna dla `StudentName` parametr jest "%".</span><span class="sxs-lookup"><span data-stu-id="b701f-224">Initially you see all of the students because the default value for the `StudentName` parameter is "%".</span></span>

<span data-ttu-id="b701f-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-225">[![Image13](the-entity-framework-and-aspnet-getting-started-part-3/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image33.png)</span></span>

<span data-ttu-id="b701f-226">W polu tekstowym wprowadź litery "g", a następnie kliknij przycisk **wyszukiwania**.</span><span class="sxs-lookup"><span data-stu-id="b701f-226">Enter the letter "g" in the text box and click **Search**.</span></span> <span data-ttu-id="b701f-227">Zostanie wyświetlona lista studentów, które mają "g" albo imię lub nazwisko.</span><span class="sxs-lookup"><span data-stu-id="b701f-227">You see a list of students that have a "g" in either the first or last name.</span></span>

<span data-ttu-id="b701f-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="b701f-228">[![Image14](the-entity-framework-and-aspnet-getting-started-part-3/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-3/_static/image35.png)</span></span>

<span data-ttu-id="b701f-229">Możesz już teraz wyświetlane, zaktualizowane filtrowane, uporządkowanych i grupowane dane z poszczególnych tabel.</span><span class="sxs-lookup"><span data-stu-id="b701f-229">You've now displayed, updated, filtered, ordered, and grouped data from individual tables.</span></span> <span data-ttu-id="b701f-230">W następnym samouczku będzie rozpocząć pracę z danymi powiązane (scenariusze główny szczegółowy).</span><span class="sxs-lookup"><span data-stu-id="b701f-230">In the next tutorial you'll begin to work with related data (master-detail scenarios).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b701f-231">[Poprzednie](the-entity-framework-and-aspnet-getting-started-part-2.md)
> [dalej](the-entity-framework-and-aspnet-getting-started-part-4.md)</span><span class="sxs-lookup"><span data-stu-id="b701f-231">[Previous](the-entity-framework-and-aspnet-getting-started-part-2.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-4.md)</span></span>
