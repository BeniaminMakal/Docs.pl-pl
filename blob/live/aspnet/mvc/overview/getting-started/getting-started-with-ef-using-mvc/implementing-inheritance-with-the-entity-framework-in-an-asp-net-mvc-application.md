---
uid: mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application
title: "Wdrażanie dziedziczenia z programu Entity Framework 6 w aplikacji platformy ASP.NET MVC 5 (11, 12) | Dokumentacja firmy Microsoft"
author: tdykstra
description: "Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji ASP.NET MVC 5 za pomocą Entity Framework 6 Code First i Visual Studio..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 11/07/2014
ms.topic: article
ms.assetid: 08834147-77ec-454a-bb7a-d931d2a40dab
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application
msc.type: authoredcontent
ms.openlocfilehash: e6ee3f9c055a15b13c27f94675006b9a7e804f1b
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/10/2017
---
<a name="implementing-inheritance-with-the-entity-framework-6-in-an-aspnet-mvc-5-application-11-of-12"></a><span data-ttu-id="99069-103">Wdrażanie dziedziczenia z programu Entity Framework 6 w aplikacji platformy ASP.NET MVC 5 (11, 12)</span><span class="sxs-lookup"><span data-stu-id="99069-103">Implementing Inheritance with the Entity Framework 6 in an ASP.NET MVC 5 Application (11 of 12)</span></span>
====================
<span data-ttu-id="99069-104">przez [Dykstra niestandardowy](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="99069-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="99069-105">[Pobieranie ukończone projektu](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) lub [pobierania plików PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span><span class="sxs-lookup"><span data-stu-id="99069-105">[Download Completed Project](http://code.msdn.microsoft.com/ASPNET-MVC-Application-b01a9fe8) or [Download PDF](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20Entity%20Framework%206%20Code%20First%20using%20MVC%205.pdf)</span></span>

> <span data-ttu-id="99069-106">Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji ASP.NET MVC 5 za pomocą Entity Framework 6 Code First i Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="99069-106">The Contoso University sample web application demonstrates how to create ASP.NET MVC 5 applications using the Entity Framework 6 Code First and Visual Studio 2013.</span></span> <span data-ttu-id="99069-107">Informacje o samouczek serii, zobacz [pierwszy samouczek z tej serii](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="99069-107">For information about the tutorial series, see [the first tutorial in the series](creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>


<span data-ttu-id="99069-108">Samouczek poprzedniej służy do obsługi wyjątków współbieżności.</span><span class="sxs-lookup"><span data-stu-id="99069-108">In the previous tutorial you handled concurrency exceptions.</span></span> <span data-ttu-id="99069-109">Ten samouczek przedstawia sposób wykonania dziedziczenia w modelu danych.</span><span class="sxs-lookup"><span data-stu-id="99069-109">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="99069-110">Programowanie zorientowane obiektowo można [dziedziczenia](http://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)) ułatwiające [kodu ponownemu](http://en.wikipedia.org/wiki/Code_reuse).</span><span class="sxs-lookup"><span data-stu-id="99069-110">In object-oriented programming, you can use [inheritance](http://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)) to facilitate [code reuse](http://en.wikipedia.org/wiki/Code_reuse).</span></span> <span data-ttu-id="99069-111">W tym samouczku zostanie zmieniona `Instructor` i `Student` klasy tak, że pochodzą one od `Person` podstawowa klasa, która zawiera właściwości, takie jak `LastName` które są wspólne dla uczniów lub studentów i instruktorów.</span><span class="sxs-lookup"><span data-stu-id="99069-111">In this tutorial, you'll change the `Instructor` and `Student` classes so that they derive from a `Person` base class which contains properties such as `LastName` that are common to both instructors and students.</span></span> <span data-ttu-id="99069-112">Nie dodać lub zmienić żadnych stron sieci web, ale zostanie zmieniona części kodu i te zmiany są automatycznie odzwierciedlane w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="99069-112">You won't add or change any web pages, but you'll change some of the code and those changes will be automatically reflected in the database.</span></span>

## <a name="options-for-mapping-inheritance-to-database-tables"></a><span data-ttu-id="99069-113">Opcje mapowania dziedziczenia w tabelach bazy danych</span><span class="sxs-lookup"><span data-stu-id="99069-113">Options for mapping inheritance to database tables</span></span>

<span data-ttu-id="99069-114">`Instructor` i `Student` klas w `School` model danych ma kilka właściwości, które są identyczne:</span><span class="sxs-lookup"><span data-stu-id="99069-114">The `Instructor` and `Student` classes in the `School` data model have several properties that are identical:</span></span>

![Student_and_Instructor_classes](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image1.png)

<span data-ttu-id="99069-116">Załóżmy, że chcesz wyeliminować nadmiarowy kod dla właściwości, które są udostępniane przez `Instructor` i `Student` jednostek.</span><span class="sxs-lookup"><span data-stu-id="99069-116">Suppose you want to eliminate the redundant code for the properties that are shared by the `Instructor` and `Student` entities.</span></span> <span data-ttu-id="99069-117">Lub chcesz zapisać to usługa, która może sformatować nazwy bez opiekowanie, czy nazwa pochodzi od instruktora lub studenta.</span><span class="sxs-lookup"><span data-stu-id="99069-117">Or you want to write a service that can format names without caring whether the name came from an instructor or a student.</span></span> <span data-ttu-id="99069-118">Można utworzyć `Person` podstawowa klasa, która zawiera tylko te właściwości udostępnionego, a następnie wprowadź `Instructor` i `Student` jednostek dziedziczą z tej klasy podstawowej, jak pokazano na poniższej ilustracji:</span><span class="sxs-lookup"><span data-stu-id="99069-118">You could create a `Person` base class which contains only those shared properties, then make the `Instructor` and `Student` entities inherit from that base class, as shown in the following illustration:</span></span>

![Student_and_Instructor_classes_deriving_from_Person_class](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image2.png)

<span data-ttu-id="99069-120">Istnieje kilka metod, które ta struktura dziedziczenia może być reprezentowane w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="99069-120">There are several ways this inheritance structure could be represented in the database.</span></span> <span data-ttu-id="99069-121">Może mieć `Person` tabeli, która zawiera informacje o studentów i instruktorów w jednej tabeli.</span><span class="sxs-lookup"><span data-stu-id="99069-121">You could have a `Person` table that includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="99069-122">Niektóre kolumny można zastosować tylko do instruktorów (`HireDate`), niektórych tylko dla uczniów lub studentów (`EnrollmentDate`), zarówno niektóre do (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="99069-122">Some of the columns could apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), some to both (`LastName`, `FirstName`).</span></span> <span data-ttu-id="99069-123">Zazwyczaj konieczne będzie *rozróżniacza* reprezentuje kolumny, która wskazuje typ każdego wiersza.</span><span class="sxs-lookup"><span data-stu-id="99069-123">Typically, you'd have a *discriminator* column to indicate which type each row represents.</span></span> <span data-ttu-id="99069-124">Na przykład kolumny rozróżniacza mogą mieć "Instruktora" dla szkolenia i "Uczniów" dla uczniów lub studentów.</span><span class="sxs-lookup"><span data-stu-id="99069-124">For example, the discriminator column might have "Instructor" for instructors and "Student" for students.</span></span>

![Tabela na hierarchy_example](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image3.png)

<span data-ttu-id="99069-126">Ten wzorzec generowania strukturę jednostek dziedziczenia z tabeli pojedynczej bazy danych jest nazywany *tabeli na hierarchii* dziedziczenia (TPH).</span><span class="sxs-lookup"><span data-stu-id="99069-126">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="99069-127">Alternatywą jest wyglądu struktury dziedziczenia bazę danych.</span><span class="sxs-lookup"><span data-stu-id="99069-127">An alternative is to make the database look more like the inheritance structure.</span></span> <span data-ttu-id="99069-128">Na przykład można mieć tylko pola nazwy `Person` tabeli i mieć osobne `Instructor` i `Student` tabele z polami daty.</span><span class="sxs-lookup"><span data-stu-id="99069-128">For example, you could have only the name fields in the `Person` table and have separate `Instructor` and `Student` tables with the date fields.</span></span>

![Tabela na type_inheritance](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image4.png)

<span data-ttu-id="99069-130">Ten wzorzec dokonywania tabeli bazy danych w każdej klasie jednostki jest nazywana *tabel na typ* dziedziczenia (TPT).</span><span class="sxs-lookup"><span data-stu-id="99069-130">This pattern of making a database table for each entity class is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="99069-131">Jeszcze inną możliwością jest wykonanie mapowania wszystkich typów nieabstrakcyjnej poszczególnych tabel.</span><span class="sxs-lookup"><span data-stu-id="99069-131">Yet another option is to map all non-abstract types to individual tables.</span></span> <span data-ttu-id="99069-132">Wszystkie właściwości klasy, w tym właściwości dziedziczone są mapowane na kolumny tej tabeli.</span><span class="sxs-lookup"><span data-stu-id="99069-132">All properties of a class, including inherited properties, map to columns of the corresponding table.</span></span> <span data-ttu-id="99069-133">Ten wzorzec jest nazywany dziedziczenia tabeli na konkretnych klas (TPC).</span><span class="sxs-lookup"><span data-stu-id="99069-133">This pattern is called Table-per-Concrete Class (TPC) inheritance.</span></span> <span data-ttu-id="99069-134">Jeśli zaimplementowano dziedziczenie TPC `Person`, `Student`, i `Instructor` klasy, jak pokazano wcześniej, `Student` i `Instructor` tabel będzie wyglądać nie różni się od wdrażanie dziedziczenia, niż zajmowały przed.</span><span class="sxs-lookup"><span data-stu-id="99069-134">If you implemented TPC inheritance for the `Person`, `Student`, and `Instructor` classes as shown earlier, the `Student` and `Instructor` tables would look no different after implementing inheritance than they did before.</span></span>

<span data-ttu-id="99069-135">TPC i wzorce dziedziczenia TPH zazwyczaj dostarczania lepszą wydajność programu Entity Framework niż w przypadku wzorców dziedziczenia TPT wzorce TPT może powodować sprzężenia złożonych zapytań.</span><span class="sxs-lookup"><span data-stu-id="99069-135">TPC and TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span>

<span data-ttu-id="99069-136">Ten samouczek pokazuje, jak zaimplementować dziedziczenia TPH.</span><span class="sxs-lookup"><span data-stu-id="99069-136">This tutorial demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="99069-137">TPH jest domyślny wzorzec dziedziczenia w ramach jednostki, tak aby wszystkie wystarczy utworzyć `Person` klasy, zmień `Instructor` i `Student` pochodzi od klasy `Person`, Dodaj nową klasę do `DbContext`i Utwórz Migracja.</span><span class="sxs-lookup"><span data-stu-id="99069-137">TPH is the default inheritance pattern in the Entity Framework, so all you have to do is create a `Person` class, change the `Instructor` and `Student` classes to derive from `Person`, add the new class to the `DbContext`, and create a migration.</span></span> <span data-ttu-id="99069-138">(Uzyskać informacji o sposobie wykonania innych wzorcach dziedziczenia, zobacz [mapowania dziedziczenia dla tabeli (TPT)](https://msdn.microsoft.com/en-us/data/jj591617#2.5) i [mapowania dziedziczenia klasy tabeli na konkretnych (TPC)](https://msdn.microsoft.com/en-us/data/jj591617#2.6) w witrynie MSDN Dokumentacja Framework jednostki.)</span><span class="sxs-lookup"><span data-stu-id="99069-138">(For information about how to implement the other inheritance patterns, see [Mapping the Table-Per-Type (TPT) Inheritance](https://msdn.microsoft.com/en-us/data/jj591617#2.5) and [Mapping the Table-Per-Concrete Class (TPC) Inheritance](https://msdn.microsoft.com/en-us/data/jj591617#2.6) in the MSDN Entity Framework documentation.)</span></span>

## <a name="create-the-person-class"></a><span data-ttu-id="99069-139">Utwórz klasę osoby</span><span class="sxs-lookup"><span data-stu-id="99069-139">Create the Person class</span></span>

<span data-ttu-id="99069-140">W *modele* folderu, Utwórz *Person.cs* i Zastąp kod szablonu z następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="99069-140">In the *Models* folder, create *Person.cs* and replace the template code with the following code:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample1.cs)]

## <a name="make-student-and-instructor-classes-inherit-from-person"></a><span data-ttu-id="99069-141">Utworzyć klasy dla użytkowników domowych i instruktora dziedziczyć osoby</span><span class="sxs-lookup"><span data-stu-id="99069-141">Make Student and Instructor classes inherit from Person</span></span>

<span data-ttu-id="99069-142">W *Instructor.cs*, pochodzi `Instructor` klasę z `Person` klasy i usunąć pola klucza i nazwę.</span><span class="sxs-lookup"><span data-stu-id="99069-142">In *Instructor.cs*, derive the `Instructor` class from the `Person` class and remove the key and name fields.</span></span> <span data-ttu-id="99069-143">Ten kod będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="99069-143">The code will look like the following example:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample2.cs)]

<span data-ttu-id="99069-144">Podobne zmiany do *Student.cs*.</span><span class="sxs-lookup"><span data-stu-id="99069-144">Make similar changes to *Student.cs*.</span></span> <span data-ttu-id="99069-145">`Student` Klasa będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="99069-145">The `Student` class will look like the following example:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample3.cs)]

## <a name="add-the-person-entity-type-to-the-model"></a><span data-ttu-id="99069-146">Dodanie osoby typ jednostki do modelu</span><span class="sxs-lookup"><span data-stu-id="99069-146">Add the Person Entity Type to the Model</span></span>

<span data-ttu-id="99069-147">W *SchoolContext.cs*, Dodaj `DbSet` właściwość `Person` typ jednostki:</span><span class="sxs-lookup"><span data-stu-id="99069-147">In *SchoolContext.cs*, add a `DbSet` property for the `Person` entity type:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample4.cs)]

<span data-ttu-id="99069-148">To wszystko, który programu Entity Framework wymaga, aby skonfigurować tabelę dla hierarchii dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="99069-148">This is all that the Entity Framework needs in order to configure table-per-hierarchy inheritance.</span></span> <span data-ttu-id="99069-149">Jak można zauważyć, gdy baza danych jest aktualizowana, będzie mieć `Person` tabeli zamiast `Student` i `Instructor` tabel.</span><span class="sxs-lookup"><span data-stu-id="99069-149">As you'll see, when the database is updated, it will have a `Person` table in place of the `Student` and `Instructor` tables.</span></span>

## <a name="create-and-update-a-migrations-file"></a><span data-ttu-id="99069-150">Tworzenie i aktualizowanie plików migracji</span><span class="sxs-lookup"><span data-stu-id="99069-150">Create and Update a Migrations File</span></span>

<span data-ttu-id="99069-151">W konsoli Menedżera pakietów (PMC) wprowadź następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="99069-151">In the Package Manager Console (PMC), enter the following command:</span></span>

`Add-Migration Inheritance`

<span data-ttu-id="99069-152">Uruchom `Update-Database` w kryterium.</span><span class="sxs-lookup"><span data-stu-id="99069-152">Run the `Update-Database` command in the PMC.</span></span> <span data-ttu-id="99069-153">Polecenie będzie działać na tym etapie, ponieważ będziemy mieć istniejące dane migracji nie może ustalić sposób obsługi.</span><span class="sxs-lookup"><span data-stu-id="99069-153">The command will fail at this point because we have existing data that migrations doesn't know how to handle.</span></span> <span data-ttu-id="99069-154">Zostanie wyświetlony komunikat o błędzie podobny do następującego:</span><span class="sxs-lookup"><span data-stu-id="99069-154">You get an error message like the following one:</span></span>

> <span data-ttu-id="99069-155">*Nie można usunąć obiektu "dbo. Instruktora ", ponieważ odwołuje się do niego ograniczenie FOREIGN KEY.*</span><span class="sxs-lookup"><span data-stu-id="99069-155">*Could not drop object 'dbo.Instructor' because it is referenced by a FOREIGN KEY constraint.*</span></span>


<span data-ttu-id="99069-156">Otwórz *migracje\&lt; sygnatura czasowa&gt;\_Inheritance.cs* i Zastąp `Up` metodę z następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="99069-156">Open *Migrations\&lt;timestamp&gt;\_Inheritance.cs* and replace the `Up` method with the following code:</span></span>

[!code-csharp[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample5.cs)]

<span data-ttu-id="99069-157">Ten kod zajmuje się następujące zadania aktualizacji bazy danych:</span><span class="sxs-lookup"><span data-stu-id="99069-157">This code takes care of the following database update tasks:</span></span>

- <span data-ttu-id="99069-158">Usuwa ograniczeń klucza obcego i indeksów, które wskazują tabeli uczniów.</span><span class="sxs-lookup"><span data-stu-id="99069-158">Removes foreign key constraints and indexes that point to the Student table.</span></span>
- <span data-ttu-id="99069-159">Zmienia nazwę tabeli instruktora osoby i wprowadza zmiany w przypadku przechowywania danych dla użytkowników domowych:</span><span class="sxs-lookup"><span data-stu-id="99069-159">Renames the Instructor table as Person and makes changes needed for it to store Student data:</span></span>

    - <span data-ttu-id="99069-160">Dodaje EnrollmentDate wartości null dla uczniów lub studentów.</span><span class="sxs-lookup"><span data-stu-id="99069-160">Adds nullable EnrollmentDate for students.</span></span>
    - <span data-ttu-id="99069-161">Dodaje kolumnę dyskryminator wskazująca, czy wiersz jest dla uczniów lub instruktora.</span><span class="sxs-lookup"><span data-stu-id="99069-161">Adds Discriminator column to indicate whether a row is for a student or an instructor.</span></span>
    - <span data-ttu-id="99069-162">Sprawia, że DataZatrudnienia nullable ponieważ wierszy uczniów nie będziesz mieć dat.</span><span class="sxs-lookup"><span data-stu-id="99069-162">Makes HireDate nullable since student rows won't have hire dates.</span></span>
    - <span data-ttu-id="99069-163">Dodaje tymczasowego pola, które będą służyć do aktualizowania kluczy obcych, które wskazują studentów.</span><span class="sxs-lookup"><span data-stu-id="99069-163">Adds a temporary field that will be used to update foreign keys that point to students.</span></span> <span data-ttu-id="99069-164">Podczas kopiowania studentów w tabeli osób otrzymują nowe wartości klucza podstawowego.</span><span class="sxs-lookup"><span data-stu-id="99069-164">When you copy students into the Person table they'll get new primary key values.</span></span>
- <span data-ttu-id="99069-165">Kopiuje dane z tabeli uczniów do tabeli osoby.</span><span class="sxs-lookup"><span data-stu-id="99069-165">Copies data from the Student table into the Person table.</span></span> <span data-ttu-id="99069-166">Powoduje to, że można zostaną przypisane nowe wartości klucza podstawowego.</span><span class="sxs-lookup"><span data-stu-id="99069-166">This causes students to get assigned new primary key values.</span></span>
- <span data-ttu-id="99069-167">Rozwiązuje wartości kluczy obcych, które wskazują studentów.</span><span class="sxs-lookup"><span data-stu-id="99069-167">Fixes foreign key values that point to students.</span></span>
- <span data-ttu-id="99069-168">Ponownie tworzy ograniczeń klucza obcego i indeksów, teraz wskazaniem tabeli osób.</span><span class="sxs-lookup"><span data-stu-id="99069-168">Re-creates foreign key constraints and indexes, now pointing them to the Person table.</span></span>

<span data-ttu-id="99069-169">(W przypadku identyfikatora GUID zamiast liczby całkowitej jako typu klucza podstawowego, nie trzeba zmieniać wartości klucza podstawowego dla użytkowników domowych i niektóre z tych kroków można została pominięta.)</span><span class="sxs-lookup"><span data-stu-id="99069-169">(If you had used GUID instead of integer as the primary key type, the student primary key values wouldn't have to change, and several of these steps could have been omitted.)</span></span>

<span data-ttu-id="99069-170">Uruchom `update-database` polecenie ponownie.</span><span class="sxs-lookup"><span data-stu-id="99069-170">Run the `update-database` command again.</span></span>

<span data-ttu-id="99069-171">(W systemie produkcji można będzie wprowadzić odpowiednie zmiany do metody w dół na wypadek, gdyby kiedykolwiek musiał używać, aby wrócić do poprzedniej wersji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="99069-171">(In a production system you would make corresponding changes to the Down method in case you ever had to use that to go back to the previous database version.</span></span> <span data-ttu-id="99069-172">W tym samouczku użytkownik nie będzie używany metody w dół.)</span><span class="sxs-lookup"><span data-stu-id="99069-172">For this tutorial you won't be using the Down method.)</span></span>

> [!NOTE]
> <span data-ttu-id="99069-173">Istnieje możliwość pobrania inne błędy podczas migracji danych i wprowadzania zmian schematu.</span><span class="sxs-lookup"><span data-stu-id="99069-173">It's possible to get other errors when migrating data and making schema changes.</span></span> <span data-ttu-id="99069-174">Jeśli występują błędy migracji nie można rozwiązać, zmieniając w ciągu połączenia można kontynuować samouczka *Web.config* przez usunięcie bazy danych lub plik.</span><span class="sxs-lookup"><span data-stu-id="99069-174">If you get migration errors you can't resolve, you can continue with the tutorial by changing the connection string in the *Web.config* file or by deleting the database.</span></span> <span data-ttu-id="99069-175">Najprostsza metoda jest można zmienić nazwy bazy danych w *Web.config* pliku.</span><span class="sxs-lookup"><span data-stu-id="99069-175">The simplest approach is to rename the database in the *Web.config* file.</span></span> <span data-ttu-id="99069-176">Na przykład zmienić nazwę bazy danych na ContosoUniversity2, jak pokazano w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="99069-176">For example, change the database name to ContosoUniversity2 as shown in the following example:</span></span>
> 
> [!code-xml[Main](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/samples/sample6.xml?highlight=2)]
> 
> <span data-ttu-id="99069-177">Z nową bazę danych, nie ma żadnych danych, aby przeprowadzić migrację oraz `update-database` polecenie jest znacznie bardziej prawdopodobne zakończyć bez błędów.</span><span class="sxs-lookup"><span data-stu-id="99069-177">With a new database, there is no data to migrate, and the `update-database` command is much more likely to complete without errors.</span></span> <span data-ttu-id="99069-178">Aby uzyskać instrukcje dotyczące sposobu usuwania bazy danych, zobacz [jak usunąć bazę danych z programu Visual Studio 2012](http://romiller.com/2013/05/17/how-to-drop-a-database-from-visual-studio-2012/).</span><span class="sxs-lookup"><span data-stu-id="99069-178">For instructions on how to delete the database, see [How to Drop a Database from Visual Studio 2012](http://romiller.com/2013/05/17/how-to-drop-a-database-from-visual-studio-2012/).</span></span> <span data-ttu-id="99069-179">W przypadku zastosowania tego podejścia aby kontynuować samouczek pominąć krok wdrożenia na końcu tego samouczka lub wdrażania nowej lokacji i bazy danych.</span><span class="sxs-lookup"><span data-stu-id="99069-179">If you take this approach in order to continue with the tutorial, skip the deployment step at the end of this tutorial or deploy to a new site and database.</span></span> <span data-ttu-id="99069-180">Po zainstalowaniu aktualizacji do tej samej lokacji, które już zostały wdrażana do już EF otrzyma ten sam błąd podczas automatycznego uruchamiania migracji.</span><span class="sxs-lookup"><span data-stu-id="99069-180">If you deploy an update to the same site you've been deploying to already, EF will get the same error there when it runs migrations automatically.</span></span> <span data-ttu-id="99069-181">Jeśli chcesz rozwiązać problem migracje najlepsze zasobu jest jednym z fora programu Entity Framework lub StackOverflow.com.</span><span class="sxs-lookup"><span data-stu-id="99069-181">If you want to troubleshoot a migrations error, the best resource is one of the Entity Framework forums or StackOverflow.com.</span></span>


## <a name="testing"></a><span data-ttu-id="99069-182">Testowanie</span><span class="sxs-lookup"><span data-stu-id="99069-182">Testing</span></span>

<span data-ttu-id="99069-183">Uruchom witrynę i spróbuj różnych stron.</span><span class="sxs-lookup"><span data-stu-id="99069-183">Run the site and try various pages.</span></span> <span data-ttu-id="99069-184">Wszystko, co działa tak samo, tak jak poprzednio.</span><span class="sxs-lookup"><span data-stu-id="99069-184">Everything works the same as it did before.</span></span>

<span data-ttu-id="99069-185">W **Eksploratora serwera** rozwiń **Connections\SchoolContext danych** , a następnie **tabel**, i zobaczysz, że **uczniowie** i **Instruktora** tabele zostały zastąpione przez **osoby** tabeli.</span><span class="sxs-lookup"><span data-stu-id="99069-185">In **Server Explorer,** expand **Data Connections\SchoolContext** and then **Tables**, and you see that the **Student** and **Instructor** tables have been replaced by a **Person** table.</span></span> <span data-ttu-id="99069-186">Rozwiń węzeł **osoby** tabeli i zawiera wszystkie kolumny, które wcześniej w **uczniowie** i **instruktora** tabel.</span><span class="sxs-lookup"><span data-stu-id="99069-186">Expand the **Person** table and you see that it has all of the columns that used to be in the **Student** and **Instructor** tables.</span></span>

![Server_Explorer_showing_Person_table](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image5.png)

<span data-ttu-id="99069-188">Kliknij prawym przyciskiem myszy tabeli osób, a następnie kliknij przycisk **Pokaż dane tabeli** wyświetlić kolumny rozróżniacza.</span><span class="sxs-lookup"><span data-stu-id="99069-188">Right-click the Person table, and then click **Show Table Data** to see the discriminator column.</span></span>

![](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image6.png)

<span data-ttu-id="99069-189">Na poniższym diagramie przedstawiono struktury nowej bazy danych służbowych:</span><span class="sxs-lookup"><span data-stu-id="99069-189">The following diagram illustrates the structure of the new School database:</span></span>

![School_database_diagram](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image7.png)

## <a name="deploy-to-azure"></a><span data-ttu-id="99069-191">Wdrażanie na platformie Azure</span><span class="sxs-lookup"><span data-stu-id="99069-191">Deploy to Azure</span></span>

<span data-ttu-id="99069-192">W tej sekcji wymaga zakończył opcjonalny **wdrażania aplikacji na platformie Azure** sekcji [część 3, sortowanie, filtrowanie i stronicowania](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md) tego samouczka serii.</span><span class="sxs-lookup"><span data-stu-id="99069-192">This section requires you to have completed the optional **Deploying the app to Azure** section in [Part 3, Sorting, Filtering, and Paging](sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md) of this tutorial series.</span></span> <span data-ttu-id="99069-193">Jeśli były migracje błędów, które można rozwiązać przez usunięcie bazy danych w projekcie lokalnego, Pomiń ten krok; lub Utwórz nową witrynę i bazy danych, a następnie wdrożyć do nowego środowiska.</span><span class="sxs-lookup"><span data-stu-id="99069-193">If you had migrations errors that you resolved by deleting the database in your local project, skip this step; or create a new site and database, and deploy to the new environment.</span></span>

1. <span data-ttu-id="99069-194">W programie Visual Studio, kliknij prawym przyciskiem myszy projekt w **Eksploratora rozwiązań** i wybierz **publikowania** z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="99069-194">In Visual Studio, right-click the project in **Solution Explorer** and select **Publish** from the context menu.</span></span>  
  
    ![Opublikuj w menu kontekstowego projektu](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image8.png)
2. <span data-ttu-id="99069-196">Kliknij przycisk **publikowania**.</span><span class="sxs-lookup"><span data-stu-id="99069-196">Click **Publish**.</span></span>  
  
    ![Publikowanie](implementing-inheritance-with-the-entity-framework-in-an-asp-net-mvc-application/_static/image9.png)  
  
 <span data-ttu-id="99069-198">Aplikacja sieci Web zostanie otwarty w domyślnej przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="99069-198">The Web app will open in your default browser.</span></span>
3. <span data-ttu-id="99069-199">Testowanie aplikacji w celu weryfikacji działa.</span><span class="sxs-lookup"><span data-stu-id="99069-199">Test the application to verify it's working.</span></span>

    <span data-ttu-id="99069-200">Przy pierwszym uruchomieniu strony uzyskuje dostęp do bazy danych, Entity Framework uruchamia wszystkie migracja `Up` metody wymagane do bazy danych na bieżąco z bieżącym modelem danych.</span><span class="sxs-lookup"><span data-stu-id="99069-200">The first time you run a page that accesses the database, the Entity Framework runs all of the migrations `Up` methods required to bring the database up to date with the current data model.</span></span>

## <a name="summary"></a><span data-ttu-id="99069-201">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="99069-201">Summary</span></span>

<span data-ttu-id="99069-202">Zostały zaimplementowane tabeli na hierarchii dziedziczenia dla `Person`, `Student`, i `Instructor` klasy.</span><span class="sxs-lookup"><span data-stu-id="99069-202">You've implemented table-per-hierarchy inheritance for the `Person`, `Student`, and `Instructor` classes.</span></span> <span data-ttu-id="99069-203">Aby uzyskać więcej informacji dotyczących tego i innych konstrukcji dziedziczenia, zobacz [wzorzec dziedziczenia TPT](https://msdn.microsoft.com/en-us/data/jj618293) i [wzorzec dziedziczenia TPH](https://msdn.microsoft.com/en-us/data/jj618292) w witrynie MSDN.</span><span class="sxs-lookup"><span data-stu-id="99069-203">For more information about this and other inheritance structures, see [TPT Inheritance Pattern](https://msdn.microsoft.com/en-us/data/jj618293) and [TPH Inheritance Pattern](https://msdn.microsoft.com/en-us/data/jj618292) on MSDN.</span></span> <span data-ttu-id="99069-204">W następnym samouczku zobaczysz sposób obsługi różnych stosunkowo zaawansowanych scenariuszy programu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="99069-204">In the next tutorial you'll see how to handle a variety of relatively advanced Entity Framework scenarios.</span></span>

<span data-ttu-id="99069-205">Linki do innych zasobów programu Entity Framework, można znaleźć w [dostępu do danych programu ASP.NET - zalecane zasobów](../../../../whitepapers/aspnet-data-access-content-map.md).</span><span class="sxs-lookup"><span data-stu-id="99069-205">Links to other Entity Framework resources can be found in the [ASP.NET Data Access - Recommended Resources](../../../../whitepapers/aspnet-data-access-content-map.md).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="99069-206">[Poprzednie](handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application.md)
[dalej](advanced-entity-framework-scenarios-for-an-mvc-web-application.md)</span><span class="sxs-lookup"><span data-stu-id="99069-206">[Previous](handling-concurrency-with-the-entity-framework-in-an-asp-net-mvc-application.md)
[Next](advanced-entity-framework-scenarios-for-an-mvc-web-application.md)</span></span>
