---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/membership-and-administration
title: "Członkostwo i administrowanie | Dokumentacja firmy Microsoft"
author: Erikre
description: "Ten samouczek serii uczy podstawowe informacje dotyczące tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu platformy ASP.NET 4.5 i programu Microsoft Visual Studio Express 2013 dla możemy..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 09/08/2014
ms.topic: article
ms.assetid: 732a2316-e49f-4f72-becd-0cd72f14457e
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/membership-and-administration
msc.type: authoredcontent
ms.openlocfilehash: a10dbfe1ca49baee1604aac8dd9a1f93ccfcb7f9
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/10/2017
---
<a name="membership-and-administration"></a><span data-ttu-id="ae8b6-103">Członkostwo i Administracja</span><span class="sxs-lookup"><span data-stu-id="ae8b6-103">Membership and Administration</span></span>
====================
<span data-ttu-id="ae8b6-104">Przez [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="ae8b6-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="ae8b6-105">[Pobierz Wingtip Toys przykładowy projekt (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) lub [Pobierz E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="ae8b6-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="ae8b6-106">Ten samouczek serii nauczyć podstawowe informacje dotyczące tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu platformy ASP.NET 4.5 i programu Microsoft Visual Studio Express 2013 for Web.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="ae8b6-107">Visual Studio 2013 [projektu z kodu źródłowego C#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) jest dostępna towarzyszące tej serii samouczka.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="ae8b6-108">Ten samouczek pokazuje, jak zaktualizować Wingtip Toys przykładowej aplikacji, aby dodać niestandardową rolę i korzystania z tożsamości ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-108">This tutorial shows you how to update the Wingtip Toys sample application to add a custom role and use ASP.NET Identity.</span></span> <span data-ttu-id="ae8b6-109">On również przedstawiono sposób wykonania strony Administracja, z którego użytkownik z niestandardowej roli zabezpieczeń można dodawać i usuwać produkty z witryny sieci Web.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-109">It also shows you how to implement an administration page from which the user with a custom role can add and remove products from the website.</span></span>

<span data-ttu-id="ae8b6-110">[ASP.NET Identity](../../../../identity/overview/getting-started/introduction-to-aspnet-identity.md) systemu członkostwa, używany do tworzenia aplikacji sieci web ASP.NET i jest dostępny w programie ASP.NET 4.5.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-110">[ASP.NET Identity](../../../../identity/overview/getting-started/introduction-to-aspnet-identity.md) is the membership system used to build ASP.NET web application and is available in ASP.NET 4.5.</span></span> <span data-ttu-id="ae8b6-111">ASP.NET Identity jest używany w szablon projektu Visual Studio 2013 Web Forms, jak również szablonów dla [ASP.NET MVC](../../../../mvc/index.md), [ASP.NET Web API](../../../../web-api/index.md), i [ASP.NET jednej strony aplikacji](../../../../single-page-application/index.md).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-111">ASP.NET Identity is used in the Visual Studio 2013 Web Forms project template, as well as the templates for [ASP.NET MVC](../../../../mvc/index.md), [ASP.NET Web API](../../../../web-api/index.md), and [ASP.NET Single Page Application](../../../../single-page-application/index.md).</span></span> <span data-ttu-id="ae8b6-112">Można również specjalnie instalacji systemu ASP.NET Identity przy użyciu narzędzia NuGet po uruchomieniu z pustą aplikację sieci Web.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-112">You can also specifically install the ASP.NET Identity system using NuGet when you start with an empty Web application.</span></span> <span data-ttu-id="ae8b6-113">Jednak w tym samouczku użyto **formularzy sieci Web**projecttemplate, w tym systemie tożsamości ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-113">However, in this tutorial series you use the **Web Forms**projecttemplate, which includes the ASP.NET Identity system.</span></span> <span data-ttu-id="ae8b6-114">ASP.NET Identity ułatwia integrowanie danych profilu dla użytkownika z danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-114">ASP.NET Identity makes it easy to integrate user-specific profile data with application data.</span></span> <span data-ttu-id="ae8b6-115">ASP.NET Identity można też, wybierz model trwałości profilów użytkowników w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-115">Also, ASP.NET Identity allows you to choose the persistence model for user profiles in your application.</span></span> <span data-ttu-id="ae8b6-116">Dane można przechowywać w bazie danych programu SQL Server lub innym magazynie danych, w tym *NoSQL* magazynów danych, takich jak Windows Azure magazynu tabel.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-116">You can store the data in a SQL Server database or another data store, including *NoSQL* data stores such as Windows Azure Storage Tables.</span></span>

<span data-ttu-id="ae8b6-117">W tym samouczku opiera się na poprzedniej Samouczek zatytułowany "Wyewidencjonowania i płatności z PayPal" serii samouczek Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-117">This tutorial builds on the previous tutorial titled "Checkout and Payment with PayPal" in the Wingtip Toys tutorial series.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="ae8b6-118">Zawartość:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-118">What you'll learn:</span></span>

- <span data-ttu-id="ae8b6-119">Jak dodać niestandardowej roli zabezpieczeń i użytkownika do aplikacji za pomocą kodu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-119">How to use code to add a custom role and a user to the application.</span></span>
- <span data-ttu-id="ae8b6-120">Jak ograniczyć dostęp do folderu administracji i strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-120">How to restrict access to the administration folder and page.</span></span>
- <span data-ttu-id="ae8b6-121">Jak zapewnić nawigacji dla użytkownika, który należy do roli niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-121">How to provide navigation for the user that belongs to the custom role.</span></span>
- <span data-ttu-id="ae8b6-122">Jak używać wiązania modelu do wypełnienia [DropDownList](https://msdn.microsoft.com/library/system.web.ui.webcontrols.dropdownlist(v=vs.110).aspx) kontrolki z kategorii produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-122">How to use model binding to populate a [DropDownList](https://msdn.microsoft.com/library/system.web.ui.webcontrols.dropdownlist(v=vs.110).aspx) control with product categories.</span></span>
- <span data-ttu-id="ae8b6-123">Jak można przekazać pliku do aplikacji sieci web przy użyciu [przekazywaniem plików](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload(v=vs.110).aspx) formantu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-123">How to upload a file to the web application using the [FileUpload](https://msdn.microsoft.com/library/system.web.ui.webcontrols.fileupload(v=vs.110).aspx) control.</span></span>
- <span data-ttu-id="ae8b6-124">Jak używać formanty walidacji do implementacji sprawdzania poprawności danych wejściowych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-124">How to use validation controls to implement input validation.</span></span>
- <span data-ttu-id="ae8b6-125">Jak dodać i usunąć produkty z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-125">How to add and remove products from the application.</span></span>

## <a name="these-features-are-included-in-the-tutorial"></a><span data-ttu-id="ae8b6-126">Te funkcje dostępne w samouczku:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-126">These features are included in the tutorial:</span></span>

- <span data-ttu-id="ae8b6-127">Tożsamość platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ae8b6-127">ASP.NET Identity</span></span>
- <span data-ttu-id="ae8b6-128">Konfiguracja i autoryzacji</span><span class="sxs-lookup"><span data-stu-id="ae8b6-128">Configuration and Authorization</span></span>
- <span data-ttu-id="ae8b6-129">Wiązanie modelu</span><span class="sxs-lookup"><span data-stu-id="ae8b6-129">Model Binding</span></span>
- <span data-ttu-id="ae8b6-130">Sprawdzania poprawności dyskretnego kodu</span><span class="sxs-lookup"><span data-stu-id="ae8b6-130">Unobtrusive Validation</span></span>

<span data-ttu-id="ae8b6-131">Formularze sieci Web programu ASP.NET zapewnia funkcje członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-131">ASP.NET Web Forms provides membership capabilities.</span></span> <span data-ttu-id="ae8b6-132">Przy użyciu domyślnego szablonu, masz funkcje wbudowane członkostwa, pomocne od razu po uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-132">By using the default template, you have built-in membership functionality that you can immediately use when the application runs.</span></span> <span data-ttu-id="ae8b6-133">W tym samouczku przedstawiono sposób korzystania z tożsamości ASP.NET do dodawania niestandardowej roli zabezpieczeń i przypisać do tej roli użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-133">This tutorial shows you how to use ASP.NET Identity to add a custom role and assign a user to that role.</span></span> <span data-ttu-id="ae8b6-134">Dowiesz się jak ograniczyć dostęp do folderu administracji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-134">You will learn how to restrict access to the administration folder.</span></span> <span data-ttu-id="ae8b6-135">Dodasz stronę do folderu administracji, który pozwala użytkownikowi z niestandardowej roli zabezpieczeń do dodawania i usuwania produktów i Podgląd produktu po został dodany.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-135">You'll add a page to the administration folder that allows a user with a custom role to add and remove products, and to preview a product after it has been added.</span></span>

## <a name="adding-a-custom-role"></a><span data-ttu-id="ae8b6-136">Dodawanie niestandardowej roli zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="ae8b6-136">Adding a Custom Role</span></span>

<span data-ttu-id="ae8b6-137">Przy użyciu tożsamości platformy ASP.NET, można dodawać niestandardowej roli zabezpieczeń i przypisać do tej roli przy użyciu kodu użytkownika.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-137">Using ASP.NET Identity, you can add a custom role and assign a user to that role using code.</span></span>

1. <span data-ttu-id="ae8b6-138">W **Eksploratora rozwiązań**, kliknij prawym przyciskiem myszy *logiki* folderu i Utwórz nową klasę.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-138">In **Solution Explorer**, right-click on the *Logic* folder and create a new class.</span></span>
2. <span data-ttu-id="ae8b6-139">Nazwa nowej klasy *RoleActions.cs*.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-139">Name the new class *RoleActions.cs*.</span></span>
3. <span data-ttu-id="ae8b6-140">Zmodyfikuj kod, aby był on wyświetlany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-140">Modify the code so that it appears as follows:</span></span>  

    [!code-csharp[Main](membership-and-administration/samples/sample1.cs?highlight=8)]
4. <span data-ttu-id="ae8b6-141">W **Eksploratora rozwiązań**, otwórz *Global.asax.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-141">In **Solution Explorer**, open the *Global.asax.cs* file.</span></span>
5. <span data-ttu-id="ae8b6-142">Modyfikowanie *Global.asax.cs* pliku przez dodanie kodu wyróżnione kolorem żółtym, aby był on wyświetlany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-142">Modify the *Global.asax.cs* file by adding the code highlighted in yellow so that it appears as follows:</span></span>  

    [!code-csharp[Main](membership-and-administration/samples/sample2.cs?highlight=11,26-28)]
6. <span data-ttu-id="ae8b6-143">Zwróć uwagę, że `AddUserAndRole` jest podkreślone na czerwono.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-143">Notice that `AddUserAndRole` is underlined in red.</span></span> <span data-ttu-id="ae8b6-144">Kliknij dwukrotnie AddUserAndRole kodu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-144">Double-click the AddUserAndRole code.</span></span>  
 <span data-ttu-id="ae8b6-145">Litery "A" na początku metody wyróżnione zostanie podkreślone.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-145">The letter "A" at the beginning of the highlighted method will be underlined.</span></span>
7. <span data-ttu-id="ae8b6-146">Umieść kursor nad litery "A", a następnie kliknij przycisk interfejsu użytkownika, który służy do generowania szkieletu metody dla `AddUserAndRole` metody.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-146">Hover over the letter "A" and click the UI that allows you to generate a method stub for the `AddUserAndRole` method.</span></span> 

    ![Członkostwo i Advministration - wygenerować klasy zastępczej — metoda](membership-and-administration/_static/image1.png)
8. <span data-ttu-id="ae8b6-148">Kliknij opcję o nazwie:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-148">Click the option titled:</span></span>  
    `Generate method stub for "AddUserAndRole" in "WingtipToys.Logic.RoleActions"`
9. <span data-ttu-id="ae8b6-149">Otwórz *RoleActions.cs* plik z *logiki* folderu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-149">Open the *RoleActions.cs* file from the *Logic* folder.</span></span>  
 <span data-ttu-id="ae8b6-150">`AddUserAndRole` Metody został dodany do pliku klasy.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-150">The `AddUserAndRole` method has been added to the class file.</span></span>
10. <span data-ttu-id="ae8b6-151">Modyfikowanie *RoleActions.cs* pliku przez usunięcie `NotImplementedeException` i dodawanie kodu wyróżnione kolorem żółtym, aby był on wyświetlany w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-151">Modify the *RoleActions.cs* file by removing the `NotImplementedeException` and adding the code highlighted in yellow, so that it appears as follows:</span></span>  

    [!code-csharp[Main](membership-and-administration/samples/sample3.cs?highlight=5-7,15-51)]

<span data-ttu-id="ae8b6-152">Powyższy kod ustanawia najpierw kontekst bazy danych dla bazy danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-152">The above code first establishes a database context for the membership database.</span></span> <span data-ttu-id="ae8b6-153">Bazy danych członkostwa także jest przechowywany jako *.mdf* w pliku *aplikacji\_danych* folderu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-153">The membership database is also stored as an *.mdf* file in the *App\_Data* folder.</span></span> <span data-ttu-id="ae8b6-154">Będzie można wyświetlić tej bazy danych, gdy pierwszy użytkownik zalogował się do tej aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-154">You will be able to view this database once the first user has signed in to this web application.</span></span> 

> [!NOTE] 
> 
> <span data-ttu-id="ae8b6-155">Jeśli chcesz przechowywać dane członkostwa wraz z danymi produktu, można rozważyć korzystającej z tego samego **DbContext** umożliwia przechowywanie danych produktu w powyższym kodzie.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-155">If you wish to store the membership data along with the product data, you can consider using the same **DbContext** that you used to store the product data in the above code.</span></span>


 <span data-ttu-id="ae8b6-156">*Wewnętrzny* — słowo kluczowe jest modyfikator dostępu dla typów (takich jak klasy) i elementy członkowskie typu (np. metody lub właściwości).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-156">The *internal* keyword is an access modifier for types (such as classes) and type members (such as methods or properties).</span></span> <span data-ttu-id="ae8b6-157">Wewnętrzne typy i elementy członkowskie są dostępne tylko w obrębie plików znajdujących się w tym samym zestawie *(.dll* pliku).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-157">Internal types or members are accessible only within files contained in the same assembly *(.dll* file).</span></span> <span data-ttu-id="ae8b6-158">Podczas budowania aplikacji, plik zestawu *(.dll*) jest tworzony zawiera kod, który jest wykonywany po uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-158">When you build your application, an assembly file *(.dll*) is created that contains the code that is executed when you run your application.</span></span> 

<span data-ttu-id="ae8b6-159">A `RoleStore` obiektu, który umożliwia zarządzanie roli, jest tworzony w zależności od kontekstu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-159">A `RoleStore` object, which provides role management, is created based on the database context.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ae8b6-160">Zwróć uwagę, że w przypadku `RoleStore` obiekt jest tworzony używa rodzajowego `IdentityRole` typu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-160">Notice that when the `RoleStore` object is created it uses a Generic `IdentityRole` type.</span></span> <span data-ttu-id="ae8b6-161">Oznacza to, że `RoleStore` jest dozwolona tylko w celu uwzględnienia `IdentityRole` obiektów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-161">This means that the `RoleStore` is only allowed to contain `IdentityRole` objects.</span></span> <span data-ttu-id="ae8b6-162">Również przy użyciu ogólne, zasoby pamięci są obsługiwane lepiej.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-162">Also by using Generics, resources in memory are handled better.</span></span>


<span data-ttu-id="ae8b6-163">Następnie `RoleManager` obiektów, zostanie utworzony na podstawie `RoleStore` obiektu, który został właśnie utworzony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-163">Next, the `RoleManager` object, is created based on the `RoleStore` object that you just created.</span></span> <span data-ttu-id="ae8b6-164">`RoleManager` obiekt ujawnia powiązany z rolą interfejs API, który może służyć do automatycznie zapisuje zmiany `RoleStore`.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-164">the `RoleManager` object exposes role related API which can be used to automatically save changes to the `RoleStore`.</span></span> <span data-ttu-id="ae8b6-165">`RoleManager` Jest dozwolona tylko w celu uwzględnienia `IdentityRole` obiektów, ponieważ w kodzie użyto `<IdentityRole>` typu ogólnego.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-165">The `RoleManager` is only allowed to contain `IdentityRole` objects because the code uses the `<IdentityRole>` Generic type.</span></span>

<span data-ttu-id="ae8b6-166">Należy wywołać `RoleExists` metodę, aby określić, czy rola "canEdit" znajduje się w bazie danych członkostwa.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-166">You call the `RoleExists` method to determine if the "canEdit" role is present in the membership database.</span></span> <span data-ttu-id="ae8b6-167">Jeśli nie, należy utworzyć rolę.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-167">If it is not, you create the role.</span></span>

<span data-ttu-id="ae8b6-168">Tworzenie `UserManager` obiektu wydaje się być bardziej skomplikowane niż `RoleManager` kontrolować, jednak są prawie takie same.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-168">Creating the `UserManager` object appears to be more complicated than the `RoleManager` control, however it is nearly the same.</span></span> <span data-ttu-id="ae8b6-169">Po prostu zakodowanej w jednym wierszu, zamiast kilku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-169">It is just coded on one line rather than several.</span></span> <span data-ttu-id="ae8b6-170">W tym miejscu parametr, który jest przekazywany jest utworzenie wystąpienia jako nowy obiekt zawarte w nawiasach.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-170">Here, the parameter that you are passing is instantiating as a new object contained in the parenthesis.</span></span>

<span data-ttu-id="ae8b6-171">Następnie należy utworzyć użytkownika "canEditUser", tworząc nowe `ApplicationUser` obiektu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-171">Next you create the "canEditUser" user by creating a new `ApplicationUser` object.</span></span> <span data-ttu-id="ae8b6-172">Następnie jeśli pomyślnie utworzono użytkownika, należy dodać użytkownika do nowej roli.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-172">Then, if you successfully create the user, you add the user to the new role.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ae8b6-173">Obsługa błędów będzie aktualizowany podczas samouczek "Obsługi błędu ASP.NET" w dalszej części tego samouczka serii.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-173">The error handling will be updated during the "ASP.NET Error Handling" tutorial later in this tutorial series.</span></span>


<span data-ttu-id="ae8b6-174">Przy następnym uruchomieniu aplikacji użytkownika o nazwie "canEditUser" zostanie dodany jako rola o nazwie "canEdit" aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-174">The next time the application starts, the user named "canEditUser" will be added as the role named "canEdit" of the application.</span></span> <span data-ttu-id="ae8b6-175">W dalszej części tego samouczka będzie zalogować się jako użytkownik "canEditUser", aby wyświetlić dodatkowe funkcje, które będą dodane w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-175">Later in this tutorial, you will login as the "canEditUser" user to display additional capabilities that you will added during this tutorial.</span></span> <span data-ttu-id="ae8b6-176">Interfejs API szczegółowe informacje na temat tożsamości platformy ASP.NET, zobacz [Namespace Microsoft.AspNet.Identity](https://msdn.microsoft.com/library/microsoft.aspnet.identity(v=vs.111).aspx).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-176">For API details about ASP.NET Identity, see the [Microsoft.AspNet.Identity Namespace](https://msdn.microsoft.com/library/microsoft.aspnet.identity(v=vs.111).aspx).</span></span> <span data-ttu-id="ae8b6-177">Aby uzyskać dodatkowe szczegóły dotyczące inicjowania systemu tożsamości platformy ASP.NET, zobacz [AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample/blob/master/AspnetIdentitySample/App_Start/IdentityConfig.cs).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-177">For additional details about initializing the ASP.NET Identity system, see the [AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample/blob/master/AspnetIdentitySample/App_Start/IdentityConfig.cs).</span></span>

### <a name="restricting-access-to-the-administration-page"></a><span data-ttu-id="ae8b6-178">Ograniczanie dostępu do strony Administracja</span><span class="sxs-lookup"><span data-stu-id="ae8b6-178">Restricting Access to the Administration Page</span></span>

<span data-ttu-id="ae8b6-179">Przykładowa aplikacja Wingtip Toys umożliwia zarówno użytkowników anonimowych i zalogowanych użytkowników wyświetlić i zakupu produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-179">The Wingtip Toys sample application allows both anonymous users and logged-in users to view and purchase products.</span></span> <span data-ttu-id="ae8b6-180">Jednak zalogowanego użytkownika, który ma rolę niestandardowe "canEdit" można uzyskać dostępu do stronę z ograniczeniami w celu dodawania i usuwania produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-180">However, the logged-in user that has the custom "canEdit" role can access a restricted page in order to add and remove products.</span></span>

#### <a name="add-an-administration-folder-and-page"></a><span data-ttu-id="ae8b6-181">Dodaj Folder administracji i strony</span><span class="sxs-lookup"><span data-stu-id="ae8b6-181">Add an Administration Folder and Page</span></span>

<span data-ttu-id="ae8b6-182">Następnie utworzy folder o nazwie *Admin* dla użytkownika "canEditUser" należącego do roli niestandardowych Wingtip Toys przykładowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-182">Next, you will create a folder named *Admin* for the "canEditUser" user belonging to the custom role of the Wingtip Toys sample application.</span></span>

1. <span data-ttu-id="ae8b6-183">Kliknij prawym przyciskiem myszy nazwę projektu (**Wingtip Toys**) w **Eksploratora rozwiązań** i wybierz **Dodaj**  - &gt; **nowy Folder**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-183">Right-click the project name (**Wingtip Toys**) in **Solution Explorer** and select **Add** -&gt; **New Folder**.</span></span>
2. <span data-ttu-id="ae8b6-184">Nazwa nowego folderu *Admin*.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-184">Name the new folder *Admin*.</span></span>
3. <span data-ttu-id="ae8b6-185">Kliknij prawym przyciskiem myszy *Admin* folder, a następnie wybierz **Dodaj**  - &gt; **nowy element**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-185">Right-click the *Admin* folder and then select **Add** -&gt; **New Item**.</span></span>   
 <span data-ttu-id="ae8b6-186">**Dodaj nowy element** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-186">The **Add New Item** dialog box is displayed.</span></span>
4. <span data-ttu-id="ae8b6-187">Wybierz **Visual C#** - &gt; **Web** grupy szablonów po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-187">Select the **Visual C#**-&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="ae8b6-188">Wybierz z listy środkowej **formularza sieci Web ze stroną wzorcową**, nadaj jej nazwę *AdminPage.aspx***,** , a następnie wybierz **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-188">From the middle list, select **Web Form with Master Page**,name it *AdminPage.aspx***,** and then select **Add**.</span></span>
5. <span data-ttu-id="ae8b6-189">Wybierz *Site.Master* pliku jako strony głównej, a następnie wybierz **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-189">Select the *Site.Master* file as the master page, and then choose **OK**.</span></span>

#### <a name="add-a-webconfig-file"></a><span data-ttu-id="ae8b6-190">Dodanie pliku Web.config</span><span class="sxs-lookup"><span data-stu-id="ae8b6-190">Add a Web.config File</span></span>

<span data-ttu-id="ae8b6-191">Dodając *Web.config* pliku na *Admin* folder, można ograniczyć dostęp do strony zawartych w folderze.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-191">By adding a *Web.config* file to the *Admin* folder, you can restrict access to the page contained in the folder.</span></span>

1. <span data-ttu-id="ae8b6-192">Kliknij prawym przyciskiem myszy *Admin* i wybierz polecenie **Dodaj**  - &gt; **nowy element**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-192">Right-click the *Admin* folder and select **Add** -&gt; **New Item**.</span></span>  
 <span data-ttu-id="ae8b6-193">**Dodaj nowy element** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-193">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="ae8b6-194">Wybierz z listy szablonów sieci web Visual C#, **pliku konfiguracji sieci Web**na liście środkowej Zaakceptuj domyślną nazwę *Web.config***,** , a następnie wybierz **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-194">From the list of Visual C# web templates, select **Web Configuration File**from the middle list, accept the default name of *Web.config***,** and then select **Add**.</span></span>
3. <span data-ttu-id="ae8b6-195">Zastąp istniejące zawartości w pliku XML *Web.config* pliku następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-195">Replace the existing XML content in the *Web.config* file with the following:</span></span>  

    [!code-xml[Main](membership-and-administration/samples/sample4.xml)]

<span data-ttu-id="ae8b6-196">Zapisz *Web.config* pliku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-196">Save the *Web.config* file.</span></span> <span data-ttu-id="ae8b6-197">*Web.config* pliku Określa, że tylko użytkownik należący do roli "canEdit" aplikacji można uzyskać dostęp do strony zawarte w *Admin* folderu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-197">The *Web.config* file specifies that only user belonging to the "canEdit" role of the application can access the page contained in the *Admin* folder.</span></span>

### <a name="including-custom-role-navigation"></a><span data-ttu-id="ae8b6-198">W tym nawigacji niestandardowej roli zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="ae8b6-198">Including Custom Role Navigation</span></span>

<span data-ttu-id="ae8b6-199">Aby umożliwić użytkownikowi roli niestandardowe "canEdit" Przejdź do sekcji Administracja aplikacji, należy dodać łącze do *Site.Master* strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-199">To enable the user of the custom "canEdit" role to navigate to the administration section of the application, you must add a link to the *Site.Master* page.</span></span> <span data-ttu-id="ae8b6-200">Użytkownicy, którzy należą do roli "canEdit" zostanie wyświetlony tylko **Admin** łącze i uzyskać dostęp do sekcji administracji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-200">Only users that belong to the "canEdit" role will be able to see the **Admin** link and access the administration section.</span></span>

1. <span data-ttu-id="ae8b6-201">W Eksploratorze rozwiązań, znajdowanie i otwieranie *Site.Master* strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-201">In Solution Explorer, find and open the *Site.Master* page.</span></span>
2. <span data-ttu-id="ae8b6-202">Aby utworzyć link do użytkownika w roli "canEdit", Dodaj znaczników wyróżnione kolorem żółtym Poniższa lista Nieuporządkowana `<ul>` element, aby ta lista jest wyświetlana jako następuje:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-202">To create a link for the user of the "canEdit" role, add the markup highlighted in yellow to the following unordered list `<ul>` element so that the list appears as follows:</span></span>  

    [!code-html[Main](membership-and-administration/samples/sample5.html?highlight=2-3)]
3. <span data-ttu-id="ae8b6-203">Otwórz *Site.Master.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-203">Open the *Site.Master.cs* file.</span></span> <span data-ttu-id="ae8b6-204">Wprowadź **Admin** łącze widoczne tylko dla użytkownika "canEditUser" przez dodanie kodu wyróżnione kolorem żółtym do `Page_Load` obsługi.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-204">Make the **Admin** link visible only to the "canEditUser" user by adding the code highlighted in yellow to the `Page_Load` handler.</span></span> <span data-ttu-id="ae8b6-205">`Page_Load` Obsługi będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-205">The `Page_Load` handler will appear as follows:</span></span>   

    [!code-csharp[Main](membership-and-administration/samples/sample6.cs?highlight=3-6)]

<span data-ttu-id="ae8b6-206">Podczas ładowania strony kodu sprawdza, czy zalogowany użytkownik ma rolę "canEdit".</span><span class="sxs-lookup"><span data-stu-id="ae8b6-206">When the page loads, the code checks whether the logged-in user has the role of "canEdit".</span></span> <span data-ttu-id="ae8b6-207">Jeśli użytkownik należy do roli "canEdit" element span z łączem do *AdminPage.aspx* strony (i w związku z tym łącze wewnątrz zakresu) stają się widoczne.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-207">If the user belongs to the "canEdit" role, the span element containing the link to the *AdminPage.aspx* page (and consequently the link inside the span) is made visible.</span></span>

### <a name="enabling-product-administration"></a><span data-ttu-id="ae8b6-208">Włączanie administracji produktu</span><span class="sxs-lookup"><span data-stu-id="ae8b6-208">Enabling Product Administration</span></span>

<span data-ttu-id="ae8b6-209">Do tej pory utworzono rolę "canEdit" i dodać użytkownika "canEditUser", folder administracji i strony Administracja.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-209">So far, you have created the "canEdit" role and added an "canEditUser" user, an administration folder, and an administration page.</span></span> <span data-ttu-id="ae8b6-210">Ustawiono uprawnienia dostępu dla folderu administracji i strony, a następnie dodano łącza nawigacji dla użytkownika w roli "canEdit" do aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-210">You have set access rights for the administration folder and page, and have added a navigation link for the user of the "canEdit" role to the application.</span></span> <span data-ttu-id="ae8b6-211">Następnie należy dodać znaczników do *AdminPage.aspx* strony i kod, aby *AdminPage.aspx.cs* plik CodeBehind, który umożliwi użytkownikowi z rolą "canEdit" Dodawanie i usuwanie produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-211">Next, you will add markup to the *AdminPage.aspx* page and code to the *AdminPage.aspx.cs* code-behind file that will enable the user with the "canEdit" role to add and remove products.</span></span>

1. <span data-ttu-id="ae8b6-212">W **Eksploratora rozwiązań**, otwórz *AdminPage.aspx* plik z *Admin* folderu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-212">In **Solution Explorer**, open the *AdminPage.aspx* file from the *Admin* folder.</span></span>
2. <span data-ttu-id="ae8b6-213">Zastąp istniejący kod znaczników następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-213">Replace the existing markup with the following:</span></span>  

    [!code-aspx[Main](membership-and-administration/samples/sample7.aspx)]
3. <span data-ttu-id="ae8b6-214">Następnie otwórz folder *AdminPage.aspx.cs* pliku CodeBehind, klikając prawym przyciskiem myszy *AdminPage.aspx* i klikając **kod widoku**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-214">Next, open the *AdminPage.aspx.cs* code-behind file by right-clicking the *AdminPage.aspx* and clicking **View Code**.</span></span>
4. <span data-ttu-id="ae8b6-215">Zastąp istniejący kod w *AdminPage.aspx.cs* pliku CodeBehind następującym kodem:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-215">Replace the existing code in the *AdminPage.aspx.cs* code-behind file with the following code:</span></span>  

    [!code-csharp[Main](membership-and-administration/samples/sample8.cs)]

<span data-ttu-id="ae8b6-216">W kodzie wprowadzone *AdminPage.aspx.cs* pliku CodeBehind, klasy o nazwie `AddProducts` wykonuje faktyczną pracę dodawania produktów w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-216">In the code that you entered for the *AdminPage.aspx.cs* code-behind file, a class called `AddProducts` does the actual work of adding products to the database.</span></span> <span data-ttu-id="ae8b6-217">Ta klasa jeszcze nie istnieje, więc będzie można utworzyć go teraz.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-217">This class doesn't exist yet, so you will create it now.</span></span>

1. <span data-ttu-id="ae8b6-218">W **Eksploratora rozwiązań**, kliknij prawym przyciskiem myszy *logiki* folder, a następnie wybierz **Dodaj**  - &gt; **nowy element**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-218">In **Solution Explorer**, right-click the *Logic* folder and then select **Add** -&gt; **New Item**.</span></span>   
 <span data-ttu-id="ae8b6-219">**Dodaj nowy element** zostanie wyświetlone okno dialogowe.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-219">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="ae8b6-220">Wybierz **Visual C#**  - &gt; **kod** grupy szablonów po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-220">Select the **Visual C#** -&gt; **Code** templates group on the left.</span></span> <span data-ttu-id="ae8b6-221">Następnie wybierz opcję **klasy**ze środka listy i nadaj mu nazwę *AddProducts.cs*.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-221">Then, select **Class**from the middle list and name it *AddProducts.cs*.</span></span>   
 <span data-ttu-id="ae8b6-222">Zostanie wyświetlony nowy plik klasy.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-222">The new class file is displayed.</span></span>
3. <span data-ttu-id="ae8b6-223">Zastąp istniejący kod poniżej:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-223">Replace the existing code with the following:</span></span>  

    [!code-csharp[Main](membership-and-administration/samples/sample9.cs)]

<span data-ttu-id="ae8b6-224">*AdminPage.aspx* strony umożliwia użytkownikowi należących do roli "canEdit" Dodawanie i usuwanie produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-224">The *AdminPage.aspx* page allows the user belonging to the "canEdit" role to add and remove products.</span></span> <span data-ttu-id="ae8b6-225">Po dodaniu nowego produktu szczegółowe informacje o produkcie są weryfikowane i następnie wprowadzany do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-225">When a new product is added, the details about the product are validated and then entered into the database.</span></span> <span data-ttu-id="ae8b6-226">Nowy produkt jest natychmiast dostępna dla wszystkich użytkowników w aplikacji sieci web.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-226">The new product is immediately available to all users of the web application.</span></span>

#### <a name="unobtrusive-validation"></a><span data-ttu-id="ae8b6-227">Sprawdzania poprawności dyskretnego kodu</span><span class="sxs-lookup"><span data-stu-id="ae8b6-227">Unobtrusive Validation</span></span>

<span data-ttu-id="ae8b6-228">Szczegóły produktu, które użytkownik podaje na *AdminPage.aspx* strony są weryfikowane przy użyciu formanty walidacji (`RequiredFieldValidator` i `RegularExpressionValidator`).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-228">The product details that the user provides on the *AdminPage.aspx* page are validated using validation controls (`RequiredFieldValidator` and `RegularExpressionValidator`).</span></span> <span data-ttu-id="ae8b6-229">Formanty automatycznie używać sprawdzania poprawności dyskretnego kodu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-229">These controls automatically use unobtrusive validation.</span></span> <span data-ttu-id="ae8b6-230">Sprawdzania poprawności dyskretnego kodu umożliwia formanty walidacji logikę weryfikacji po stronie klienta, co oznacza, że strony nie wymaga podróży do serwera, który ma zostać zweryfikowana przy użyciu języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-230">Unobtrusive validation allows the validation controls to use JavaScript for client-side validation logic, which means the page does not require a trip to the server to be validated.</span></span> <span data-ttu-id="ae8b6-231">Domyślnie sprawdzania poprawności dyskretnego kodu jest uwzględniona w *Web.config* opartą na plikach na następujące ustawienia konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-231">By default, unobtrusive validation is included in the *Web.config* file based on the following configuration setting:</span></span>

[!code-xml[Main](membership-and-administration/samples/sample10.xml)]

#### <a name="regular-expressions"></a><span data-ttu-id="ae8b6-232">Wyrażenia regularne</span><span class="sxs-lookup"><span data-stu-id="ae8b6-232">Regular Expressions</span></span>

<span data-ttu-id="ae8b6-233">Cena produktu na *AdminPage.aspx* strony jest weryfikowane przy użyciu **RegularExpressionValidator** formantu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-233">The product price on the *AdminPage.aspx* page is validated using a **RegularExpressionValidator** control.</span></span> <span data-ttu-id="ae8b6-234">Ten formant sprawdza, czy wartość skojarzona kontrolki wprowadzania (pole tekstowe "AddProductPrice") zgodny z wzorcem określona przez wyrażenie regularne.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-234">This control validates whether the value of the associated input control (the "AddProductPrice" TextBox) matches the pattern specified by the regular expression.</span></span> <span data-ttu-id="ae8b6-235">Wyrażenie regularne jest dopasowywanie do wzorca notacji, umożliwiającą szybkie znajdowanie i odpowiada wzorców określonych znaków.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-235">A regular expression is a pattern-matching notation that enables you to quickly find and match specific character patterns.</span></span> <span data-ttu-id="ae8b6-236">**RegularExpressionValidator** formant zawiera właściwość o nazwie `ValidationExpression` zawiera wyrażenie regularne służące do sprawdzania poprawności danych wejściowych cen, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-236">The **RegularExpressionValidator** control includes a property named `ValidationExpression` that contains the regular expression used to validate price input, as shown below:</span></span>

[!code-aspx[Main](membership-and-administration/samples/sample11.aspx)]

#### <a name="fileupload-control"></a><span data-ttu-id="ae8b6-237">Formant przekazywaniem plików</span><span class="sxs-lookup"><span data-stu-id="ae8b6-237">FileUpload Control</span></span>

<span data-ttu-id="ae8b6-238">Oprócz kontroli danych wejściowych i sprawdzania poprawności, możesz dodać **przekazywaniem plików** formant *AdminPage.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-238">In addition to the input and validation controls, you added the **FileUpload** control to the *AdminPage.aspx* page.</span></span> <span data-ttu-id="ae8b6-239">Ten formant oferuje możliwość przekazywania plików.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-239">This control provides the capability to upload files.</span></span> <span data-ttu-id="ae8b6-240">W takim przypadku tylko umożliwi pliki obrazów do załadowania.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-240">In this case, you are only allowing image files to be uploaded.</span></span> <span data-ttu-id="ae8b6-241">W pliku CodeBehind (*AdminPage.aspx.cs*), gdy `AddProductButton` zostanie kliknięty kontroli kodu `HasFile` właściwość **przekazywaniem plików** formantu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-241">In the code-behind file (*AdminPage.aspx.cs*), when the `AddProductButton` is clicked, the code checks the `HasFile` property of the **FileUpload** control.</span></span> <span data-ttu-id="ae8b6-242">Jeśli formant ma plik, jeśli typ pliku (na podstawie rozszerzenia pliku) jest dozwolone, jest zapisywany obraz do *obrazów* folderu i *obrazów/Kciuki* folderu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-242">If the control has a file and if the file type (based on file extension) is allowed, the image is saved to the *Images* folder and the *Images/Thumbs* folder of the application.</span></span>

#### <a name="model-binding"></a><span data-ttu-id="ae8b6-243">Wiązanie modelu</span><span class="sxs-lookup"><span data-stu-id="ae8b6-243">Model Binding</span></span>

<span data-ttu-id="ae8b6-244">We wcześniejszej części tego samouczka serii wiązania modelu używany do wypełniania **ListView** kontroli, **FormsView** kontroli, **widoku GridView** kontroli, a  **DetailView** formantu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-244">Earlier in this tutorial series you used model binding to populate a **ListView** control, a **FormsView** control, a **GridView** control, and a **DetailView** control.</span></span> <span data-ttu-id="ae8b6-245">W tym samouczku użycie wiązania modelu do wypełniania **DropDownList** formantu o listę kategorii produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-245">In this tutorial, you use model binding to populate a **DropDownList** control with a list of product categories.</span></span>

<span data-ttu-id="ae8b6-246">Kod znaczników, który został dodany do *AdminPage.aspx* plik zawiera **DropDownList** formantu o nazwie `DropDownAddCategory`:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-246">The markup that you added to the *AdminPage.aspx* file contains a **DropDownList** control called `DropDownAddCategory`:</span></span>

[!code-aspx[Main](membership-and-administration/samples/sample12.aspx)]

<span data-ttu-id="ae8b6-247">Użyj wiązania modelu w celu wypełnienia to **DropDownList** przez ustawienie `ItemType` atrybutu i `SelectMethod` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-247">You use model binding to populate this **DropDownList** by setting the `ItemType` attribute and the `SelectMethod` attribute.</span></span> <span data-ttu-id="ae8b6-248">`ItemType` Atrybut określa, że używasz `WingtipToys.Models.Category` wpisz podczas wypełniania formantu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-248">The `ItemType` attribute specifies that you use the `WingtipToys.Models.Category` type when populating the control.</span></span> <span data-ttu-id="ae8b6-249">Definicja tego typu na początku tego samouczka serii tworząc `Category` klasy (pokazana poniżej).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-249">You defined this type at the beginning of this tutorial series by creating the `Category` class (shown below).</span></span> <span data-ttu-id="ae8b6-250">`Category` Klasa znajduje się w *modele* folder wewnątrz *Category.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-250">The `Category` class is in the *Models* folder inside the *Category.cs* file.</span></span>

[!code-csharp[Main](membership-and-administration/samples/sample13.cs)]

<span data-ttu-id="ae8b6-251">`SelectMethod` Atrybutu **DropDownList** kontroli określa, że używasz `GetCategories` — metoda (pokazana poniżej) który jest zawarty w pliku CodeBehind (*AdminPage.aspx.cs*).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-251">The `SelectMethod` attribute of the **DropDownList** control specifies that you use the `GetCategories` method (shown below) that is included in the code-behind file (*AdminPage.aspx.cs*).</span></span>

[!code-csharp[Main](membership-and-administration/samples/sample14.cs)]

<span data-ttu-id="ae8b6-252">Ta metoda określa, że `IQueryable` interfejs jest używany do oceny zapytania dotyczącego `Category` typu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-252">This method specifies that an `IQueryable` interface is used to evaluate a query against a `Category` type.</span></span> <span data-ttu-id="ae8b6-253">Zwrócona wartość jest używana do wypełniania **DropDownList** w znaczniku strony (*AdminPage.aspx*).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-253">The returned value is used to populate the **DropDownList** in the markup of the page (*AdminPage.aspx*).</span></span>

<span data-ttu-id="ae8b6-254">Tekst wyświetlany dla każdego elementu na liście jest określany przez ustawienie `DataTextField` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-254">The text displayed for each item in the list is specified by setting the `DataTextField` attribute.</span></span> <span data-ttu-id="ae8b6-255">`DataTextField` Używa atrybutu `CategoryName` z `Category` klasy (pokazanym powyżej), aby wyświetlić każdej kategorii w **DropDownList** formantu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-255">The `DataTextField` attribute uses the `CategoryName` of the `Category` class (shown above) to display each category in the **DropDownList** control.</span></span> <span data-ttu-id="ae8b6-256">Rzeczywista wartość, która jest przekazywany, gdy element jest zaznaczony w **DropDownList** formant jest oparty na `DataValueField` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-256">The actual value that is passed when an item is selected in the **DropDownList** control is based on the `DataValueField` attribute.</span></span> <span data-ttu-id="ae8b6-257">`DataValueField` Atrybut ma ustawioną `CategoryID` jak zdefiniowano w `Category` klasy (pokazanym powyżej).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-257">The `DataValueField` attribute is set to the `CategoryID` as define in the `Category` class (shown above).</span></span>

### <a name="how-the-application-will-work"></a><span data-ttu-id="ae8b6-258">Działania aplikacji</span><span class="sxs-lookup"><span data-stu-id="ae8b6-258">How the Application Will Work</span></span>

<span data-ttu-id="ae8b6-259">Gdy użytkownik należący do roli "canEdit" przechodzi do strony po raz pierwszy, `DropDownAddCategory` **DropDownList** kontroli jest wypełniana zgodnie z powyższym opisem.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-259">When the user belonging to the "canEdit" role navigates to the page for the first time, the `DropDownAddCategory`**DropDownList** control is populated as described above.</span></span> <span data-ttu-id="ae8b6-260">`DropDownRemoveProduct` **DropDownList** kontroli również jest wypełniana przy użyciu tej samej metody produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-260">The `DropDownRemoveProduct`**DropDownList** control is also populated with products using the same approach.</span></span> <span data-ttu-id="ae8b6-261">Użytkownika należącego do roli "canEdit" wybiera typ kategorii i dodaje informacje szczegółowe (**nazwa**, **opis**, **cen**, i **plik obrazu**).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-261">The user belonging to the "canEdit" role selects the category type and adds product details (**Name**, **Description**, **Price**, and **Image File**).</span></span> <span data-ttu-id="ae8b6-262">Po kliknięciu przez użytkownika należącego do roli "canEdit" **Dodaj produkt** przycisku `AddProductButton_Click` zostanie wywołany program obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-262">When the user belonging to the "canEdit" role clicks the **Add Product** button, the `AddProductButton_Click` event handler is triggered.</span></span> <span data-ttu-id="ae8b6-263">`AddProductButton_Click` Obsługi zdarzeń znajdujących się w pliku CodeBehind (*AdminPage.aspx.cs*) sprawdza plik obrazu, aby się upewnić, że jest on zgodny typów plików dozwolonych *(.gif*, *.png*, *.jpeg*, lub *.jpg*).</span><span class="sxs-lookup"><span data-stu-id="ae8b6-263">The `AddProductButton_Click` event handler located in the code-behind file (*AdminPage.aspx.cs*) checks the image file to make sure it matches the allowed file types *(.gif*, *.png*, *.jpeg*, or *.jpg*).</span></span> <span data-ttu-id="ae8b6-264">Następnie plik obrazu jest zapisywany w folderze Wingtip Toys przykładowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-264">Then, the image file is saved into a folder of the Wingtip Toys sample application.</span></span> <span data-ttu-id="ae8b6-265">Następnie nowy produkt jest dodawana do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-265">Next, the new product is added to the database.</span></span> <span data-ttu-id="ae8b6-266">Do wykonania, dodanie nowego produktu, nowe wystąpienie klasy `AddProducts` klasy nie zostanie utworzona i o nazwie produktów.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-266">To accomplish adding a new product, a new instance of the `AddProducts` class is created and named products.</span></span> <span data-ttu-id="ae8b6-267">`AddProducts` Klasa ma metodę o nazwie `AddProduct`, i obiektu produktów wywołuje tę metodę, aby dodać produktów w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-267">The `AddProducts` class has a method named `AddProduct`, and the products object calls this method to add products to the database.</span></span>

[!code-csharp[Main](membership-and-administration/samples/sample15.cs)]

<span data-ttu-id="ae8b6-268">Jeśli kod dodaje pomyślnie nowego produktu do bazy danych, strona zostanie ponownie załadowana z wartością ciągu zapytania `ProductAction=add`.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-268">If the code successfully adds the new product to the database, the page is reloaded with the query string value `ProductAction=add`.</span></span>

[!code-csharp[Main](membership-and-administration/samples/sample16.cs)]

<span data-ttu-id="ae8b6-269">Gdy ponowne ładowanie strony, ciąg zapytania są zawarte w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-269">When the page reloads, the query string is included in the URL.</span></span> <span data-ttu-id="ae8b6-270">Poprzez ponowne ładowanie strony, użytkownik należący do roli "canEdit" można natychmiast zobaczyć aktualizacje w **DropDownList** formantów na *AdminPage.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-270">By reloading the page, the user belonging to the "canEdit" role can immediately see the updates in the **DropDownList** controls on the *AdminPage.aspx* page.</span></span> <span data-ttu-id="ae8b6-271">Ponadto umieszczając ciąg zapytania z adresem URL strony można wyświetlić komunikat informujący użytkownika należącego do roli "canEdit".</span><span class="sxs-lookup"><span data-stu-id="ae8b6-271">Also, by including the query string with the URL, the page can display a success message to the user belonging to the "canEdit" role.</span></span>

<span data-ttu-id="ae8b6-272">Gdy *AdminPage.aspx* strony ładunki `Page_Load` zdarzenie jest wywoływane.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-272">When the *AdminPage.aspx* page reloads, the `Page_Load` event is called.</span></span>

[!code-csharp[Main](membership-and-administration/samples/sample17.cs)]

<span data-ttu-id="ae8b6-273">`Page_Load` Program obsługi zdarzeń sprawdza wartość ciągu kwerendy i określa, czy ma być wyświetlany komunikat z potwierdzeniem.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-273">The `Page_Load` event handler checks the query string value and determines whether to show a success message.</span></span>

## <a name="running-the-application"></a><span data-ttu-id="ae8b6-274">Uruchamianie aplikacji</span><span class="sxs-lookup"><span data-stu-id="ae8b6-274">Running the Application</span></span>

<span data-ttu-id="ae8b6-275">Można uruchomić aplikacji teraz, aby zobaczyć sposób dodawania, usuwania i aktualizacji elementów w koszyku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-275">You can run the application now to see how you can add, delete, and update items in the shopping cart.</span></span> <span data-ttu-id="ae8b6-276">Łączna wartość koszyka zakupów będzie odzwierciedlać całkowity koszt wszystkich elementów w koszyku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-276">The shopping cart total will reflect the total cost of all items in the shopping cart.</span></span>

1. <span data-ttu-id="ae8b6-277">W Eksploratorze rozwiązań, naciśnij klawisz **F5** do uruchomienia aplikacji przykładowej Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-277">In Solution Explorer, press **F5** to run the Wingtip Toys sample application.</span></span>  
 <span data-ttu-id="ae8b6-278">W przeglądarce zostanie otwarty i przedstawia *Default.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-278">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="ae8b6-279">Kliknij przycisk **Zaloguj** łącze w górnej części strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-279">Click the **Log in** link at the top of the page.</span></span> 

    ![Członkostwo i administrowanie — dziennik łącza](membership-and-administration/_static/image2.png)

 <span data-ttu-id="ae8b6-281">*Login.aspx* zostanie wyświetlona strona.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-281">The *Login.aspx* page is displayed.</span></span>
3. <span data-ttu-id="ae8b6-282">Użyj następującej nazwy użytkownika i hasła:</span><span class="sxs-lookup"><span data-stu-id="ae8b6-282">Use the following user name and password:</span></span>  
 <span data-ttu-id="ae8b6-283">Nazwa użytkownika:canEditUser@wingtiptoys.com</span><span class="sxs-lookup"><span data-stu-id="ae8b6-283">User name: canEditUser@wingtiptoys.com</span></span>  
 <span data-ttu-id="ae8b6-284">Hasło: Pa$ $word1</span><span class="sxs-lookup"><span data-stu-id="ae8b6-284">Password: Pa$$word1</span></span> 

    ![Członkostwo i administrowanie — strony logowania](membership-and-administration/_static/image3.png)
4. <span data-ttu-id="ae8b6-286">Kliknij przycisk **Zaloguj** znajdujący się u dołu strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-286">Click the **Log in** button near the bottom of the page.</span></span>
5. <span data-ttu-id="ae8b6-287">U góry następnej strony, zaznacz pole wyboru **Admin** łącze, aby przejść do *AdminPage.aspx* strony.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-287">At the top of the next page, select the **Admin** link to navigate to the *AdminPage.aspx* page.</span></span> 

    ![Członkostwo i Administracja - Link administratora](membership-and-administration/_static/image4.png)
6. <span data-ttu-id="ae8b6-289">Aby przetestować sprawdzania poprawności danych wejściowych, **Dodaj produkt** przycisk bez dodawania żadnych szczegółów produktu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-289">To test the input validation, click the **Add Product** button without adding any product details.</span></span> 

    ![Członkostwo i administrowanie — strony administratora](membership-and-administration/_static/image5.png)

 <span data-ttu-id="ae8b6-291">Zwróć uwagę, że są wyświetlane komunikaty wymaganego pola.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-291">Notice that the required field messages are displayed.</span></span>
7. <span data-ttu-id="ae8b6-292">Dodaj szczegóły nowego produktu, a następnie kliknij przycisk **Dodaj produkt** przycisku.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-292">Add the details for a new product, and then click the **Add Product** button.</span></span> 

    ![Członkostwo i administrowanie — Dodawanie produktu](membership-and-administration/_static/image6.png)
8. <span data-ttu-id="ae8b6-294">Wybierz **produktów** z menu górnym menu nawigacyjnym, aby wyświetlić nowy produkt dodane.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-294">Select **Products** from the top navigation menu to view the new product you added.</span></span> 

    ![Członkostwo i administrowanie — Pokaż nowego produktu](membership-and-administration/_static/image7.png)
9. <span data-ttu-id="ae8b6-296">Kliknij przycisk **Admin** łącze, aby powrócić do strony Administracja.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-296">Click the **Admin** link to return to the administration page.</span></span>
10. <span data-ttu-id="ae8b6-297">W **Usuń produktu** części strony, wybierz nowego produktu dodane w **DropDownListBox**.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-297">In the **Remove Product** section of the page, select the new product you added in the **DropDownListBox**.</span></span>
11. <span data-ttu-id="ae8b6-298">Kliknij przycisk **Usuń produktu** przycisk, aby usunąć nowego produktu z aplikacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-298">Click the **Remove Product** button to remove the new product from the application.</span></span> 

    ![Członkostwo i administrowanie — Usuń produktu](membership-and-administration/_static/image8.png)
12. <span data-ttu-id="ae8b6-300">Wybierz **produkty** w menu górnym menu nawigacyjnym, aby upewnić się, że produkt został usunięty.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-300">Select **Products** from the top navigation menu to confirm that the product has been removed.</span></span>
13. <span data-ttu-id="ae8b6-301">Kliknij przycisk **wylogować** istnieć w trybie administracji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-301">Click **Log off** to exist administration mode.</span></span>   
 <span data-ttu-id="ae8b6-302">Należy zauważyć, że nie jest już wyświetlana w okienku nawigacji w górnym **Admin** elementu menu.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-302">Notice that the top navigation pane no longer shows the **Admin** menu item.</span></span>

## <a name="summary"></a><span data-ttu-id="ae8b6-303">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="ae8b6-303">Summary</span></span>

<span data-ttu-id="ae8b6-304">W tym samouczku dodaniu niestandardowej roli zabezpieczeń i użytkownika należącego do roli niestandardowych ograniczony dostęp do folderu administracji i strony i podano nawigacji dla użytkownika należącego do roli niestandardowych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-304">In this tutorial, you added a custom role and a user belonging to the custom role, restricted access to the administration folder and page, and provided navigation for the user belonging to the custom role.</span></span> <span data-ttu-id="ae8b6-305">Wiązania modelu są używane do wypełnienia **DropDownList** formantu z danymi.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-305">You used model binding to populate a **DropDownList** control with data.</span></span> <span data-ttu-id="ae8b6-306">Zostanie zaimplementowana **przekazywaniem plików** kontroli i formanty walidacji.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-306">You implemented the **FileUpload** control and validation controls.</span></span> <span data-ttu-id="ae8b6-307">Ponadto ma przedstawiono sposób dodawania i usuwania produktów z bazy danych.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-307">Also, you have learned how to add and remove products from a database.</span></span> <span data-ttu-id="ae8b6-308">W następnym samouczku nauczysz się, jak zaimplementować routingu platformy ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ae8b6-308">In the next tutorial, you'll learn how to implement ASP.NET routing.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ae8b6-309">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="ae8b6-309">Additional Resources</span></span>

<span data-ttu-id="ae8b6-310">[Web.config — autoryzacji elementu](https://msdn.microsoft.com/library/8d82143t(v=vs.100).aspx)</span><span class="sxs-lookup"><span data-stu-id="ae8b6-310">[Web.config - authorization Element](https://msdn.microsoft.com/library/8d82143t(v=vs.100).aspx)</span></span>  
[<span data-ttu-id="ae8b6-311">Tożsamość platformy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ae8b6-311">ASP.NET Identity</span></span>](../../../../identity/overview/getting-started/introduction-to-aspnet-identity.md)  
[<span data-ttu-id="ae8b6-312">Wdrażanie aplikacji formularzy bezpiecznej sieci Web platformy ASP.NET z członkostwa, OAuth i bazy danych SQL Azure witrynę sieci Web</span><span class="sxs-lookup"><span data-stu-id="ae8b6-312">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to an Azure Web Site</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="ae8b6-313">Microsoft Azure — bezpłatnej wersji próbnej</span><span class="sxs-lookup"><span data-stu-id="ae8b6-313">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

>[!div class="step-by-step"]
<span data-ttu-id="ae8b6-314">[Poprzednie](checkout-and-payment-with-paypal.md)
[dalej](url-routing.md)</span><span class="sxs-lookup"><span data-stu-id="ae8b6-314">[Previous](checkout-and-payment-with-paypal.md)
[Next](url-routing.md)</span></span>
