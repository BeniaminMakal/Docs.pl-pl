---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
title: Dodawanie potwierdzenie po stronie klienta podczas usuwania (C#) | Dokumentacja firmy Microsoft
author: rick-anderson
description: W interfejsach, którego dotychczasowy utworzyliśmy użytkownik może przypadkowo usunąć dane, klikając przycisk Usuń, gdy są one przeznaczone do kliknij przycisk Edytuj. W tym t...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/17/2006
ms.topic: article
ms.assetid: f6e2a12a-2b5e-48fd-8db3-1e94a500c19a
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: 72b15d498e45cc519a14ecfe39111b224db88c30
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
ms.locfileid: "30880274"
---
<a name="adding-client-side-confirmation-when-deleting-c"></a><span data-ttu-id="b1956-104">Dodawanie potwierdzenie po stronie klienta podczas usuwania (C#)</span><span class="sxs-lookup"><span data-stu-id="b1956-104">Adding Client-Side Confirmation When Deleting (C#)</span></span>
====================
<span data-ttu-id="b1956-105">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b1956-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b1956-106">[Pobierz przykładową aplikację](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) lub [pobierania plików PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="b1956-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) or [Download PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span></span>

> <span data-ttu-id="b1956-107">W interfejsach, którego dotychczasowy utworzyliśmy użytkownik może przypadkowo usunąć dane, klikając przycisk Usuń, gdy są one przeznaczone do kliknij przycisk Edytuj.</span><span class="sxs-lookup"><span data-stu-id="b1956-107">In the interfaces we've created so far, a user can accidentally delete data by clicking the Delete button when they meant to click the Edit button.</span></span> <span data-ttu-id="b1956-108">W tym samouczku dodamy okno dialogowe potwierdzenia po stronie klienta, który jest wyświetlany, gdy zostanie kliknięty przycisk Usuń.</span><span class="sxs-lookup"><span data-stu-id="b1956-108">In this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>


## <a name="introduction"></a><span data-ttu-id="b1956-109">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="b1956-109">Introduction</span></span>

<span data-ttu-id="b1956-110">W ciągu ostatnich kilku samouczki możemy kolejnych przedstawiono sposób wysyłać Nasza architektura aplikacji, ObjectDataSource i danych formantów sieci Web w porozumieniu z Wstawianie, edytowanie i usuwanie funkcji.</span><span class="sxs-lookup"><span data-stu-id="b1956-110">Over the past several tutorials we ve seen how to use our application architecture, ObjectDataSource, and the data Web controls in concert to provide inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="b1956-111">Usuwanie interfejsy możemy stawienia zbadać dotychczasowych zostały złożony z usunięciem przycisku, gdy kliknięty, powoduje odświeżenie strony i wywołuje ObjectDataSource s `Delete()` — metoda.</span><span class="sxs-lookup"><span data-stu-id="b1956-111">The deleting interfaces we ve examined thus far have been composed of a Delete button that, when clicked, causes a postback and invokes the ObjectDataSource s `Delete()` method.</span></span> <span data-ttu-id="b1956-112">`Delete()` Metody następnie wywołuje metodę skonfigurowany z warstwy logiki biznesowej, która propaguje wywołania do warstwy dostępu do danych, wystawiania rzeczywiste `DELETE` instrukcji w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="b1956-112">The `Delete()` method then invokes the configured method from the Business Logic Layer, which propagates the call down to the Data Access Layer, issuing the actual `DELETE` statement to the database.</span></span>

<span data-ttu-id="b1956-113">Gdy ten interfejs użytkownika umożliwia odwiedzający do usuwania rekordów za pomocą kontrolki GridView, widoku DetailsView lub FormView, brakuje dowolny rodzaj potwierdzenie gdy użytkownik kliknie przycisk Usuń.</span><span class="sxs-lookup"><span data-stu-id="b1956-113">While this user interface enables visitors to delete records through the GridView, DetailsView, or FormView controls, it lacks any sort of confirmation when the user clicks the Delete button.</span></span> <span data-ttu-id="b1956-114">Jeśli użytkownik przypadkowo kliknie przycisk Usuń, gdy są przeznaczone do kliknij przycisk Edytuj, zamiast tego zostanie usunięty rekord, które są przeznaczone do zaktualizowania.</span><span class="sxs-lookup"><span data-stu-id="b1956-114">If a user accidentally clicks the Delete button when they meant to click Edit, the record they meant to update will instead be deleted.</span></span> <span data-ttu-id="b1956-115">Aby temu zapobiec, w tym samouczku dodamy okno dialogowe potwierdzenia po stronie klienta, który jest wyświetlany, gdy zostanie kliknięty przycisk Usuń.</span><span class="sxs-lookup"><span data-stu-id="b1956-115">To help prevent this, in this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

<span data-ttu-id="b1956-116">Kod JavaScript `confirm(string)` funkcja wyświetla jej parametr wejściowy ciąg tekst wewnątrz modalne okno dialogowe jest dostarczany z dwóch przycisków - OK i Anuluj (zobacz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="b1956-116">The JavaScript `confirm(string)` function displays its string input parameter as the text inside a modal dialog box that comes equipped with two buttons - OK and Cancel (see Figure 1).</span></span> <span data-ttu-id="b1956-117">`confirm(string)` Funkcja zwraca wartość logiczną, w zależności od tego, jakie przycisku (`true`, gdy użytkownik kliknie przycisk OK, a `false` po kliknięciu przycisku Anuluj).</span><span class="sxs-lookup"><span data-stu-id="b1956-117">The `confirm(string)` function returns a Boolean value depending on what button is clicked (`true`, if the user clicks OK, and `false` if they click Cancel).</span></span>


![Confirm(string) JavaScript metoda Wyświetla modalne, Messagebox po stronie klienta](adding-client-side-confirmation-when-deleting-cs/_static/image1.png)

<span data-ttu-id="b1956-119">**Rysunek 1**: JavaScript `confirm(string)` metoda Wyświetla element Messagebox modalne, po stronie klienta</span><span class="sxs-lookup"><span data-stu-id="b1956-119">**Figure 1**: The JavaScript `confirm(string)` Method Displays a Modal, Client-Side Messagebox</span></span>


<span data-ttu-id="b1956-120">Podczas przesyłania formularza, jeśli wartość `false` jest zwracana z obsługi zdarzeń po stronie klienta, a następnie przesłanie formularza zostało anulowane.</span><span class="sxs-lookup"><span data-stu-id="b1956-120">During a form submission, if a value of `false` is returned from a client-side event handler then the form submission is cancelled.</span></span> <span data-ttu-id="b1956-121">Za pomocą tej funkcji, będziemy mieć Usuń przycisk s po stronie klienta `onclick` obsługi zdarzeń zwrócić wartość wywołania `confirm("Are you sure you want to delete this product?")`.</span><span class="sxs-lookup"><span data-stu-id="b1956-121">Using this feature, we can have the Delete button s client-side `onclick` event handler return the value of a call to `confirm("Are you sure you want to delete this product?")`.</span></span> <span data-ttu-id="b1956-122">Jeśli użytkownik kliknie przycisk Anuluj, `confirm(string)` zwróci wartość false, co powoduje przesyłanie formularza, aby anulować.</span><span class="sxs-lookup"><span data-stu-id="b1956-122">If the user clicks Cancel, `confirm(string)` will return false, thereby causing the form submission to cancel.</span></span> <span data-ttu-id="b1956-123">Z nie ogłaszania zwrotnego można usunąć produkt został kliknięty przycisk Usuń, którego won t.</span><span class="sxs-lookup"><span data-stu-id="b1956-123">With no postback, the product whose Delete button was clicked won t be deleted.</span></span> <span data-ttu-id="b1956-124">Jeśli jednak użytkownik kliknie przycisk OK w oknie dialogowym potwierdzenia, ogłaszania zwrotnego będą nadal nieobniżone i produktu zostaną usunięte.</span><span class="sxs-lookup"><span data-stu-id="b1956-124">If, however, the user clicks OK in the confirmation dialog box, the postback will continue unabated and the product will be deleted.</span></span> <span data-ttu-id="b1956-125">Zapoznaj się [s przy użyciu języka JavaScript `confirm()` metody przesyłania formularza kontroli](http://www.webreference.com/programming/javascript/confirm/) Aby uzyskać więcej informacji na temat tej techniki.</span><span class="sxs-lookup"><span data-stu-id="b1956-125">Consult [Using JavaScript s `confirm()` Method to Control Form Submission](http://www.webreference.com/programming/javascript/confirm/) for more information on this technique.</span></span>

<span data-ttu-id="b1956-126">Dodawanie niezbędne skryptu po stronie klienta różni się nieco Jeśli za pomocą szablonów niż przy użyciu CommandField.</span><span class="sxs-lookup"><span data-stu-id="b1956-126">Adding the necessary client-side script differs slightly if using templates than when using a CommandField.</span></span> <span data-ttu-id="b1956-127">W związku z tym w tym samouczku przedstawiono przykład zarówno FormView i widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="b1956-127">Therefore, in this tutorial we will look at both a FormView and GridView example.</span></span>

> [!NOTE]
> <span data-ttu-id="b1956-128">Przy użyciu technik potwierdzenie po stronie klienta, takich jak te omówione w tym samouczku założono odwiedzają użytkownicy przeglądarek, które obsługuje języka JavaScript i mają włączoną obsługę języka JavaScript.</span><span class="sxs-lookup"><span data-stu-id="b1956-128">Using client-side confirmation techniques, like the ones discussed in this tutorial, assumes that your users are visiting with browsers that support JavaScript and that they have JavaScript enabled.</span></span> <span data-ttu-id="b1956-129">Jeśli jeden z tych założeń nie są spełnione dla danego użytkownika, klikając przycisk Usuń natychmiast spowoduje odświeżenie strony (nie są wyświetlane messagebox Potwierdź).</span><span class="sxs-lookup"><span data-stu-id="b1956-129">If either of these assumptions are not true for a particular user, clicking the Delete button will immediately cause a postback (not displaying a confirm messagebox).</span></span>


## <a name="step-1-creating-a-formview-that-supports-deletion"></a><span data-ttu-id="b1956-130">Krok 1: Tworzenie FormView obsługującego usunięcia</span><span class="sxs-lookup"><span data-stu-id="b1956-130">Step 1: Creating a FormView That Supports Deletion</span></span>

<span data-ttu-id="b1956-131">Rozpocznij od dodania FormView do `ConfirmationOnDelete.aspx` w obszarze `EditInsertDelete` folderu powiązania jej z nowego elementu ObjectDataSource wstecz ściągający informacji o produkcie za pośrednictwem `ProductsBLL` klasy s `GetProducts()` metody.</span><span class="sxs-lookup"><span data-stu-id="b1956-131">Start by adding a FormView to the `ConfirmationOnDelete.aspx` page in the `EditInsertDelete` folder, binding it to a new ObjectDataSource that pulls back the product information via the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="b1956-132">Również skonfigurować ObjectDataSource, aby `ProductsBLL` klasy s `DeleteProduct(productID)` metody jest mapowany na ObjectDataSource s `Delete()` metody; upewnij się, że karty INSERT i UPDATE list rozwijanych są ustawione na (Brak).</span><span class="sxs-lookup"><span data-stu-id="b1956-132">Also configure the ObjectDataSource so that the `ProductsBLL` class s `DeleteProduct(productID)` method is mapped to the ObjectDataSource s `Delete()` method; ensure that the INSERT and UPDATE tabs drop-down lists are set to (None).</span></span> <span data-ttu-id="b1956-133">Na koniec pole wyboru Włącz stronicowanie w widoku FormView tag inteligentny s.</span><span class="sxs-lookup"><span data-stu-id="b1956-133">Finally, check the Enable Paging checkbox in the FormView s smart tag.</span></span>

<span data-ttu-id="b1956-134">Po wykonaniu tych kroków nowego znacznika deklaratywne s ObjectDataSource będzie wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="b1956-134">After these steps, the new ObjectDataSource s declarative markup will look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample1.aspx)]

<span data-ttu-id="b1956-135">Jak w naszych przykładach ostatnich, które nie użyto optymistycznej współbieżności, Poświęć chwilę, aby umożliwić wyczyszczenie ObjectDataSource s `OldValuesParameterFormatString` właściwości.</span><span class="sxs-lookup"><span data-stu-id="b1956-135">As in our past examples that did not use optimistic concurrency, take a moment to clear out the ObjectDataSource s `OldValuesParameterFormatString` property.</span></span>

<span data-ttu-id="b1956-136">Ponieważ powiązano kontrolki ObjectDataSource, który obsługuje tylko usunięcie FormView s `ItemTemplate` oferuje tylko przycisk Usuń, nie zawiera przyciski nowy i aktualizacji.</span><span class="sxs-lookup"><span data-stu-id="b1956-136">Since it has been bound to an ObjectDataSource control that only supports deleting, the FormView s `ItemTemplate` offers only the Delete button, lacking the New and Update buttons.</span></span> <span data-ttu-id="b1956-137">Jednak znaczników deklaratywne s FormView obejmuje zbędny `EditItemTemplate` i `InsertItemTemplate`, które mogą zostać usunięte.</span><span class="sxs-lookup"><span data-stu-id="b1956-137">The FormView s declarative markup, however, includes a superfluous `EditItemTemplate` and `InsertItemTemplate`, which can be removed.</span></span> <span data-ttu-id="b1956-138">Poświęć chwilę, aby dostosować `ItemTemplate` dlatego oznacza to pokazuje tylko podzbiór produktu pola danych.</span><span class="sxs-lookup"><span data-stu-id="b1956-138">Take a moment to customize the `ItemTemplate` so that is shows only a subset of the product data fields.</span></span> <span data-ttu-id="b1956-139">I Zapisz skonfigurowane analizę, aby wyświetlić nazwę produktu s w `<h3>` nagłówek powyżej nazwy kategorii i dostawcy (wraz z przycisku Usuń).</span><span class="sxs-lookup"><span data-stu-id="b1956-139">I ve configured mine to show the product s name in an `<h3>` heading above its supplier and category names (along with the Delete button).</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample2.aspx)]

<span data-ttu-id="b1956-140">Wprowadzone zmiany zostały funkcjonalnej strony sieci web, który umożliwia użytkownikowi przełączać się między jeden produktów w czasie, umożliwia usuwanie produktu, klikając przycisk Usuń.</span><span class="sxs-lookup"><span data-stu-id="b1956-140">With these changes, we have a fully functional web page that allows a user to toggle through the products one at a time, with the ability to delete a product by simply clicking the Delete button.</span></span> <span data-ttu-id="b1956-141">Na rysunku 2 przedstawiono zrzut ekranu: naszych postępu dotychczasowych widzianego za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="b1956-141">Figure 2 shows a screen shot of our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="b1956-142">[![FormView przedstawia informacje o jednym produkcie](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="b1956-142">[![The FormView Shows Information About a Single Product](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span></span>

<span data-ttu-id="b1956-143">**Rysunek 2**: FormView zawiera informacje o jeden produkt ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="b1956-143">**Figure 2**: The FormView Shows Information About a Single Product ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span></span>


## <a name="step-2-calling-the-confirmstring-function-from-the-delete-buttons-client-side-onclick-event"></a><span data-ttu-id="b1956-144">Krok 2: Wywoływanie confirm(string) funkcji z onclick usuń przyciski klienta zdarzeń</span><span class="sxs-lookup"><span data-stu-id="b1956-144">Step 2: Calling the confirm(string) Function from the Delete Buttons Client-Side onclick Event</span></span>

<span data-ttu-id="b1956-145">Z FormView utworzone, ostatnim krokiem jest skonfigurowanie przycisk Usuń takie że w przypadku jego s kliknięty przez obiekt odwiedzający JavaScript `confirm(string)` funkcja jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="b1956-145">With the FormView created, the final step is to configure the Delete button such that when it s clicked by the visitor, the JavaScript `confirm(string)` function is invoked.</span></span> <span data-ttu-id="b1956-146">Dodawanie skryptu po stronie klienta do przycisku, LinkButton lub ImageButton s po stronie klienta `onclick` zdarzeń można osiągnąć za pośrednictwem `OnClientClick property`, który jest nowym składnikiem programu ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="b1956-146">Adding client-side script to a Button, LinkButton, or ImageButton s client-side `onclick` event can be accomplished through the use of the `OnClientClick property`, which is new to ASP.NET 2.0.</span></span> <span data-ttu-id="b1956-147">Ponieważ chcemy mieć wartość `confirm(string)` zwrócona przez funkcję, wystarczy ustawić tę właściwość na: `return confirm('Are you certain that you want to delete this product?');`</span><span class="sxs-lookup"><span data-stu-id="b1956-147">Since we want to have the value of the `confirm(string)` function returned, simply set this property to: `return confirm('Are you certain that you want to delete this product?');`</span></span>

<span data-ttu-id="b1956-148">Po tej zmianie składni deklaratywnej s LinkButton usunąć powinien wyglądać jak:</span><span class="sxs-lookup"><span data-stu-id="b1956-148">After this change the Delete LinkButton s declarative syntax should look something like:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample3.aspx)]

<span data-ttu-id="b1956-149">Wszystkie dostępne tego s jest!</span><span class="sxs-lookup"><span data-stu-id="b1956-149">That s all there is to it!</span></span> <span data-ttu-id="b1956-150">Rysunek 3 przedstawia zrzut ekranu: potwierdzenie tej akcji.</span><span class="sxs-lookup"><span data-stu-id="b1956-150">Figure 3 shows a screen shot of this confirmation in action.</span></span> <span data-ttu-id="b1956-151">Kliknięcie przycisku Usuń powoduje wyświetlenie okna dialogowego Potwierdź.</span><span class="sxs-lookup"><span data-stu-id="b1956-151">Clicking the Delete button brings up the confirm dialog box.</span></span> <span data-ttu-id="b1956-152">Jeśli użytkownik kliknie przycisk Anuluj, ogłaszania zwrotnego zostało anulowane i produktu nie zostanie usunięta.</span><span class="sxs-lookup"><span data-stu-id="b1956-152">If the user clicks Cancel, the postback is cancelled and the product is not deleted.</span></span> <span data-ttu-id="b1956-153">Kontynuuje ogłaszania zwrotnego, jeśli jednak użytkownik kliknie przycisk OK, a ObjectDataSource s `Delete()` wywoływana jest metoda, skutkując usunięciem rekordów bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b1956-153">If, however, the user clicks OK, the postback continues and the ObjectDataSource s `Delete()` method is invoked, culminating in the database record being deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="b1956-154">Ciąg przekazany do `confirm(string)` funkcji JavaScript jest oddzielany za pomocą apostrofów (zamiast znaków cudzysłowu).</span><span class="sxs-lookup"><span data-stu-id="b1956-154">The string passed into the `confirm(string)` JavaScript function is delimited with apostrophes (rather than quotation marks).</span></span> <span data-ttu-id="b1956-155">W języku JavaScript można ograniczać ciągów za pomocą obu znaków.</span><span class="sxs-lookup"><span data-stu-id="b1956-155">In JavaScript, strings can be delimited using either character.</span></span> <span data-ttu-id="b1956-156">Używamy apostrofów tutaj, aby Ogranicznik ciągu przekazany do `confirm(string)` powstanie niejednoznaczności ogranicznikami używany do `OnClientClick` wartości właściwości.</span><span class="sxs-lookup"><span data-stu-id="b1956-156">We use apostrophes here so that the delimiters for the string passed into `confirm(string)` do not introduce an ambiguity with the delimiters used for the `OnClientClick` property value.</span></span>


<span data-ttu-id="b1956-157">[![Potwierdzenie jest teraz wyświetlany po kliknięciu przycisku Usuń.](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b1956-157">[![A Confirmation is Now Displayed When Clicking the Delete Button](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="b1956-158">**Rysunek 3**: A potwierdzenia jest teraz wyświetlany po kliknięciu przycisku przycisk Usuń ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="b1956-158">**Figure 3**: A Confirmation is Now Displayed When Clicking the Delete Button ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span></span>


## <a name="step-3-configuring-the-onclientclick-property-for-the-delete-button-in-a-commandfield"></a><span data-ttu-id="b1956-159">Krok 3: Konfigurowanie właściwość OnClientClick przycisk Usuń w elemencie CommandField</span><span class="sxs-lookup"><span data-stu-id="b1956-159">Step 3: Configuring the OnClientClick Property for the Delete Button in a CommandField</span></span>

<span data-ttu-id="b1956-160">Podczas pracy z przycisku, LinkButton lub ImageButton bezpośrednio w szablonie, okno dialogowe potwierdzenia może być skojarzony z nim po prostu konfigurując jego `OnClientClick` właściwości zwracają wyniki skryptu JavaScript `confirm(string)` funkcji.</span><span class="sxs-lookup"><span data-stu-id="b1956-160">When working with a Button, LinkButton, or ImageButton directly in a template, a confirmation dialog box can be associated with it by simply configuring its `OnClientClick` property to return the results of the JavaScript `confirm(string)` function.</span></span> <span data-ttu-id="b1956-161">Jednak nie ma CommandField, - dodająca pola usuń przyciski widoku GridView lub widoku DetailsView - `OnClientClick` właściwości, które można ustawić deklaratywnie.</span><span class="sxs-lookup"><span data-stu-id="b1956-161">However, the CommandField - which adds a field of Delete buttons to a GridView or DetailsView - does not have an `OnClientClick` property that can be set declaratively.</span></span> <span data-ttu-id="b1956-162">Zamiast tego, firma Microsoft musi programowo odwoływać się w widoku GridView lub widoku DetailsView s odpowiedni przycisk Usuń `DataBound` obsługi zdarzeń, a następnie ustawić jego `OnClientClick` właściwości.</span><span class="sxs-lookup"><span data-stu-id="b1956-162">Instead, we must programmatically reference the Delete button in the GridView or DetailsView s appropriate `DataBound` event handler, and then set its `OnClientClick` property there.</span></span>

> [!NOTE]
> <span data-ttu-id="b1956-163">Podczas ustawiania przycisk Usuń s `OnClientClick` właściwości w odpowiedniej `DataBound` program obsługi zdarzeń, będziemy mieć dostęp do danych został powiązany z bieżącym rekordem.</span><span class="sxs-lookup"><span data-stu-id="b1956-163">When setting the Delete button s `OnClientClick` property in the appropriate `DataBound` event handler, we have access to the data was bound to the current record.</span></span> <span data-ttu-id="b1956-164">Oznacza to, że firma Microsoft mogą rozszerzać komunikat potwierdzenia do zawierają szczegółowe informacje dotyczące konkretnego rekordu, takie jak "Czy na pewno chcesz usunąć produktu Chai?"</span><span class="sxs-lookup"><span data-stu-id="b1956-164">This means we can extend the confirmation message to include details about the particular record, such as, "Are you sure you want to delete the Chai product?"</span></span> <span data-ttu-id="b1956-165">Takie dostosowanie jest również w szablonach przy użyciu składni wiązania z danymi.</span><span class="sxs-lookup"><span data-stu-id="b1956-165">Such customization is also possible in templates using databinding syntax.</span></span>


<span data-ttu-id="b1956-166">Ustawienie praktyki `OnClientClick` na stronie właściwości przycisku(-ów) usuwania w elemencie CommandField, pozwalają s Dodaj element GridView.</span><span class="sxs-lookup"><span data-stu-id="b1956-166">To practice setting the `OnClientClick` property for the Delete button(s) in a CommandField, let s add a GridView to the page.</span></span> <span data-ttu-id="b1956-167">Skonfiguruj tego widoku GridView używać tej samej kontrolki ObjectDataSource, która używa FormView.</span><span class="sxs-lookup"><span data-stu-id="b1956-167">Configure this GridView to use the same ObjectDataSource control that the FormView uses.</span></span> <span data-ttu-id="b1956-168">Także ograniczać s GridView BoundFields obejmujący tylko nazwa s produktu, kategorii i dostawcy.</span><span class="sxs-lookup"><span data-stu-id="b1956-168">Also limit the GridView s BoundFields to only include the product s name, category, and supplier.</span></span> <span data-ttu-id="b1956-169">Ponadto pole wyboru Włącz usuwanie z tagów inteligentnych s widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="b1956-169">Lastly, check the Enable Deleting checkbox from the GridView s smart tag.</span></span> <span data-ttu-id="b1956-170">Spowoduje to dodanie CommandField s GridView `Columns` kolekcji z jego `ShowDeleteButton` ustawioną właściwość `true`.</span><span class="sxs-lookup"><span data-stu-id="b1956-170">This will add a CommandField to the GridView s `Columns` collection with its `ShowDeleteButton` property set to `true`.</span></span>

<span data-ttu-id="b1956-171">Po wprowadzeniu tych zmian, deklaratywne GridView znaczników w s powinna wyglądać następująco:</span><span class="sxs-lookup"><span data-stu-id="b1956-171">After making these changes, your GridView s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample4.aspx)]

<span data-ttu-id="b1956-172">CommandField zawiera pojedyncze wystąpienie usunąć LinkButton, które można uzyskać programistycznie z widoku GridView s `RowDataBound` program obsługi zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b1956-172">The CommandField contains a single Delete LinkButton instance that can be accessed programmatically from the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="b1956-173">Gdy odwołuje się do, firma Microsoft można ustawić jej `OnClientClick` właściwości odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="b1956-173">Once referenced, we can set its `OnClientClick` property accordingly.</span></span> <span data-ttu-id="b1956-174">Tworzenie procedury obsługi zdarzeń dla `RowDataBound` zdarzeń przy użyciu następującego kodu:</span><span class="sxs-lookup"><span data-stu-id="b1956-174">Create an event handler for the `RowDataBound` event using the following code:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample5.cs)]

<span data-ttu-id="b1956-175">Ten program obsługi zdarzeń współpracuje z wierszy danych, (te, które będą miały przycisk Usuń) i rozpocznie się programowo, odwołując przycisk Usuń.</span><span class="sxs-lookup"><span data-stu-id="b1956-175">This event handler works with data rows (those that will have the Delete button) and begins by programmatically referencing the Delete button.</span></span> <span data-ttu-id="b1956-176">W ogólności należy użyć następującego wzorca:</span><span class="sxs-lookup"><span data-stu-id="b1956-176">In general use the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample6.cs)]

<span data-ttu-id="b1956-177">*Właściwość ButtonType* jest typ używany przez CommandField - przycisku, LinkButton lub ImageButton przycisku.</span><span class="sxs-lookup"><span data-stu-id="b1956-177">*ButtonType* is the type of button being used by the CommandField - Button, LinkButton, or ImageButton.</span></span> <span data-ttu-id="b1956-178">Używa domyślnie LinkButtons CommandField, ale to można dostosować za pomocą CommandField s `ButtonType property`.</span><span class="sxs-lookup"><span data-stu-id="b1956-178">By default, the CommandField uses LinkButtons, but this can be customized via the CommandField s `ButtonType property`.</span></span> <span data-ttu-id="b1956-179">*CommandFieldIndex* jest indeksem porządkowym CommandField w widoku GridView s `Columns` kolekcji, podczas gdy *controlIndex* jest indeksem przycisk Usuń w elemencie CommandField s `Controls` kolekcji.</span><span class="sxs-lookup"><span data-stu-id="b1956-179">The *commandFieldIndex* is the ordinal index of the CommandField within the GridView s `Columns` collection, whereas the *controlIndex* is the index of the Delete button within the CommandField s `Controls` collection.</span></span> <span data-ttu-id="b1956-180">*ControlIndex* wartość zależy od pozycji przycisku s względem innych przycisków w elemencie CommandField.</span><span class="sxs-lookup"><span data-stu-id="b1956-180">The *controlIndex* value depends on the button s position relative to other buttons in the CommandField.</span></span> <span data-ttu-id="b1956-181">Na przykład jeśli tylko wyświetlany w elemencie CommandField przycisk przycisk Usuń, użyj indeks 0.</span><span class="sxs-lookup"><span data-stu-id="b1956-181">For example, if the only button displayed in the CommandField is the Delete button, use an index of 0.</span></span> <span data-ttu-id="b1956-182">Jeśli jednak występują przycisk edytowania poprzedzający przycisk Usuń używać indeks 2.</span><span class="sxs-lookup"><span data-stu-id="b1956-182">If, however, there s an Edit button that precedes the Delete button, use an index of 2.</span></span> <span data-ttu-id="b1956-183">Przyczyna jest używany indeks 2 jest ponieważ dwóch formantów są dodawane przez CommandField przed przycisk Usuń: przycisk Edytuj i LiteralControl tego s służy do dodawania niektórych odstępów między przyciskami edytowanie i usuwanie.</span><span class="sxs-lookup"><span data-stu-id="b1956-183">The reason an index of 2 is used is because two controls are added by the CommandField before the Delete button: the Edit button and a LiteralControl that s used to add some space between the Edit and Delete buttons.</span></span>

<span data-ttu-id="b1956-184">W naszym przykładzie określonego CommandField używa LinkButtons i Trwa pole lewej ma *commandFieldIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="b1956-184">For our particular example, the CommandField uses LinkButtons and, being the left-most field, has a *commandFieldIndex* of 0.</span></span> <span data-ttu-id="b1956-185">Ponieważ ma nie innych przycisków, ale w elemencie CommandField przycisk Usuń, używamy *controlIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="b1956-185">Since there are no other buttons but the Delete button in the CommandField, we use a *controlIndex* of 0.</span></span>

<span data-ttu-id="b1956-186">Po odwołujące się do przycisku Usuń w elemencie CommandField, możemy obok pobrania informacji o produkcie powiązany z bieżącego wiersza w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="b1956-186">After referencing the Delete button in the CommandField, we next grab information about the product bound to the current GridView row.</span></span> <span data-ttu-id="b1956-187">Na koniec ustawiliśmy na przycisku Usuń s `OnClientClick` właściwości do odpowiednich JavaScript, która zawiera nazwę produktu s.</span><span class="sxs-lookup"><span data-stu-id="b1956-187">Finally, we set the Delete button s `OnClientClick` property to the appropriate JavaScript, which includes the product s name.</span></span> <span data-ttu-id="b1956-188">Ponieważ przekazany ciąg JavaScript `confirm(string)` funkcja rozdzielana przy użyciu apostrofów możemy musi wprowadzić żadnych apostrofów, które pojawiają się w nazwie produktu s.</span><span class="sxs-lookup"><span data-stu-id="b1956-188">Since the JavaScript string passed into the `confirm(string)` function is delimited using apostrophes we must escape any apostrophes that appear within the product s name.</span></span> <span data-ttu-id="b1956-189">W szczególności wszelkie apostrofów w nazwie produktu s będą miały zmienione znaczenie z "`\'`".</span><span class="sxs-lookup"><span data-stu-id="b1956-189">In particular, any apostrophes in the product s name are escaped with "`\'`".</span></span>

<span data-ttu-id="b1956-190">Wprowadzone zmiany ukończone klikając przycisk Usuń, w oknie widoku GridView są wyświetlane okno dialogowe potwierdzenia dostosowanego pola (patrz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="b1956-190">With these changes complete, clicking on a Delete button in the GridView displays a customized confirmation dialog box (see Figure 4).</span></span> <span data-ttu-id="b1956-191">Jako z messagebox potwierdzenia z FormView, gdy użytkownik kliknie przycisk Anuluj ogłaszania zwrotnego zostało anulowane, zapobiegając w ten sposób usunięcia wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="b1956-191">As with the confirmation messagebox from the FormView, if the user clicks Cancel the postback is cancelled, thereby preventing the deletion from occurring.</span></span>

> [!NOTE]
> <span data-ttu-id="b1956-192">Ta technika mogą służyć do uzyskania programowego dostępu do przycisku Usuń w elemencie CommandField w widoku DetailsView.</span><span class="sxs-lookup"><span data-stu-id="b1956-192">This technique can also be used to programmatically access the Delete button in the CommandField in a DetailsView.</span></span> <span data-ttu-id="b1956-193">Dla widoku DetailsView, jednak d utworzyć programu obsługi zdarzeń dla `DataBound` zdarzenie, ponieważ nie ma widoku DetailsView `RowDataBound` zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="b1956-193">For the DetailsView, however, you d create an event handler for the `DataBound` event, since the DetailsView does not have a `RowDataBound` event.</span></span>


<span data-ttu-id="b1956-194">[![Kliknięcie przycisku Usuń s GridView Wyświetla okno dialogowe potwierdzenia dostosowane](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="b1956-194">[![Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span></span>

<span data-ttu-id="b1956-195">**Rysunek 4**: kliknięcie s GridView przycisk Usuń Wyświetla okno dialogowe potwierdzenia dostosowane ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="b1956-195">**Figure 4**: Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span></span>


## <a name="using-templatefields"></a><span data-ttu-id="b1956-196">Przy użyciu TemplateFields</span><span class="sxs-lookup"><span data-stu-id="b1956-196">Using TemplateFields</span></span>

<span data-ttu-id="b1956-197">Jedną z wad CommandField jest, że jej przyciski muszą być dostępne za pośrednictwem indeksowanie i że wynikowy obiekt musi być rzutowany na typ odpowiedni przycisk (przycisk, LinkButton lub ImageButton).</span><span class="sxs-lookup"><span data-stu-id="b1956-197">One of the disadvantages of the CommandField is that its buttons must be accessed through indexing and that the resulting object must be cast to the appropriate button type (Button, LinkButton, or ImageButton).</span></span> <span data-ttu-id="b1956-198">Za pomocą "Magia" i ustalony typy zaprasza problemów, które nie może odnaleźć do środowiska wykonawczego.</span><span class="sxs-lookup"><span data-stu-id="b1956-198">Using "magic numbers" and hard-coded types invites problems that cannot be discovered until runtime.</span></span> <span data-ttu-id="b1956-199">Na przykład jeśli użytkownik lub innego projektanta dodaje nowe przyciski do CommandField w pewnym momencie w przyszłości (np. przycisk Edytuj) lub zmiany `ButtonType` właściwości istniejącego kodu będzie nadal kompilować bez błędów, ale odwiedzania strony może spowodować wyjątek lub nieoczekiwanego zachowania, w zależności od tego, jak zostało zapisane kodu i jakie zmiany zostały wprowadzone.</span><span class="sxs-lookup"><span data-stu-id="b1956-199">For example, if you, or another developer, adds new buttons to the CommandField at some point in the future (such as an Edit button) or changes the `ButtonType` property, the existing code will still compile without error, but visiting the page may cause an exception or unexpected behavior, depending on how your code was written and what changes were made.</span></span>

<span data-ttu-id="b1956-200">Informacje o innym podejściu jest aby przekonwertować GridView i widoku DetailsView s CommandFields TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="b1956-200">An alternative approach is to convert the GridView and DetailsView s CommandFields into TemplateFields.</span></span> <span data-ttu-id="b1956-201">Spowoduje to wygenerowanie TemplateField z `ItemTemplate` mający LinkButton (lub przycisku lub ImageButton) dla każdego przycisku w elemencie CommandField.</span><span class="sxs-lookup"><span data-stu-id="b1956-201">This will generate a TemplateField with an `ItemTemplate` that has a LinkButton (or Button or ImageButton) for each button in the CommandField.</span></span> <span data-ttu-id="b1956-202">Tych przycisków `OnClientClick` właściwości można przypisać deklaratywnie, jak możemy był wyświetlany z FormView lub programowo dostępnych w odpowiedniej `DataBound` obsługi zdarzeń przy użyciu następującego wzorca:</span><span class="sxs-lookup"><span data-stu-id="b1956-202">These buttons `OnClientClick` properties can be assigned declaratively, as we saw with the FormView, or can be programmatically accessed in the appropriate `DataBound` event handler using the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample7.cs)]

<span data-ttu-id="b1956-203">Gdzie *controlID* jest wartość przycisku s `ID` właściwości.</span><span class="sxs-lookup"><span data-stu-id="b1956-203">Where *controlID* is the value of the button s `ID` property.</span></span> <span data-ttu-id="b1956-204">Podczas tego wzorca nadal wymaga typu ustalony rzutowanie, eliminuje konieczność indeksowania, co pozwala na układu zmienić powodowała błąd w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="b1956-204">While this pattern still requires a hard-coded type for the cast, it removes the need for indexing, allowing for the layout to change without resulting in a runtime error.</span></span>

## <a name="summary"></a><span data-ttu-id="b1956-205">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="b1956-205">Summary</span></span>

<span data-ttu-id="b1956-206">Kod JavaScript `confirm(string)` funkcja jest często używane techniki kontroli przepływu pracy przesyłania formularza.</span><span class="sxs-lookup"><span data-stu-id="b1956-206">The JavaScript `confirm(string)` function is a commonly used technique for controlling form submission workflow.</span></span> <span data-ttu-id="b1956-207">Podczas wykonywania funkcji Wyświetla okno dialogowe modalne, po stronie klienta, którego obejmuje dwa przyciski OK i Anuluj.</span><span class="sxs-lookup"><span data-stu-id="b1956-207">When executed, the function displays a modal, client-side dialog box that includes two buttons, OK and Cancel.</span></span> <span data-ttu-id="b1956-208">Jeśli użytkownik kliknie przycisk OK, `confirm(string)` funkcja zwraca `true`; kliknięcie przycisku Anuluj zwraca `false`.</span><span class="sxs-lookup"><span data-stu-id="b1956-208">If the user clicks OK, the `confirm(string)` function returns `true`; clicking Cancel returns `false`.</span></span> <span data-ttu-id="b1956-209">Ta funkcja jest połączone z zachowanie przeglądarki s, aby anulować przesyłania formularza, jeśli program obsługi zdarzeń podczas procesu przesyłania zwraca `false`, można użyć do wyświetlenia messagebox potwierdzenia podczas usuwania rekordu.</span><span class="sxs-lookup"><span data-stu-id="b1956-209">This functionality, coupled with a browser s behavior to cancel a form submission if an event handler during the submission process returns `false`, can be used to display a confirmation messagebox when deleting a record.</span></span>

<span data-ttu-id="b1956-210">`confirm(string)` Funkcja może być skojarzony z sieci Web przycisk formantu s po stronie klienta `onclick` obsługi zdarzeń za pomocą formantu s `OnClientClick` właściwości.</span><span class="sxs-lookup"><span data-stu-id="b1956-210">The `confirm(string)` function can be associated with a Button Web control s client-side `onclick` event handler through the control s `OnClientClick` property.</span></span> <span data-ttu-id="b1956-211">Podczas pracy z przycisk Usuń, w szablonie — albo w jednym z szablonów s FormView lub TemplateField w widoku DetailsView lub widoku GridView — tej właściwości można ustawić deklaratywnie lub programowo, jak widzieliśmy w tym samouczku.</span><span class="sxs-lookup"><span data-stu-id="b1956-211">When working with a Delete button in a template - either in one of the FormView s templates or in a TemplateField in the DetailsView or GridView - this property can be set either declaratively or programmatically, as we saw in this tutorial.</span></span>

<span data-ttu-id="b1956-212">Programowanie przyjemność!</span><span class="sxs-lookup"><span data-stu-id="b1956-212">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="b1956-213">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="b1956-213">About the Author</span></span>

<span data-ttu-id="b1956-214">[Scott Bento](http://www.4guysfromrolla.com/ScottMitchell.shtml), autora siedmiu książek ASP/ASP.NET i twórcę z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje z technologii Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="b1956-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b1956-215">Scott działa jako niezależnego konsultanta trainer i składnika zapisywania.</span><span class="sxs-lookup"><span data-stu-id="b1956-215">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b1956-216">Jest jego najnowszej książki [ *Sams nauczyć się ASP.NET 2.0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b1956-216">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="b1956-217">Piotr można uzyskać pod adresem [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) lub za pośrednictwem jego blog, który znajduje się w temacie [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="b1956-217">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b1956-218">[Poprzednie](implementing-optimistic-concurrency-cs.md)
> [dalej](limiting-data-modification-functionality-based-on-the-user-cs.md)</span><span class="sxs-lookup"><span data-stu-id="b1956-218">[Previous](implementing-optimistic-concurrency-cs.md)
[Next](limiting-data-modification-functionality-based-on-the-user-cs.md)</span></span>
