---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-cs
title: "Konfigurowanie aplikacji sieci Web produkcji do użycia w produkcyjnej bazie danych (C#) | Dokumentacja firmy Microsoft"
author: rick-anderson
description: "Zgodnie z opisem w starszych samouczki, nie jest rzadko informacje dotyczące konfiguracji mogą się różnić między środowisk projektowania i produkcji. Jest to es..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: 0177dabd-d888-449f-91b2-24190cf5e842
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-cs
msc.type: authoredcontent
ms.openlocfilehash: 21eac6a4d829795f02eeeca5f9870b1ab8132d08
ms.sourcegitcommit: 493a215355576cfa481773365de021bcf04bb9c7
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/15/2018
---
<a name="configuring-the-production-web-application-to-use-the-production-database-c"></a><span data-ttu-id="e797e-104">Konfigurowanie aplikacji sieci Web produkcji do użycia w produkcyjnej bazie danych (C#)</span><span class="sxs-lookup"><span data-stu-id="e797e-104">Configuring the Production Web Application to Use the Production Database (C#)</span></span>
====================
<span data-ttu-id="e797e-105">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e797e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e797e-106">[Pobierz kod](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_CS.zip) lub [pobierania plików PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="e797e-106">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_cs.pdf)</span></span>

> <span data-ttu-id="e797e-107">Zgodnie z opisem w starszych samouczki, nie jest rzadko informacje dotyczące konfiguracji mogą się różnić między środowisk projektowania i produkcji.</span><span class="sxs-lookup"><span data-stu-id="e797e-107">As discussed in earlier tutorials, it is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="e797e-108">Jest to szczególnie ważne w przypadku aplikacji opartej na danych w sieci web, jako parametry połączenia bazy danych różnią się środowisk projektowania i produkcji.</span><span class="sxs-lookup"><span data-stu-id="e797e-108">This is especially true for data-driven web applications, as the database connection strings differ between the development and production environments.</span></span> <span data-ttu-id="e797e-109">W tym samouczku opisuje sposoby konfigurowania środowiska produkcyjnego, aby dołączyć odpowiednie parametry bardziej szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="e797e-109">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>


## <a name="introduction"></a><span data-ttu-id="e797e-110">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="e797e-110">Introduction</span></span>

<span data-ttu-id="e797e-111">Oparte na danych aplikacji sieci web zwykle używać innej bazy danych w przypadku rozwoju niż w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e797e-111">Data-driven web applications usually use a different database when in development than when in production.</span></span> <span data-ttu-id="e797e-112">W przypadku aplikacji obsługiwanych przez dostawcę hosta sieci web i opracowany lokalnie projektowej bazie danych zazwyczaj znajduje się na komputerze dewelopera s podczas produkcyjnej bazy danych jest hostowany na serwerze bazy danych w zakładzie s firmy hostingu.</span><span class="sxs-lookup"><span data-stu-id="e797e-112">For applications hosted by a web host provider and developed locally, the development database typically resides on the developer s computer while the production database is hosted on a database server at the web hosting company s facility.</span></span> <span data-ttu-id="e797e-113">Wdrażanie aplikacji sieci web opartych na danych pociąga za sobą kopiowanie programowanie bazy danych na serwerze bazy danych w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e797e-113">Deploying a data-driven web application entails copying the development database to the production database server.</span></span> <span data-ttu-id="e797e-114">W poprzednich instrukcji analizujemy sposobów, aby wykonać ten krok.</span><span class="sxs-lookup"><span data-stu-id="e797e-114">In the previous tutorial we looked at ways to accomplish this step.</span></span>

<span data-ttu-id="e797e-115">Aplikacja sieci web używa informacji w *ciąg połączenia* nawiązać połączenia z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="e797e-115">The web application uses the information in a *connection string* to establish a connection with the database.</span></span> <span data-ttu-id="e797e-116">Ciąg połączenia, który zazwyczaj znajduje się w `Web.config`, określa nazwę serwera bazy danych, nazwy bazy danych, kontekstu zabezpieczeń i inne informacje.</span><span class="sxs-lookup"><span data-stu-id="e797e-116">The connection string, which is typically stored in `Web.config`, specifies the database server name, the name of the database, the security context, and other information.</span></span> <span data-ttu-id="e797e-117">Ponieważ bazy danych używanej przez aplikację sieci web, zależy od tego, czy aplikacja sieci web działa w środowiskach rozwoju lub produkcji, parametry połączenia musi się różnić między dwoma środowiskami.</span><span class="sxs-lookup"><span data-stu-id="e797e-117">Because the database used by the web application depends on whether the web application is running in the development or production environments, the connection strings must differ between the two environments.</span></span>

<span data-ttu-id="e797e-118">Nie jest rzadko informacje dotyczące konfiguracji mogą się różnić między środowisk projektowania i produkcji.</span><span class="sxs-lookup"><span data-stu-id="e797e-118">It is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="e797e-119">*Typowych konfiguracji różnice między rozwoju i produkcji* samouczku omówiono techniki do przechowywania informacji konfiguracyjnych oddzielne między tych dwóch środowisk, jak również krótkie omówienie na Parametry połączenia bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e797e-119">The *Common Configuration Differences Between Development and Production* tutorial discussed techniques for maintaining separate configuration information between these two environments, as well as a brief discussion on database connection strings.</span></span> <span data-ttu-id="e797e-120">W tym samouczku opisuje sposoby konfigurowania środowiska produkcyjnego, aby dołączyć odpowiednie parametry bardziej szczegółowo.</span><span class="sxs-lookup"><span data-stu-id="e797e-120">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="examining-the-connection-string-information"></a><span data-ttu-id="e797e-121">Badanie informacji o ciągu połączenia</span><span class="sxs-lookup"><span data-stu-id="e797e-121">Examining the Connection String Information</span></span>

<span data-ttu-id="e797e-122">Ciąg połączenia używany przez aplikację sieci web przeglądami książki są przechowywane w pliku konfiguracyjnym aplikacji s `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="e797e-122">The connection string used by the Book Reviews web application is stored in the application s configuration file, `Web.config`.</span></span> <span data-ttu-id="e797e-123">`Web.config` zawiera sekcja specjalne przechowywanie parametrów połączenia, aptly o nazwie [ &lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span><span class="sxs-lookup"><span data-stu-id="e797e-123">`Web.config` includes a special section for storing connection strings, aptly named [&lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span></span> <span data-ttu-id="e797e-124">`Web.config` Plik przeglądami książki witryny sieci Web ma jeden ciąg połączenia zdefiniowane w tej sekcji o nazwie `ReviewsConnectionString`:</span><span class="sxs-lookup"><span data-stu-id="e797e-124">The `Web.config` file for the Book Reviews website has one connection string defined in this section named `ReviewsConnectionString`:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-cs/samples/sample1.xml)]

<span data-ttu-id="e797e-125">Parametry połączenia — źródło danych =. \SQLEXPRESS; AttachDbFilename = | Zabezpieczenia DataDirectory|\Reviews.mdf;Integrated = True; Wystąpienia użytkownika = True — składa się z wielu opcji i wartości, z par opcji i wartości rozdzielane średnikami i każdej opcji i wartość ograniczonej przez znak równości.</span><span class="sxs-lookup"><span data-stu-id="e797e-125">The connection string - Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Reviews.mdf;Integrated Security=True;User Instance=True - is composed of a number of options and values, with option/value pairs delimited by a semicolon and each option and value delimited by an equals sign.</span></span> <span data-ttu-id="e797e-126">Są cztery opcje używane w tym ciągu połączenia:</span><span class="sxs-lookup"><span data-stu-id="e797e-126">The four options used in this connection string are:</span></span>

- <span data-ttu-id="e797e-127">`Data Source` -Określa lokalizację serwera bazy danych i nazwa wystąpienia serwera bazy danych (jeżeli istniał).</span><span class="sxs-lookup"><span data-stu-id="e797e-127">`Data Source` - specifies the location of the database server and the database server instance name (if any).</span></span> <span data-ttu-id="e797e-128">Wartość, `.\SQLEXPRESS`, jest na przykład w przypadku, gdy istnieje serwer bazy danych i nazwę wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="e797e-128">The value, `.\SQLEXPRESS`, is an example where there is a database server and an instance name.</span></span> <span data-ttu-id="e797e-129">Okres określa, że serwer bazy danych na tym samym komputerze jako aplikacji; Nazwa wystąpienia jest `SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="e797e-129">The period specifies that the database server is on the same computer as the application; the instance name is `SQLEXPRESS`.</span></span>
- <span data-ttu-id="e797e-130">`AttachDbFilename` -Określa lokalizację plików bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e797e-130">`AttachDbFilename` - specifies the location of the database file.</span></span> <span data-ttu-id="e797e-131">Wartość zawiera symbol zastępczy `|DataDirectory|`, który został rozwiązany na pełną ścieżkę aplikacji s `App_Data` folderu w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="e797e-131">The value contains the placeholder `|DataDirectory|`, which is resolved to the full path of the application s `App_Data` folder at runtime.</span></span>
- <span data-ttu-id="e797e-132">`Integrated Security` — wartość logiczna, która wskazuje, czy należy użyć określonej nazwy użytkownika i hasła podczas nawiązywania połączenia bazy danych (FAŁSZ) lub Windows bieżące poświadczenia konta (PRAWDA).</span><span class="sxs-lookup"><span data-stu-id="e797e-132">`Integrated Security` - a Boolean value that indicates whether to use a specified username/password when connecting to the database (false) or the current Windows account credentials (true).</span></span>
- <span data-ttu-id="e797e-133">`User Instance` -Opcja konfiguracji specyficznych dla wersji SQL Server Express Edition, która wskazuje, czy zezwolić na użytkowników innych niż administracyjne na komputerze lokalnym podłączyć a bazą danych programu SQL Server Express Edition.</span><span class="sxs-lookup"><span data-stu-id="e797e-133">`User Instance` - a configuration option specific to the SQL Server Express Editions that indicates whether to allow non-Administrative users on the local computer attach and connect to a SQL Server Express Edition database.</span></span> <span data-ttu-id="e797e-134">Zobacz [wystąpienia programu SQL Server Express użytkownika](https://msdn.microsoft.com/library/ms254504.aspx) Aby uzyskać więcej informacji na temat tego ustawienia.</span><span class="sxs-lookup"><span data-stu-id="e797e-134">See [SQL Server Express User Instances](https://msdn.microsoft.com/library/ms254504.aspx) for more information on this setting.</span></span>
  

<span data-ttu-id="e797e-135">Opcje ciąg połączenia dopuszczalny zależą od bazy danych, z którym nawiązujesz połączenie, aby i używany dostawca bazy danych programu ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="e797e-135">The allowable connection string options depend on the database you are connecting to and the ADO.NET database provider being used.</span></span> <span data-ttu-id="e797e-136">Na przykład parametry połączenia do nawiązywania połączenia z programu Microsoft SQL Server bazy danych jest inny niż używany do nawiązania połączenia z bazą danych Oracle.</span><span class="sxs-lookup"><span data-stu-id="e797e-136">For example, the connection string for connecting to a Microsoft SQL Server database differs from that used to connect to an Oracle database.</span></span> <span data-ttu-id="e797e-137">Podobnie nawiązywanie połączenia z bazą danych programu Microsoft SQL Server przy użyciu dostawcy SqlClient używa parametrów połączenia innego niż przy użyciu dostawcy OLE DB.</span><span class="sxs-lookup"><span data-stu-id="e797e-137">Likewise, connecting to a Microsoft SQL Server database using the SqlClient provider uses a different connection string than when using the OLE-DB provider.</span></span>

<span data-ttu-id="e797e-138">Parametry połączenia bazy danych można tworzyć ręcznie za pomocą witryny, takie jak [ConnectionStrings.com](http://www.connectionstrings.com/) jako zasób dla jakie opcje są dostępne.</span><span class="sxs-lookup"><span data-stu-id="e797e-138">You can build the database connection string by hand using a site like [ConnectionStrings.com](http://www.connectionstrings.com/) as a resource for what options are available.</span></span> <span data-ttu-id="e797e-139">Łatwiejsze podejście jest jednak dodać bazy danych do Eksploratora serwera w programie Visual Studio, a następnie do pobrania parametrów połączenia z okna właściwości.</span><span class="sxs-lookup"><span data-stu-id="e797e-139">However, an easier approach is to add the database to the Server Explorer in Visual Studio and then to grab the connection string from the Properties window.</span></span> <span data-ttu-id="e797e-140">Let s użyć tej metody to drugie konstruowania parametry połączenia z serwerem bazy danych w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e797e-140">Let s use this latter technique for constructing the connection string to the production database server.</span></span>

<span data-ttu-id="e797e-141">Otwórz program Visual Studio, a następnie przejdź do okna Eksploratora serwera (w programie Visual Web Developer, to okno jest nazywane Eksploratora bazy danych).</span><span class="sxs-lookup"><span data-stu-id="e797e-141">Open Visual Studio and then navigate to the Server Explorer window (in Visual Web Developer, this window is called Database Explorer).</span></span> <span data-ttu-id="e797e-142">Kliknij prawym przyciskiem myszy opcję połączenia danych i wybierz opcję Dodaj połączenie z menu kontekstowego.</span><span class="sxs-lookup"><span data-stu-id="e797e-142">Right-click on the Data Connections option and choose the Add Connection option from the context menu.</span></span> <span data-ttu-id="e797e-143">Spowoduje to wyświetlenie kreatora pokazany na rysunku 1.</span><span class="sxs-lookup"><span data-stu-id="e797e-143">This brings up the wizard shown in Figure 1.</span></span> <span data-ttu-id="e797e-144">Wybierz odpowiednie źródło danych, a następnie kliknij przycisk Kontynuuj.</span><span class="sxs-lookup"><span data-stu-id="e797e-144">Choose the appropriate data source and click Continue.</span></span>


<span data-ttu-id="e797e-145">[![Wybierz dodać nową bazę danych do Eksploratora serwera](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="e797e-145">[![Choose to Add a New Database to the Server Explorer](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image1.jpg)</span></span> 

<span data-ttu-id="e797e-146">**Rysunek 1**: Wybierz dodać nową bazę danych do Eksploratora serwera ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="e797e-146">**Figure 1**: Choose to Add a New Database to the Server Explorer ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="e797e-147">Następnie określ różne bazy danych informacji o połączeniu (patrz rysunek 2).</span><span class="sxs-lookup"><span data-stu-id="e797e-147">Next, specify the various database connection information (see Figure 2).</span></span> <span data-ttu-id="e797e-148">Po utworzeniu konta z sieci web hosting firma, którą należy podać informacje na temat połączenia z bazą danych — nazwa serwera bazy danych, nazwy bazy danych, nazwę użytkownika i hasło używane do łączenia z bazą danych i tak dalej.</span><span class="sxs-lookup"><span data-stu-id="e797e-148">When you signed up with your web hosting company they should have provided information on how to connect to the database - the database server name, the database name, the username and password to use to connect to the database, and so on.</span></span> <span data-ttu-id="e797e-149">Po wprowadzeniu tych informacji kliknij przycisk OK, aby zakończyć działanie kreatora i Dodaj bazy danych do Eksploratora serwera.</span><span class="sxs-lookup"><span data-stu-id="e797e-149">After entering this information click OK to complete this wizard and to add the database to the Server Explorer.</span></span>


<span data-ttu-id="e797e-150">[![Określ informacje dotyczące połączenia bazy danych](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="e797e-150">[![Specify the Database Connection Information](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image4.jpg)</span></span> 

<span data-ttu-id="e797e-151">**Rysunek 2**: Określ informacje dotyczące połączenia bazy danych ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="e797e-151">**Figure 2**: Specify the Database Connection Information ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="e797e-152">Środowisko produkcyjną bazę danych powinien być teraz wyświetlany w Eksploratorze serwera.</span><span class="sxs-lookup"><span data-stu-id="e797e-152">The production environment database should now be listed in the Server Explorer.</span></span> <span data-ttu-id="e797e-153">Wybierz bazę danych z poziomu Eksploratora serwera, a następnie przejdź do okna właściwości.</span><span class="sxs-lookup"><span data-stu-id="e797e-153">Select the database from the Server Explorer and go to the Properties window.</span></span> <span data-ttu-id="e797e-154">Można znaleźć właściwości o nazwie parametrów połączenia parametrami połączenia s bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e797e-154">There you will find a property named Connection String with the database s connection string.</span></span> <span data-ttu-id="e797e-155">Przy założeniu, że używasz bazy danych programu Microsoft SQL Server w środowisku produkcyjnym i dostawca SqlClient parametrów połączenia powinien wyglądać podobnie do następującego:</span><span class="sxs-lookup"><span data-stu-id="e797e-155">Assuming you are using a Microsoft SQL Server database on production and the SqlClient provider your connection string should look similar to the following:</span></span>

<span data-ttu-id="e797e-156">**Źródło danych =*serverName*; Wykaz początkowy =*databaseName*; Utrzymuj informacje o zabezpieczeniach = True; Nazwa użytkownika =*username*; Hasło = * hasła***</span><span class="sxs-lookup"><span data-stu-id="e797e-156">**Data Source=*serverName*; Initial Catalog=*databaseName*; Persist Security Info=True; User ID=*username*; Password=*password***</span></span>

<span data-ttu-id="e797e-157">Gdzie *serverName*, *databaseName*, *username*, i *hasło* są wartościami dla nazwy serwera bazy danych, bazy danych Nazwa, nazwę użytkownika i hasło dostarczonych przez firmę hosta sieci web.</span><span class="sxs-lookup"><span data-stu-id="e797e-157">Where *serverName*, *databaseName*, *username*, and *password* are with the values for the database server name, the database name, and the username and password supplied to you by your web host company.</span></span>

## <a name="deploying-the-book-reviews-web-application"></a><span data-ttu-id="e797e-158">Wdrażanie aplikacji sieci Web przeglądami książki</span><span class="sxs-lookup"><span data-stu-id="e797e-158">Deploying the Book Reviews Web Application</span></span>

<span data-ttu-id="e797e-159">Poprzedni Samouczek przeprowadził przez kopiowanie programowanie bazy danych do środowiska produkcyjnego, ale nie Eksploruj wdrażanie aplikacji opartych na danych.</span><span class="sxs-lookup"><span data-stu-id="e797e-159">The preceding tutorial stepped through copying the development database to the production environment, but did not explore deploying the data-driven application.</span></span> <span data-ttu-id="e797e-160">W tym momencie środowiska produkcyjnego zawiera bazę danych, ale korzysta z statycznych przeglądami wersja aplikacji sprawdza książki.</span><span class="sxs-lookup"><span data-stu-id="e797e-160">At this point the production environment contains the database but is using the version of the Book Reviews application with static reviews.</span></span> <span data-ttu-id="e797e-161">Należy wdrożyć aplikację nowych, opartych na danych na serwerze produkcyjnym wraz z informacjami zaktualizowanej konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e797e-161">We need to deploy the new, data-driven application to the production server along with the updated configuration information.</span></span>

<span data-ttu-id="e797e-162">Poświęć chwilę na wdrażanie aplikacji opartych na danych z Środowisko deweloperskie do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="e797e-162">Take a moment to deploy the data-driven application from the development environment to production.</span></span> <span data-ttu-id="e797e-163">Ten proces została omówiona szczegółowo w poprzednim samouczki.</span><span class="sxs-lookup"><span data-stu-id="e797e-163">This process was covered in detail in previous tutorials.</span></span> <span data-ttu-id="e797e-164">Jeśli potrzebujesz odświeżacz zobacz *Wdrażanie witryny sieci Web przy użyciu klienta FTP* lub *wdrażanie Your witryny sieci Web przy użyciu programu Visual Studio* samouczki.</span><span class="sxs-lookup"><span data-stu-id="e797e-164">If you need a refresher, see the *Deploying Your Website Using an FTP Client* or the *Deploying Your Website Using Visual Studio* tutorials.</span></span> <span data-ttu-id="e797e-165">Należy się upewnić, że parametry połączenia bazy danych produkcyjnych jest używane w środowisku produkcyjnym, co oznacza, że alternatywnym `Web.config` plik zostanie wdrożony.</span><span class="sxs-lookup"><span data-stu-id="e797e-165">You will need to ensure that the production database connection string is the one used in the production environment, which means that an alternate `Web.config` file must be deployed.</span></span> <span data-ttu-id="e797e-166">W szczególności zmodyfikowane `Web.config` pliku s `<connectionStrings>` element musi zawierać ciąg połączenia bazy danych w środowisku produkcyjnym i powinien być podobny do następującego:</span><span class="sxs-lookup"><span data-stu-id="e797e-166">Specifically, this modified `Web.config` file s `<connectionStrings>` element needs to contain the production database connection string and should look similar to the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-cs/samples/sample2.xml)]

<span data-ttu-id="e797e-167">Należy pamiętać, że ciąg połączenia w `<connectionStrings>` jest taką samą nazwę elementu (`ReviewsConnectionString`), ale teraz zawiera parametry połączenia bazy danych produkcyjnej zamiast tworzenia ciągu połączenia bazy danych.</span><span class="sxs-lookup"><span data-stu-id="e797e-167">Note that the connection string in the `<connectionStrings>` element is named the same (`ReviewsConnectionString`), but now contains the production database connection string instead of the development database connection string.</span></span>

<span data-ttu-id="e797e-168">Jeśli nie masz więcej formalny przepływ pracy wdrażania, albo ręcznie zmodyfikować `Web.config` plików do używania ciągu połączenia bazy danych produkcyjnej przed wdrożeniem (Pamiętaj o tym przywrócić go przy użyciu parametrów połączenia bazy danych programowanie później) lub obsługa oddzielnej `Web.config` plik z informacjami konfiguracji środowiska produkcyjnego, który pobiera przekazany do środowiska produkcyjnego w ramach procesu wdrażania.</span><span class="sxs-lookup"><span data-stu-id="e797e-168">Unless you have a more formalized deployment workflow, either manually modify the `Web.config` file to use the production database connection string before deploying (remembering to revert it back to using the development database connection string afterwards) or maintain a separate `Web.config` file with the production environment configuration information that gets uploaded to the production environment as part of the deployment process.</span></span>

> [!NOTE]
> <span data-ttu-id="e797e-169">Jeśli przypadkowo wdrożono `Web.config` plik zawierający parametry połączenia bazy danych programowanie będą wystąpił błąd podczas próby połączenia z bazą danych aplikacji w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e797e-169">If you accidentally deploy a `Web.config` file that contains the development database connection string then there will be an error when the application on production attempts to connect to the database.</span></span> <span data-ttu-id="e797e-170">Ten błąd manifesty jako `SqlException` komunikatem raportowania, że serwer nie został znaleziony lub był niedostępny.</span><span class="sxs-lookup"><span data-stu-id="e797e-170">This error manifests as a `SqlException` with a message reporting that the server was not found or was not accessible.</span></span>


<span data-ttu-id="e797e-171">Po stronie został wdrożony w środowisku produkcyjnym, odwiedź witrynę produkcji za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="e797e-171">Once the site has been deployed to production, visit the production site through your browser.</span></span> <span data-ttu-id="e797e-172">Powinni widzieć i korzystać z tego samego środowiska użytkownika jako podczas uruchamiania lokalnego aplikacji opartych na danych.</span><span class="sxs-lookup"><span data-stu-id="e797e-172">You should see and enjoy the same user experience as when running the data-driven application locally.</span></span> <span data-ttu-id="e797e-173">Oczywiście po odwiedzeniu witryny sieci Web w środowisku produkcyjnym lokacji jest obsługiwany przez serwer bazy danych produkcyjnej, należy odwiedzić witrynę sieci Web w środowisku programistycznym używa bazy danych do rozwoju.</span><span class="sxs-lookup"><span data-stu-id="e797e-173">Of course when you visit the website on production the site is powered by the production database server, whereas visiting the website in the development environment uses the database in development.</span></span> <span data-ttu-id="e797e-174">Rysunek 3 przedstawia *nauczyć się ASP.NET 3.5 w ciągu 24 godzin* znajdziesz na stronie z witryny sieci Web w środowisku produkcyjnym (trzeba zauważyć adres URL na pasku adresu przeglądarki s).</span><span class="sxs-lookup"><span data-stu-id="e797e-174">Figure 3 shows the *Teach Yourself ASP.NET 3.5 in 24 Hours* review page from the website in the production environment (note the URL in the browser s Address bar).</span></span>


<span data-ttu-id="e797e-175">[![Data-driven aplikacji jest teraz dostępna w środowisku produkcyjnym!](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="e797e-175">[![The Data-Driven Application is Now Available On Production!](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image7.jpg)</span></span> 

<span data-ttu-id="e797e-176">**Rysunek 3**: The Data-Driven aplikacja jest teraz dostępna w środowisku produkcyjnym!</span><span class="sxs-lookup"><span data-stu-id="e797e-176">**Figure 3**: The Data-Driven Application is Now Available On Production!</span></span> <span data-ttu-id="e797e-177">([Kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="e797e-177">([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image9.jpg))</span></span>


### <a name="storing-connection-strings-in-a-separate-configuration-file"></a><span data-ttu-id="e797e-178">Przechowywanie parametrów połączenia w pliku konfiguracji oddzielne</span><span class="sxs-lookup"><span data-stu-id="e797e-178">Storing Connection Strings in a Separate Configuration File</span></span>

<span data-ttu-id="e797e-179">Typowe techniki do przechowywania informacji dotyczących środowiska projektowania i produkcji oddzielnych konfiguracji ma dwie wersje `Web.config`: jeden dla środowiska programowania i jeden w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e797e-179">A common technique for maintaining separate configuration information on the development and production environments is to have two versions of the `Web.config`: one for the development environment and one for production.</span></span> <span data-ttu-id="e797e-180">W czasie wdrażania odpowiednie `Web.config` wersji mogą zostać skopiowane do środowiska produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="e797e-180">At deploy-time the appropriate `Web.config` version can be copied to the production environment.</span></span> <span data-ttu-id="e797e-181">W idealnym przypadku tego procesu będzie można zautomatyzować jako część przepływu pracy wdrażania.</span><span class="sxs-lookup"><span data-stu-id="e797e-181">Ideally, this process would be automated as part of the deployment workflow.</span></span>

<span data-ttu-id="e797e-182">Zamiast utrzymania dwa oddzielne `Web.config` plików można, opcjonalnie, podaj bardziej szczegółowego różnice.</span><span class="sxs-lookup"><span data-stu-id="e797e-182">Instead of maintaining two separate `Web.config` files you can, optionally, provide more granular differences.</span></span> <span data-ttu-id="e797e-183">Elementy wchodzące w skład `Web.config` plików można zdefiniować w plikach konfiguracji zewnętrznych, które są następnie używane w `Web.config` pliku.</span><span class="sxs-lookup"><span data-stu-id="e797e-183">The elements that make up the `Web.config` file can be defined in an external configuration files that are then referenced in the `Web.config` file.</span></span> <span data-ttu-id="e797e-184">Mówiąc ma `Web.config` pliku dla obu środowiskach, które odwołuje się do pliku databaseConnectionStrings.config, który zawiera parametry połączenia używane przez aplikację, a będzie unikatowy dla każdego środowiska.</span><span class="sxs-lookup"><span data-stu-id="e797e-184">In a nutshell you can have one `Web.config` file for both environments that references a databaseConnectionStrings.config file, which would contain the connection strings used by the application and would be unique for each environment.</span></span> <span data-ttu-id="e797e-185">Można znaleźć, aby rozdzielić różne informacje o konfiguracji do oddzielnych plików zawiera pisma odręcznego i łatwiejsze `Web.config` plików i inne wyraźnie opisano różnice środowisk projektowania i produkcji w konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="e797e-185">I find that separating the differing configuration information into separate files provides a tidier and simpler `Web.config` file and more clearly outlines the configuration differences between the development and production environments.</span></span>

<span data-ttu-id="e797e-186">Aby użyć tej metody, Rozpocznij od utworzenia nowego folderu w aplikacji sieci web o nazwie `ConfigSections`.</span><span class="sxs-lookup"><span data-stu-id="e797e-186">To use this technique, start by creating a new folder in the web application named `ConfigSections`.</span></span> <span data-ttu-id="e797e-187">Następnie dodaj dwa pliki w tym nowym folderze o nazwie databaseConnectionStrings.dev.config i databaseConnectionStrings.production.config. Następnie skopiuj `<connectionStrings>` element z `Web.config` w plikach databaseConnectionStrings.dev.config i databaseConnectionStrings.production.config, a następnie zmodyfikuj parametry połączenia w databaseConnectionStrings.production.config plików, dzięki czemu określa parametry połączenia bazy danych w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e797e-187">Next, add two files to this new folder named databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config. Next, copy the `<connectionStrings>` element from `Web.config` into the databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files, and then modify the connection string in the databaseConnectionStrings.production.config file so that it specifies the production database connection string.</span></span> <span data-ttu-id="e797e-188">Na przykład plik databaseConnectionStrings.dev.config powinien zawierać tylko `<connectionStrings>` elementu przy użyciu parametrów połączenia, który odwołuje się do rozwoju bazy danych:</span><span class="sxs-lookup"><span data-stu-id="e797e-188">For example, the databaseConnectionStrings.dev.config file should contain just the `<connectionStrings>` element with a connection string that references the development database:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-cs/samples/sample3.xml)]

<span data-ttu-id="e797e-189">Podobnie, plik databaseConnectionStrings.production.config powinien zawierać tylko `<connectionStrings>` elementu, ale taki, który ma parametry połączenia bazy danych w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="e797e-189">Similarly, the databaseConnectionStrings.production.config file should contain just a `<connectionStrings>` element, but one that has the production database connection string.</span></span>

<span data-ttu-id="e797e-190">Utwórz kopię pliku databaseConnectionStrings.dev.config i nadaj mu nazwę databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="e797e-190">Make a copy of the databaseConnectionStrings.dev.config file and name it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="e797e-191">Można nazwę pliku konfiguracji inną niż databaseConnectionStrings.config, opcjonalnie d, takich jak `connectionStrings.config` lub `dbInfo.config`.</span><span class="sxs-lookup"><span data-stu-id="e797e-191">You can name the configuration file something other than databaseConnectionStrings.config, if you d like, such as `connectionStrings.config` or `dbInfo.config`.</span></span> <span data-ttu-id="e797e-192">Jednak pamiętaj nazwy pliku z `.config` rozszerzenia jako `.config` pliki domyślnie nie obsługiwane przez aparat programu ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e797e-192">However, be sure to name the file with a `.config` extension as `.config` files are, by default, not served by the ASP.NET engine.</span></span> <span data-ttu-id="e797e-193">Jeśli nazwa pliku, czegoś innego, takich jak `connectionStrings.txt`, użytkownik może punktu przeglądarki do [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) i sprawdź zawartość pliku!</span><span class="sxs-lookup"><span data-stu-id="e797e-193">If you name the file something else, like `connectionStrings.txt`, a user could point their browser to [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) and view the contents of the file!</span></span>


<span data-ttu-id="e797e-194">W tym momencie `ConfigSections` folder powinien zawierać trzy pliki (patrz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="e797e-194">At this point the `ConfigSections` folder should contain three files (see Figure 4).</span></span> <span data-ttu-id="e797e-195">Pliki databaseConnectionStrings.dev.config i databaseConnectionStrings.production.config zawierają ciągi połączenia dla środowisk projektowania i produkcji, odpowiednio.</span><span class="sxs-lookup"><span data-stu-id="e797e-195">The databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files contain the connection strings for the development and production environments, respectively.</span></span> <span data-ttu-id="e797e-196">Plik databaseConnectionStrings.config zawiera informacje o parametrach połączenia, który będzie używany przez aplikację sieci web w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="e797e-196">The databaseConnectionStrings.config file contains the connection string information that will be used by the web application at runtime.</span></span> <span data-ttu-id="e797e-197">W rezultacie pliku databaseConnectionStrings.config powinny być identyczne z pliku databaseConnectionStrings.dev.config w środowisku programistycznym produkcyjnych pliku databaseConnectionStrings.config powinny być takie same jak databaseConnectionStrings.production.config.</span><span class="sxs-lookup"><span data-stu-id="e797e-197">Consequently, the databaseConnectionStrings.config file should be identical to the databaseConnectionStrings.dev.config file in the development environment, whereas on production the databaseConnectionStrings.config file should be identical to databaseConnectionStrings.production.config.</span></span>


<span data-ttu-id="e797e-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="e797e-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image10.jpg)</span></span> 

<span data-ttu-id="e797e-199">**Rysunek 4**: ConfigSections ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="e797e-199">**Figure 4**: ConfigSections ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="e797e-200">Teraz należy poinstruować `Web.config` Aby użyć pliku databaseConnectionStrings.config do jego magazynu ciągów połączenia.</span><span class="sxs-lookup"><span data-stu-id="e797e-200">We now need to instruct `Web.config` to use the databaseConnectionStrings.config file for its connection string store.</span></span> <span data-ttu-id="e797e-201">Otwórz `Web.config` i Zastąp istniejące `<connectionStrings>` element z następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="e797e-201">Open `Web.config` and replace the existing `<connectionStrings>` element with the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-cs/samples/sample4.xml)]

<span data-ttu-id="e797e-202">`configSource` Atrybut określa ścieżkę fizyczną względem `Web.config` pliku.</span><span class="sxs-lookup"><span data-stu-id="e797e-202">The `configSource` attribute specifies a physical path relative to the `Web.config` file.</span></span> <span data-ttu-id="e797e-203">Jeśli zewnętrznej `.config` plik znajduje się w tym samym katalogu co `Web.config` następnie ten atrybut zostanie ustawiony na nazwę pliku `.config` pliku.</span><span class="sxs-lookup"><span data-stu-id="e797e-203">If the external `.config` file is in the same directory as `Web.config` then set this attribute to the file name of the `.config` file.</span></span> <span data-ttu-id="e797e-204">Jeśli go s w podkatalogu, w przypadku databaseConnectionStrings.config, określ podfolder Rozdziel nazwy plików i folderów, takie jak ConfigSections\databaseConnectionStrings.config za pomocą ukośnik odwrotny.</span><span class="sxs-lookup"><span data-stu-id="e797e-204">If it s in a subdirectory, as is the case with databaseConnectionStrings.config, specify the subfolder using a backslash to delimit the folder and file names, like ConfigSections\databaseConnectionStrings.config.</span></span>

<span data-ttu-id="e797e-205">Ta modyfikacja środowisk projektowania i produkcji zawiera takie same `Web.config` pliku.</span><span class="sxs-lookup"><span data-stu-id="e797e-205">With this modification, the development and production environments contain the same `Web.config` file.</span></span> <span data-ttu-id="e797e-206">Jedyną różnicą jest teraz plik databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="e797e-206">Now the only difference is the databaseConnectionStrings.config file.</span></span> <span data-ttu-id="e797e-207">Skopiuj plik databaseConnectionStrings.production.config do środowiska produkcyjnego i zmień jego nazwę na databaseConnectionStrings.config. Jeśli w przyszłości, istnieją zmiany, aby parametry połączenia bazy danych w środowisku produkcyjnym należy wprowadzić je w pliku databaseConnectionStrings.production.config, a następnie przekaż ten plik do środowiska produkcyjnego, zmiana jego nazwy databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="e797e-207">Copy the databaseConnectionStrings.production.config file to production and rename it to databaseConnectionStrings.config. If, in the future, there are changes to the production database connection string you will need to make them to the databaseConnectionStrings.production.config file and then upload that file to production, renaming it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="e797e-208">Możesz określić informacje dla każdego `Web.config` element w osobnym pliku i użyj `configSource` atrybutu odwołanie do tego pliku z poziomu `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="e797e-208">You may specify the information for any `Web.config` element in a separate file and use the `configSource` attribute to reference that file from within `Web.config`.</span></span>


## <a name="summary"></a><span data-ttu-id="e797e-209">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="e797e-209">Summary</span></span>

<span data-ttu-id="e797e-210">Aplikacje oparte na danych zwykle użyć różnych baz danych w środowisk projektowania i produkcji.</span><span class="sxs-lookup"><span data-stu-id="e797e-210">Data-driven applications usually use different databases in the development and production environments.</span></span> <span data-ttu-id="e797e-211">W rezultacie parametry połączenia bazy danych, które są przechowywane w konfiguracji s aplikacji sieci web musi być unikatowe w każdym środowisku.</span><span class="sxs-lookup"><span data-stu-id="e797e-211">Consequently, the database connection strings stored in the web application s configuration must be unique per environment.</span></span> <span data-ttu-id="e797e-212">W tym samouczku analizujemy jak ustalić parametry połączenia bazy danych w środowisku produkcyjnym i sposobów, aby zachować informacje o parametrach połączenia unikatowy w tych dwóch środowisk.</span><span class="sxs-lookup"><span data-stu-id="e797e-212">In this tutorial we looked at how to determine the production database connection string and ways to maintain unique connection string information in the two environments.</span></span>

<span data-ttu-id="e797e-213">Programowanie przyjemność!</span><span class="sxs-lookup"><span data-stu-id="e797e-213">Happy Programming!</span></span>

#### <a name="further-reading"></a><span data-ttu-id="e797e-214">Dalsze informacje</span><span class="sxs-lookup"><span data-stu-id="e797e-214">Further Reading</span></span>

<span data-ttu-id="e797e-215">Więcej informacji dotyczących tematów omówionych w tym samouczku można znaleźć w następujących zasobach:</span><span class="sxs-lookup"><span data-stu-id="e797e-215">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="e797e-216">Parametry połączenia i pliki konfiguracji</span><span class="sxs-lookup"><span data-stu-id="e797e-216">Connection Strings and Configuration Files</span></span>](https://msdn.microsoft.com/library/ms254494.aspx)
- [<span data-ttu-id="e797e-217">Informacje o @ ConnectionStrings.com ciągi konfiguracji bazy danych</span><span class="sxs-lookup"><span data-stu-id="e797e-217">Database Configuration Strings Information @ ConnectionStrings.com</span></span>](http://www.connectionstrings.com/)
- [<span data-ttu-id="e797e-218">Przenoszenie ustawień z pliku Web.config</span><span class="sxs-lookup"><span data-stu-id="e797e-218">Move Settings Out of the Web.config File</span></span>](http://www.asp101.com/tips/index.asp?id=154)
- [<span data-ttu-id="e797e-219">Dokumentacja techniczna dotycząca &lt;connectionStrings&gt; — Element</span><span class="sxs-lookup"><span data-stu-id="e797e-219">Technical Documentation for the &lt;connectionStrings&gt; Element</span></span>](https://msdn.microsoft.com/library/bf7sd233.aspx)

>[!div class="step-by-step"]
<span data-ttu-id="e797e-220">[Poprzednie](deploying-a-database-cs.md)
[dalej](configuring-a-website-that-uses-application-services-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e797e-220">[Previous](deploying-a-database-cs.md)
[Next](configuring-a-website-that-uses-application-services-cs.md)</span></span>
