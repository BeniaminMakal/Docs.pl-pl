---
title: Weryfikacja modelu w programie ASP.NET MVC Core
author: rachelappel
description: Więcej informacji o weryfikacji modelu w programie ASP.NET MVC Core.
manager: wpickett
ms.author: riande
ms.date: 12/18/2016
ms.prod: asp.net-core
ms.technology: aspnet
ms.topic: article
uid: mvc/models/validation
ms.openlocfilehash: f6748ef6df865919e43cdd9ee86fcc64dbe9651a
ms.sourcegitcommit: 63fb07fb3f71b32daf2c9466e132f2e7cc617163
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/10/2018
ms.locfileid: "35252363"
---
# <a name="model-validation-in-aspnet-core-mvc"></a><span data-ttu-id="01e36-103">Weryfikacja modelu w programie ASP.NET MVC Core</span><span class="sxs-lookup"><span data-stu-id="01e36-103">Model validation in ASP.NET Core MVC</span></span>

<span data-ttu-id="01e36-104">Przez [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="01e36-104">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-validation"></a><span data-ttu-id="01e36-105">Wprowadzenie do sprawdzania poprawności modelu</span><span class="sxs-lookup"><span data-stu-id="01e36-105">Introduction to model validation</span></span>

<span data-ttu-id="01e36-106">Zanim aplikacja przechowuje dane w bazie danych, aplikacja musi sprawdzić poprawności danych.</span><span class="sxs-lookup"><span data-stu-id="01e36-106">Before an app stores data in a database, the app must validate the data.</span></span> <span data-ttu-id="01e36-107">Dane muszą zostać sprawdzone za możliwe zagrożenia bezpieczeństwa, sprawdzić, czy jest prawidłowo sformatowany według typu i rozmiar, a musi być zgodna z regułami.</span><span class="sxs-lookup"><span data-stu-id="01e36-107">Data must be checked for potential security threats, verified that it's appropriately formatted by type and size, and it must conform to your rules.</span></span> <span data-ttu-id="01e36-108">Sprawdzania poprawności jest niezbędne, chociaż może być zbędne i niewygodne wdrożenia.</span><span class="sxs-lookup"><span data-stu-id="01e36-108">Validation is necessary although it can be redundant and tedious to implement.</span></span> <span data-ttu-id="01e36-109">W nazwie wzorca MVC Weryfikacja odbywa się na kliencie i serwerze.</span><span class="sxs-lookup"><span data-stu-id="01e36-109">In MVC, validation happens on both the client and server.</span></span>

<span data-ttu-id="01e36-110">Na szczęście platformy .NET ma pobieranej weryfikacji do atrybutów sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="01e36-110">Fortunately, .NET has abstracted validation into validation attributes.</span></span> <span data-ttu-id="01e36-111">Te atrybuty zawierają kod sprawdzania poprawności, co zmniejsza ilość kodu, który musi być zapisana.</span><span class="sxs-lookup"><span data-stu-id="01e36-111">These attributes contain validation code, thereby reducing the amount of code you must write.</span></span>

<span data-ttu-id="01e36-112">[Wyświetlanie lub pobieranie próbki z usługi GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span><span class="sxs-lookup"><span data-stu-id="01e36-112">[View or download sample from GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span></span>

## <a name="validation-attributes"></a><span data-ttu-id="01e36-113">Sprawdzanie poprawności atrybutów</span><span class="sxs-lookup"><span data-stu-id="01e36-113">Validation Attributes</span></span>

<span data-ttu-id="01e36-114">Atrybuty weryfikacji służą do konfigurowania weryfikacji modelu, jest on podobny koncepcyjnie do sprawdzania poprawności dla pól w tabelach bazy danych.</span><span class="sxs-lookup"><span data-stu-id="01e36-114">Validation attributes are a way to configure model validation so it's similar conceptually to validation on fields in database tables.</span></span> <span data-ttu-id="01e36-115">W tym ograniczenia, takie jak przypisywanie typów danych lub wymagane pola.</span><span class="sxs-lookup"><span data-stu-id="01e36-115">This includes constraints such as assigning data types or required fields.</span></span> <span data-ttu-id="01e36-116">Inne rodzaje weryfikacji obejmują stosowania wzorców do danych, aby wymusić reguł biznesowych, takich jak karty kredytowej lub numer telefonu lub adres e-mail.</span><span class="sxs-lookup"><span data-stu-id="01e36-116">Other types of validation include applying patterns to data to enforce business rules, such as a credit card, phone number, or email address.</span></span> <span data-ttu-id="01e36-117">Atrybutów sprawdzania poprawności należy wymuszania tych wymagań, znacznie prostsze i łatwiejsze do użycia.</span><span class="sxs-lookup"><span data-stu-id="01e36-117">Validation attributes make enforcing these requirements much simpler and easier to use.</span></span>

<span data-ttu-id="01e36-118">Poniżej znajduje się adnotacjami `Movie` modelu z aplikacji, która przechowuje informacje dotyczące filmy i programy telewizyjne.</span><span class="sxs-lookup"><span data-stu-id="01e36-118">Below is an annotated `Movie` model from an app that stores information about movies and TV shows.</span></span> <span data-ttu-id="01e36-119">Większość właściwości są wymagane i kilka właściwości ciągu mają wymagania dotyczące długości.</span><span class="sxs-lookup"><span data-stu-id="01e36-119">Most of the properties are required and several string properties have length requirements.</span></span> <span data-ttu-id="01e36-120">Ponadto istnieje ograniczenie zakresu numerycznego w przypadku `Price` właściwości z zakresu od 0 do $999,99, wraz z atrybutu niestandardowego sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="01e36-120">Additionally, there's a numeric range restriction in place for the `Price` property from 0 to $999.99, along with a custom validation attribute.</span></span>

[!code-csharp[](validation/sample/Movie.cs?range=6-29)]

<span data-ttu-id="01e36-121">Po prostu odczytywania za pośrednictwem modelu ujawnia zasad dotyczących danych dla tej aplikacji, co ułatwia utrzymanie kodu.</span><span class="sxs-lookup"><span data-stu-id="01e36-121">Simply reading through the model reveals the rules about data for this app, making it easier to maintain the code.</span></span> <span data-ttu-id="01e36-122">Poniżej przedstawiono kilka atrybutów popularnych wbudowanych sprawdzania poprawności:</span><span class="sxs-lookup"><span data-stu-id="01e36-122">Below are several popular built-in validation attributes:</span></span>

* <span data-ttu-id="01e36-123">`[CreditCard]`: Weryfikuje właściwość ma format karty kredytowej.</span><span class="sxs-lookup"><span data-stu-id="01e36-123">`[CreditCard]`: Validates the property has a credit card format.</span></span>

* <span data-ttu-id="01e36-124">`[Compare]`: Sprawdza dwie właściwości w modelu dopasowania.</span><span class="sxs-lookup"><span data-stu-id="01e36-124">`[Compare]`: Validates two properties in a model match.</span></span>

* <span data-ttu-id="01e36-125">`[EmailAddress]`: Weryfikuje właściwość ma format wiadomości e-mail.</span><span class="sxs-lookup"><span data-stu-id="01e36-125">`[EmailAddress]`: Validates the property has an email format.</span></span>

* <span data-ttu-id="01e36-126">`[Phone]`: Weryfikuje właściwość ma format telefonu.</span><span class="sxs-lookup"><span data-stu-id="01e36-126">`[Phone]`: Validates the property has a telephone format.</span></span>

* <span data-ttu-id="01e36-127">`[Range]`: Weryfikuje wypada wartości właściwości w danym zakresie.</span><span class="sxs-lookup"><span data-stu-id="01e36-127">`[Range]`: Validates the property value falls within the given range.</span></span>

* <span data-ttu-id="01e36-128">`[RegularExpression]`: Sprawdza, czy dane odpowiada określonemu wyrażeniu regularnemu.</span><span class="sxs-lookup"><span data-stu-id="01e36-128">`[RegularExpression]`: Validates that the data matches the specified regular expression.</span></span>

* <span data-ttu-id="01e36-129">`[Required]`: Powoduje, że właściwość wymagane.</span><span class="sxs-lookup"><span data-stu-id="01e36-129">`[Required]`: Makes a property required.</span></span>

* <span data-ttu-id="01e36-130">`[StringLength]`: Sprawdza właściwości ciągu ma co najwyżej podanej długości maksymalnej.</span><span class="sxs-lookup"><span data-stu-id="01e36-130">`[StringLength]`: Validates that a string property has at most the given maximum length.</span></span>

* <span data-ttu-id="01e36-131">`[Url]`: Weryfikuje właściwość ma format adresu URL.</span><span class="sxs-lookup"><span data-stu-id="01e36-131">`[Url]`: Validates the property has a URL format.</span></span>

<span data-ttu-id="01e36-132">Wszelkie atrybuty, która jest pochodną obsługuje MVC `ValidationAttribute` do celów weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="01e36-132">MVC supports any attribute that derives from `ValidationAttribute` for validation purposes.</span></span> <span data-ttu-id="01e36-133">Wiele atrybutów sprawdzania poprawności przydatne znajdują się w [System.ComponentModel.DataAnnotations](/dotnet/api/system.componentmodel.dataannotations) przestrzeni nazw.</span><span class="sxs-lookup"><span data-stu-id="01e36-133">Many useful validation attributes can be found in the [System.ComponentModel.DataAnnotations](/dotnet/api/system.componentmodel.dataannotations) namespace.</span></span>

<span data-ttu-id="01e36-134">Może być konieczne więcej funkcji niż wbudowane atrybuty wystąpień.</span><span class="sxs-lookup"><span data-stu-id="01e36-134">There may be instances where you need more features than built-in attributes provide.</span></span> <span data-ttu-id="01e36-135">W takich sytuacjach można utworzyć niestandardowego sprawdzania poprawności atrybutów wynikających z `ValidationAttribute` lub zmiana modelu do zaimplementowania `IValidatableObject`.</span><span class="sxs-lookup"><span data-stu-id="01e36-135">For those times, you can create custom validation attributes by deriving from `ValidationAttribute` or changing your model to implement `IValidatableObject`.</span></span>

## <a name="notes-on-the-use-of-the-required-attribute"></a><span data-ttu-id="01e36-136">Uwagi dotyczące stosowania wymaganego atrybutu</span><span class="sxs-lookup"><span data-stu-id="01e36-136">Notes on the use of the Required attribute</span></span>

<span data-ttu-id="01e36-137">Niedopuszczająca wartości null [typów wartości](/dotnet/csharp/language-reference/keywords/value-types) (takich jak `decimal`, `int`, `float`, i `DateTime`) są z założenia wymagane i nie wymagają `Required` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="01e36-137">Non-nullable [value types](/dotnet/csharp/language-reference/keywords/value-types) (such as `decimal`, `int`, `float`, and `DateTime`) are inherently required and don't need the `Required` attribute.</span></span> <span data-ttu-id="01e36-138">Aplikacja projekcie nie są sprawdzane weryfikacji po stronie serwera dla typów wartości null, które są oznaczone jako `Required`.</span><span class="sxs-lookup"><span data-stu-id="01e36-138">The app performs no server-side validation checks for non-nullable types that are marked `Required`.</span></span>

<span data-ttu-id="01e36-139">Wiązanie modelu MVC, który nie jest związana z weryfikacji i atrybutów sprawdzania poprawności, odrzuca przesłanie pole formularza zawierających brakujące wartości lub odstępem dla typu wartości null.</span><span class="sxs-lookup"><span data-stu-id="01e36-139">MVC model binding, which isn't concerned with validation and validation attributes, rejects a form field submission containing a missing value or whitespace for a non-nullable type.</span></span> <span data-ttu-id="01e36-140">W przypadku braku `BindRequired` atrybutu na właściwość target wiązania modelu ignoruje brakujące dane dla typów wartości null, w którym nie ma pola formularza z przychodzących danych formularza.</span><span class="sxs-lookup"><span data-stu-id="01e36-140">In the absence of a `BindRequired` attribute on the target property, model binding ignores missing data for non-nullable types, where the form field is absent from the incoming form data.</span></span>

<span data-ttu-id="01e36-141">[Atrybutu BindRequired](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (Zobacz też [dostosować zachowanie wiązania modelu z atrybutami](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) przydaje się do zapewnienia zakończeniu danych formularza.</span><span class="sxs-lookup"><span data-stu-id="01e36-141">The [BindRequired attribute](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (also see [Customize model binding behavior with attributes](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) is useful to ensure form data is complete.</span></span> <span data-ttu-id="01e36-142">Gdy jest stosowany do właściwości, system powiązanie modelu wymaga wartości tej właściwości.</span><span class="sxs-lookup"><span data-stu-id="01e36-142">When applied to a property, the model binding system requires a value for that property.</span></span> <span data-ttu-id="01e36-143">Po zastosowaniu do typu systemu powiązanie modelu wymaga wartości dla wszystkich właściwości tego typu.</span><span class="sxs-lookup"><span data-stu-id="01e36-143">When applied to a type, the model binding system requires values for all of the properties of that type.</span></span>

<span data-ttu-id="01e36-144">Jeśli używasz [Nullable\<T > typ](/dotnet/csharp/programming-guide/nullable-types/) (na przykład `decimal?` lub `System.Nullable<decimal>`) i oznacz ją `Required`, sprawdzanie poprawności po stronie serwera odbywa się tak, jakby właściwość był Standardowy typ dopuszczający wartość null (dla przykład `string`).</span><span class="sxs-lookup"><span data-stu-id="01e36-144">When you use a [Nullable\<T> type](/dotnet/csharp/programming-guide/nullable-types/) (for example, `decimal?` or `System.Nullable<decimal>`) and mark it `Required`, a server-side validation check is performed as if the property were a standard nullable type (for example, a `string`).</span></span>

<span data-ttu-id="01e36-145">Sprawdzanie poprawności klienta wymaga wartości dla pola formularza, które odpowiada właściwości modelu, który został oznaczony `Required` i właściwości Typ niedopuszczający wartości null, które nie zostały oznaczone jako `Required`.</span><span class="sxs-lookup"><span data-stu-id="01e36-145">Client-side validation requires a value for a form field that corresponds to a model property that you've marked `Required` and for a non-nullable type property that you haven't marked `Required`.</span></span> <span data-ttu-id="01e36-146">`Required` może służyć do kontrolowania komunikatów o błędach weryfikacji po stronie klienta.</span><span class="sxs-lookup"><span data-stu-id="01e36-146">`Required` can be used to control the client-side validation error message.</span></span>

## <a name="model-state"></a><span data-ttu-id="01e36-147">Stan modelu</span><span class="sxs-lookup"><span data-stu-id="01e36-147">Model State</span></span>

<span data-ttu-id="01e36-148">Stan modelu reprezentuje błędy sprawdzania poprawności w przesłanych wartości formularza HTML.</span><span class="sxs-lookup"><span data-stu-id="01e36-148">Model state represents validation errors in submitted HTML form values.</span></span>

<span data-ttu-id="01e36-149">MVC będzie sprawdzanie poprawności pól, dopóki nie osiągnie maksymalną liczbę błędów (200 domyślnie).</span><span class="sxs-lookup"><span data-stu-id="01e36-149">MVC will continue validating fields until reaches the maximum number of errors (200 by default).</span></span> <span data-ttu-id="01e36-150">Numer ten można skonfigurować przez wstawienie poniższego kodu do `ConfigureServices` metody w *Startup.cs* pliku:</span><span class="sxs-lookup"><span data-stu-id="01e36-150">You can configure this number by inserting the following code into the `ConfigureServices` method in the *Startup.cs* file:</span></span>

[!code-csharp[](validation/sample/Startup.cs?range=27)]

## <a name="handling-model-state-errors"></a><span data-ttu-id="01e36-151">Stan modelu obsługi błędów</span><span class="sxs-lookup"><span data-stu-id="01e36-151">Handling Model State Errors</span></span>

<span data-ttu-id="01e36-152">Weryfikacja modelu występuje przed każdego wywoływana Akcja kontrolera i odpowiada metoda akcji sprawdzić `ModelState.IsValid` i odpowiednio zareagować.</span><span class="sxs-lookup"><span data-stu-id="01e36-152">Model validation occurs prior to each controller action being invoked, and it's the action method's responsibility to inspect `ModelState.IsValid` and react appropriately.</span></span> <span data-ttu-id="01e36-153">W wielu przypadkach odpowiednie reakcji jest zwracany w odpowiedzi na błąd, najlepiej opisujący szczegółowo przyczynę niepowodzenia weryfikacji modelu.</span><span class="sxs-lookup"><span data-stu-id="01e36-153">In many cases, the appropriate reaction is to return an error response, ideally detailing the reason why model validation failed.</span></span>

<span data-ttu-id="01e36-154">Niektóre aplikacje wybierze wykonać standardowej konwencji zajmujących się błędy sprawdzania poprawności modelu, w których przypadku filtru może być odpowiednie miejsce do wdrożenia tych zasad.</span><span class="sxs-lookup"><span data-stu-id="01e36-154">Some apps will choose to follow a standard convention for dealing with model validation errors, in which case a filter may be an appropriate place to implement such a policy.</span></span> <span data-ttu-id="01e36-155">Należy przetestować zachowanie akcji z stanów modelu prawidłowe oraz nieprawidłowe.</span><span class="sxs-lookup"><span data-stu-id="01e36-155">You should test how your actions behave with valid and invalid model states.</span></span>

## <a name="manual-validation"></a><span data-ttu-id="01e36-156">Weryfikowanie ręczne</span><span class="sxs-lookup"><span data-stu-id="01e36-156">Manual validation</span></span>

<span data-ttu-id="01e36-157">Po zakończeniu wiązania modelu i sprawdzania poprawności można powtórzyć jej części.</span><span class="sxs-lookup"><span data-stu-id="01e36-157">After model binding and validation are complete, you may want to repeat parts of it.</span></span> <span data-ttu-id="01e36-158">Na przykład użytkownik może zostać wprowadzony tekst w polu Oczekiwano liczby całkowitej lub może być konieczne do obliczenia wartości dla właściwości modelu.</span><span class="sxs-lookup"><span data-stu-id="01e36-158">For example, a user may have entered text in a field expecting an integer, or you may need to compute a value for a model's property.</span></span>

<span data-ttu-id="01e36-159">Może być konieczne ręczne uruchomienie walidacji.</span><span class="sxs-lookup"><span data-stu-id="01e36-159">You may need to run validation manually.</span></span> <span data-ttu-id="01e36-160">Aby to zrobić, należy wywołać `TryValidateModel` metody, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="01e36-160">To do so, call the `TryValidateModel` method, as shown here:</span></span>

[!code-csharp[](validation/sample/MoviesController.cs?range=52)]

## <a name="custom-validation"></a><span data-ttu-id="01e36-161">Walidacji niestandardowej</span><span class="sxs-lookup"><span data-stu-id="01e36-161">Custom validation</span></span>

<span data-ttu-id="01e36-162">Atrybuty weryfikacji działają w wielu zastosowaniach sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="01e36-162">Validation attributes work for most validation needs.</span></span> <span data-ttu-id="01e36-163">Jednak niektóre reguły sprawdzania poprawności są specyficzne dla firmy.</span><span class="sxs-lookup"><span data-stu-id="01e36-163">However, some validation rules are specific to your business.</span></span> <span data-ttu-id="01e36-164">Reguły może nie być typowe techniki sprawdzania poprawności danych, takich jak zapewnienie pole jest wymagane lub że spełnia on zakresu wartości.</span><span class="sxs-lookup"><span data-stu-id="01e36-164">Your rules might not be common data validation techniques such as ensuring a field is required or that it conforms to a range of values.</span></span> <span data-ttu-id="01e36-165">W tych sytuacjach niestandardowego sprawdzania poprawności atrybutów są doskonałe rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="01e36-165">For these scenarios, custom validation attributes are a great solution.</span></span> <span data-ttu-id="01e36-166">Tworzenie własnego niestandardowego sprawdzania poprawności atrybutów w MVC jest bardzo proste.</span><span class="sxs-lookup"><span data-stu-id="01e36-166">Creating your own custom validation attributes in MVC is easy.</span></span> <span data-ttu-id="01e36-167">Tylko dziedziczyć `ValidationAttribute`i Zastąp `IsValid` metody.</span><span class="sxs-lookup"><span data-stu-id="01e36-167">Just inherit from the `ValidationAttribute`, and override the `IsValid` method.</span></span> <span data-ttu-id="01e36-168">`IsValid` Metoda przyjmuje dwa parametry pierwszy jest obiekt o nazwie *wartość* a drugim `ValidationContext` obiektu o nazwie *validationContext*.</span><span class="sxs-lookup"><span data-stu-id="01e36-168">The `IsValid` method accepts two parameters, the first is an object named *value* and the second is a `ValidationContext` object named *validationContext*.</span></span> <span data-ttu-id="01e36-169">*Wartość* odwołuje się do wartości rzeczywistej z pola niestandardowego modułu sprawdzania poprawności przeprowadza walidację.</span><span class="sxs-lookup"><span data-stu-id="01e36-169">*Value* refers to the actual value from the field that your custom validator is validating.</span></span>

<span data-ttu-id="01e36-170">W poniższym przykładzie reguła biznesowa określają, czy użytkownicy mogą nie ustawiono genre *klasycznego* filmu wydaną po 1960.</span><span class="sxs-lookup"><span data-stu-id="01e36-170">In the following sample, a business rule states that users may not set the genre to *Classic* for a movie released after 1960.</span></span> <span data-ttu-id="01e36-171">`[ClassicMovie]` Atrybut najpierw sprawdza genre, a jeśli klasyczny, następnie sprawdza Data wydania jest późniejsza niż 1960.</span><span class="sxs-lookup"><span data-stu-id="01e36-171">The `[ClassicMovie]` attribute checks the genre first, and if it's a classic, then it checks the release date to see that it's later than 1960.</span></span> <span data-ttu-id="01e36-172">Jeśli po uwolnieniu po 1960, uwierzytelnienie nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="01e36-172">If it's released after 1960, validation fails.</span></span> <span data-ttu-id="01e36-173">Atrybut akceptuje parametr całkowitą reprezentującą rok, który służy do sprawdzania poprawności danych.</span><span class="sxs-lookup"><span data-stu-id="01e36-173">The attribute accepts an integer parameter representing the year that you can use to validate data.</span></span> <span data-ttu-id="01e36-174">Wartość parametru w Konstruktorze ten atrybut można przechwycić w sposób pokazany poniżej:</span><span class="sxs-lookup"><span data-stu-id="01e36-174">You can capture the value of the parameter in the attribute's constructor, as shown here:</span></span>

[!code-csharp[](validation/sample/ClassicMovieAttribute.cs?range=9-28)]

<span data-ttu-id="01e36-175">`movie` Zmiennej powyżej reprezentuje `Movie` obiekt, który zawiera dane z przesyłania formularza do zweryfikowania.</span><span class="sxs-lookup"><span data-stu-id="01e36-175">The `movie` variable above represents a `Movie` object that contains the data from the form submission to validate.</span></span> <span data-ttu-id="01e36-176">W takim przypadku kodu walidacji sprawdza datę i genre w `IsValid` metody `ClassicMovieAttribute` klasy zgodnie z zasadami.</span><span class="sxs-lookup"><span data-stu-id="01e36-176">In this case, the validation code checks the date and genre in the `IsValid` method of the `ClassicMovieAttribute` class as per the rules.</span></span> <span data-ttu-id="01e36-177">Po pomyślnym zweryfikowaniem`IsValid` zwraca `ValidationResult.Success` kodu.</span><span class="sxs-lookup"><span data-stu-id="01e36-177">Upon successful validation ,`IsValid` returns a `ValidationResult.Success` code.</span></span> <span data-ttu-id="01e36-178">Podczas sprawdzania poprawności zakończy się niepowodzeniem, `ValidationResult` ze względu na błąd jest zwracany komunikat:</span><span class="sxs-lookup"><span data-stu-id="01e36-178">When validation fails, a `ValidationResult` with an error message is returned:</span></span>

[!code-csharp[](validation/sample/ClassicMovieAttribute.cs?range=55-58)]

<span data-ttu-id="01e36-179">Gdy użytkownik modyfikuje `Genre` pól i przesyła formularz, `IsValid` metody `ClassicMovieAttribute` Sprawdź, czy jest klasyczny.</span><span class="sxs-lookup"><span data-stu-id="01e36-179">When a user modifies the `Genre` field and submits the form, the `IsValid` method of the `ClassicMovieAttribute` will verify whether the movie is a classic.</span></span> <span data-ttu-id="01e36-180">Podobnie jak wszelkie atrybuty, wbudowane, zastosuj `ClassicMovieAttribute` do właściwości, takie jak `ReleaseDate` aby upewnić się, występuje sprawdzania poprawności, jak pokazano w poprzednim przykładzie kodu.</span><span class="sxs-lookup"><span data-stu-id="01e36-180">Like any built-in attribute, apply the `ClassicMovieAttribute` to a property such as `ReleaseDate` to ensure validation happens, as shown in the previous code sample.</span></span> <span data-ttu-id="01e36-181">Ponieważ przykładzie działa tylko w przypadku `Movie` typów, lepszym rozwiązaniem jest użycie `IValidatableObject` jak pokazano w poniższych akapitu.</span><span class="sxs-lookup"><span data-stu-id="01e36-181">Since the example works only with `Movie` types, a better option is to use `IValidatableObject` as shown in the following paragraph.</span></span>

<span data-ttu-id="01e36-182">Alternatywnie można umieścić ten sam kod w modelu zaimplementowanie `Validate` metoda `IValidatableObject` interfejsu.</span><span class="sxs-lookup"><span data-stu-id="01e36-182">Alternatively, this same code could be placed in the model by implementing the `Validate` method on the `IValidatableObject` interface.</span></span> <span data-ttu-id="01e36-183">Podczas pracy niestandardowego sprawdzania poprawności atrybutów do sprawdzania poprawności poszczególnych właściwości, implementacja `IValidatableObject` może służyć do zaimplementowania weryfikacji na poziomie klasy, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="01e36-183">While custom validation attributes work well for validating individual properties, implementing `IValidatableObject` can be used to implement class-level validation as seen here.</span></span>

[!code-csharp[](validation/sample/MovieIValidatable.cs?range=32-40)]

## <a name="client-side-validation"></a><span data-ttu-id="01e36-184">Sprawdzanie poprawności po stronie klienta</span><span class="sxs-lookup"><span data-stu-id="01e36-184">Client side validation</span></span>

<span data-ttu-id="01e36-185">Sprawdzanie poprawności po stronie klienta jest doskonałym ułatwienia dla użytkowników.</span><span class="sxs-lookup"><span data-stu-id="01e36-185">Client side validation is a great convenience for users.</span></span> <span data-ttu-id="01e36-186">Zaoszczędzić czas, które w przeciwnym razie poświęcić oczekiwanie na obiegu do serwera.</span><span class="sxs-lookup"><span data-stu-id="01e36-186">It saves time they would otherwise spend waiting for a round trip to the server.</span></span> <span data-ttu-id="01e36-187">W terminologii biznesowej nawet kilka części sekundy pomnożone setki razy każdego dnia są dodaje do można dużo czasu, wydatków i frustracji spowodowanej.</span><span class="sxs-lookup"><span data-stu-id="01e36-187">In business terms, even a few fractions of seconds multiplied hundreds of times each day adds up to be a lot of time, expense, and frustration.</span></span> <span data-ttu-id="01e36-188">Proste i bezpośrednie weryfikacji umożliwia użytkownikom wydajniejszą pracę i tworzy lepszą jakość danych wejściowych i wyjściowych.</span><span class="sxs-lookup"><span data-stu-id="01e36-188">Straightforward and immediate validation enables users to work more efficiently and produce better quality input and output.</span></span>

<span data-ttu-id="01e36-189">Musi mieć widoku z właściwego odwołań do skryptów JavaScript w celu weryfikacji po stronie klienta będzie działać zgodnie z widoczną w tym miejscu.</span><span class="sxs-lookup"><span data-stu-id="01e36-189">You must have a view with the proper JavaScript script references in place for client side validation to work as you see here.</span></span>

[!code-cshtml[](validation/sample/Views/Shared/_Layout.cshtml?range=37)]

[!code-cshtml[](validation/sample/Views/Shared/_ValidationScriptsPartial.cshtml)]

<span data-ttu-id="01e36-190">[JQuery sprawdzania poprawności dyskretnego kodu](https://github.com/aspnet/jquery-validation-unobtrusive) skryptów jest niestandardowe frontonu biblioteki Microsoft, która opiera się na popularnych [jQuery weryfikacji](https://jqueryvalidation.org/) wtyczki.</span><span class="sxs-lookup"><span data-stu-id="01e36-190">The [jQuery Unobtrusive Validation](https://github.com/aspnet/jquery-validation-unobtrusive) script is a custom Microsoft front-end library that builds on the popular [jQuery Validate](https://jqueryvalidation.org/) plugin.</span></span> <span data-ttu-id="01e36-191">Bez sprawdzania poprawności dyskretnego kodu jQuery, konieczne będzie przeprowadzenie code tej samej logiki sprawdzania poprawności w dwóch miejscach: raz w atrybuty weryfikacji po stronie serwera dla właściwości modelu, a następnie ponownie w skrypty po stronie klienta (przykłady jquery weryfikacji [ `validate()` ](https://jqueryvalidation.org/validate/) metody pokazuje, jak złożoność to może stać się).</span><span class="sxs-lookup"><span data-stu-id="01e36-191">Without jQuery Unobtrusive Validation, you would have to code the same validation logic in two places: once in the server side validation attributes on model properties, and then again in client side scripts (the examples for jQuery Validate's [`validate()`](https://jqueryvalidation.org/validate/) method shows how complex this could become).</span></span> <span data-ttu-id="01e36-192">Zamiast tego MVC [pomocników tagów](xref:mvc/views/tag-helpers/intro) i [pomocników HTML](xref:mvc/views/overview) można używać atrybutów sprawdzania poprawności i wpisz metadanych właściwości modelu do renderowania kodu HTML 5 [atrybuty danych](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) w elementy formularza wymagające weryfikacji.</span><span class="sxs-lookup"><span data-stu-id="01e36-192">Instead, MVC's [Tag Helpers](xref:mvc/views/tag-helpers/intro) and [HTML helpers](xref:mvc/views/overview) are able to use the validation attributes and type metadata from model properties to render HTML 5 [data- attributes](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) in the form elements that need validation.</span></span> <span data-ttu-id="01e36-193">Generuje MVC `data-` atrybutów dla atrybutów zarówno wbudowane i niestandardowe.</span><span class="sxs-lookup"><span data-stu-id="01e36-193">MVC generates the `data-` attributes for both built-in and custom attributes.</span></span> <span data-ttu-id="01e36-194">jQuery sprawdzania poprawności dyskretnego kodu następnie analizuje te `data-` atrybutów i przekazuje logikę do jQuery weryfikacji skutecznie "kopiowanie" logikę weryfikacji po stronie serwera do klienta.</span><span class="sxs-lookup"><span data-stu-id="01e36-194">jQuery Unobtrusive Validation then parses thes `data-` attributes and passes the logic to jQuery Validate, effectively "copying" the server side validation logic to the client.</span></span> <span data-ttu-id="01e36-195">Błędy sprawdzania poprawności można wyświetlać na kliencie przy użyciu pomocników tagów istotne, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="01e36-195">You can display validation errors on the client using the relevant tag helpers as shown here:</span></span>

[!code-cshtml[](validation/sample/Views/Movies/Create.cshtml?highlight=4,5&range=19-25)]

<span data-ttu-id="01e36-196">Powyżej pomocników tagów renderowania elementów HTML poniżej.</span><span class="sxs-lookup"><span data-stu-id="01e36-196">The tag helpers above render the HTML below.</span></span> <span data-ttu-id="01e36-197">Zwróć uwagę, że `data-` atrybutów w kodzie HTML output odpowiadają atrybutów weryfikacji `ReleaseDate` właściwości.</span><span class="sxs-lookup"><span data-stu-id="01e36-197">Notice that the `data-` attributes in the HTML output correspond to the validation attributes for the `ReleaseDate` property.</span></span> <span data-ttu-id="01e36-198">`data-val-required` Atrybut poniżej zawiera komunikat o błędzie wyświetlany, jeśli użytkownik nie wypełnić pole daty wydania.</span><span class="sxs-lookup"><span data-stu-id="01e36-198">The `data-val-required` attribute below contains an error message to display if the user doesn't fill in the release date field.</span></span> <span data-ttu-id="01e36-199">jQuery sprawdzania poprawności dyskretnego kodu przekazuje tę wartość do weryfikacji jQuery [ `required()` ](https://jqueryvalidation.org/required-method/) metodę, która następnie wyświetla ten komunikat w odpowiednim  **\<span >** elementu.</span><span class="sxs-lookup"><span data-stu-id="01e36-199">jQuery Unobtrusive Validation passes this value to the jQuery Validate [`required()`](https://jqueryvalidation.org/required-method/) method, which then displays that message in the accompanying **\<span>** element.</span></span>

```html
<form action="/Movies/Create" method="post">
    <div class="form-horizontal">
        <h4>Movie</h4>
        <div class="text-danger"></div>
        <div class="form-group">
            <label class="col-md-2 control-label" for="ReleaseDate">ReleaseDate</label>
            <div class="col-md-10">
                <input class="form-control" type="datetime"
                data-val="true" data-val-required="The ReleaseDate field is required."
                id="ReleaseDate" name="ReleaseDate" value="" />
                <span class="text-danger field-validation-valid"
                data-valmsg-for="ReleaseDate" data-valmsg-replace="true"></span>
            </div>
        </div>
    </div>
</form>
```

<span data-ttu-id="01e36-200">Weryfikacji po stronie klienta uniemożliwia przesyłanie, dopóki formularza jest nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="01e36-200">Client-side validation prevents submission until the form is valid.</span></span> <span data-ttu-id="01e36-201">Przycisk Prześlij uruchamia JavaScript, która wyśle formularz lub wyświetlane komunikaty o błędach.</span><span class="sxs-lookup"><span data-stu-id="01e36-201">The Submit button runs JavaScript that either submits the form or displays error messages.</span></span>

<span data-ttu-id="01e36-202">MVC określa na podstawie typu danych .NET właściwości, prawdopodobnie przesłonić przy użyciu wartości atrybutu typu `[DataType]` atrybutów.</span><span class="sxs-lookup"><span data-stu-id="01e36-202">MVC determines type attribute values based on the .NET data type of a property, possibly overridden using `[DataType]` attributes.</span></span> <span data-ttu-id="01e36-203">Podstawowym `[DataType]` atrybut zapewnia Weryfikacja nie rzeczywistym po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="01e36-203">The base `[DataType]` attribute does no real server-side validation.</span></span> <span data-ttu-id="01e36-204">Przeglądarki wybrać własne komunikaty o błędach i wyświetlić te błędy, jak życzą, jednak pakiet sprawdzania poprawności dyskretnego kodu jQuery można zastąpić wiadomości i ich konsekwentnie wyświetlić z innymi osobami.</span><span class="sxs-lookup"><span data-stu-id="01e36-204">Browsers choose their own error messages and display those errors as they wish, however the jQuery Validation Unobtrusive package can override the messages and display them consistently with others.</span></span> <span data-ttu-id="01e36-205">Dzieje się tak najczęściej oczywiście, gdy użytkownicy zastosują `[DataType]` podklasy, takich jak `[EmailAddress]`.</span><span class="sxs-lookup"><span data-stu-id="01e36-205">This happens most obviously when users apply `[DataType]` subclasses such as `[EmailAddress]`.</span></span>

### <a name="add-validation-to-dynamic-forms"></a><span data-ttu-id="01e36-206">Dodawanie walidacji do dynamicznego formularzy</span><span class="sxs-lookup"><span data-stu-id="01e36-206">Add Validation to Dynamic Forms</span></span>

<span data-ttu-id="01e36-207">Ponieważ jQuery sprawdzania poprawności dyskretnego kodu przekazuje parametry i logikę weryfikacji do weryfikacji jQuery, po pierwszym załadowaniu strony, formularze dynamicznie generowanym automatycznie nie będą działać sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="01e36-207">Because jQuery Unobtrusive Validation passes validation logic and parameters to jQuery Validate when the page first loads, dynamically generated forms won't automatically exhibit validation.</span></span> <span data-ttu-id="01e36-208">Zamiast tego należy wskazać jQuery dyskretnego kodu sprawdzania poprawności można przeanalizować dynamiczny formularz natychmiast po jej utworzeniu.</span><span class="sxs-lookup"><span data-stu-id="01e36-208">Instead, you must tell jQuery Unobtrusive Validation to parse the dynamic form immediately after creating it.</span></span> <span data-ttu-id="01e36-209">Na przykład poniższy kod przedstawia, jak można skonfigurować weryfikacji po stronie klienta na formularzu dodane za pośrednictwem interfejsu AJAX.</span><span class="sxs-lookup"><span data-stu-id="01e36-209">For example, the code below shows how you might set up client side validation on a form added via AJAX.</span></span>

```js
$.get({
    url: "https://url/that/returns/a/form",
    dataType: "html",
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ": Couldn't add form. " + errorThrown);
    },
    success: function(newFormHTML) {
        var container = document.getElementById("form-container");
        container.insertAdjacentHTML("beforeend", newFormHTML);
        var forms = container.getElementsByTagName("form");
        var newForm = forms[forms.length - 1];
        $.validator.unobtrusive.parse(newForm);
    }
})
```

<span data-ttu-id="01e36-210">`$.validator.unobtrusive.parse()` Metoda przyjmuje selektora jQuery dla jednego argumentu.</span><span class="sxs-lookup"><span data-stu-id="01e36-210">The `$.validator.unobtrusive.parse()` method accepts a jQuery selector for its one argument.</span></span> <span data-ttu-id="01e36-211">Ta metoda określa, że jQuery dyskretnego kodu sprawdzania poprawności można przeanalizować `data-` atrybuty formularzy w selektora.</span><span class="sxs-lookup"><span data-stu-id="01e36-211">This method tells jQuery Unobtrusive Validation to parse the `data-` attributes of forms within that selector.</span></span> <span data-ttu-id="01e36-212">Wartości tych atrybutów są następnie przekazywane do wtyczki weryfikacji jQuery tak, aby formularz wykazuje reguł weryfikacji po stronie klienta żądany.</span><span class="sxs-lookup"><span data-stu-id="01e36-212">The values of those attributes are then passed to the jQuery Validate plugin so that the form exhibits the desired client side validation rules.</span></span>

### <a name="add-validation-to-dynamic-controls"></a><span data-ttu-id="01e36-213">Dodawanie walidacji do formantów dynamicznych</span><span class="sxs-lookup"><span data-stu-id="01e36-213">Add Validation to Dynamic Controls</span></span>

<span data-ttu-id="01e36-214">Można także zaktualizować reguły walidacji na formularzu, gdy osoba formanty, takie jak `<input/>`s i `<select/>`s, są generowane dynamicznie.</span><span class="sxs-lookup"><span data-stu-id="01e36-214">You can also update the validation rules on a form when individual controls, such as `<input/>`s and `<select/>`s, are dynamically generated.</span></span> <span data-ttu-id="01e36-215">Nie można przekazać selektory dla tych elementów do `parse()` metody bezpośrednio ponieważ otaczające formularz już został przeanalizowany i nie będzie aktualizować.</span><span class="sxs-lookup"><span data-stu-id="01e36-215">You cannot pass selectors for these elements to the `parse()` method directly because the surrounding form has already been parsed and won't update.</span></span> <span data-ttu-id="01e36-216">Zamiast tego należy najpierw usunąć istniejące dane sprawdzania poprawności, a następnie ponownej analizy całego formularza, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="01e36-216">Instead, you first remove the existing validation data, then reparse the entire form, as shown below:</span></span>

```js
$.get({
    url: "https://url/that/returns/a/control",
    dataType: "html",
    error: function(jqXHR, textStatus, errorThrown) {
        alert(textStatus + ": Couldn't add control. " + errorThrown);
    },
    success: function(newInputHTML) {
        var form = document.getElementById("my-form");
        form.insertAdjacentHTML("beforeend", newInputHTML);
        $(form).removeData("validator")    // Added by jQuery Validate
               .removeData("unobtrusiveValidation");   // Added by jQuery Unobtrusive Validation
        $.validator.unobtrusive.parse(form);
    }
})
```

## <a name="iclientmodelvalidator"></a><span data-ttu-id="01e36-217">IClientModelValidator</span><span class="sxs-lookup"><span data-stu-id="01e36-217">IClientModelValidator</span></span>

<span data-ttu-id="01e36-218">Możesz utworzyć logiki po stronie klienta dla użytkownika niestandardowego atrybutu i [sprawdzania poprawności dyskretnego kodu](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html) co powoduje adapter w celu [weryfikacji jquery](http://jqueryvalidation.org/documentation/) będą wykonywane na kliencie zostanie automatycznie w ramach Sprawdzanie poprawności.</span><span class="sxs-lookup"><span data-stu-id="01e36-218">You may create client side logic for your custom attribute, and [unobtrusive validation](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html) which creates an adapter to [jquery validation](http://jqueryvalidation.org/documentation/) will execute it on the client for you automatically as part of validation.</span></span> <span data-ttu-id="01e36-219">Pierwszym krokiem jest kontrolować, jakie atrybuty danych są dodawane zaimplementowanie `IClientModelValidator` interfejsu, jak pokazano poniżej:</span><span class="sxs-lookup"><span data-stu-id="01e36-219">The first step is to control what data- attributes are added by implementing the `IClientModelValidator` interface as shown here:</span></span>

[!code-csharp[](validation/sample/ClassicMovieAttribute.cs?range=30-42)]

<span data-ttu-id="01e36-220">Atrybuty, które implementują ten interfejs można dodawać atrybuty HTML do wygenerowanego pola.</span><span class="sxs-lookup"><span data-stu-id="01e36-220">Attributes that implement this interface can add HTML attributes to generated fields.</span></span> <span data-ttu-id="01e36-221">Badanie danych wyjściowych dla `ReleaseDate` element ujawnia HTML, która jest podobna do poprzedniego przykładu, lecz teraz jest `data-val-classicmovie` atrybut, który został zdefiniowany w `AddValidation` metody `IClientModelValidator`.</span><span class="sxs-lookup"><span data-stu-id="01e36-221">Examining the output for the `ReleaseDate` element reveals HTML that's similar to the previous example, except now there's a `data-val-classicmovie` attribute that was defined in the `AddValidation` method of `IClientModelValidator`.</span></span>

```html
<input class="form-control" type="datetime"
    data-val="true"
    data-val-classicmovie="Classic movies must have a release year earlier than 1960."
    data-val-classicmovie-year="1960"
    data-val-required="The ReleaseDate field is required."
    id="ReleaseDate" name="ReleaseDate" value="" />
```

<span data-ttu-id="01e36-222">Sprawdzania poprawności dyskretnego kodu używa danych w `data-` atrybutów, aby wyświetlić komunikaty o błędach.</span><span class="sxs-lookup"><span data-stu-id="01e36-222">Unobtrusive validation uses the data in the `data-` attributes to display error messages.</span></span> <span data-ttu-id="01e36-223">Jednak nie ma informacji dotyczących reguły jQuery lub wiadomości do momentu dodania do tego jQuery `validator` obiektu.</span><span class="sxs-lookup"><span data-stu-id="01e36-223">However, jQuery doesn't know about rules or messages until you add them to jQuery's `validator` object.</span></span> <span data-ttu-id="01e36-224">Przedstawiono to w poniższym przykładzie, który dodaje metodę o nazwie `classicmovie` niestandardowego klienta kodem weryfikacji jQuery `validator` obiektu.</span><span class="sxs-lookup"><span data-stu-id="01e36-224">This is shown in the example below that adds a method named `classicmovie` containing custom client validation code to the jQuery `validator` object.</span></span> <span data-ttu-id="01e36-225">Wyjaśnienia dotyczące metody unobtrusive.adapters.add można znaleźć [tutaj](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)</span><span class="sxs-lookup"><span data-stu-id="01e36-225">An explanations of the unobtrusive.adapters.add method can be found [here](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)</span></span>

[!code-javascript[](validation/sample/Views/Movies/Create.cshtml?range=71-93)]

<span data-ttu-id="01e36-226">JQuery zawiera teraz informacje do wykonywania niestandardowego sprawdzania poprawności JavaScript, a także komunikat o błędzie wyświetlany w przypadku tego kodu walidacji zwraca wartość false.</span><span class="sxs-lookup"><span data-stu-id="01e36-226">Now jQuery has the information to execute the custom JavaScript validation as well as the error message to display if that validation code returns false.</span></span>

## <a name="remote-validation"></a><span data-ttu-id="01e36-227">Walidacja zdalnego</span><span class="sxs-lookup"><span data-stu-id="01e36-227">Remote validation</span></span>

<span data-ttu-id="01e36-228">Walidacja zdalnego jest funkcją doskonałe do użycia, gdy trzeba sprawdzić poprawności danych na kliencie w odniesieniu do danych na serwerze.</span><span class="sxs-lookup"><span data-stu-id="01e36-228">Remote validation is a great feature to use when you need to validate data on the client against data on the server.</span></span> <span data-ttu-id="01e36-229">Na przykład aplikacja może być konieczne Zweryfikuj, czy nazwa użytkownika lub adres e-mail jest już używana, i należy zbadać dużej ilości danych, aby to zrobić.</span><span class="sxs-lookup"><span data-stu-id="01e36-229">For example, your app may need to verify whether an email or user name is already in use, and it must query a large amount of data to do so.</span></span> <span data-ttu-id="01e36-230">Pobieranie dużych zestawów danych sprawdzania poprawności jedną lub kilka pól zużywa zbyt wiele zasobów.</span><span class="sxs-lookup"><span data-stu-id="01e36-230">Downloading large sets of data for validating one or a few fields consumes too many resources.</span></span> <span data-ttu-id="01e36-231">Może również spowodować ujawnienie poufnych informacji.</span><span class="sxs-lookup"><span data-stu-id="01e36-231">It may also expose sensitive information.</span></span> <span data-ttu-id="01e36-232">Alternatywą jest obustronne żądania, aby sprawdzić poprawność pola.</span><span class="sxs-lookup"><span data-stu-id="01e36-232">An alternative is to make a round-trip request to validate a field.</span></span>

<span data-ttu-id="01e36-233">W procesie dwóch krok można zaimplementować weryfikację zdalną.</span><span class="sxs-lookup"><span data-stu-id="01e36-233">You can implement remote validation in a two step process.</span></span> <span data-ttu-id="01e36-234">Najpierw należy dodawać adnotacje modelu za pomocą `[Remote]` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="01e36-234">First, you must annotate your model with the `[Remote]` attribute.</span></span> <span data-ttu-id="01e36-235">`[Remote]` Atrybut akceptuje wielu przeciążeń umożliwia bezpośrednie JavaScript po stronie klienta do odpowiedniego kodu do wywołania.</span><span class="sxs-lookup"><span data-stu-id="01e36-235">The `[Remote]` attribute accepts multiple overloads you can use to direct client side JavaScript to the appropriate code to call.</span></span> <span data-ttu-id="01e36-236">W poniższym przykładzie wskazuje `VerifyEmail` metody akcji `Users` kontrolera.</span><span class="sxs-lookup"><span data-stu-id="01e36-236">The example below points to the `VerifyEmail` action method of the `Users` controller.</span></span>

[!code-csharp[](validation/sample/User.cs?range=7-8)]

<span data-ttu-id="01e36-237">Drugim krokiem jest wprowadzenie kodu walidacji w odpowiedniej metody akcji, zgodnie z definicją w `[Remote]` atrybutu.</span><span class="sxs-lookup"><span data-stu-id="01e36-237">The second step is putting the validation code in the corresponding action method as defined in the `[Remote]` attribute.</span></span> <span data-ttu-id="01e36-238">Zgodnie z jQuery weryfikacji [ `remote()` ](https://jqueryvalidation.org/remote-method/) dokumentacji metody:</span><span class="sxs-lookup"><span data-stu-id="01e36-238">According to the jQuery Validate [`remote()`](https://jqueryvalidation.org/remote-method/) method documentation:</span></span>

> <span data-ttu-id="01e36-239">Odpowiedź serverside musi być ciągiem formatu JSON, który musi być `"true"` elementów prawidłową i może być `"false"`, `undefined`, lub `null` dla nieprawidłowe elementy przy użyciu domyślnego komunikatu o błędzie.</span><span class="sxs-lookup"><span data-stu-id="01e36-239">The serverside response must be a JSON string that must be `"true"` for valid elements, and can be `"false"`, `undefined`, or `null` for invalid elements, using the default error message.</span></span> <span data-ttu-id="01e36-240">Jeśli odpowiedź serverside jest ciąg znaków, np.</span><span class="sxs-lookup"><span data-stu-id="01e36-240">If the serverside response is a string, eg.</span></span> <span data-ttu-id="01e36-241">`"That name is already taken, try peter123 instead"`, ciąg ten będzie wyświetlany jako niestandardowy komunikat o błędzie zamiast domyślnego.</span><span class="sxs-lookup"><span data-stu-id="01e36-241">`"That name is already taken, try peter123 instead"`, this string will be displayed as a custom error message in place of the default.</span></span>

<span data-ttu-id="01e36-242">Definicja `VerifyEmail()` metody obowiązują następujące reguły, jak pokazano poniżej.</span><span class="sxs-lookup"><span data-stu-id="01e36-242">The definition of the `VerifyEmail()` method follows these rules, as shown below.</span></span> <span data-ttu-id="01e36-243">Zwraca błąd sprawdzania poprawności komunikatu podjęcia wiadomości e-mail lub `true` Jeśli wiadomość e-mail jest bezpłatna i opakowuje wynik w `JsonResult` obiektu.</span><span class="sxs-lookup"><span data-stu-id="01e36-243">It returns a validation error message if the email is taken, or `true` if the email is free, and wraps the result in a `JsonResult` object.</span></span> <span data-ttu-id="01e36-244">Następnie po stronie klienta można użyć zwracanej wartości, aby kontynuować, lub wyświetlić błąd, jeśli to konieczne.</span><span class="sxs-lookup"><span data-stu-id="01e36-244">The client side can then use the returned value to proceed or display the error if needed.</span></span>

[!code-csharp[](validation/sample/UsersController.cs?range=19-28)]

<span data-ttu-id="01e36-245">Podczas wprowadzania wiadomości e-mail, JavaScript, w widoku umożliwia teraz zdalne wywołanie czy tej wiadomości e-mail zostały podjęte, a jeśli tak, wyświetla komunikat o błędzie.</span><span class="sxs-lookup"><span data-stu-id="01e36-245">Now when users enter an email, JavaScript in the view makes a remote call to see if that email has been taken and, if so, displays the error message.</span></span> <span data-ttu-id="01e36-246">W przeciwnym razie użytkownik można przesłać formularza, w zwykły sposób.</span><span class="sxs-lookup"><span data-stu-id="01e36-246">Otherwise, the user can submit the form as usual.</span></span>

<span data-ttu-id="01e36-247">`AdditionalFields` Właściwość `[Remote]` atrybutu przydaje się do sprawdzania poprawności kombinacji pól w odniesieniu do danych na serwerze.</span><span class="sxs-lookup"><span data-stu-id="01e36-247">The `AdditionalFields` property of the `[Remote]` attribute is useful for validating combinations of fields against data on the server.</span></span> <span data-ttu-id="01e36-248">Na przykład jeśli `User` modelu z powyższych ma dwie dodatkowe właściwości o nazwie `FirstName` i `LastName`, należy sprawdzić, czy nie istniejący użytkownicy mają już tej pary nazw.</span><span class="sxs-lookup"><span data-stu-id="01e36-248">For example, if the `User` model from above had two additional properties called `FirstName` and `LastName`, you might want to verify that no existing users already have that pair of names.</span></span> <span data-ttu-id="01e36-249">Możesz zdefiniować nowe właściwości, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="01e36-249">You define the new properties as shown in the following code:</span></span>

[!code-csharp[](validation/sample/User.cs?range=10-13)]

<span data-ttu-id="01e36-250">`AdditionalFields` można ustawiono jawnie ciągi `"FirstName"` i `"LastName"`, ale przy użyciu [ `nameof` ](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/nameof) upraszcza operator podobny do tego później refaktoryzacji.</span><span class="sxs-lookup"><span data-stu-id="01e36-250">`AdditionalFields` could've been set explicitly to the strings `"FirstName"` and `"LastName"`, but using the [`nameof`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/nameof) operator like this simplifies later refactoring.</span></span> <span data-ttu-id="01e36-251">Metoda akcji do wykonania walidacji następnie zaakceptować dwa argumenty, jeden dla wartości `FirstName` i jeden dla wartości `LastName`.</span><span class="sxs-lookup"><span data-stu-id="01e36-251">The action method to perform the validation must then accept two arguments, one for the value of `FirstName` and one for the value of `LastName`.</span></span>

[!code-csharp[](validation/sample/UsersController.cs?range=30-39)]

<span data-ttu-id="01e36-252">Teraz po użytkowników Wprowadź imię i nazwisko, JavaScript:</span><span class="sxs-lookup"><span data-stu-id="01e36-252">Now when users enter a first and last name, JavaScript:</span></span>

* <span data-ttu-id="01e36-253">Umożliwia zdalne wywołanie, aby zobaczyć, czy podjęto tej pary nazw.</span><span class="sxs-lookup"><span data-stu-id="01e36-253">Makes a remote call to see if that pair of names has been taken.</span></span>
* <span data-ttu-id="01e36-254">Jeśli podjęto pary, zostanie wyświetlony komunikat o błędzie.</span><span class="sxs-lookup"><span data-stu-id="01e36-254">If the pair has been taken, an error message is displayed.</span></span> 
* <span data-ttu-id="01e36-255">Jeśli nie zostanie podjęta, użytkownik może przesłać formularza.</span><span class="sxs-lookup"><span data-stu-id="01e36-255">If not taken, the user can submit the form.</span></span>

<span data-ttu-id="01e36-256">Jeśli musisz sprawdzić poprawności co najmniej dwa dodatkowe pola z `[Remote]` atrybutu, można podać je jako listę rozdzielaną przecinkami.</span><span class="sxs-lookup"><span data-stu-id="01e36-256">If you need to validate two or more additional fields with the `[Remote]` attribute, you provide them as a comma-delimited list.</span></span> <span data-ttu-id="01e36-257">Na przykład, aby dodać `MiddleName` ustawić właściwości w modelu `[Remote]` atrybutu, jak pokazano w poniższym kodzie:</span><span class="sxs-lookup"><span data-stu-id="01e36-257">For example, to add a `MiddleName` property to the model, set the `[Remote]` attribute as shown in the following code:</span></span>

```cs
[Remote(action: "VerifyName", controller: "Users", AdditionalFields = nameof(FirstName) + "," + nameof(LastName))]
public string MiddleName { get; set; }
```

<span data-ttu-id="01e36-258">`AdditionalFields`, takich jak wszystkich argumentów atrybutu musi być wyrażeniem stałym.</span><span class="sxs-lookup"><span data-stu-id="01e36-258">`AdditionalFields`, like all attribute arguments, must be a constant expression.</span></span> <span data-ttu-id="01e36-259">W związku z tym nie można używać [interpolowane ciąg](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/interpolated-strings) lub zadzwoń [ `string.Join()` ](https://msdn.microsoft.com/library/system.string.join(v=vs.110).aspx) zainicjować `AdditionalFields`.</span><span class="sxs-lookup"><span data-stu-id="01e36-259">Therefore, you must not use an [interpolated string](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/interpolated-strings) or call [`string.Join()`](https://msdn.microsoft.com/library/system.string.join(v=vs.110).aspx) to initialize `AdditionalFields`.</span></span> <span data-ttu-id="01e36-260">Dla każdego pola dodatkowe, które można dodać do `[Remote]` atrybutu, należy dodać inny argument do odpowiedniej metody akcji kontrolera.</span><span class="sxs-lookup"><span data-stu-id="01e36-260">For every additional field that you add to the `[Remote]` attribute, you must add another argument to the corresponding controller action method.</span></span>
