---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
title: Wprowadzenie do korzystania z bazy danych programu Entity Framework 4.0 najpierw i platformy ASP.NET 4 sieci Web Forms — część 7 | Dokumentacja firmy Microsoft
author: tdykstra
description: Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu programu Entity Framework. Przykładowa aplikacja jest...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: f8afb245-b705-419c-8790-0b295e90d5e2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-7
msc.type: authoredcontent
ms.openlocfilehash: cb84f4f3e130fedb3e2f1a17d630767ff65bfa05
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
ms.locfileid: "30886982"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-7"></a><span data-ttu-id="b1b04-104">Wprowadzenie do korzystania z bazy danych programu Entity Framework 4.0 najpierw i formularzy sieci Web 4 ASP.NET - część 7</span><span class="sxs-lookup"><span data-stu-id="b1b04-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 7</span></span>
====================
<span data-ttu-id="b1b04-105">Przez [Dykstra niestandardowy](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="b1b04-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="b1b04-106">Przykładową aplikację sieci web firmy Contoso University przedstawia sposób tworzenia aplikacji formularzy sieci Web ASP.NET przy użyciu programu Entity Framework 4.0 i Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="b1b04-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="b1b04-107">Informacje o samouczek serii, zobacz [pierwszy samouczek z tej serii](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="b1b04-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="using-stored-procedures"></a><span data-ttu-id="b1b04-108">korzystanie z procedur składowanych</span><span class="sxs-lookup"><span data-stu-id="b1b04-108">Using Stored Procedures</span></span>

<span data-ttu-id="b1b04-109">W poprzednich instrukcji zaimplementowano wzorzec tabeli na hierarchię dziedziczenia.</span><span class="sxs-lookup"><span data-stu-id="b1b04-109">In the previous tutorial you implemented a table-per-hierarchy inheritance pattern.</span></span> <span data-ttu-id="b1b04-110">Ten samouczek przedstawia sposób użycia procedur składowanych, aby uzyskać większą kontrolę nad dostęp do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b1b04-110">This tutorial will show you how to use stored procedures to gain more control over database access.</span></span>

<span data-ttu-id="b1b04-111">Entity Framework pozwala określić, że należy używać procedur składowanych na dostęp do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b1b04-111">The Entity Framework lets you specify that it should use stored procedures for database access.</span></span> <span data-ttu-id="b1b04-112">Dla każdego typu jednostki można określić procedury składowanej do użycia na potrzeby tworzenia, aktualizowania lub usuwania obiektów tego typu.</span><span class="sxs-lookup"><span data-stu-id="b1b04-112">For any entity type, you can specify a stored procedure to use for creating, updating, or deleting entities of that type.</span></span> <span data-ttu-id="b1b04-113">Następnie w modelu danych, można dodać odwołania do procedur składowanych, które umożliwiają wykonywanie zadań takich jak pobieranie zestawów jednostek.</span><span class="sxs-lookup"><span data-stu-id="b1b04-113">Then in the data model you can add references to stored procedures that you can use to perform tasks such as retrieving sets of entities.</span></span>

<span data-ttu-id="b1b04-114">Korzystanie z procedur składowanych jest typowe wymagania dotyczące dostępu do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b1b04-114">Using stored procedures is a common requirement for database access.</span></span> <span data-ttu-id="b1b04-115">W niektórych przypadkach administrator bazy danych może wymaga dostępu do wszystkich baz danych za pomocą procedur składowanych ze względów bezpieczeństwa.</span><span class="sxs-lookup"><span data-stu-id="b1b04-115">In some cases a database administrator may require that all database access go through stored procedures for security reasons.</span></span> <span data-ttu-id="b1b04-116">W innych przypadkach można wbudować logiki biznesowej niektórych procesów, które używa programu Entity Framework w momencie aktualizacji bazy danych.</span><span class="sxs-lookup"><span data-stu-id="b1b04-116">In other cases you may want to build business logic into some of the processes that the Entity Framework uses when it updates the database.</span></span> <span data-ttu-id="b1b04-117">Na przykład gdy usunięciu jednostki można skopiować go do bazy danych archiwum.</span><span class="sxs-lookup"><span data-stu-id="b1b04-117">For example, whenever an entity is deleted you might want to copy it to an archive database.</span></span> <span data-ttu-id="b1b04-118">Lub przy każdej aktualizacji wiersz należy zapisać wiersz do tabeli rejestrowania tego rekordów, którzy dokonali zmian.</span><span class="sxs-lookup"><span data-stu-id="b1b04-118">Or whenever a row is updated you might want to write a row to a logging table that records who made the change.</span></span> <span data-ttu-id="b1b04-119">Następujące rodzaje zadań można wykonać procedury przechowywanej, która jest wywoływana, gdy programu Entity Framework usunięcie jednostki lub aktualizuje jednostkę.</span><span class="sxs-lookup"><span data-stu-id="b1b04-119">You can perform these kinds of tasks in a stored procedure that's called whenever the Entity Framework deletes an entity or updates an entity.</span></span>

<span data-ttu-id="b1b04-120">Jak w poprzednich samouczka utworzysz nie nowych stron.</span><span class="sxs-lookup"><span data-stu-id="b1b04-120">As in the previous tutorial, you'll not create any new pages.</span></span> <span data-ttu-id="b1b04-121">Zamiast tego będzie zmienić sposób programu Entity Framework uzyskuje dostęp do bazy danych dla niektórych stron już utworzone.</span><span class="sxs-lookup"><span data-stu-id="b1b04-121">Instead, you'll change the way the Entity Framework accesses the database for some of the pages you already created.</span></span>

<span data-ttu-id="b1b04-122">W tym samouczku utworzysz procedur przechowywanych w bazie danych podczas wstawiania `Student` i `Instructor` jednostek.</span><span class="sxs-lookup"><span data-stu-id="b1b04-122">In this tutorial you'll create stored procedures in the database for inserting `Student` and `Instructor` entities.</span></span> <span data-ttu-id="b1b04-123">Zostaną dodane do modelu danych, a następnie określisz, że programu Entity Framework powinny być używane do dodawania `Student` i `Instructor` jednostek w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="b1b04-123">You'll add them to the data model, and you'll specify that the Entity Framework should use them for adding `Student` and `Instructor` entities to the database.</span></span> <span data-ttu-id="b1b04-124">Utworzysz także procedury przechowywanej, która służy do pobierania `Course` jednostek.</span><span class="sxs-lookup"><span data-stu-id="b1b04-124">You'll also create a stored procedure that you can use to retrieve `Course` entities.</span></span>

## <a name="creating-stored-procedures-in-the-database"></a><span data-ttu-id="b1b04-125">Tworzenie procedur przechowywanych w bazie danych</span><span class="sxs-lookup"><span data-stu-id="b1b04-125">Creating Stored Procedures in the Database</span></span>

<span data-ttu-id="b1b04-126">(Jeśli używasz *School.mdf* plik z projektu można pobrać z tego samouczka można pominąć tę sekcję, ponieważ istnieją już procedur składowanych.)</span><span class="sxs-lookup"><span data-stu-id="b1b04-126">(If you're using the *School.mdf* file from the project available for download with this tutorial, you can skip this section because the stored procedures already exist.)</span></span>

<span data-ttu-id="b1b04-127">W **Eksploratora serwera**, rozwiń węzeł *School.mdf*, kliknij prawym przyciskiem myszy **procedur składowanych**i wybierz **Dodaj nowe procedury składowanej**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-127">In **Server Explorer**, expand *School.mdf*, right-click **Stored Procedures**, and select **Add New Stored Procedure**.</span></span>

<span data-ttu-id="b1b04-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-128">[![image15](the-entity-framework-and-aspnet-getting-started-part-7/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image1.png)</span></span>

<span data-ttu-id="b1b04-129">Skopiuj następujące instrukcje SQL i wklej je do okna procedury składowanej, zastępując szkielet procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="b1b04-129">Copy the following SQL statements and paste them into the stored procedure window, replacing the skeleton stored procedure.</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample1.sql)]

<span data-ttu-id="b1b04-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-130">[![image14](the-entity-framework-and-aspnet-getting-started-part-7/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image3.png)</span></span>

<span data-ttu-id="b1b04-131">`Student` jednostki ma właściwości cztery: `PersonID`, `LastName`, `FirstName`, i `EnrollmentDate`.</span><span class="sxs-lookup"><span data-stu-id="b1b04-131">`Student` entities have four properties: `PersonID`, `LastName`, `FirstName`, and `EnrollmentDate`.</span></span> <span data-ttu-id="b1b04-132">Bazy danych automatycznie generuje wartość Identyfikatora i procedury składowanej akceptuje parametry dla innych trzech.</span><span class="sxs-lookup"><span data-stu-id="b1b04-132">The database generates the ID value automatically, and the stored procedure accepts parameters for the other three.</span></span> <span data-ttu-id="b1b04-133">Procedura składowana ma zwracać wartości klucza rekordu nowego wiersza, aby programu Entity Framework można zachować informacje o który w wersji jednostkę, która zapewnia w pamięci.</span><span class="sxs-lookup"><span data-stu-id="b1b04-133">The stored procedure returns the value of the new row's record key so that the Entity Framework can keep track of that in the version of the entity it keeps in memory.</span></span>

<span data-ttu-id="b1b04-134">Zapisz i zamknij okno procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="b1b04-134">Save and close the stored procedure window.</span></span>

<span data-ttu-id="b1b04-135">Utwórz `InsertInstructor` procedury składowanej w taki sam sposób, przy użyciu następujących instrukcji SQL:</span><span class="sxs-lookup"><span data-stu-id="b1b04-135">Create an `InsertInstructor` stored procedure in the same manner, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample2.sql)]

<span data-ttu-id="b1b04-136">Utwórz `Update` przechowywane procedury `Student` i `Instructor` jednostek również.</span><span class="sxs-lookup"><span data-stu-id="b1b04-136">Create `Update` stored procedures for `Student` and `Instructor` entities also.</span></span> <span data-ttu-id="b1b04-137">(Baza danych już zawiera `DeletePerson` przechowywane procedury, która będzie działać dla obu `Instructor` i `Student` jednostek.)</span><span class="sxs-lookup"><span data-stu-id="b1b04-137">(The database already has a `DeletePerson` stored procedure which will work for both `Instructor` and `Student` entities.)</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample3.sql)]

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample4.sql)]

<span data-ttu-id="b1b04-138">W tym samouczku będziesz mapować wszystkie trzy funkcje--insert, update i delete — dla poszczególnych typów jednostek.</span><span class="sxs-lookup"><span data-stu-id="b1b04-138">In this tutorial you'll map all three functions -- insert, update, and delete -- for each entity type.</span></span> <span data-ttu-id="b1b04-139">Entity Framework w wersji 4 pozwala na mapowanie co najmniej jeden lub dwa z tych funkcji na procedury składowane bez mapowania innych osób, z jednym wyjątkiem: Jeśli mapujesz funkcji aktualizacji, ale nie funkcji usuwania programu Entity Framework spowoduje zgłoszenie wyjątku podczas możesz Próba usunięcia jednostki.</span><span class="sxs-lookup"><span data-stu-id="b1b04-139">The Entity Framework version 4 allows you to map just one or two of these functions to stored procedures without mapping the others, with one exception: if you map the update function but not the delete function, the Entity Framework will throw an exception when you attempt to delete an entity.</span></span> <span data-ttu-id="b1b04-140">W Entity Framework w wersji 3.5 nie miał tym dużą elastyczność w mapowaniu procedur składowanych: Jeśli zamapowany jednej funkcji zostałby wymagane do mapowania wszystkich trzech.</span><span class="sxs-lookup"><span data-stu-id="b1b04-140">In the Entity Framework version 3.5, you did not have this much flexibility in mapping stored procedures: if you mapped one function you were required to map all three.</span></span>

<span data-ttu-id="b1b04-141">Aby utworzyć procedury przechowywanej, która odczytuje zamiast aktualizuje dane, należy utworzyć, który wybiera wszystkie `Course` jednostek przy użyciu następujących instrukcji SQL:</span><span class="sxs-lookup"><span data-stu-id="b1b04-141">To create a stored procedure that reads rather than updates data, create one that selects all `Course` entities, using the following SQL statements:</span></span>

[!code-sql[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample5.sql)]

## <a name="adding-the-stored-procedures-to-the-data-model"></a><span data-ttu-id="b1b04-142">Dodawanie procedur składowanych do modelu danych</span><span class="sxs-lookup"><span data-stu-id="b1b04-142">Adding the Stored Procedures to the Data Model</span></span>

<span data-ttu-id="b1b04-143">Procedury składowane są teraz zdefiniowany w bazie danych, ale muszą zostać dodane do modelu danych, aby udostępnić je do narzędzia Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="b1b04-143">The stored procedures are now defined in the database, but they must be added to the data model to make them available to the Entity Framework.</span></span> <span data-ttu-id="b1b04-144">Otwórz *SchoolModel.edmx*, kliknij prawym przyciskiem myszy powierzchnię projektu i wybierz **modelu aktualizacji z bazy danych**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-144">Open *SchoolModel.edmx*, right-click the design surface, and select **Update Model from Database**.</span></span> <span data-ttu-id="b1b04-145">W **Dodaj** karcie **wybierz obiekty bazy danych użytkownika** okna dialogowego rozwiń **procedur składowanych**, wybierz nowo utworzony procedur składowanych i `DeletePerson` procedury składowanej, a następnie kliknij przycisk **Zakończ**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-145">In the **Add** tab of the **Choose Your Database Objects** dialog box, expand **Stored Procedures**, select the newly created stored procedures and the `DeletePerson` stored procedure, and then click **Finish**.</span></span>

<span data-ttu-id="b1b04-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-146">[![image20](the-entity-framework-and-aspnet-getting-started-part-7/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image5.png)</span></span>

## <a name="mapping-the-stored-procedures"></a><span data-ttu-id="b1b04-147">Mapowanie procedur składowanych</span><span class="sxs-lookup"><span data-stu-id="b1b04-147">Mapping the Stored Procedures</span></span>

<span data-ttu-id="b1b04-148">W Projektancie modelu danych, kliknij prawym przyciskiem myszy `Student` jednostki i wybierz **mapowania procedury przechowywane**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-148">In the data model designer, right-click the `Student` entity and select **Stored Procedure Mapping**.</span></span>

<span data-ttu-id="b1b04-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-149">[![image21](the-entity-framework-and-aspnet-getting-started-part-7/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image7.png)</span></span>

<span data-ttu-id="b1b04-150">**Szczegóły mapowania** zostanie wyświetlone okno, w którym można określić procedur składowanych, które mają zostać użyte do wstawiania, aktualizowania i usuwania jednostek tego typu Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="b1b04-150">The **Mapping Details** window appears, in which you can specify stored procedures that the Entity Framework should use for inserting, updating, and deleting entities of this type.</span></span>

<span data-ttu-id="b1b04-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-151">[![image22](the-entity-framework-and-aspnet-getting-started-part-7/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image9.png)</span></span>

<span data-ttu-id="b1b04-152">Ustaw **Wstaw** funkcja **InsertStudent**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-152">Set the **Insert** function to **InsertStudent**.</span></span> <span data-ttu-id="b1b04-153">Okno Lista parametrów procedury składowanej, z których każdy musi być zamapowana na właściwość jednostki.</span><span class="sxs-lookup"><span data-stu-id="b1b04-153">The window shows a list of stored procedure parameters, each of which must be mapped to an entity property.</span></span> <span data-ttu-id="b1b04-154">Dwa pola spośród wymienionych są automatycznie mapowane ponieważ nazwy są takie same.</span><span class="sxs-lookup"><span data-stu-id="b1b04-154">Two of these are mapped automatically because the names are the same.</span></span> <span data-ttu-id="b1b04-155">Nie ma właściwości jednostki o nazwie `FirstName`, dlatego należy ręcznie wybrać `FirstMidName` z listy rozwijanej, która zawiera właściwości dostępne jednostki.</span><span class="sxs-lookup"><span data-stu-id="b1b04-155">There's no entity property named `FirstName`, so you must manually select `FirstMidName` from a drop-down list that shows available entity properties.</span></span> <span data-ttu-id="b1b04-156">(Jest to spowodowane zmieniona jego nazwa `FirstName` właściwości `FirstMidName` w pierwszym samouczku.)</span><span class="sxs-lookup"><span data-stu-id="b1b04-156">(This is because you changed the name of the `FirstName` property to `FirstMidName` in the first tutorial.)</span></span>

<span data-ttu-id="b1b04-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-157">[![image23](the-entity-framework-and-aspnet-getting-started-part-7/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image11.png)</span></span>

<span data-ttu-id="b1b04-158">W tym samym **szczegóły mapowania** okna, mapy `Update` funkcja `UpdateStudent` procedury składowanej (Upewnij się, że możesz określić `FirstMidName` jako wartość parametru `FirstName`, ponieważ została ona `Insert` procedurę składowaną) i `Delete` funkcja `DeletePerson` procedury składowanej.</span><span class="sxs-lookup"><span data-stu-id="b1b04-158">In the same **Mapping Details** window, map the `Update` function to the `UpdateStudent` stored procedure (make sure you specify `FirstMidName` as the parameter value for `FirstName`, as you did for the `Insert` stored procedure) and the `Delete` function to the `DeletePerson` stored procedure.</span></span>

<span data-ttu-id="b1b04-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-159">[![image01](the-entity-framework-and-aspnet-getting-started-part-7/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image13.png)</span></span>

<span data-ttu-id="b1b04-160">Postępuj zgodnie z tą samą procedurą, aby zamapować insert, update i delete procedury składowane instruktorów do `Instructor` jednostki.</span><span class="sxs-lookup"><span data-stu-id="b1b04-160">Follow the same procedure to map the insert, update, and delete stored procedures for instructors to the `Instructor` entity.</span></span>

<span data-ttu-id="b1b04-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-161">[![image02](the-entity-framework-and-aspnet-getting-started-part-7/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image15.png)</span></span>

<span data-ttu-id="b1b04-162">Dla procedur składowanych, które zapoznały zamiast danych aktualizacji, możesz użyć **przeglądarki modelu** okna do mapowania procedury składowanej jednostki typu zwraca.</span><span class="sxs-lookup"><span data-stu-id="b1b04-162">For stored procedures that read rather than update data, you use the **Model Browser** window to map the stored procedure to the entity type it returns.</span></span> <span data-ttu-id="b1b04-163">W Projektancie modelu danych, kliknij prawym przyciskiem myszy projekt powierzchni i wybierz pozycję **przeglądarki modelu**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-163">In the data model designer, right-click the design surface and select **Model Browser**.</span></span> <span data-ttu-id="b1b04-164">Otwórz **SchoolModel.Store** węzeł, a następnie otwórz **procedur składowanych** węzła.</span><span class="sxs-lookup"><span data-stu-id="b1b04-164">Open the **SchoolModel.Store** node and then open the **Stored Procedures** node.</span></span> <span data-ttu-id="b1b04-165">Kliknij prawym przyciskiem myszy `GetCourses` przechowywane procedury i wybierz **dodać importu funkcji**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-165">Then right-click the `GetCourses` stored procedure and select **Add Function Import**.</span></span>

<span data-ttu-id="b1b04-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-166">[![image24](the-entity-framework-and-aspnet-getting-started-part-7/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image17.png)</span></span>

<span data-ttu-id="b1b04-167">W **dodać importu funkcji** okna dialogowego, w obszarze **zwraca kolekcję z** wybierz **jednostek**, a następnie wybierz `Course` jako typ jednostki zwracana.</span><span class="sxs-lookup"><span data-stu-id="b1b04-167">In the **Add Function Import** dialog box, under **Returns a Collection Of** select **Entities**, and then select `Course` as the entity type returned.</span></span> <span data-ttu-id="b1b04-168">Gdy wszystko będzie gotowe, kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="b1b04-168">When you're done, click **OK**.</span></span> <span data-ttu-id="b1b04-169">Zapisz i Zamknij *edmx* pliku.</span><span class="sxs-lookup"><span data-stu-id="b1b04-169">Save and close the *.edmx* file.</span></span>

<span data-ttu-id="b1b04-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-170">[![image25](the-entity-framework-and-aspnet-getting-started-part-7/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image19.png)</span></span>

## <a name="using-insert-update-and-delete-stored-procedures"></a><span data-ttu-id="b1b04-171">Za pomocą wstawiania, aktualizowania i usuwania procedur składowanych</span><span class="sxs-lookup"><span data-stu-id="b1b04-171">Using Insert, Update, and Delete Stored Procedures</span></span>

<span data-ttu-id="b1b04-172">Procedury składowane do wstawiania, aktualizowania i usuwania danych są używane automatycznie przez program Entity Framework w po mapować je do odpowiednich jednostek i dodać je do modelu danych.</span><span class="sxs-lookup"><span data-stu-id="b1b04-172">Stored procedures to insert, update, and delete data are used by the Entity Framework automatically after you've added them to the data model and mapped them to the appropriate entities.</span></span> <span data-ttu-id="b1b04-173">Teraz możesz uruchomić *StudentsAdd.aspx* stronę, i przy tworzeniu nowych uczniów korzysta z programu Entity Framework `InsertStudent` przechowywane procedury, aby dodać nowy wiersz do `Student` tabeli.</span><span class="sxs-lookup"><span data-stu-id="b1b04-173">You can now run the *StudentsAdd.aspx* page, and every time you create a new student, the Entity Framework will use the `InsertStudent` stored procedure to add the new row to the `Student` table.</span></span>

<span data-ttu-id="b1b04-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-174">[![image03](the-entity-framework-and-aspnet-getting-started-part-7/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image21.png)</span></span>

<span data-ttu-id="b1b04-175">Uruchom *Students.aspx* strony i nowych uczniów pojawią się na liście.</span><span class="sxs-lookup"><span data-stu-id="b1b04-175">Run the *Students.aspx* page and the new student appears in the list.</span></span>

<span data-ttu-id="b1b04-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-176">[![image04](the-entity-framework-and-aspnet-getting-started-part-7/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image23.png)</span></span>

<span data-ttu-id="b1b04-177">Zmień nazwę, aby sprawdzić, czy funkcja aktualizacji działa, a następnie usuń uczniów, aby sprawdzić, czy działa funkcja usuwania.</span><span class="sxs-lookup"><span data-stu-id="b1b04-177">Change the name to verify that the update function works, and then delete the student to verify that the delete function works.</span></span>

<span data-ttu-id="b1b04-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="b1b04-178">[![image05](the-entity-framework-and-aspnet-getting-started-part-7/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-7/_static/image25.png)</span></span>

## <a name="using-select-stored-procedures"></a><span data-ttu-id="b1b04-179">Korzystanie z procedur składowanych Select</span><span class="sxs-lookup"><span data-stu-id="b1b04-179">Using Select Stored Procedures</span></span>

<span data-ttu-id="b1b04-180">Entity Framework nie uruchamia automatycznie procedur składowanych takich jak `GetCourses`, i nie można używać ich z `EntityDataSource` formantu.</span><span class="sxs-lookup"><span data-stu-id="b1b04-180">The Entity Framework does not automatically run stored procedures such as `GetCourses`, and you cannot use them with the `EntityDataSource` control.</span></span> <span data-ttu-id="b1b04-181">Aby korzystać z nich, można skontaktuj się z kodu.</span><span class="sxs-lookup"><span data-stu-id="b1b04-181">To use them, you call them from code.</span></span>

<span data-ttu-id="b1b04-182">Otwórz *InstructorsCourses.aspx.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="b1b04-182">Open the *InstructorsCourses.aspx.cs* file.</span></span> <span data-ttu-id="b1b04-183">`PopulateDropDownLists` Metoda używa zapytania LINQ do jednostek do pobrania wszystkich jednostek kursu tak, aby można przeglądać listę i ustalić, które przypisano instruktora i te, które są nieprzypisane:</span><span class="sxs-lookup"><span data-stu-id="b1b04-183">The `PopulateDropDownLists` method uses a LINQ-to-Entities query to retrieve all course entities so that it can loop through the list and determine which ones an instructor is assigned to and which ones are unassigned:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample6.cs)]

<span data-ttu-id="b1b04-184">Zamień ten element następujący kod:</span><span class="sxs-lookup"><span data-stu-id="b1b04-184">Replace this with the following code:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-7/samples/sample7.cs)]

<span data-ttu-id="b1b04-185">Strona używa teraz `GetCourses` przechowywane procedury, aby pobrać listę wszystkich kursów.</span><span class="sxs-lookup"><span data-stu-id="b1b04-185">The page now uses the `GetCourses` stored procedure to retrieve the list of all courses.</span></span> <span data-ttu-id="b1b04-186">Uruchomić stronę, aby sprawdzić, czy działa tak jak poprzednio.</span><span class="sxs-lookup"><span data-stu-id="b1b04-186">Run the page to verify that it works as it did before.</span></span>

<span data-ttu-id="b1b04-187">(Właściwości nawigacji jednostki pobierane przez procedurę składowaną może nie automatycznie wypełniane przy użyciu danych związanych z tymi podmiotami, w zależności od `ObjectContext` ustawienia domyślne.</span><span class="sxs-lookup"><span data-stu-id="b1b04-187">(Navigation properties of entities retrieved by a stored procedure might not be automatically populated with the data related to those entities, depending on `ObjectContext` default settings.</span></span> <span data-ttu-id="b1b04-188">Aby uzyskać więcej informacji, zobacz [ładowanie powiązanych obiektów](https://msdn.microsoft.com/library/bb896272.aspx) w bibliotece MSDN.)</span><span class="sxs-lookup"><span data-stu-id="b1b04-188">For more information, see [Loading Related Objects](https://msdn.microsoft.com/library/bb896272.aspx) in the MSDN Library.)</span></span>

<span data-ttu-id="b1b04-189">W następnym samouczku nauczysz się, jak ułatwić reguły programu i badanie danych formatowania i walidacji przy użyciu funkcji danych dynamicznych.</span><span class="sxs-lookup"><span data-stu-id="b1b04-189">In the next tutorial, you'll learn how to use Dynamic Data functionality to make it easier to program and test data formatting and validation rules.</span></span> <span data-ttu-id="b1b04-190">Zamiast określania na każdej reguły strony sieci web, na przykład ciągi formatu danych i czy pole jest wymagane, takie reguły można określić w metadanych modelu danych i są automatycznie stosowane na każdej stronie.</span><span class="sxs-lookup"><span data-stu-id="b1b04-190">Instead of specifying on each web page rules such as data format strings and whether or not a field is required, you can specify such rules in data model metadata and they're automatically applied on every page.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b1b04-191">[Poprzednie](the-entity-framework-and-aspnet-getting-started-part-6.md)
> [dalej](the-entity-framework-and-aspnet-getting-started-part-8.md)</span><span class="sxs-lookup"><span data-stu-id="b1b04-191">[Previous](the-entity-framework-and-aspnet-getting-started-part-6.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-8.md)</span></span>
