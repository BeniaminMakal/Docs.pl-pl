---
uid: signalr/overview/getting-started/real-time-web-applications-with-signalr
title: 'Wskazówki laboratorium: Aplikacje sieci Web czasu rzeczywistego z SignalR | Dokumentacja firmy Microsoft'
author: rick-anderson
description: Aplikacje sieci Web w czasie rzeczywistym funkcji możliwość wypychania zawartości do połączonych klientów, zdarza się, w czasie rzeczywistym po stronie serwera. Dla deweloperów platformy ASP.NET i ASP...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/16/2014
ms.topic: article
ms.assetid: ba07958c-42e1-4da0-81db-ba6925ed6db0
ms.technology: dotnet-signalr
ms.prod: .net-framework
msc.legacyurl: /signalr/overview/getting-started/real-time-web-applications-with-signalr
msc.type: authoredcontent
ms.openlocfilehash: 5a2bc120ded18ad2302fd6c5cde65a5323e86ca8
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
---
<a name="hands-on-lab-real-time-web-applications-with-signalr"></a><span data-ttu-id="72a6e-104">Wskazówki laboratorium: Aplikacje sieci Web czasu rzeczywistego z SignalR</span><span class="sxs-lookup"><span data-stu-id="72a6e-104">Hands On Lab: Real-Time Web Applications with SignalR</span></span>
====================
<span data-ttu-id="72a6e-105">Przez [obozów sieci Web Team](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="72a6e-105">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[<span data-ttu-id="72a6e-106">Pobierz obozów sieci Web uczenie Kit</span><span class="sxs-lookup"><span data-stu-id="72a6e-106">Download Web Camps Training Kit</span></span>](http://aka.ms/webcamps-training-kit)

> <span data-ttu-id="72a6e-107">Aplikacje sieci Web w czasie rzeczywistym funkcji możliwość wypychania zawartości do połączonych klientów, zdarza się, w czasie rzeczywistym po stronie serwera.</span><span class="sxs-lookup"><span data-stu-id="72a6e-107">Real-time Web applications feature the ability to push server-side content to the connected clients as it happens, in real-time.</span></span> <span data-ttu-id="72a6e-108">Dla deweloperów platformy ASP.NET **ASP.NET SignalR** jest biblioteki, aby dodać funkcje sieci web w czasie rzeczywistym do swoich aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-108">For ASP.NET developers, **ASP.NET SignalR** is a library to add real-time web functionality to their applications.</span></span> <span data-ttu-id="72a6e-109">Trwa skorzystać z kilku transportów, automatyczne wybieranie najlepiej transportu dostępne danego klienta i dostępne transportu najlepiej serwera.</span><span class="sxs-lookup"><span data-stu-id="72a6e-109">It takes advantage of several transports, automatically selecting the best available transport given the client and server's best available transport.</span></span> <span data-ttu-id="72a6e-110">Korzysta z **WebSocket**, interfejs API HTML5, który umożliwia komunikację dwukierunkową między przeglądarką i serwerem.</span><span class="sxs-lookup"><span data-stu-id="72a6e-110">It takes advantage of **WebSocket**, an HTML5 API that enables bi-directional communication between the browser and server.</span></span>
> 
> <span data-ttu-id="72a6e-111">**SignalR** udostępnia prostą, ogólny interfejs API dla ten serwer do klienta zdalnego wywoływania procedur (wywołują funkcje JavaScript w przeglądarkach klientów z kodu .NET po stronie serwera) w aplikacji platformy ASP.NET, a także dodawanie przydatne punkty zaczepienia umożliwiający zarządzanie połączeniami takie jak połączyć rozłączyć zdarzeń, grupowanie połączeń i autoryzację.</span><span class="sxs-lookup"><span data-stu-id="72a6e-111">**SignalR** also provides a simple, high-level API for doing server to client RPC (call JavaScript functions in your clients' browsers from server-side .NET code) in your ASP.NET application, as well as adding useful hooks for connection management, such as connect/disconnect events, grouping connections, and authorization.</span></span>
> 
> <span data-ttu-id="72a6e-112">**SignalR** umieszczeniu abstrakcję niektóre transportów, które są wymagane do pracy w czasie rzeczywistym między klientem i serwerem.</span><span class="sxs-lookup"><span data-stu-id="72a6e-112">**SignalR** is an abstraction over some of the transports that are required to do real-time work between client and server.</span></span> <span data-ttu-id="72a6e-113">A **SignalR** połączenia rozpoczyna się jako HTTP, a następnie jest podwyższany do **WebSocket** połączenia, jeśli jest dostępna.</span><span class="sxs-lookup"><span data-stu-id="72a6e-113">A **SignalR** connection starts as HTTP, and is then promoted to a **WebSocket** connection if available.</span></span> <span data-ttu-id="72a6e-114">**WebSocket** jest idealny transportu dla **SignalR**, ponieważ ułatwia najbardziej efektywne wykorzystanie pamięci serwera ma najniższym opóźnieniu i ma większość funkcji (takich jak pełnego dupleksu komunikacji między klientem i serwerów), ale ma także najbardziej rygorystyczne wymagania: **WebSocket** wymaga, aby serwer używa **systemu Windows Server 2012** lub **systemu Windows 8**, wraz z **.NET framework 4.5**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-114">**WebSocket** is the ideal transport for **SignalR**, since it makes the most efficient use of server memory, has the lowest latency, and has the most underlying features (such as full duplex communication between client and server), but it also has the most stringent requirements: **WebSocket** requires the server to be using **Windows Server 2012** or **Windows 8**, along with **.NET Framework 4.5**.</span></span> <span data-ttu-id="72a6e-115">Jeśli te wymagania nie są spełnione, **SignalR** podejmie próbę użycia innych transportów dokonanie jego połączenia (takie jak *Ajax długi sondowania*).</span><span class="sxs-lookup"><span data-stu-id="72a6e-115">If these requirements are not met, **SignalR** will attempt to use other transports to make its connections (like *Ajax long polling*).</span></span>
> 
> <span data-ttu-id="72a6e-116">**SignalR** interfejs API zawiera dwa modele komunikacji między klientami a serwerami: **połączeń trwałych** i **koncentratory**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-116">The **SignalR** API contains two models for communicating between clients and servers: **Persistent Connections** and **Hubs**.</span></span> <span data-ttu-id="72a6e-117">A **połączenia** reprezentuje proste punktu końcowego dla wysyłania jednego adresata pogrupowane lub wiadomości emisji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-117">A **Connection** represents a simple endpoint for sending single-recipient, grouped, or broadcast messages.</span></span> <span data-ttu-id="72a6e-118">A **Centrum** jest bardziej ogólne potoku wbudowane w system API połączenia, który pozwala klienta i serwera, bezpośrednie wywoływanie metod na siebie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-118">A **Hub** is a more high-level pipeline built upon the Connection API that allows your client and server to call methods on each other directly.</span></span>
> 
> ![Architektura SignalR](real-time-web-applications-with-signalr/_static/image1.png)
> 
> <span data-ttu-id="72a6e-120">Wszystkie przykładowy kod i fragmenty kodu są uwzględnione w sieci Web obozów zestaw szkoleniowy, dostępne pod adresem [ http://aka.ms/webcamps-training-kit ](http://aka.ms/webcamps-training-kit).</span><span class="sxs-lookup"><span data-stu-id="72a6e-120">All sample code and snippets are included in the Web Camps Training Kit, available at [http://aka.ms/webcamps-training-kit](http://aka.ms/webcamps-training-kit).</span></span>


<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="72a6e-121">Omówienie</span><span class="sxs-lookup"><span data-stu-id="72a6e-121">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="72a6e-122">Cele</span><span class="sxs-lookup"><span data-stu-id="72a6e-122">Objectives</span></span>

<span data-ttu-id="72a6e-123">W tym laboratorium praktycznego przedstawiono sposób:</span><span class="sxs-lookup"><span data-stu-id="72a6e-123">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="72a6e-124">Wysyłanie powiadomień z serwera do klienta przy użyciu SignalR.</span><span class="sxs-lookup"><span data-stu-id="72a6e-124">Send notifications from server to client using SignalR.</span></span>
- <span data-ttu-id="72a6e-125">Skalowanie w poziomie z SignalR aplikacji przy użyciu **programu SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-125">Scale Out your SignalR application using **SQL Server**.</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="72a6e-126">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="72a6e-126">Prerequisites</span></span>

<span data-ttu-id="72a6e-127">Poniżej jest wymagany do ukończenia tego laboratorium praktycznego:</span><span class="sxs-lookup"><span data-stu-id="72a6e-127">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="72a6e-128">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) lub nowszej</span><span class="sxs-lookup"><span data-stu-id="72a6e-128">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="72a6e-129">Konfiguracja</span><span class="sxs-lookup"><span data-stu-id="72a6e-129">Setup</span></span>

<span data-ttu-id="72a6e-130">Aby można było uruchomić ćwiczeń opisanych w tym laboratorium praktycznego, należy najpierw skonfigurować środowiska.</span><span class="sxs-lookup"><span data-stu-id="72a6e-130">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="72a6e-131">Otwórz okno Eksploratora Windows i przejdź do laboratorium **źródła** folderu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-131">Open a Windows Explorer window and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="72a6e-132">Kliknij prawym przyciskiem myszy **Setup.cmd** i wybierz **Uruchom jako administrator** do uruchamiania procesu instalacji, który skonfigurujesz środowisko i zainstalować wstawki kodu programu Visual Studio dla tego laboratorium.</span><span class="sxs-lookup"><span data-stu-id="72a6e-132">Right-click **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="72a6e-133">Jeśli wyświetlane jest okno dialogowe kontroli konta użytkownika, potwierdź tę akcję, aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="72a6e-133">If the User Account Control dialog box is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="72a6e-134">Upewnij się, że zaznaczono wszystkie zależności dla tego laboratorium przed uruchomieniem Instalatora.</span><span class="sxs-lookup"><span data-stu-id="72a6e-134">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>


<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="72a6e-135">Korzystania z wstawek kodu</span><span class="sxs-lookup"><span data-stu-id="72a6e-135">Using the Code Snippets</span></span>

<span data-ttu-id="72a6e-136">W dokumencie laboratorium należy poinstruować do wstawienia bloków kodu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-136">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="72a6e-137">Dla wygody większość tego kodu jest dostępna w Visual Studio wstawki kodu, które są dostępne w Visual Studio 2013, aby uniknąć konieczności Dodaj ją ręcznie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-137">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="72a6e-138">Każdy wykonywania towarzyszy początkowy rozwiązania, znajdujących się w **rozpocząć** folderu ćwiczeniu, która umożliwia wykonanie każdej wykonywania niezależnie od innych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-138">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="72a6e-139">Należy pamiętać, że fragmenty kodu, które są dodawane podczas wykonywania brakuje te uruchamianie rozwiązań i może nie działać do czasu wykonywania.</span><span class="sxs-lookup"><span data-stu-id="72a6e-139">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="72a6e-140">W kodzie źródłowym wykonywania można również znaleźć **zakończenia** folderu zawierającego rozwiązanie Visual Studio z kodem, który powoduje wykonanie czynności opisane w odpowiedniej wykonywania.</span><span class="sxs-lookup"><span data-stu-id="72a6e-140">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="72a6e-141">Jeśli potrzebujesz dodatkowej pomocy w pracy za pośrednictwem tego laboratorium praktycznego, można użyć tych rozwiązań jako wskazówki.</span><span class="sxs-lookup"><span data-stu-id="72a6e-141">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>


* * *

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="72a6e-142">Ćwiczenia</span><span class="sxs-lookup"><span data-stu-id="72a6e-142">Exercises</span></span>

<span data-ttu-id="72a6e-143">To laboratorium praktycznego obejmuje następujących czynnościach:</span><span class="sxs-lookup"><span data-stu-id="72a6e-143">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="72a6e-144">Praca z danymi w czasie rzeczywistym za pomocą biblioteki SignalR</span><span class="sxs-lookup"><span data-stu-id="72a6e-144">Working with Real-Time Data Using SignalR</span></span>](#Exercise1)
2. [<span data-ttu-id="72a6e-145">Skalowanie w poziomie przy użyciu programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="72a6e-145">Scaling Out Using SQL Server</span></span>](#Exercise2)

<span data-ttu-id="72a6e-146">Szacowany czas trwania tego laboratorium: **60 minut**</span><span class="sxs-lookup"><span data-stu-id="72a6e-146">Estimated time to complete this lab: **60 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="72a6e-147">Przy pierwszym uruchomieniu programu Visual Studio, musisz wybrać jeden z wstępnie zdefiniowanych ustawień kolekcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-147">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="72a6e-148">Każda kolekcja wstępnie zdefiniowanych zaprojektowano w celu stylem rozwoju i określa układów okien, zachowanie edytora wstawki kodu IntelliSense i opcje w oknach dialogowych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-148">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="72a6e-149">Procedury przedstawione w tym laboratorium opisano czynności niezbędnych do wykonywania danego zadania w programie Visual Studio, korzystając z **ogólne ustawienia środowiska deweloperskiego** kolekcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-149">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="72a6e-150">Jeśli wybierzesz kolekcji różne ustawienia dla swojego środowiska programowania, może być różnice w krokach, które należy wziąć pod uwagę.</span><span class="sxs-lookup"><span data-stu-id="72a6e-150">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>


<a id="Exercise1"></a>
### <a name="exercise-1-working-with-real-time-data-using-signalr"></a><span data-ttu-id="72a6e-151">Ćwiczenie 1: Praca z danymi w czasie rzeczywistym za pomocą biblioteki SignalR</span><span class="sxs-lookup"><span data-stu-id="72a6e-151">Exercise 1: Working with Real-Time Data Using SignalR</span></span>

<span data-ttu-id="72a6e-152">Gdy rozmowa jest często używana jako przykład, można przeprowadzać całej partii więcej o funkcji sieci Web w czasie rzeczywistym.</span><span class="sxs-lookup"><span data-stu-id="72a6e-152">While chat is often used as an example, you can do a whole lot more with real-time Web functionality.</span></span> <span data-ttu-id="72a6e-153">Ilekroć użytkownik odświeża strony sieci web, aby zobaczyć nowe dane lub implementuje stronę Ajax długi sondowania można pobrać nowe dane, można użyć SignalR.</span><span class="sxs-lookup"><span data-stu-id="72a6e-153">Any time a user refreshes a web page to see new data or the page implements Ajax long polling to retrieve new data, you can use SignalR.</span></span>

<span data-ttu-id="72a6e-154">Obsługuje SignalR **wypychania serwera** lub **emisji** funkcji; obsługuje zarządzanie połączeniami automatycznie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-154">SignalR supports **server push** or **broadcasting** functionality; it handles connection management automatically.</span></span> <span data-ttu-id="72a6e-155">W klasycznym połączeń HTTP dla komunikacji klient serwer, ponownym nawiązaniu połączenia dla każdego żądania, ale Biblioteka SignalR udostępnia trwałe połączenie między klientem i serwerem.</span><span class="sxs-lookup"><span data-stu-id="72a6e-155">In classic HTTP connections for client-server communication, connection is re-established for each request, but SignalR provides persistent connection between the client and server.</span></span> <span data-ttu-id="72a6e-156">W bibliotece SignalR kod serwera wywołania do kodu klienta w przeglądarce, za pomocą zdalnego wywołania procedury (RPC) zamiast modelu żądań i odpowiedzi wiemy dzisiaj.</span><span class="sxs-lookup"><span data-stu-id="72a6e-156">In SignalR the server code calls out to a client code in the browser using Remote Procedure Calls (RPC), rather than the request-response model we know today.</span></span>

<span data-ttu-id="72a6e-157">W tym ćwiczeniu zostanie skonfigurowana **Geek quizu** aplikację SignalR do wyświetlania pulpitu nawigacyjnego statystyki o zaktualizowanych metryki bez konieczności odświeżenia dla całej strony.</span><span class="sxs-lookup"><span data-stu-id="72a6e-157">In this exercise, you will configure the **Geek Quiz** application to use SignalR to display the Statistics dashboard with the updated metrics without the need to refresh the entire page.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--exploring-the-geek-quiz-statistics-page"></a><span data-ttu-id="72a6e-158">Zadanie 1 — eksploracji strona statystyk Geek kwizu</span><span class="sxs-lookup"><span data-stu-id="72a6e-158">Task 1 – Exploring the Geek Quiz Statistics Page</span></span>

<span data-ttu-id="72a6e-159">W tym zadaniu zostanie przejść przez aplikację i sprawdzić, jak przedstawiono na stronie Statystyka i jak można ulepszyć sposób informacje jest aktualizowany.</span><span class="sxs-lookup"><span data-stu-id="72a6e-159">In this task, you will go through the application and verify how the statistics page is shown and how you can improve the way the information is updated.</span></span>

1. <span data-ttu-id="72a6e-160">Otwórz **programu Visual Studio Express 2013 for Web** , a następnie otwórz **GeekQuiz.sln** rozwiązania, znajdujących się w **Source\Ex1 WorkingWithRealTimeData\Begin** folderu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-160">Open **Visual Studio Express 2013 for Web** and open the **GeekQuiz.sln** solution located in the **Source\Ex1-WorkingWithRealTimeData\Begin** folder.</span></span>
2. <span data-ttu-id="72a6e-161">Naciśnij klawisz **F5** Aby uruchomić rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-161">Press **F5** to run the solution.</span></span> <span data-ttu-id="72a6e-162">**Zaloguj** strony powinna zostać wyświetlona w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="72a6e-162">The **Log in** page should appear in the browser.</span></span>

    <span data-ttu-id="72a6e-163">![Uruchomiona rozwiązania](real-time-web-applications-with-signalr/_static/image2.png "systemem rozwiązania")</span><span class="sxs-lookup"><span data-stu-id="72a6e-163">![Running the solution](real-time-web-applications-with-signalr/_static/image2.png "Running the solution")</span></span>

    <span data-ttu-id="72a6e-164">*Uruchomiona rozwiązania*</span><span class="sxs-lookup"><span data-stu-id="72a6e-164">*Running the solution*</span></span>
3. <span data-ttu-id="72a6e-165">Kliknij przycisk **zarejestrować** w prawym górnym rogu strony, aby utworzyć nowego użytkownika w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-165">Click **Register** in the upper-right corner of the page to create a new user in the application.</span></span>

    <span data-ttu-id="72a6e-166">![Zarejestruj łącze](real-time-web-applications-with-signalr/_static/image3.png "łącze rejestru")</span><span class="sxs-lookup"><span data-stu-id="72a6e-166">![Register link](real-time-web-applications-with-signalr/_static/image3.png "Register link")</span></span>

    <span data-ttu-id="72a6e-167">*Zarejestruj łącza*</span><span class="sxs-lookup"><span data-stu-id="72a6e-167">*Register link*</span></span>
4. <span data-ttu-id="72a6e-168">W **zarejestrować** wprowadź **nazwy użytkownika** i **hasło**, a następnie kliknij przycisk **zarejestrować**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-168">In the **Register** page, enter a **User name** and **Password**, and then click **Register**.</span></span>

    <span data-ttu-id="72a6e-169">![Rejestrowanie użytkownika](real-time-web-applications-with-signalr/_static/image4.png "rejestracja użytkownika")</span><span class="sxs-lookup"><span data-stu-id="72a6e-169">![Registering a user](real-time-web-applications-with-signalr/_static/image4.png "Registering a user")</span></span>

    <span data-ttu-id="72a6e-170">*Rejestracja użytkownika*</span><span class="sxs-lookup"><span data-stu-id="72a6e-170">*Registering a user*</span></span>
5. <span data-ttu-id="72a6e-171">Aplikacja rejestruje nowego konta i użytkownik jest uwierzytelniony i przekierowany z powrotem do strony głównej przedstawiający pierwsze pytanie testu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-171">The application registers the new account and the user is authenticated and redirected back to the home page showing the first quiz question.</span></span>
6. <span data-ttu-id="72a6e-172">Otwórz **statystyki** strony w nowym oknie i umieszcza **Home** strony i **statystyki** side-by-side strony.</span><span class="sxs-lookup"><span data-stu-id="72a6e-172">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side.</span></span>

    <span data-ttu-id="72a6e-173">![Windows Side-by-side](real-time-web-applications-with-signalr/_static/image5.png "po stronie przez system windows po stronie")</span><span class="sxs-lookup"><span data-stu-id="72a6e-173">![Side-by-side windows](real-time-web-applications-with-signalr/_static/image5.png "Side by side windows")</span></span>

    <span data-ttu-id="72a6e-174">*Side-by-side systemu windows*</span><span class="sxs-lookup"><span data-stu-id="72a6e-174">*Side-by-side windows*</span></span>
7. <span data-ttu-id="72a6e-175">W **Home** strony, Odpowiedz na pytanie, klikając jedną z opcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-175">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="72a6e-176">![Udzielenie odpowiedzi na pytanie](real-time-web-applications-with-signalr/_static/image6.png "udzielenie odpowiedzi na pytania")</span><span class="sxs-lookup"><span data-stu-id="72a6e-176">![Answering a question](real-time-web-applications-with-signalr/_static/image6.png "Answering a question")</span></span>

    <span data-ttu-id="72a6e-177">*Udzielenie odpowiedzi na pytania*</span><span class="sxs-lookup"><span data-stu-id="72a6e-177">*Answering a question*</span></span>
8. <span data-ttu-id="72a6e-178">Po kliknięciu przycisku jeden z przycisków, powinna zostać wyświetlona odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="72a6e-178">After clicking one of the buttons, the answer should appear.</span></span>

    <span data-ttu-id="72a6e-179">![Poprawne odpowiedzi na pytanie](real-time-web-applications-with-signalr/_static/image7.png "poprawne odpowiedzi na pytanie")</span><span class="sxs-lookup"><span data-stu-id="72a6e-179">![Question answered correct](real-time-web-applications-with-signalr/_static/image7.png "Question answered correct")</span></span>

    <span data-ttu-id="72a6e-180">*Prawidłowej odpowiedzi na pytania*</span><span class="sxs-lookup"><span data-stu-id="72a6e-180">*Question answered correctly*</span></span>
9. <span data-ttu-id="72a6e-181">Zwróć uwagę, czy informacje podane na stronie statystyki są nieaktualne.</span><span class="sxs-lookup"><span data-stu-id="72a6e-181">Notice that the information provided in the Statistics page is outdated.</span></span> <span data-ttu-id="72a6e-182">Odśwież stronę, aby wyświetlić zaktualizowane wyniki.</span><span class="sxs-lookup"><span data-stu-id="72a6e-182">Refresh the page in order to see the updated results.</span></span>

    <span data-ttu-id="72a6e-183">![Strona statystyk](real-time-web-applications-with-signalr/_static/image8.png "strona statystyk")</span><span class="sxs-lookup"><span data-stu-id="72a6e-183">![Statistics page](real-time-web-applications-with-signalr/_static/image8.png "Statistics page")</span></span>

    <span data-ttu-id="72a6e-184">*Strona statystyk*</span><span class="sxs-lookup"><span data-stu-id="72a6e-184">*Statistics page*</span></span>
10. <span data-ttu-id="72a6e-185">Wróć do programu Visual Studio i Zatrzymaj debugowanie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-185">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--adding-signalr-to-geek-quiz-to-show-online-charts"></a><span data-ttu-id="72a6e-186">Zadanie 2 — Dodawanie SignalR do kwizu Geek pokazanie wykresy Online</span><span class="sxs-lookup"><span data-stu-id="72a6e-186">Task 2 – Adding SignalR to Geek Quiz to Show Online Charts</span></span>

<span data-ttu-id="72a6e-187">W tym zadaniu zostanie Dodaj SignalR do rozwiązania i aktualizacje automatyczne wysyłanie do klientów podczas nową odpowiedź jest wysyłane do serwera.</span><span class="sxs-lookup"><span data-stu-id="72a6e-187">In this task, you will add SignalR to the solution and send updates to the clients automatically when a new answer is sent to the server.</span></span>

1. <span data-ttu-id="72a6e-188">Z **narzędzia** menu w programie Visual Studio, wybierz **Menedżer pakietów biblioteki**, a następnie kliknij przycisk **Konsola Menedżera pakietów**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-188">From the **Tools** menu in Visual Studio, select **Library Package Manager**, and then click **Package Manager Console**.</span></span>
2. <span data-ttu-id="72a6e-189">W **Konsola Menedżera pakietów** okna, uruchom następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="72a6e-189">In the **Package Manager Console** window, execute the following command:</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample1.ps1)]

    <span data-ttu-id="72a6e-190">![Instalacja pakietu SignalR](real-time-web-applications-with-signalr/_static/image9.png "instalacji pakietu SignalR")</span><span class="sxs-lookup"><span data-stu-id="72a6e-190">![SignalR package installation](real-time-web-applications-with-signalr/_static/image9.png "SignalR package installation")</span></span>

    <span data-ttu-id="72a6e-191">*Instalacja pakietu SignalR*</span><span class="sxs-lookup"><span data-stu-id="72a6e-191">*SignalR package installation*</span></span>

   > [!NOTE]
   > <span data-ttu-id="72a6e-192">Podczas instalowania **SignalR** wersji pakietów NuGet pkt 2.0.2 z nowego aplikacji MVC 5, należy ręcznie zaktualizować **OWIN** pakietów do wersji 2.0.1 (lub nowszej) przed zainstalowaniem SignalR.</span><span class="sxs-lookup"><span data-stu-id="72a6e-192">When installing **SignalR** NuGet packages version 2.0.2 from a brand new MVC 5 application, you will need to manually update **OWIN** packages to version 2.0.1 (or higher) before installing SignalR.</span></span> <span data-ttu-id="72a6e-193">Aby to zrobić, należy wykonać następujący skrypt w **Konsola Menedżera pakietów**:</span><span class="sxs-lookup"><span data-stu-id="72a6e-193">To do this, you can execute the following script in the **Package Manager Console**:</span></span>
   > 
   > [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample2.ps1)]
   > 
   > <span data-ttu-id="72a6e-194">W przyszłym wydaniu SignalR zależności OWIN zostanie automatycznie zaktualizowana.</span><span class="sxs-lookup"><span data-stu-id="72a6e-194">In a future release of SignalR, OWIN dependencies will be automatically updated.</span></span>
3. <span data-ttu-id="72a6e-195">W **Eksploratora rozwiązań**, rozwiń węzeł **skryptów** folderu i zwróć uwagę, że SignalR *js* pliki zostały dodane do rozwiązania.</span><span class="sxs-lookup"><span data-stu-id="72a6e-195">In **Solution Explorer**, expand the **Scripts** folder and notice that the SignalR *js* files were added to the solution.</span></span>

    <span data-ttu-id="72a6e-196">![SignalR JavaScript odwołuje się do](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript odwołuje się do")</span><span class="sxs-lookup"><span data-stu-id="72a6e-196">![SignalR JavaScript references](real-time-web-applications-with-signalr/_static/image10.png "SignalR JavaScript references")</span></span>

    <span data-ttu-id="72a6e-197">*Odwołania SignalR JavaScript*</span><span class="sxs-lookup"><span data-stu-id="72a6e-197">*SignalR JavaScript references*</span></span>
4. <span data-ttu-id="72a6e-198">W **Eksploratora rozwiązań**, kliknij prawym przyciskiem myszy **GeekQuiz** projektu, zaznacz **Dodaj** | **nowy Folder**i nazywa je  **Koncentratory**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-198">In **Solution Explorer**, right-click the **GeekQuiz** project, select **Add** | **New Folder**, and name it **Hubs**.</span></span>
5. <span data-ttu-id="72a6e-199">Kliknij prawym przyciskiem myszy **koncentratory** i wybierz polecenie **Dodaj | Nowy element**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-199">Right-click the **Hubs** folder and select **Add | New Item**.</span></span>

    <span data-ttu-id="72a6e-200">![Dodaj nowy element](real-time-web-applications-with-signalr/_static/image11.png "Dodaj nowy element")</span><span class="sxs-lookup"><span data-stu-id="72a6e-200">![Add new item](real-time-web-applications-with-signalr/_static/image11.png "Add new item")</span></span>

    <span data-ttu-id="72a6e-201">*Dodaj nowy element*</span><span class="sxs-lookup"><span data-stu-id="72a6e-201">*Add new item*</span></span>
6. <span data-ttu-id="72a6e-202">W **Dodaj nowy element** okno dialogowe, wybierz opcję **Visual C# | Sieci Web | SignalR** węzła w okienku po lewej stronie wybierz **klasy koncentratora SignalR (v2)** w środkowym okienku Nazwij plik **StatisticsHub.cs** i kliknij przycisk **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-202">In the **Add New Item** dialog box, select the **Visual C# | Web | SignalR** node in the left pane, select **SignalR Hub Class (v2)** from the center pane, name the file **StatisticsHub.cs** and click **Add**.</span></span>

    <span data-ttu-id="72a6e-203">![Okno dialogowe Dodaj nowy element](real-time-web-applications-with-signalr/_static/image12.png "okno dialogowe Dodaj nowy element")</span><span class="sxs-lookup"><span data-stu-id="72a6e-203">![Add new item dialog box](real-time-web-applications-with-signalr/_static/image12.png "Add new item dialog box")</span></span>

    <span data-ttu-id="72a6e-204">*Dodaj nowy element — okno dialogowe*</span><span class="sxs-lookup"><span data-stu-id="72a6e-204">*Add new item dialog box*</span></span>
7. <span data-ttu-id="72a6e-205">Zastąp kod w **StatisticsHub** klasy następującym kodem.</span><span class="sxs-lookup"><span data-stu-id="72a6e-205">Replace the code in the **StatisticsHub** class with the following code.</span></span>

    <span data-ttu-id="72a6e-206">(Fragment - kodu *StatisticsHubClass RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-206">(Code Snippet - *RealTimeSignalR - Ex1 - StatisticsHubClass*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample3.cs)]
8. <span data-ttu-id="72a6e-207">Otwórz **Startup.cs** i Dodaj następujący wiersz na końcu **konfiguracji** metody.</span><span class="sxs-lookup"><span data-stu-id="72a6e-207">Open **Startup.cs** and add the following line at the end of the **Configuration** method.</span></span>

    <span data-ttu-id="72a6e-208">(Fragment - kodu *MapSignalR RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-208">(Code Snippet - *RealTimeSignalR - Ex1 - MapSignalR*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample4.cs)]
9. <span data-ttu-id="72a6e-209">Otwórz **StatisticsService.cs** strony wewnątrz **usług** folderu i dodaj następującą przy użyciu dyrektyw.</span><span class="sxs-lookup"><span data-stu-id="72a6e-209">Open the **StatisticsService.cs** page inside the **Services** folder and add the following using directives.</span></span>

    <span data-ttu-id="72a6e-210">(Fragment - kodu *UsingDirectives RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-210">(Code Snippet - *RealTimeSignalR - Ex1 - UsingDirectives*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample5.cs)]
10. <span data-ttu-id="72a6e-211">Aby powiadomić podłączeni klienci aktualizacje, należy najpierw pobrać **kontekstu** obiektu dla bieżącego połączenia.</span><span class="sxs-lookup"><span data-stu-id="72a6e-211">To notify connected clients of updates, you first retrieve a **Context** object for the current connection.</span></span> <span data-ttu-id="72a6e-212">**Centrum** obiektu zawiera metody do wysyłania komunikatów do jednego klienta lub emisji do wszystkich połączonych klientów.</span><span class="sxs-lookup"><span data-stu-id="72a6e-212">The **Hub** object contains methods to send messages to a single client or broadcast to all connected clients.</span></span> <span data-ttu-id="72a6e-213">Dodaj następującą metodę do **StatisticsService** klasy wysyłać dane statystyk.</span><span class="sxs-lookup"><span data-stu-id="72a6e-213">Add the following method to the **StatisticsService** class to broadcast the statistics data.</span></span>

    <span data-ttu-id="72a6e-214">(Fragment - kodu *NotifyUpdatesMethod RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-214">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesMethod*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample6.cs)]

    > [!NOTE]
    > <span data-ttu-id="72a6e-215">W powyższym kodzie używasz nazwę metody dowolnego do wywoływania funkcji na kliencie (np.: *updateStatistics*).</span><span class="sxs-lookup"><span data-stu-id="72a6e-215">In the code above, you are using an arbitrary method name to call a function on the client (i.e.: *updateStatistics*).</span></span> <span data-ttu-id="72a6e-216">Określona nazwa metody jest interpretowany jako obiekt dynamiczny, co oznacza, że nie istnieje IntelliSense lub weryfikacji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-216">The method name that you specify is interpreted as a dynamic object, which means there is no IntelliSense or compile-time validation for it.</span></span> <span data-ttu-id="72a6e-217">Wyrażenie jest obliczane w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="72a6e-217">The expression is evaluated at run time.</span></span> <span data-ttu-id="72a6e-218">Podczas wywołania metody, SignalR wysyła nazwę metody i wartości parametrów do klienta.</span><span class="sxs-lookup"><span data-stu-id="72a6e-218">When the method call executes, SignalR sends the method name and the parameter values to the client.</span></span> <span data-ttu-id="72a6e-219">Jeśli klient ma metodę, która jest zgodna z nazwą, czy metoda jest wywoływana i wartości parametrów są przekazywane do niego.</span><span class="sxs-lookup"><span data-stu-id="72a6e-219">If the client has a method that matches the name, that method is called and the parameter values are passed to it.</span></span> <span data-ttu-id="72a6e-220">Jeśli odpowiadającej metody znajduje się na komputerze klienckim, nie błąd.</span><span class="sxs-lookup"><span data-stu-id="72a6e-220">If no matching method is found on the client, no error is raised.</span></span> <span data-ttu-id="72a6e-221">Aby uzyskać więcej informacji, zapoznaj się [Podręcznik interfejsu API koncentratorów SignalR platformy ASP.NET](../guide-to-the-api/hubs-api-guide-server.md).</span><span class="sxs-lookup"><span data-stu-id="72a6e-221">For more information, refer to [ASP.NET SignalR Hubs API Guide](../guide-to-the-api/hubs-api-guide-server.md).</span></span>
11. <span data-ttu-id="72a6e-222">Otwórz **TriviaController.cs** strony wewnątrz **kontrolerów** folderu i dodaj następującą przy użyciu dyrektyw.</span><span class="sxs-lookup"><span data-stu-id="72a6e-222">Open the **TriviaController.cs** page inside the **Controllers** folder and add the following using directives.</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample7.cs)]
12. <span data-ttu-id="72a6e-223">Dodaj następujący wyróżniony kod, aby **Post** metody akcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-223">Add the following highlighted code to the **Post** action method.</span></span>

    <span data-ttu-id="72a6e-224">(Fragment - kodu *NotifyUpdatesCall RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-224">(Code Snippet - *RealTimeSignalR - Ex1 - NotifyUpdatesCall*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample8.cs)]
13. <span data-ttu-id="72a6e-225">Otwórz **Statistics.cshtml** strony wewnątrz **widoków | Strona główna** folderu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-225">Open the **Statistics.cshtml** page inside the **Views | Home** folder.</span></span> <span data-ttu-id="72a6e-226">Zlokalizuj **skrypty** i dodaj następujące odwołania do skryptu na początku sekcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-226">Locate the **Scripts** section and add the following script references at the beginning of the section.</span></span>

    <span data-ttu-id="72a6e-227">(Fragment - kodu *SignalRScriptReferences RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-227">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRScriptReferences*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample9.cshtml)]

    > [!NOTE]
    > <span data-ttu-id="72a6e-228">Po dodaniu SignalR i innych bibliotek skryptu do projektu programu Visual Studio Menedżera pakietów mogą zainstalować wersję pliku skryptu SignalR, która jest nowsza niż wersja wyświetlane w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-228">When you add SignalR and other script libraries to your Visual Studio project, the Package Manager might install a version of the SignalR script file that is more recent than the version shown in this topic.</span></span> <span data-ttu-id="72a6e-229">Upewnij się, że odwołanie do skryptu w kodzie zgodna z wersją biblioteki skryptu zainstalowane w projekcie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-229">Make sure that the script reference in your code matches the version of the script library installed in your project.</span></span>
14. <span data-ttu-id="72a6e-230">Dodaj następujący kod wyróżnione połączenia klienta z Centrum SignalR i aktualizacji danych statystyk po odebraniu nowego komunikatu z koncentratora.</span><span class="sxs-lookup"><span data-stu-id="72a6e-230">Add the following highlighted code to connect the client to the SignalR hub and update the statistics data when a new message is received from the hub.</span></span>

    <span data-ttu-id="72a6e-231">(Fragment - kodu *SignalRClientCode RealTimeSignalR - Ex1 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-231">(Code Snippet - *RealTimeSignalR - Ex1 - SignalRClientCode*)</span></span>

    [!code-cshtml[Main](real-time-web-applications-with-signalr/samples/sample10.cshtml)]

    <span data-ttu-id="72a6e-232">W tym kodzie tworzonej serwer Proxy koncentratora i rejestrowania programu obsługi zdarzeń, aby nasłuchiwać komunikatów wysłanych przez serwer.</span><span class="sxs-lookup"><span data-stu-id="72a6e-232">In this code, you are creating a Hub Proxy and registering an event handler to listen for messages sent by the server.</span></span> <span data-ttu-id="72a6e-233">W takim przypadku nasłuchiwać komunikatów wysyłanych za pośrednictwem *updateStatistics* metody.</span><span class="sxs-lookup"><span data-stu-id="72a6e-233">In this case, you listen for messages sent through the *updateStatistics* method.</span></span>

<a id="Ex1Task3"></a>
#### <a name="task-3--running-the-solution"></a><span data-ttu-id="72a6e-234">Zadanie 3 — uruchomiona rozwiązania</span><span class="sxs-lookup"><span data-stu-id="72a6e-234">Task 3 – Running the Solution</span></span>

<span data-ttu-id="72a6e-235">W tym zadaniu zostanie uruchomiony rozwiązania, aby sprawdzić, czy statystyki widok jest aktualizowany automatycznie po odebraniu nowego zapytania przy użyciu SignalR.</span><span class="sxs-lookup"><span data-stu-id="72a6e-235">In this task, you will run the solution to verify that the statistics view is updated automatically using SignalR after answering a new question.</span></span>

1. <span data-ttu-id="72a6e-236">Naciśnij klawisz **F5** Aby uruchomić rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-236">Press **F5** to run the solution.</span></span>

    > [!NOTE]
    > <span data-ttu-id="72a6e-237">Jeśli nie jest jeszcze zalogowany do aplikacji, zaloguj się za pomocą utworzonego w ramach zadania 1 użytkownika.</span><span class="sxs-lookup"><span data-stu-id="72a6e-237">If not already logged in to the application, log in with the user you created in Task 1.</span></span>
2. <span data-ttu-id="72a6e-238">Otwórz **statystyki** strony w nowym oknie i umieszcza **Home** strony i **statystyki** strony side-by-side, tak jak w zadaniu 1.</span><span class="sxs-lookup"><span data-stu-id="72a6e-238">Open the **Statistics** page in a new window and put the **Home** page and **Statistics** page side-by-side as you did in Task 1.</span></span>
3. <span data-ttu-id="72a6e-239">W **Home** strony, Odpowiedz na pytanie, klikając jedną z opcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-239">In the **Home** page, answer the question by clicking one of the options.</span></span>

    <span data-ttu-id="72a6e-240">![Udzielenie odpowiedzi na pytanie innego](real-time-web-applications-with-signalr/_static/image13.png "udzielenie odpowiedzi na pytanie innego")</span><span class="sxs-lookup"><span data-stu-id="72a6e-240">![Answering another question](real-time-web-applications-with-signalr/_static/image13.png "Answering another question")</span></span>

    <span data-ttu-id="72a6e-241">*Udzielenie odpowiedzi na pytanie innego*</span><span class="sxs-lookup"><span data-stu-id="72a6e-241">*Answering another question*</span></span>
4. <span data-ttu-id="72a6e-242">Po kliknięciu przycisku jeden z przycisków, powinna zostać wyświetlona odpowiedź.</span><span class="sxs-lookup"><span data-stu-id="72a6e-242">After clicking one of the buttons, the answer should appear.</span></span> <span data-ttu-id="72a6e-243">Należy zauważyć, że informacje statystyczne na stronie jest aktualizowane automatycznie po odpowiedzi na pytanie o zaktualizowane informacje bez konieczności odświeżenia dla całej strony.</span><span class="sxs-lookup"><span data-stu-id="72a6e-243">Notice that the Statistics information on the page is updated automatically after answering the question with the updated information without the need to refresh the entire page.</span></span>

    <span data-ttu-id="72a6e-244">![Strona statystyk odświeżone po odpowiedzi](real-time-web-applications-with-signalr/_static/image14.png "strona statystyk odświeżone po odpowiedzi")</span><span class="sxs-lookup"><span data-stu-id="72a6e-244">![Statistics page refreshed after answer](real-time-web-applications-with-signalr/_static/image14.png "Statistics page refreshed after answer")</span></span>

    <span data-ttu-id="72a6e-245">*Strona statystyk odświeżone po odpowiedzi*</span><span class="sxs-lookup"><span data-stu-id="72a6e-245">*Statistics page refreshed after answer*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-scaling-out-using-sql-server"></a><span data-ttu-id="72a6e-246">Ćwiczenie 2: Skalowanie w poziomie przy użyciu programu SQL Server</span><span class="sxs-lookup"><span data-stu-id="72a6e-246">Exercise 2: Scaling Out Using SQL Server</span></span>

<span data-ttu-id="72a6e-247">Podczas skalowania aplikacji sieci web, zwykle można wybrać między *skalowaniu* i *skalowanie w poziomie* opcje.</span><span class="sxs-lookup"><span data-stu-id="72a6e-247">When scaling a web application, you can generally choose between *scaling up* and *scaling out* options.</span></span> <span data-ttu-id="72a6e-248">*Skalowanie w górę* oznacza przy użyciu na większy serwer więcej zasobów (procesora CPU, pamięci RAM, itp.) podczas *skalowanie* oznacza dodanie więcej serwerów do obsługi obciążenia.</span><span class="sxs-lookup"><span data-stu-id="72a6e-248">*Scale up* means using a larger server, with more resources (CPU, RAM, etc.) while *scale out* means adding more servers to handle the load.</span></span> <span data-ttu-id="72a6e-249">Problem z jego jest, że klienci mogą uzyskać kierowane do różnych serwerów.</span><span class="sxs-lookup"><span data-stu-id="72a6e-249">The problem with the latter is that the clients can get routed to different servers.</span></span> <span data-ttu-id="72a6e-250">Klient, który jest podłączony do jednego serwera nie będą otrzymywać wiadomości wysyłane z innego serwera.</span><span class="sxs-lookup"><span data-stu-id="72a6e-250">A client that is connected to one server will not receive messages sent from another server.</span></span>

<span data-ttu-id="72a6e-251">Możesz rozwiązać te problemy przy użyciu składnik o nazwie *płyty montażowej*, aby przesyłać dalej komunikatów między serwerami.</span><span class="sxs-lookup"><span data-stu-id="72a6e-251">You can solve these issues by using a component called *backplane*, to forward messages between servers.</span></span> <span data-ttu-id="72a6e-252">W środowisku IDE włączone każdego wystąpienia aplikacji wysyła komunikaty do systemu backplane i systemu backplane przekazuje je do wystąpienia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-252">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span>

<span data-ttu-id="72a6e-253">Obecnie istnieją trzy typy montażowych dla biblioteki SignalR:</span><span class="sxs-lookup"><span data-stu-id="72a6e-253">There are currently three types of backplanes for SignalR:</span></span>

- <span data-ttu-id="72a6e-254">**Windows Azure Service Bus**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-254">**Windows Azure Service Bus**.</span></span> <span data-ttu-id="72a6e-255">Usługa Service Bus jest infrastruktury obsługi wiadomości, umożliwiający składników do wysyłania wiadomości luźno powiązanych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-255">Service Bus is a messaging infrastructure that allows components to send loosely coupled messages.</span></span>
- <span data-ttu-id="72a6e-256">**Program SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-256">**SQL Server**.</span></span> <span data-ttu-id="72a6e-257">Środowiska IDE programu SQL Server zapisuje komunikaty do tabel SQL.</span><span class="sxs-lookup"><span data-stu-id="72a6e-257">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="72a6e-258">Systemu backplane używa brokera usług dla wydajność obsługi wiadomości.</span><span class="sxs-lookup"><span data-stu-id="72a6e-258">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="72a6e-259">Jednak działa także jeśli Service Broker jest wyłączona.</span><span class="sxs-lookup"><span data-stu-id="72a6e-259">However, it also works if Service Broker is not enabled.</span></span>
- <span data-ttu-id="72a6e-260">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-260">**Redis**.</span></span> <span data-ttu-id="72a6e-261">Redis jest magazyn kluczy i wartości w pamięci.</span><span class="sxs-lookup"><span data-stu-id="72a6e-261">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="72a6e-262">Redis obsługuje wzorzec publikowania/subskrypcji ("pub/sub") do wysyłania wiadomości.</span><span class="sxs-lookup"><span data-stu-id="72a6e-262">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>

<span data-ttu-id="72a6e-263">Każdy komunikat jest wysyłany za pośrednictwem magistrali komunikatów.</span><span class="sxs-lookup"><span data-stu-id="72a6e-263">Every message is sent through a message bus.</span></span> <span data-ttu-id="72a6e-264">Implementuje magistrali komunikatów [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interfejsu, która dostarcza abstrakcji publikowania/subskrypcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-264">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="72a6e-265">Montażowych pracy przez zastąpienie domyślnie **IMessageBus** z magistralą przeznaczone dla tego systemu backplane.</span><span class="sxs-lookup"><span data-stu-id="72a6e-265">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span>

<span data-ttu-id="72a6e-266">Każde wystąpienie serwera łączy do systemu backplane za pośrednictwem magistrali.</span><span class="sxs-lookup"><span data-stu-id="72a6e-266">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="72a6e-267">Po wysłaniu komunikatu trafia do systemu backplane i wysyła go do każdego serwera systemu backplane.</span><span class="sxs-lookup"><span data-stu-id="72a6e-267">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="72a6e-268">Gdy serwer odbiera komunikat z systemu backplane, zapisuje komunikat w lokalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="72a6e-268">When a server receives a message from the backplane, it stores the message in its local cache.</span></span> <span data-ttu-id="72a6e-269">Serwer następnie dostarcza klientom z lokalnej pamięci podręcznej.</span><span class="sxs-lookup"><span data-stu-id="72a6e-269">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="72a6e-270">Aby uzyskać więcej informacji na temat płyty montażowej SignalR działania, przeczytaj [artykułu](../performance/scaleout-in-signalr.md).</span><span class="sxs-lookup"><span data-stu-id="72a6e-270">For more information about how the SignalR backplane works, read this [article](../performance/scaleout-in-signalr.md).</span></span>

> [!NOTE]
> <span data-ttu-id="72a6e-271">Istnieją sytuacje, w którym płyty montażowej może stać się wąskiego gardła.</span><span class="sxs-lookup"><span data-stu-id="72a6e-271">There are some scenarios where a backplane can become a bottleneck.</span></span> <span data-ttu-id="72a6e-272">Poniżej przedstawiono kilka typowych scenariuszy SignalR:</span><span class="sxs-lookup"><span data-stu-id="72a6e-272">Here are some typical SignalR scenarios:</span></span>
> 
> - <span data-ttu-id="72a6e-273">[Emisja serwera](tutorial-server-broadcast-with-signalr.md) (np. giełdowych): montażowych działa dobrze w tym scenariuszu, ponieważ serwer określa szybkość, z jaką komunikaty.</span><span class="sxs-lookup"><span data-stu-id="72a6e-273">[Server broadcast](tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
> - <span data-ttu-id="72a6e-274">[Klient do klienta](tutorial-getting-started-with-signalr.md) (np. rozmowę): W tym scenariuszu systemu backplane może być wąskiego gardła, jeśli liczba komunikatów skaluje o liczbie klientów; oznacza to, jeśli liczba komunikatów rozwoju przyłączyć się proporcjonalnie jako większej liczby klientów.</span><span class="sxs-lookup"><span data-stu-id="72a6e-274">[Client-to-client](tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
> - <span data-ttu-id="72a6e-275">[Wysoka częstotliwość w czasie rzeczywistym](tutorial-high-frequency-realtime-with-signalr.md) (np. w czasie rzeczywistym gry): środowisku IDE nie jest zalecane dla tego scenariusza.</span><span class="sxs-lookup"><span data-stu-id="72a6e-275">[High-frequency realtime](tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>


<span data-ttu-id="72a6e-276">W tym ćwiczeniu użyjesz **programu SQL Server** do dystrybucji wiadomości między **Geek quizu** aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-276">In this exercise, you will use **SQL Server** to distribute messages across the **Geek Quiz** application.</span></span> <span data-ttu-id="72a6e-277">Te zadania będą uruchamiane na maszynie pojedynczy test więcej informacji na temat konfiguracji, ale aby uzyskać pełny efekt, będzie konieczne wdrażanie aplikacji SignalR do co najmniej dwa serwery.</span><span class="sxs-lookup"><span data-stu-id="72a6e-277">You will run these tasks on a single test machine to learn how to set up the configuration, but in order to get the full effect, you will need to deploy the SignalR application to two or more servers.</span></span> <span data-ttu-id="72a6e-278">SQL Server należy również zainstalować na jednym serwerze lub na osobnym serwerze dedykowanym.</span><span class="sxs-lookup"><span data-stu-id="72a6e-278">You must also install SQL Server on one of the servers, or on a separate dedicated server.</span></span>

![Skalowanie w poziomie przy użyciu programu SQL Server diagramu](real-time-web-applications-with-signalr/_static/image15.png)

<a id="Ex2Task1"></a>
#### <a name="task-1---understanding-the-scenario"></a><span data-ttu-id="72a6e-280">Zadanie 1 — Opis scenariusza</span><span class="sxs-lookup"><span data-stu-id="72a6e-280">Task 1 - Understanding the Scenario</span></span>

<span data-ttu-id="72a6e-281">To zadanie uruchomi 2 wystąpienia **Geek quizu** wystąpienia symulowanie wielu usług IIS na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="72a6e-281">In this task, you will run 2 instances of **Geek Quiz** simulating multiple IIS instances on your local machine.</span></span> <span data-ttu-id="72a6e-282">W tym scenariuszu, gdy udzielenie odpowiedzi na pytania elementy towarzyszące składni w jednej aplikacji aktualizacji nie zostaną powiadomieni na stronie statystyki drugie wystąpienie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-282">In this scenario, when answering trivia questions on one application, update won't be notified on the statistics page of the second instance.</span></span> <span data-ttu-id="72a6e-283">Ta symulacja podobny wdrożonym aplikacji na wiele wystąpień środowiska i przy użyciu modułu równoważenia obciążenia do komunikowania się z nimi.</span><span class="sxs-lookup"><span data-stu-id="72a6e-283">This simulation resembles an environment where your application is deployed on multiple instances and using a load balancer to communicate with them.</span></span>

1. <span data-ttu-id="72a6e-284">Otwórz **Begin.sln** rozwiązania, znajdujących się w **źródło/Ex2-ScalingOutWithSQLServer/Begin** folderu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-284">Open the **Begin.sln** solution located in the **Source/Ex2-ScalingOutWithSQLServer/Begin** folder.</span></span> <span data-ttu-id="72a6e-285">Po załadowaniu, można zauważyć na **Eksploratora serwera** czy rozwiązania zawiera dwa projekty o identycznych struktury, ale o innej nazwy.</span><span class="sxs-lookup"><span data-stu-id="72a6e-285">Once loaded, you will notice on the **Server Explorer** that the solution has two projects with identical structures but different names.</span></span> <span data-ttu-id="72a6e-286">Spowoduje to symulować uruchomione dwa wystąpienia tej samej aplikacji na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="72a6e-286">This will simulate running two instances of the same application on your local machine.</span></span>

    <span data-ttu-id="72a6e-287">![Rozpocząć rozwiązania symulując 2 wystąpienia kwizu Geek](real-time-web-applications-with-signalr/_static/image16.png "rozpocząć rozwiązania symulując 2 wystąpienia Geek kwizu")</span><span class="sxs-lookup"><span data-stu-id="72a6e-287">![Begin Solution Simulating 2 Instances of Geek Quiz](real-time-web-applications-with-signalr/_static/image16.png "Begin Solution Simulating 2 Instances of Geek Quiz")</span></span>

    <span data-ttu-id="72a6e-288">*Rozpocznij rozwiązania symulując 2 wystąpienia Geek kwizu*</span><span class="sxs-lookup"><span data-stu-id="72a6e-288">*Begin Solution Simulating 2 Instances of Geek Quiz*</span></span>
2. <span data-ttu-id="72a6e-289">Otwórz stronę właściwości rozwiązania prawym przyciskiem myszy węzeł rozwiązanie i wybierając **właściwości**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-289">Open the properties page of the solution by right-clicking the solution node and selecting **Properties**.</span></span> <span data-ttu-id="72a6e-290">W obszarze **projekt startowy**, wybierz pozycję **wiele projektów startowych** i zmienić **akcji** wartość dla obu projektów do *Start*.</span><span class="sxs-lookup"><span data-stu-id="72a6e-290">Under **Startup Project**, select **Multiple startup projects** and change the **Action** value for both projects to *Start*.</span></span>

    <span data-ttu-id="72a6e-291">![Uruchamianie wielu projektów](real-time-web-applications-with-signalr/_static/image17.png "uruchamianie wielu projektów")</span><span class="sxs-lookup"><span data-stu-id="72a6e-291">![Starting Multiple Projects](real-time-web-applications-with-signalr/_static/image17.png "Starting Multiple Projects")</span></span>

    <span data-ttu-id="72a6e-292">*Uruchamianie wielu projektów*</span><span class="sxs-lookup"><span data-stu-id="72a6e-292">*Starting Multiple Projects*</span></span>
3. <span data-ttu-id="72a6e-293">Naciśnij klawisz **F5** Aby uruchomić rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-293">Press **F5** to run the solution.</span></span> <span data-ttu-id="72a6e-294">Aplikacja uruchomi dwa wystąpienia **quizu Geek** w różnych portów, co stanowi symulację wiele wystąpień tej samej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-294">The application will launch two instances of **Geek Quiz** in different ports, simulating multiple instances of the same application.</span></span> <span data-ttu-id="72a6e-295">Kod PIN jednego przeglądarek po lewej stronie oraz innych po prawej stronie ekranu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-295">Pin one of the browsers on left and the other on the right of your screen.</span></span> <span data-ttu-id="72a6e-296">Zaloguj się przy użyciu poświadczeń lub zarejestrować nowego użytkownika.</span><span class="sxs-lookup"><span data-stu-id="72a6e-296">Log in with your credentials or register a new user.</span></span> <span data-ttu-id="72a6e-297">Po zalogowaniu, Zachowaj elementy towarzyszące składni strony po lewej stronie i przejdź do **statystyki** strony w przeglądarce po prawej stronie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-297">Once logged in, keep the Trivia page on the left and go to the **Statistics** page in the browser on the right.</span></span>

    ![Geek kwizu obok siebie](real-time-web-applications-with-signalr/_static/image18.png)

    <span data-ttu-id="72a6e-299">*Geek kwizu obok siebie*</span><span class="sxs-lookup"><span data-stu-id="72a6e-299">*Geek Quiz Side by Side*</span></span>

    ![Kwizu Geek w różnych portów](real-time-web-applications-with-signalr/_static/image19.png)

    <span data-ttu-id="72a6e-301">*Kwizu Geek w różnych portów*</span><span class="sxs-lookup"><span data-stu-id="72a6e-301">*Geek Quiz in Different Ports*</span></span>
4. <span data-ttu-id="72a6e-302">Uruchom odpowiadanie na pytania w przeglądarce po lewej stronie i będzie można zauważyć, że **statystyki** strony w przeglądarce prawo nie jest aktualizowana.</span><span class="sxs-lookup"><span data-stu-id="72a6e-302">Start answering questions in the left browser and you will notice that the **Statistics** page in the right browser is not being updated.</span></span> <span data-ttu-id="72a6e-303">Jest to spowodowane **SignalR** używa lokalnej pamięci podręcznej do dystrybucji wiadomości przez klientów i symuluje wiele wystąpień tego scenariusza, w związku z tym pamięci podręcznej nie jest udostępniana między nimi.</span><span class="sxs-lookup"><span data-stu-id="72a6e-303">This is because **SignalR** uses a local cache to distribute messages across their clients and this scenario is simulating multiple instances, therefore the cache is not shared between them.</span></span> <span data-ttu-id="72a6e-304">Sprawdź, czy **SignalR** działa testowania czynności, ale przy użyciu jednej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-304">You can verify that **SignalR** is working by testing the same steps but using a single app.</span></span> <span data-ttu-id="72a6e-305">W następujących zadań skonfigurujesz IDE, aby replikować komunikaty w wystąpieniach.</span><span class="sxs-lookup"><span data-stu-id="72a6e-305">In the following tasks you will configure a backplane to replicate the messages across instances.</span></span>
5. <span data-ttu-id="72a6e-306">Wróć do programu Visual Studio i Zatrzymaj debugowanie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-306">Go back to Visual Studio and stop debugging.</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-sql-server-backplane"></a><span data-ttu-id="72a6e-307">Zadanie 2 — Tworzenie płyty montażowej serwera SQL</span><span class="sxs-lookup"><span data-stu-id="72a6e-307">Task 2 – Creating the SQL Server Backplane</span></span>

<span data-ttu-id="72a6e-308">W ramach tego zadania spowoduje utworzenie bazy danych, który będzie służyć jako płyty montażowej dla **Geek quizu** aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-308">In this task, you will create a database that will serve as a backplane for the **Geek Quiz** application.</span></span> <span data-ttu-id="72a6e-309">Użyjesz **Eksplorator obiektów SQL Server** przeglądania serwera i zainicjuj bazę danych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-309">You will use **SQL Server Object Explorer** to browse your server and initialize the database.</span></span> <span data-ttu-id="72a6e-310">Ponadto umożliwi **Service Broker**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-310">Additionally, you will enable the **Service Broker**.</span></span>

1. <span data-ttu-id="72a6e-311">W **programu Visual Studio**, otwórz menu **widoku** i wybierz **Eksplorator obiektów SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-311">In **Visual Studio**, open menu **View** and select **SQL Server Object Explorer**.</span></span>
2. <span data-ttu-id="72a6e-312">Połącz z wystąpieniem LocalDB klikając prawym przyciskiem myszy **programu SQL Server** węzła i wybierając **dodawania serwera SQL...**  opcji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-312">Connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="72a6e-313">![Dodawanie wystąpienia programu SQL Server](real-time-web-applications-with-signalr/_static/image20.png "dodanie wystąpienia programu SQL Server")</span><span class="sxs-lookup"><span data-stu-id="72a6e-313">![Adding a SQL Server Instance](real-time-web-applications-with-signalr/_static/image20.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="72a6e-314">*Dodanie wystąpienia programu SQL Server do Eksplorator obiektów SQL Server*</span><span class="sxs-lookup"><span data-stu-id="72a6e-314">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
3. <span data-ttu-id="72a6e-315">Ustaw **nazwy serwera** do *(localdb) \v11.0* i pozostawić **uwierzytelniania systemu Windows** jako tryb uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="72a6e-315">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="72a6e-316">Kliknij przycisk **Connect** aby kontynuować.</span><span class="sxs-lookup"><span data-stu-id="72a6e-316">Click **Connect** to continue.</span></span>

    <span data-ttu-id="72a6e-317">![Łączenie z LocalDB](real-time-web-applications-with-signalr/_static/image21.png "połączenie do LocalDB")</span><span class="sxs-lookup"><span data-stu-id="72a6e-317">![Connecting to LocalDB](real-time-web-applications-with-signalr/_static/image21.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="72a6e-318">*Łączenie do LocalDB*</span><span class="sxs-lookup"><span data-stu-id="72a6e-318">*Connecting to LocalDB*</span></span>
4. <span data-ttu-id="72a6e-319">Teraz, gdy masz połączenie z wystąpieniem LocalDB, należy utworzyć bazę danych, reprezentujące środowiska IDE programu SQL Server dla elementu SignalR.</span><span class="sxs-lookup"><span data-stu-id="72a6e-319">Now that you are connected to your LocalDB instance, you will need to create a database that will represent the SQL Server backplane for SignalR.</span></span> <span data-ttu-id="72a6e-320">Aby to zrobić, kliknij prawym przyciskiem myszy **baz danych** a następnie wybierz węzeł **Dodaj nową bazę danych**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-320">To do this, right-click the **Databases** node and select **Add New Database**.</span></span>

    <span data-ttu-id="72a6e-321">![Dodawanie nowej bazy danych](real-time-web-applications-with-signalr/_static/image22.png "Dodawanie nowej bazy danych")</span><span class="sxs-lookup"><span data-stu-id="72a6e-321">![Adding a new database](real-time-web-applications-with-signalr/_static/image22.png "Adding a new database")</span></span>

    <span data-ttu-id="72a6e-322">*Dodawanie nowej bazy danych*</span><span class="sxs-lookup"><span data-stu-id="72a6e-322">*Adding a new database*</span></span>
5. <span data-ttu-id="72a6e-323">Ustaw nazwę bazy danych na *SignalR* i kliknij przycisk **OK** go utworzyć.</span><span class="sxs-lookup"><span data-stu-id="72a6e-323">Set the database name to *SignalR* and click **OK** to create it.</span></span>

    <span data-ttu-id="72a6e-324">![Tworzenie bazy danych SignalR](real-time-web-applications-with-signalr/_static/image23.png "tworzenie bazy danych biblioteki SignalR")</span><span class="sxs-lookup"><span data-stu-id="72a6e-324">![Creating the SignalR database](real-time-web-applications-with-signalr/_static/image23.png "Creating the SignalR database")</span></span>

    <span data-ttu-id="72a6e-325">*Tworzenie bazy danych biblioteki SignalR*</span><span class="sxs-lookup"><span data-stu-id="72a6e-325">*Creating the SignalR database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="72a6e-326">Można wybrać dowolną nazwę bazy danych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-326">You can choose any name for the database.</span></span>
6. <span data-ttu-id="72a6e-327">Aby otrzymywać aktualizacje wydajniej z systemu backplane, zalecane jest Włącz program Service Broker dla bazy danych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-327">To receive updates more efficiently from the backplane, it is recommended to enable Service Broker for the database.</span></span> <span data-ttu-id="72a6e-328">Usługa Service Broker zapewnia macierzystą obsługę dla obsługi wiadomości i kolejkowania w programie SQL Server.</span><span class="sxs-lookup"><span data-stu-id="72a6e-328">Service Broker provides native support for messaging and queuing in SQL Server.</span></span> <span data-ttu-id="72a6e-329">Systemu backplane działa bez brokera usług.</span><span class="sxs-lookup"><span data-stu-id="72a6e-329">The backplane also works without Service Broker.</span></span> <span data-ttu-id="72a6e-330">Otwórz nowe zapytanie, klikając prawym przyciskiem myszy bazę danych i wybierz **nowe zapytanie**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-330">Open a new query by right-clicking the database and select **New Query**.</span></span>

    <span data-ttu-id="72a6e-331">![Otwieranie nowej kwerendy](real-time-web-applications-with-signalr/_static/image24.png "Otwieranie nowej kwerendy")</span><span class="sxs-lookup"><span data-stu-id="72a6e-331">![Opening a New Query](real-time-web-applications-with-signalr/_static/image24.png "Opening a New Query")</span></span>

    <span data-ttu-id="72a6e-332">*Otwieranie nowej kwerendy*</span><span class="sxs-lookup"><span data-stu-id="72a6e-332">*Opening a New Query*</span></span>
7. <span data-ttu-id="72a6e-333">Aby sprawdzić, czy Usługa Service Broker jest włączona, zapytanie **jest\_brokera\_włączone** kolumny w **sys.databases** widoku katalogu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-333">To check whether Service Broker is enabled, query the **is\_broker\_enabled** column in the **sys.databases** catalog view.</span></span> <span data-ttu-id="72a6e-334">Uruchom następujący skrypt w oknie zapytania ostatnio otwartą.</span><span class="sxs-lookup"><span data-stu-id="72a6e-334">Execute the following script in the recently opened query window.</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample11.sql)]

    <span data-ttu-id="72a6e-335">![Badanie stanu brokera usługi](real-time-web-applications-with-signalr/_static/image25.png "badanie stanu brokera usługi")</span><span class="sxs-lookup"><span data-stu-id="72a6e-335">![Querying the Service Broker Status](real-time-web-applications-with-signalr/_static/image25.png "Querying the Service Broker Status")</span></span>

    <span data-ttu-id="72a6e-336">*Badanie stanu brokera usługi*</span><span class="sxs-lookup"><span data-stu-id="72a6e-336">*Querying the Service Broker Status*</span></span>
8. <span data-ttu-id="72a6e-337">Jeśli wartość **jest\_brokera\_włączone** kolumny w bazie danych jest &quot;0&quot;, użyj następującego polecenia, aby ją włączyć.</span><span class="sxs-lookup"><span data-stu-id="72a6e-337">If the value of the **is\_broker\_enabled** column in your database is &quot;0&quot;, use the following command to enable it.</span></span> <span data-ttu-id="72a6e-338">Zastąp **&lt;bazy danych YOUR&gt;** o nazwie ustawione podczas tworzenia bazy danych (np.: SignalR).</span><span class="sxs-lookup"><span data-stu-id="72a6e-338">Replace **&lt;YOUR-DATABASE&gt;** with the name you set when creating the database (e.g.: SignalR).</span></span>

    [!code-sql[Main](real-time-web-applications-with-signalr/samples/sample12.sql)]

    <span data-ttu-id="72a6e-339">![Włączenie brokera usług](real-time-web-applications-with-signalr/_static/image26.png "włączenie brokera usług")</span><span class="sxs-lookup"><span data-stu-id="72a6e-339">![Enabling Service Broker](real-time-web-applications-with-signalr/_static/image26.png "Enabling Service Broker")</span></span>

    <span data-ttu-id="72a6e-340">*Włączenie brokera usług*</span><span class="sxs-lookup"><span data-stu-id="72a6e-340">*Enabling Service Broker*</span></span>

    > [!NOTE]
    > <span data-ttu-id="72a6e-341">Jeśli to zapytanie wydaje się do zakleszczenia, upewnij się, że nie ma żadnych aplikacji, połączony z bazą danych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-341">If this query appears to deadlock, make sure there are no applications connected to the DB.</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--configuring-the-signalr-application"></a><span data-ttu-id="72a6e-342">Zadanie 3 — Konfigurowanie aplikacji SignalR</span><span class="sxs-lookup"><span data-stu-id="72a6e-342">Task 3 – Configuring the SignalR Application</span></span>

<span data-ttu-id="72a6e-343">W tym zadaniu zostanie skonfigurowana **Geek quizu** nawiązać środowiska IDE programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="72a6e-343">In this task, you will configure **Geek Quiz** to connect to the SQL Server backplane.</span></span> <span data-ttu-id="72a6e-344">Najpierw dodamy **SignalR.SqlServer** pakietu NuGet i zestaw połączenie ciągu do płyty montażowej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-344">You will first add the **SignalR.SqlServer** NuGet package and set the connection string to your backplane database.</span></span>

1. <span data-ttu-id="72a6e-345">Otwórz **Konsola Menedżera pakietów** z **narzędzia** | **Menedżer pakietów biblioteki**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-345">Open the **Package Manager Console** from **Tools** | **Library Package Manager**.</span></span> <span data-ttu-id="72a6e-346">Upewnij się, że **GeekQuiz** projekt jest wybrany w **domyślny projekt** listy rozwijanej.</span><span class="sxs-lookup"><span data-stu-id="72a6e-346">Make sure that **GeekQuiz** project is selected in the **Default project** drop-down list.</span></span> <span data-ttu-id="72a6e-347">Wpisz następujące polecenie, aby zainstalować **Microsoft.AspNet.SignalR.SqlServer** pakietu NuGet.</span><span class="sxs-lookup"><span data-stu-id="72a6e-347">Type the following command to install the **Microsoft.AspNet.SignalR.SqlServer** NuGet package.</span></span>

    [!code-powershell[Main](real-time-web-applications-with-signalr/samples/sample13.ps1)]
2. <span data-ttu-id="72a6e-348">Powtórz poprzedni krok, lecz tym razem dla projektu **GeekQuiz2**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-348">Repeat the previous step but this time for project **GeekQuiz2**.</span></span>
3. <span data-ttu-id="72a6e-349">Aby skonfigurować środowiska IDE programu SQL Server, otwórz **Startup.cs** pliku **GeekQuiz** projektu i Dodaj następujący kod, aby **Konfiguruj** — metoda.</span><span class="sxs-lookup"><span data-stu-id="72a6e-349">To configure the SQL Server backplane, open the **Startup.cs** file of the **GeekQuiz** project and add the following code to the **Configure** method.</span></span> <span data-ttu-id="72a6e-350">Zastąp **&lt;bazy danych YOUR&gt;** nazwą bazy danych używane podczas tworzenia środowiska IDE programu SQL Server.</span><span class="sxs-lookup"><span data-stu-id="72a6e-350">Replace **&lt;YOUR-DATABASE&gt;** with your database name you used when creating the SQL Server backplane.</span></span> <span data-ttu-id="72a6e-351">Powtórz ten krok w przypadku **GeekQuiz2** projektu.</span><span class="sxs-lookup"><span data-stu-id="72a6e-351">Repeat this step for the **GeekQuiz2** project.</span></span>

    <span data-ttu-id="72a6e-352">(Fragment - kodu *StartupConfiguration RealTimeSignalR - Ex2 -*)</span><span class="sxs-lookup"><span data-stu-id="72a6e-352">(Code Snippet - *RealTimeSignalR - Ex2 - StartupConfiguration*)</span></span>

    [!code-csharp[Main](real-time-web-applications-with-signalr/samples/sample14.cs)]
4. <span data-ttu-id="72a6e-353">Teraz, gdy oba projekty są skonfigurowane do używania środowiska IDE programu SQL Server, naciśnij klawisz **F5** ich uruchamiać jednocześnie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-353">Now that both projects are configured to use the SQL Server backplane, press **F5** to run them simultaneously.</span></span>
5. <span data-ttu-id="72a6e-354">Ponownie **programu Visual Studio** uruchomi dwa wystąpienia **quizu Geek** w różnych portów.</span><span class="sxs-lookup"><span data-stu-id="72a6e-354">Again, **Visual Studio** will launch two instances of **Geek Quiz** in different ports.</span></span> <span data-ttu-id="72a6e-355">Przypnij jedną z przeglądarek po lewej, a druga z prawej strony ekranu i zaloguj się przy użyciu poświadczeń.</span><span class="sxs-lookup"><span data-stu-id="72a6e-355">Pin one of the browsers on the left and the other on the right of your screen and log in with your credentials.</span></span> <span data-ttu-id="72a6e-356">Zachowaj elementy towarzyszące składni strony po lewej stronie i przejdź do **statystyki** ładowanie stron do pamięci prawo przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="72a6e-356">Keep the Trivia page on the left and go to **Statistics** pagein the right browser.</span></span>
6. <span data-ttu-id="72a6e-357">Uruchom udzielenie odpowiedzi na pytania w przeglądarce po lewej stronie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-357">Start answering questions in the left browser.</span></span> <span data-ttu-id="72a6e-358">Teraz, **statystyki** strona zostanie zaktualizowana dzięki systemu backplane.</span><span class="sxs-lookup"><span data-stu-id="72a6e-358">This time, the **Statistics** page is updated thanks to the backplane.</span></span> <span data-ttu-id="72a6e-359">Przełączanie między aplikacjami (**statystyki** jest teraz, po lewej stronie, a **elementy towarzyszące składni** po prawej) i powtórz test, aby sprawdzić, czy działa ona zarówno wystąpień.</span><span class="sxs-lookup"><span data-stu-id="72a6e-359">Switch between applications (**Statistics** is now on the left, and **Trivia** is on the right) and repeat the test to validate that it is working for both instances.</span></span> <span data-ttu-id="72a6e-360">Systemu backplane służy jako *pamięć podręczna* komunikatów dla każdego połączenia serwera, a każdy serwer zapisze komunikaty w ich własnej lokalnej pamięci podręcznej do dystrybucji do połączonych klientów.</span><span class="sxs-lookup"><span data-stu-id="72a6e-360">The backplane serves as a *shared cache* of messages for each connected server, and each server will store the messages in their own local cache to distribute to connected clients.</span></span>
7. <span data-ttu-id="72a6e-361">Wróć do programu Visual Studio i Zatrzymaj debugowanie.</span><span class="sxs-lookup"><span data-stu-id="72a6e-361">Go back to Visual Studio and stop debugging.</span></span>
8. <span data-ttu-id="72a6e-362">Składnik środowiska IDE programu SQL Server automatycznie generuje potrzebne tabele z określonej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-362">The SQL Server backplane component automatically generates the necessary tables on the specified database.</span></span> <span data-ttu-id="72a6e-363">W **Eksplorator obiektów SQL Server** panelu, otwórz bazę danych utworzoną dla systemu backplane (np.: SignalR) i rozwiń listę tabel.</span><span class="sxs-lookup"><span data-stu-id="72a6e-363">In the **SQL Server Object Explorer** panel, open the database you created for the backplane (e.g.: SignalR) and expand its tables.</span></span> <span data-ttu-id="72a6e-364">Powinny pojawić się następujące tabele:</span><span class="sxs-lookup"><span data-stu-id="72a6e-364">You should see the following tables:</span></span>

    ![Płyty montażowej wygenerowany tabel](real-time-web-applications-with-signalr/_static/image27.png)

    <span data-ttu-id="72a6e-366">*Płyty montażowej wygenerowany tabel*</span><span class="sxs-lookup"><span data-stu-id="72a6e-366">*Backplane Generated Tables*</span></span>
9. <span data-ttu-id="72a6e-367">Kliknij prawym przyciskiem myszy **SignalR.Messages\_0** tabeli i wybierz **danych widoku**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-367">Right-click the **SignalR.Messages\_0** table and select **View Data**.</span></span>

    ![Tabela komunikatów SignalR płyty montażowej widoku](real-time-web-applications-with-signalr/_static/image28.png)

    <span data-ttu-id="72a6e-369">*Tabela komunikatów SignalR płyty montażowej widoku*</span><span class="sxs-lookup"><span data-stu-id="72a6e-369">*View SignalR Backplane Messages Table*</span></span>
10. <span data-ttu-id="72a6e-370">Widać, inne komunikaty wysyłane do **Centrum** podczas odpowiadania na pytania elementy towarzyszące składni.</span><span class="sxs-lookup"><span data-stu-id="72a6e-370">You can see the different messages sent to the **Hub** when answering the trivia questions.</span></span> <span data-ttu-id="72a6e-371">Systemu backplane dystrybuuje te komunikaty do dowolnego wystąpienia połączonych.</span><span class="sxs-lookup"><span data-stu-id="72a6e-371">The backplane distributes these messages to any connected instance.</span></span>

    ![Tabela komunikatów środowiska IDE](real-time-web-applications-with-signalr/_static/image29.png)

    <span data-ttu-id="72a6e-373">*Tabela komunikatów środowiska IDE*</span><span class="sxs-lookup"><span data-stu-id="72a6e-373">*Backplane Messages Table*</span></span>

* * *

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="72a6e-374">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="72a6e-374">Summary</span></span>

<span data-ttu-id="72a6e-375">W tym laboratorium praktycznego ma przedstawiono sposób dodawania **SignalR** do aplikacji i wysyłania powiadomienia z serwera do połączonych klientów przy użyciu **koncentratory**.</span><span class="sxs-lookup"><span data-stu-id="72a6e-375">In this hands-on lab, you have learned how to add **SignalR** to your application and send notifications from the server to your connected clients using **Hubs**.</span></span> <span data-ttu-id="72a6e-376">Ponadto przedstawiono sposób skalowania aplikacji za pomocą *płyty montażowej* składnika, po wdrożeniu w wielu wystąpień usług IIS aplikacji.</span><span class="sxs-lookup"><span data-stu-id="72a6e-376">Additionally, you learned how to scale out your application by using a *backplane* component when your application is deployed in multiple IIS instances.</span></span>
