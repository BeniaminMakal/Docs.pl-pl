---
uid: mvc/overview/performance/bundling-and-minification
title: "Tworzenie pakietów i minimalizowanie | Dokumentacja firmy Microsoft"
author: Rick-Anderson
description: "Tworzenie pakietów i minimalizowanie są dwie metody można użyć w programie ASP.NET 4.5 do zwiększenia czas ładowania żądania. Tworzenie pakietów i minimalizowanie poprawia czas ładowania przez reducin..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/23/2012
ms.topic: article
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: e83be2446ef1e3ff1275d06d5b743fb5b9444a6a
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 11/10/2017
---
<a name="bundling-and-minification"></a><span data-ttu-id="5e32a-104">Tworzenie pakietów i minimalizowanie</span><span class="sxs-lookup"><span data-stu-id="5e32a-104">Bundling and Minification</span></span>
====================
<span data-ttu-id="5e32a-105">Przez [Rick Anderson](https://github.com/Rick-Anderson)</span><span class="sxs-lookup"><span data-stu-id="5e32a-105">by [Rick Anderson](https://github.com/Rick-Anderson)</span></span>

> <span data-ttu-id="5e32a-106">Tworzenie pakietów i minimalizowanie są dwie metody można użyć w programie ASP.NET 4.5 do zwiększenia czas ładowania żądania.</span><span class="sxs-lookup"><span data-stu-id="5e32a-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="5e32a-107">Tworzenie pakietów i minimalizowanie poprawia czas ładowania przez zmniejszenie liczby żądań do serwera oraz redukcję rozmiaru żądanych zasobów (takich jak CSS i JavaScript.)</span><span class="sxs-lookup"><span data-stu-id="5e32a-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="5e32a-108">Większość bieżącego główne przeglądarki ograniczyć liczbę [równoczesnych połączeń](http://www.browserscope.org/?category=network) dla każdej nazwy hosta do 6.</span><span class="sxs-lookup"><span data-stu-id="5e32a-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="5e32a-109">Oznacza to, że podczas przetwarzania żądania sześciu dodatkowych żądań do zasobów na hoście zostaną umieszczone w kolejce przez przeglądarkę.</span><span class="sxs-lookup"><span data-stu-id="5e32a-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="5e32a-110">Na poniższej ilustracji kartach sieci narzędzia developer F12 programu Internet Explorer zawiera chronometraż zasoby wymagane przez widok informacje przykładowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="5e32a-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="5e32a-112">Szare paski Pokaż żądanie jest przechowywane w kolejce w przeglądarce oczekiwanie na granicy sześciu połączenia czas.</span><span class="sxs-lookup"><span data-stu-id="5e32a-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="5e32a-113">Czas żądania do pierwszego bajtu jest żółty pasek oznacza to, że czas potrzebny do wysyłania żądania i odbierania pierwszej odpowiedzi z serwera.</span><span class="sxs-lookup"><span data-stu-id="5e32a-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="5e32a-114">Niebieski paski Pokaż czas potrzebny na odebranie dane odpowiedzi z serwera.</span><span class="sxs-lookup"><span data-stu-id="5e32a-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="5e32a-115">Możesz kliknąć dwukrotnie na zasób można uzyskać informacji o chronometrażu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="5e32a-116">Na przykład na poniższej ilustracji przedstawiono szczegółów chronometrażu dla ładowania */Scripts/MyScripts/JavaScript6.js* pliku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="5e32a-117">W poprzednim przedstawiono obrazu **Start** zdarzenia, które powoduje czasu żądania zostało umieszczone w kolejce z powodu przeglądarki ograniczyć liczbę równoczesnych połączeń.</span><span class="sxs-lookup"><span data-stu-id="5e32a-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="5e32a-118">W takim przypadku żądanie zostało umieszczone w kolejce przez 46 milisekund oczekiwania na zakończenie innego żądania.</span><span class="sxs-lookup"><span data-stu-id="5e32a-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="5e32a-119">Tworzenie pakietów</span><span class="sxs-lookup"><span data-stu-id="5e32a-119">Bundling</span></span>

<span data-ttu-id="5e32a-120">Tworzenie pakietów jest nową funkcją w programie ASP.NET 4.5, który ułatwia łączenie lub wielu plików pakietu w jednym pliku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="5e32a-121">Można utworzyć CSS, JavaScript i inne pakiety.</span><span class="sxs-lookup"><span data-stu-id="5e32a-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="5e32a-122">Mniej plików oznacza, że mniej żądania HTTP, może poprawić wydajność obciążenia w usłudze pierwszej strony.</span><span class="sxs-lookup"><span data-stu-id="5e32a-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="5e32a-123">Na poniższej ilustracji przedstawiono tego samego widoku chronometrażu widoku informacje pokazano wcześniej, ale tym razem z tworzenie pakietów i minimalizowanie włączone.</span><span class="sxs-lookup"><span data-stu-id="5e32a-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="5e32a-124">Minimalizowanie</span><span class="sxs-lookup"><span data-stu-id="5e32a-124">Minification</span></span>

<span data-ttu-id="5e32a-125">Minimalizowanie wykonuje różne optymalizacje inny kod do skryptów lub css, takie jak usunięcie niepotrzebnych biały znak i komentarze i skrócić nazwy zmiennych o jeden znak.</span><span class="sxs-lookup"><span data-stu-id="5e32a-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="5e32a-126">Należy wziąć pod uwagę następujące funkcji JavaScript.</span><span class="sxs-lookup"><span data-stu-id="5e32a-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="5e32a-127">Po minimalizowanie funkcji, zostanie zmniejszona do następującego:</span><span class="sxs-lookup"><span data-stu-id="5e32a-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="5e32a-128">Oprócz usuwanie komentarzy i niepotrzebne odstępu, następujących parametrów i nazwy zmiennych zmieniono (skrócony) w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="5e32a-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="5e32a-129">**Oryginał**</span><span class="sxs-lookup"><span data-stu-id="5e32a-129">**Original**</span></span> | <span data-ttu-id="5e32a-130">**Zmieniono jego nazwę**</span><span class="sxs-lookup"><span data-stu-id="5e32a-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="5e32a-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="5e32a-131">imageTagAndImageID</span></span> | n |
| <span data-ttu-id="5e32a-132">imageContext</span><span class="sxs-lookup"><span data-stu-id="5e32a-132">imageContext</span></span> | <span data-ttu-id="5e32a-133">t</span><span class="sxs-lookup"><span data-stu-id="5e32a-133">t</span></span> |
| <span data-ttu-id="5e32a-134">imageElement</span><span class="sxs-lookup"><span data-stu-id="5e32a-134">imageElement</span></span> | <span data-ttu-id="5e32a-135">mogę</span><span class="sxs-lookup"><span data-stu-id="5e32a-135">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="5e32a-136">Wpływ na tworzenie pakietów i minimalizowanie</span><span class="sxs-lookup"><span data-stu-id="5e32a-136">Impact of Bundling and Minification</span></span>

<span data-ttu-id="5e32a-137">W poniższej tabeli przedstawiono kilka istotnych różnic między listę wszystkich zasobów pojedynczo i tworzenie pakietów i minimalizowanie (B/M) w programie próbki.</span><span class="sxs-lookup"><span data-stu-id="5e32a-137">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="5e32a-138">**Przy użyciu B/M**</span><span class="sxs-lookup"><span data-stu-id="5e32a-138">**Using B/M**</span></span> | <span data-ttu-id="5e32a-139">**Bez B/M**</span><span class="sxs-lookup"><span data-stu-id="5e32a-139">**Without B/M**</span></span> | <span data-ttu-id="5e32a-140">**Zmiany**</span><span class="sxs-lookup"><span data-stu-id="5e32a-140">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="5e32a-141">**Żądań plików**</span><span class="sxs-lookup"><span data-stu-id="5e32a-141">**File Requests**</span></span> | <span data-ttu-id="5e32a-142">9</span><span class="sxs-lookup"><span data-stu-id="5e32a-142">9</span></span> | <span data-ttu-id="5e32a-143">34</span><span class="sxs-lookup"><span data-stu-id="5e32a-143">34</span></span> | <span data-ttu-id="5e32a-144">256%</span><span class="sxs-lookup"><span data-stu-id="5e32a-144">256%</span></span> |
| <span data-ttu-id="5e32a-145">**Wysyłane KB**</span><span class="sxs-lookup"><span data-stu-id="5e32a-145">**KB Sent**</span></span> | <span data-ttu-id="5e32a-146">3.26</span><span class="sxs-lookup"><span data-stu-id="5e32a-146">3.26</span></span> | <span data-ttu-id="5e32a-147">11.92</span><span class="sxs-lookup"><span data-stu-id="5e32a-147">11.92</span></span> | <span data-ttu-id="5e32a-148">266%</span><span class="sxs-lookup"><span data-stu-id="5e32a-148">266%</span></span> |
| <span data-ttu-id="5e32a-149">**Odebrano KB**</span><span class="sxs-lookup"><span data-stu-id="5e32a-149">**KB Received**</span></span> | <span data-ttu-id="5e32a-150">388.51</span><span class="sxs-lookup"><span data-stu-id="5e32a-150">388.51</span></span> | <span data-ttu-id="5e32a-151">530</span><span class="sxs-lookup"><span data-stu-id="5e32a-151">530</span></span> | <span data-ttu-id="5e32a-152">36%</span><span class="sxs-lookup"><span data-stu-id="5e32a-152">36%</span></span> |
| <span data-ttu-id="5e32a-153">**Czas ładowania**</span><span class="sxs-lookup"><span data-stu-id="5e32a-153">**Load Time**</span></span> | <span data-ttu-id="5e32a-154">510 MS</span><span class="sxs-lookup"><span data-stu-id="5e32a-154">510 MS</span></span> | <span data-ttu-id="5e32a-155">780 MS</span><span class="sxs-lookup"><span data-stu-id="5e32a-155">780 MS</span></span> | <span data-ttu-id="5e32a-156">53%</span><span class="sxs-lookup"><span data-stu-id="5e32a-156">53%</span></span> |

<span data-ttu-id="5e32a-157">Wysłane bajty miał znaczne obniżenie zużycia z udane przeglądarki są dość verbose z nagłówków HTTP, które mają one zastosowanie do żądań.</span><span class="sxs-lookup"><span data-stu-id="5e32a-157">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="5e32a-158">Redukcja odebranych bajtów nie jest tak duży, ponieważ plików największy (*Scripts\jquery-ui-1.8.11.min.js* i *Scripts\jquery-1.7.1.min.js*) są już zminimalizowany.</span><span class="sxs-lookup"><span data-stu-id="5e32a-158">The received bytes reduction is not as large because the largest files (*Scripts\jquery-ui-1.8.11.min.js* and *Scripts\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="5e32a-159">Uwaga: Chronometraż przykładowy program używany [Fiddler](http://www.fiddler2.com/fiddler2/) narzędzia, aby symulować wolnej sieci.</span><span class="sxs-lookup"><span data-stu-id="5e32a-159">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="5e32a-160">(Z Fiddler **reguły** menu, wybierz opcję **wydajności** następnie **symulować szybkości modemu**.)</span><span class="sxs-lookup"><span data-stu-id="5e32a-160">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="5e32a-161">Debugowanie powiązane i zminimalizowane JavaScript</span><span class="sxs-lookup"><span data-stu-id="5e32a-161">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="5e32a-162">Łatwo można debugować skrypt JavaScript w środowisku projektowym (gdzie [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx) w *Web.config* plik ma ustawioną wartość `debug="true"` ), ponieważ nie są powiązane pliki JavaScript lub zminimalizowany.</span><span class="sxs-lookup"><span data-stu-id="5e32a-162">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="5e32a-163">Można również debugowanie kompilacji wydania którym powiązane pliki JavaScript i zminimalizowany.</span><span class="sxs-lookup"><span data-stu-id="5e32a-163">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="5e32a-164">Korzystając z narzędzi deweloperskich programu Internet Explorer F12, debugowania funkcji JavaScript, zawartych w pakiecie zminimalizowany, w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="5e32a-164">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="5e32a-165">Wybierz **skryptu** karcie, a następnie wybierz **Rozpocznij debugowanie** przycisku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-165">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="5e32a-166">Wybierz pakiet zawierający funkcji JavaScript, do której chcesz debugować przy użyciu przycisku zasoby.</span><span class="sxs-lookup"><span data-stu-id="5e32a-166">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="5e32a-167">Format zminimalizowany JavaScript, wybierając **przycisk Konfiguracja** ![](bundling-and-minification/_static/image5.png), a następnie wybierając **formacie JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="5e32a-167">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="5e32a-168">W **skrypt służy wyszukiwania** t pole wejściowe, wybierz nazwę funkcji chcesz debugować.</span><span class="sxs-lookup"><span data-stu-id="5e32a-168">In the **Search Scrip** t input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="5e32a-169">Na poniższej ilustracji **AddAltToImg** została wprowadzona w **skrypt służy wyszukiwania** pole wprowadzania t.</span><span class="sxs-lookup"><span data-stu-id="5e32a-169">In the following image, **AddAltToImg** was entered in the **Search Scrip** t input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="5e32a-170">Aby uzyskać więcej informacji dotyczących debugowania za pomocą narzędzi deweloperskich F12, zobacz artykuł w witrynie MSDN [korzystania z narzędzi deweloperskich F12, aby debugować JavaScript — błędy](https://msdn.microsoft.com/en-us/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-170">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/en-us/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="5e32a-171">Kontrolowanie tworzenie pakietów i minimalizowanie</span><span class="sxs-lookup"><span data-stu-id="5e32a-171">Controlling Bundling and Minification</span></span>

<span data-ttu-id="5e32a-172">Tworzenie pakietów i minimalizowanie włączyć lub wyłączyć, ustawiając wartość atrybutu debugowania w [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx) w *Web.config* pliku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-172">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="5e32a-173">W poniższych XML `debug` jest ustawiona na wartość true, dlatego tworzenie pakietów i minimalizowanie jest wyłączona.</span><span class="sxs-lookup"><span data-stu-id="5e32a-173">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="5e32a-174">Aby włączyć tworzenie pakietów i minimalizowanie, ustaw `debug` wartość "false".</span><span class="sxs-lookup"><span data-stu-id="5e32a-174">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="5e32a-175">Można zastąpić *Web.config* ustawienie `EnableOptimizations` właściwość `BundleTable` klasy.</span><span class="sxs-lookup"><span data-stu-id="5e32a-175">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="5e32a-176">Poniższy kod umożliwia tworzenie pakietów i minimalizowanie i zastępuje wszystkie ustawienia w *Web.config* pliku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-176">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="5e32a-177">O ile `EnableOptimizations` jest `true` lub atrybutu debugowania w [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx) w *Web.config* plik ma ustawioną wartość `false`, pliki nie zostaną powiązane lub zminimalizowany.</span><span class="sxs-lookup"><span data-stu-id="5e32a-177">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="5e32a-178">Ponadto wersji .min plików nie będą używane, zostanie wybrany debugowania pełnej wersji.</span><span class="sxs-lookup"><span data-stu-id="5e32a-178">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="5e32a-179">`EnableOptimizations`zastępuje atrybut debugowania w [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx) w *Web.config* pliku</span><span class="sxs-lookup"><span data-stu-id="5e32a-179">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/en-us/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="5e32a-180">Przy użyciu tworzenie pakietów i minimalizowanie z formularzami sieci Web ASP.NET i stron sieci Web</span><span class="sxs-lookup"><span data-stu-id="5e32a-180">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="5e32a-181">Dla stron sieci Web, zobacz wpis w blogu [Dodawanie optymalizacji sieci Web do witryny sieci Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-181">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="5e32a-182">W przypadku formularzy sieci Web, zobacz wpis w blogu [Dodawanie tworzenie pakietów i minimalizowanie do formularzy sieci Web](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-182">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="5e32a-183">Przy użyciu tworzenie pakietów i minimalizowanie z platformą ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="5e32a-183">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="5e32a-184">W tej sekcji utworzymy ASP.NET MVC projektu, aby sprawdzić, tworzenie pakietów i minimalizowanie.</span><span class="sxs-lookup"><span data-stu-id="5e32a-184">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="5e32a-185">Najpierw utwórz nowy projekt ASP.NET MVC internet o nazwie **MvcBM** bez zmiana któregoś z ustawień domyślnych.</span><span class="sxs-lookup"><span data-stu-id="5e32a-185">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="5e32a-186">Otwórz *aplikacji\_Start\BundleConfig.cs* pliku i sprawdź, czy `RegisterBundles` metodę, która służy do tworzenia, Zarejestruj i skonfiguruj pakietów.</span><span class="sxs-lookup"><span data-stu-id="5e32a-186">Open the *App\_Start\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="5e32a-187">Poniższy kod przedstawia część `RegisterBundles` metody.</span><span class="sxs-lookup"><span data-stu-id="5e32a-187">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="5e32a-188">Poprzedni kod tworzy nowy pakiet JavaScript o nazwie *~/bundles/jquery* zawierającą wszystkie odpowiednie (które debugowania lub zminimalizowane, ale nie. *vsdoc*) plików *skryptów* folderu, który jest zgodny z ciągiem symbol wieloznaczny "{{wersja} ~/Scripts/jquery-.js".</span><span class="sxs-lookup"><span data-stu-id="5e32a-188">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="5e32a-189">Dla programu ASP.NET MVC 4, oznacza to, z konfiguracji debugowania, plik *jquery 1.7.1.js* zostaną dodane do pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-189">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="5e32a-190">W konfiguracji wydania *jquery 1.7.1.min.js* zostanie dodany.</span><span class="sxs-lookup"><span data-stu-id="5e32a-190">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="5e32a-191">Wiązanie framework zgodna z konwencjami kilka typowych takich jak:</span><span class="sxs-lookup"><span data-stu-id="5e32a-191">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="5e32a-192">Wybierając plik ".min" w wersji, gdy istnieją "FileX.min.js" i "FileX.js".</span><span class="sxs-lookup"><span data-stu-id="5e32a-192">Selecting ".min" file for release when "FileX.min.js" and "FileX.js" exist.</span></span>
- <span data-ttu-id="5e32a-193">Wybierz wersję z systemem innym niż ".min" do debugowania.</span><span class="sxs-lookup"><span data-stu-id="5e32a-193">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="5e32a-194">Ignorowanie "-vsdoc" (np. jquery-1.7.1-vsdoc.js), plików, które są używane tylko przez funkcję IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="5e32a-194">Ignoring "-vsdoc" files (such as jquery-1.7.1-vsdoc.js), which are used only by IntelliSense.</span></span>

<span data-ttu-id="5e32a-195">`{version}` Wieloznaczny dopasowania pokazanym powyżej jest używane do automatycznego tworzenia pakiet jQuery z odpowiednią wersją jQuery w Twojej *skryptów* folderu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-195">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="5e32a-196">W tym przykładzie przy użyciu symbolu wieloznacznego zapewnia następujące korzyści:</span><span class="sxs-lookup"><span data-stu-id="5e32a-196">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="5e32a-197">Umożliwia użycie narzędzia NuGet można zaktualizować do nowszej wersji jQuery bez zmieniania poprzedni kod wiązanie lub jQuery odwołuje się do strony widoku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-197">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="5e32a-198">Automatycznie wybiera pełną wersję dla konfiguracji debugowania i wersji ".min" w wersji kompilacji.</span><span class="sxs-lookup"><span data-stu-id="5e32a-198">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="5e32a-199">Korzystanie z nazwy CDN</span><span class="sxs-lookup"><span data-stu-id="5e32a-199">Using a CDN</span></span>

 <span data-ttu-id="5e32a-200">Kod wykonaj zastępuje pakiet jQuery lokalnego pakiet jQuery sieci CDN.</span><span class="sxs-lookup"><span data-stu-id="5e32a-200">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="5e32a-201">W powyższym kodzie jQuery będzie wymagane z sieci CDN, podczas gdy w wersji trybu i wersja do debugowania z jQuery będą pobierane lokalnie w trybie debugowania.</span><span class="sxs-lookup"><span data-stu-id="5e32a-201">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="5e32a-202">Podczas korzystania z usługi CDN, musisz mieć mechanizm rezerwowy w przypadku nieudanego żądania CDN.</span><span class="sxs-lookup"><span data-stu-id="5e32a-202">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="5e32a-203">Fragmentu następujący kod na końcu skryptu pokazuje pliku układu dodane do żądania jQuery powinien kończyć się niepowodzeniem CDN.</span><span class="sxs-lookup"><span data-stu-id="5e32a-203">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="5e32a-204">Tworzenie pakietu</span><span class="sxs-lookup"><span data-stu-id="5e32a-204">Creating a Bundle</span></span>

<span data-ttu-id="5e32a-205">[Pakietu](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) klasy `Include` — metoda pobiera tablicę ciągów, których każdy ciąg jest ścieżką wirtualną do zasobu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-205">The [Bundle](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="5e32a-206">Następujący kod w metodzie RegisterBundles w *aplikacji\_Start\BundleConfig.cs* pliku pokazuje, jak pliki zostaną dodane do pakietu:</span><span class="sxs-lookup"><span data-stu-id="5e32a-206">The following code from the RegisterBundles method in the *App\_Start\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="5e32a-207">[Pakietu](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) klasy `IncludeDirectory` — metoda jest dostępne, aby dodać wszystkie pliki w katalogu (i opcjonalnie wszystkie podkatalogi), które pasują do wzorca wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="5e32a-207">The [Bundle](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="5e32a-208">[Pakietu](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) klasy `IncludeDirectory` interfejsu API jest pokazany poniżej:</span><span class="sxs-lookup"><span data-stu-id="5e32a-208">The [Bundle](https://msdn.microsoft.com/en-us/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="5e32a-209">Pakiety są przywoływane w widokach przy użyciu metody renderowania ( `Styles.Render` CSS i `Scripts.Render` JavaScript).</span><span class="sxs-lookup"><span data-stu-id="5e32a-209">Bundles are referenced in views using the Render method, ( `Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="5e32a-210">Następujący kod z *Views\Shared\\_Layout.cshtml* pliku pokazuje, jak widoki projektu ASP.NET, internetowe odwołania pakiety CSS i JavaScript.</span><span class="sxs-lookup"><span data-stu-id="5e32a-210">The following markup from the *Views\Shared\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="5e32a-211">Zwróć uwagę, metody renderowania pobiera tablicę ciągów, dzięki czemu można dodać kilka pakietów w jednym wierszu kodu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-211">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="5e32a-212">Zazwyczaj można użyć metody renderowania, które utworzyć niezbędne HTML do odwołania elementu zawartości.</span><span class="sxs-lookup"><span data-stu-id="5e32a-212">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="5e32a-213">Można użyć `Url` do generowania adresu URL do elementu zawartości bez znaczników potrzebne do odwołania elementu zawartości.</span><span class="sxs-lookup"><span data-stu-id="5e32a-213">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="5e32a-214">Załóżmy, że chcesz używać nowego HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) atrybutu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-214">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="5e32a-215">Poniższy kod przedstawia sposób odwoływać się przy użyciu modernizr `Url` metody.</span><span class="sxs-lookup"><span data-stu-id="5e32a-215">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="5e32a-216">Za pomocą "\*" wieloznaczny, aby wybrać pliki</span><span class="sxs-lookup"><span data-stu-id="5e32a-216">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="5e32a-217">Ścieżki wirtualnej określona w `Include` — metoda i wyszukiwanie wzorca w `IncludeDirectory` metody można zaakceptować jedną "\*" wieloznacznego jako prefiksu lub sufiksu do ostatni segment ścieżki.</span><span class="sxs-lookup"><span data-stu-id="5e32a-217">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="5e32a-218">Ciąg wyszukiwania jest uwzględniana wielkość liter.</span><span class="sxs-lookup"><span data-stu-id="5e32a-218">The search string is case insensitive.</span></span> <span data-ttu-id="5e32a-219">`IncludeDirectory` Metoda ma możliwość wyszukiwania podkatalogów.</span><span class="sxs-lookup"><span data-stu-id="5e32a-219">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="5e32a-220">Rozważ następujące pliki JavaScript projektu:</span><span class="sxs-lookup"><span data-stu-id="5e32a-220">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="5e32a-221">*Scripts\Common\AddAltToImg.js*</span><span class="sxs-lookup"><span data-stu-id="5e32a-221">*Scripts\Common\AddAltToImg.js*</span></span>
- <span data-ttu-id="5e32a-222">*Scripts\Common\ToggleDiv.js*</span><span class="sxs-lookup"><span data-stu-id="5e32a-222">*Scripts\Common\ToggleDiv.js*</span></span>
- <span data-ttu-id="5e32a-223">*Scripts\Common\ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="5e32a-223">*Scripts\Common\ToggleImg.js*</span></span>
- <span data-ttu-id="5e32a-224">*Scripts\Common\Sub1\ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="5e32a-224">*Scripts\Common\Sub1\ToggleLinks.js*</span></span>

![dir imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="5e32a-226">W poniższej tabeli przedstawiono pliki dodane do pakietu przy użyciu symbolu wieloznacznego, jak pokazano:</span><span class="sxs-lookup"><span data-stu-id="5e32a-226">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="5e32a-227">**Wywołania**</span><span class="sxs-lookup"><span data-stu-id="5e32a-227">**Call**</span></span> | <span data-ttu-id="5e32a-228">**Pliki dodane lub wystąpił wyjątek**</span><span class="sxs-lookup"><span data-stu-id="5e32a-228">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="5e32a-229">Obejmują ("~/Scripts/Common/\*.js")</span><span class="sxs-lookup"><span data-stu-id="5e32a-229">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="5e32a-230">*ToggleImg.js AddAltToImg.js, ToggleDiv.js,*</span><span class="sxs-lookup"><span data-stu-id="5e32a-230">*AddAltToImg.js, ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="5e32a-231">Obejmują ("~/Scripts/Common/T\*.js")</span><span class="sxs-lookup"><span data-stu-id="5e32a-231">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="5e32a-232">Nieprawidłowy wzorzec wyjątek.</span><span class="sxs-lookup"><span data-stu-id="5e32a-232">Invalid pattern exception.</span></span> <span data-ttu-id="5e32a-233">Symbol wieloznaczny jest dozwolona tylko w prefiksu lub sufiksu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-233">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="5e32a-234">Obejmują ("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="5e32a-234">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="5e32a-235">Nieprawidłowy wzorzec wyjątek.</span><span class="sxs-lookup"><span data-stu-id="5e32a-235">Invalid pattern exception.</span></span> <span data-ttu-id="5e32a-236">Dozwolone jest tylko jeden symbol wieloznaczny.</span><span class="sxs-lookup"><span data-stu-id="5e32a-236">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="5e32a-237">"Obejmują (" ~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="5e32a-237">"Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="5e32a-238">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="5e32a-238">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="5e32a-239">"Obejmują (" ~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="5e32a-239">"Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="5e32a-240">Nieprawidłowy wzorzec wyjątek.</span><span class="sxs-lookup"><span data-stu-id="5e32a-240">Invalid pattern exception.</span></span> <span data-ttu-id="5e32a-241">Segment wieloznaczny czysty jest nieprawidłowy.</span><span class="sxs-lookup"><span data-stu-id="5e32a-241">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="5e32a-242">IncludeDirectory ("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="5e32a-242">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="5e32a-243">*ToggleDiv.js, ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="5e32a-243">*ToggleDiv.js, ToggleImg.js*</span></span> |
| <span data-ttu-id="5e32a-244">IncludeDirectory ("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="5e32a-244">IncludeDirectory("~/Scripts/Common", "T\*",true)</span></span> | <span data-ttu-id="5e32a-245">*ToggleLinks.js ToggleDiv.js, ToggleImg.js,*</span><span class="sxs-lookup"><span data-stu-id="5e32a-245">*ToggleDiv.js, ToggleImg.js, ToggleLinks.js*</span></span> |

<span data-ttu-id="5e32a-246">Jawne Dodawanie każdego pliku do pakietu jest zwykle preferowany nad ładowania symboli wieloznacznych plików z następujących powodów:</span><span class="sxs-lookup"><span data-stu-id="5e32a-246">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="5e32a-247">Dodawanie skryptów przez domyślne symboli wieloznacznych do ładowania je w porządku alfabetycznym, która zazwyczaj nie chcesz.</span><span class="sxs-lookup"><span data-stu-id="5e32a-247">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="5e32a-248">Pliki CSS i JavaScript często muszą zostać dodane, w określonej kolejności (inne niż alfanumeryczne).</span><span class="sxs-lookup"><span data-stu-id="5e32a-248">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="5e32a-249">Można zmniejszyć to zagrożenie, dodając niestandardowe [IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementacji, ale jawnie Dodawanie każdego pliku jest mniej podatne błędu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-249">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="5e32a-250">Na przykład można dodać nowe zasoby do folderu w przyszłości, które mogą wymagać zmodyfikowania Twojej [IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementacji.</span><span class="sxs-lookup"><span data-stu-id="5e32a-250">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="5e32a-251">Wyświetlanie określonych plików dodawane do katalogu przy użyciu ładowania symbol wieloznaczny może obejmować we wszystkich widokach odwołuje się do tego pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-251">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="5e32a-252">Jeśli określonego skryptu w widoku jest dodawany do pakietu, może wystąpić błąd kodu JavaScript w innych widoków, które odwołują się do pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-252">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="5e32a-253">Pliki CSS, które importują innych plików powoduje w importowanych plikach załadować dwa razy.</span><span class="sxs-lookup"><span data-stu-id="5e32a-253">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="5e32a-254">Na przykład poniższy kod tworzy pakiet z większość plików CSS motywu interfejsu użytkownika jQuery załadować dwa razy.</span><span class="sxs-lookup"><span data-stu-id="5e32a-254">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

 <span data-ttu-id="5e32a-255">Selektor symbol wieloznaczny "\*.css" w przypadku każdego pliku CSS w folderze, w tym *Content\themes\base\jquery.ui.all.css* pliku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-255">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\themes\base\jquery.ui.all.css* file.</span></span> <span data-ttu-id="5e32a-256">*Jquery.ui.all.css* pliku Importuje inne pliki CSS.</span><span class="sxs-lookup"><span data-stu-id="5e32a-256">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="5e32a-257">Pakietu buforowanie</span><span class="sxs-lookup"><span data-stu-id="5e32a-257">Bundle Caching</span></span>

<span data-ttu-id="5e32a-258">Pakiety wartość nagłówka HTTP wygasa jednego roku z po utworzeniu pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-258">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="5e32a-259">Jeśli przejdź na stronę poprzednio czytanego pokazuje Fiddler IE nie powoduje warunkowego żądania dla pakietu, który nie istnieją żadne żądania HTTP GET z programu Internet Explorer dla pakiety i odpowiedzi HTTP 304 z serwera.</span><span class="sxs-lookup"><span data-stu-id="5e32a-259">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="5e32a-260">Można wymusić programu Internet Explorer, aby utworzyć żądanie warunkowego dla każdego pakietu z kluczem F5 (co spowoduje odpowiedź HTTP 304 dla każdego pakietu).</span><span class="sxs-lookup"><span data-stu-id="5e32a-260">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="5e32a-261">Możesz wymusić pełne odświeżenie przy użyciu ^ F5 (co spowoduje odpowiedź 200 protokołu HTTP, dla każdego pakietu).</span><span class="sxs-lookup"><span data-stu-id="5e32a-261">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="5e32a-262">Poniższy obraz przedstawia **buforowanie** Fiddler okienka odpowiedzi:</span><span class="sxs-lookup"><span data-stu-id="5e32a-262">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![Obraz buforowania fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="5e32a-264">Żądanie</span><span class="sxs-lookup"><span data-stu-id="5e32a-264">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="5e32a-265">jest przeznaczony dla pakietu **AllMyScripts** i zawiera pary ciągu zapytania **v = r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="5e32a-265">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="5e32a-266">Ciąg zapytania **v** ma wartość, czyli token Unikatowy identyfikator używany do buforowania.</span><span class="sxs-lookup"><span data-stu-id="5e32a-266">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="5e32a-267">Tak długo, jak pakietu nie zmienia, aplikacja ASP.NET będzie żądać **AllMyScripts** pakietu przy użyciu tego tokenu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-267">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="5e32a-268">W przypadku zmiany dowolnego pliku w pakiecie, struktura optymalizacji ASP.NET wygeneruje nowy token, gwarantując, że żądania przeglądarki dla pakietu pobierze najnowszą pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-268">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="5e32a-269">Uruchamianie narzędzi deweloperskich IE9 F12, przejdź do strony wcześniej załadowany IE niepoprawnie zawiera warunkowego żądania GET wysyłane do każdego pakietu i serwer zwracanie HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="5e32a-269">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="5e32a-270">Możesz przeczytać, dlaczego IE9 ma problemy z określenie, czy żądania warunkowego została wprowadzona w wpis w blogu [CDN przy użyciu i wygasa, aby poprawić wydajność witryny sieci Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-270">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="5e32a-271">MNIEJ CoffeeScript, SCSS, Sass, tworzenie pakietów.</span><span class="sxs-lookup"><span data-stu-id="5e32a-271">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="5e32a-272">Tworzenie pakietów i minimalizowanie framework zapewnia mechanizm do przetwarzania pośredniego języków, takich jak [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [mniej](http://www.dotlesscss.org/) lub [Coffeescript ](http://coffeescript.org/)i dotyczą transformacje, takich jak minimalizację wynikowy pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-272">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="5e32a-273">Na przykład, aby dodać [.less](http://www.dotlesscss.org/) plików do projektu MVC 4:</span><span class="sxs-lookup"><span data-stu-id="5e32a-273">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="5e32a-274">Utwórz folder mniej zawartości.</span><span class="sxs-lookup"><span data-stu-id="5e32a-274">Create a folder for your LESS content.</span></span> <span data-ttu-id="5e32a-275">W poniższym przykładzie użyto *Content\MyLess* folderu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-275">The following example uses the *Content\MyLess* folder.</span></span>
2. <span data-ttu-id="5e32a-276">Dodaj [.less](http://www.dotlesscss.org/) pakietu NuGet **bez kropki** do projektu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-276">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="5e32a-277">![Bez kropki install NuGet](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="5e32a-277">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="5e32a-278">Dodaj klasę, która implementuje [IBundleTransform](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundletransform(VS.110).aspx) interfejsu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-278">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/en-us/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="5e32a-279">Przekształcenia .less Dodaj następujący kod do projektu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-279">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="5e32a-280">Utwórz pakiet zawierający mniej plików z `LessTransform` i [CssMinify](https://msdn.microsoft.com/en-us/library/system.web.optimization.cssminify(VS.110).aspx) transformacji.</span><span class="sxs-lookup"><span data-stu-id="5e32a-280">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/en-us/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="5e32a-281">Dodaj następujący kod do `RegisterBundles` metody w *aplikacji\_Start\BundleConfig.cs* pliku.</span><span class="sxs-lookup"><span data-stu-id="5e32a-281">Add the following code to the `RegisterBundles` method in the *App\_Start\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="5e32a-282">Dodaj następujący kod, do których odwołuje się do mniej pakietu widoków.</span><span class="sxs-lookup"><span data-stu-id="5e32a-282">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="5e32a-283">Zagadnienia dotyczące pakietu</span><span class="sxs-lookup"><span data-stu-id="5e32a-283">Bundle Considerations</span></span>

<span data-ttu-id="5e32a-284">Dotyczącej podczas tworzenia pakietów ma obejmować "pakietu" jako prefiksu nazwy pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-284">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="5e32a-285">Uniemożliwi to potencjalnie [routingu konflikt](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-285">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="5e32a-286">Po zaktualizowaniu jeden plik w pakiecie nowy token jest generowane dla parametru ciągu zapytania pakietu i pełny pakiet musi zostać pobrana przy następnym klient zażąda strony zawierającej pakietu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-286">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="5e32a-287">W znaczniku tradycyjnych, gdy poszczególnych trwałych znajduje się indywidualnie czy pobrane tylko zmienionych plików.</span><span class="sxs-lookup"><span data-stu-id="5e32a-287">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="5e32a-288">Zasoby, które zmieniają się często może nie być odpowiednimi obiektami do grupowania.</span><span class="sxs-lookup"><span data-stu-id="5e32a-288">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="5e32a-289">Tworzenie pakietów i minimalizowanie głównie zwiększyć czas ładowania pierwsze żądanie strony.</span><span class="sxs-lookup"><span data-stu-id="5e32a-289">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="5e32a-290">Po zażądaniu strony sieci Web przeglądarce buforuje zasoby (JavaScript, CSS i obrazy), tworzenie pakietów i minimalizowanie nie będzie zapewniać żadnych wzrost wydajności podczas żądania strony lub strony w tej samej lokacji, żąda tego samego zasoby.</span><span class="sxs-lookup"><span data-stu-id="5e32a-290">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="5e32a-291">Jeśli nie ustawisz nagłówek poprawnie na zasobów, wygaśnięcia i nie używaj tworzenie pakietów i minimalizowanie, heurystyki świeżości przeglądarki oznaczy zasoby starych po upływie kilku dni i przeglądarki będzie wymagać żądanie sprawdzania poprawności dla każdego zasobu.</span><span class="sxs-lookup"><span data-stu-id="5e32a-291">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="5e32a-292">W takim przypadku tworzenie pakietów i minimalizowanie zapewnić wzrost wydajności po pierwszym żądaniu strony.</span><span class="sxs-lookup"><span data-stu-id="5e32a-292">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="5e32a-293">Aby uzyskać więcej informacji, zobacz blog [CDN przy użyciu i wygasa, aby poprawić wydajność witryny sieci Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-293">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="5e32a-294">Ograniczenia przeglądarki sześciu równoczesnych połączeń dla każdej nazwy hosta można zminimalizować przy użyciu [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-294">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="5e32a-295">Ponieważ sieć CDN będzie mieć inną nazwę hosta niż hostingu witryny, żądania zasobów z sieci CDN nie odliczona sześciu limit równoczesnych połączeń środowisku macierzystym.</span><span class="sxs-lookup"><span data-stu-id="5e32a-295">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="5e32a-296">CDN oferuje również wspólnej buforowanie pakietu i buforowanie zalety krawędzi.</span><span class="sxs-lookup"><span data-stu-id="5e32a-296">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="5e32a-297">Powinien być dzielony na partycje pakietów przez strony, które tego wymagają.</span><span class="sxs-lookup"><span data-stu-id="5e32a-297">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="5e32a-298">Na przykład domyślnego szablonu platformy ASP.NET MVC dla aplikacji internetowej tworzy pakiet weryfikacji jQuery oddzielony od jQuery.</span><span class="sxs-lookup"><span data-stu-id="5e32a-298">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="5e32a-299">Ponieważ widoki tworzone nie dane wejściowe i nie po wartości, nie obejmują one pakietu sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="5e32a-299">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="5e32a-300">`System.Web.Optimization` Przestrzeni nazw jest zaimplementowana w System.Web.Optimization.DLL.</span><span class="sxs-lookup"><span data-stu-id="5e32a-300">The `System.Web.Optimization` namespace is implemented in System.Web.Optimization.DLL.</span></span> <span data-ttu-id="5e32a-301">Jest przeprowadzana z zastosowaniem biblioteki WebGrease (WebGrease.dll) minimalizacji możliwości, który z kolei używa Antlr3.Runtime.dll.</span><span class="sxs-lookup"><span data-stu-id="5e32a-301">It leverages the WebGrease library (WebGrease.dll) for minification capabilities, which in turn uses Antlr3.Runtime.dll.</span></span>

<span data-ttu-id="5e32a-302">*Używam Twitter wpisów szybki i udostępniać łącza. Dojście do mojego Twitter*:[@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="5e32a-302">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="5e32a-303">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="5e32a-303">Additional Resources</span></span>

- <span data-ttu-id="5e32a-304">Wideo:[tworzenie pakietów i optymalizowanie](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) przez [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="5e32a-304">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="5e32a-305">[Dodawanie optymalizacji sieci Web do witryny sieci Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-305">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="5e32a-306">[Dodawanie tworzenie pakietów i minimalizowanie do formularzy sieci Web](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="5e32a-306">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="5e32a-307">[Wpływ na wydajność programu tworzenie pakietów i minimalizowanie na przeglądanie sieci Web](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) przez [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen)[@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="5e32a-307">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="5e32a-308">[Przy użyciu CDN i wygasa, aby zwiększyć wydajność witryny sieci Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) autorstwa Ricka Andersona[@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="5e32a-308">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="5e32a-309">Minimalizowanie RTT (czasami opóźnienia)</span><span class="sxs-lookup"><span data-stu-id="5e32a-309">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="5e32a-310">Współautorzy</span><span class="sxs-lookup"><span data-stu-id="5e32a-310">Contributors</span></span>

- <span data-ttu-id="5e32a-311">Hao Kung</span><span class="sxs-lookup"><span data-stu-id="5e32a-311">Hao Kung</span></span>
- [<span data-ttu-id="5e32a-312">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="5e32a-312">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="5e32a-313">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="5e32a-313">Diana LaRose</span></span>
