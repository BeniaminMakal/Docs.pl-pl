---
uid: mvc/overview/older-versions-1/security/authenticating-users-with-forms-authentication-vb
title: Uwierzytelniania użytkowników przy użyciu formularzy uwierzytelniania (VB) | Dokumentacja firmy Microsoft
author: microsoft
description: Dowiedz się, jak za pomocą atrybutu [Authorize] hasło ochrony określonej strony w aplikacji MVC. Możesz dowiedzieć się, jak Administracja witryny sieci Web za pomocą...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/27/2009
ms.topic: article
ms.assetid: 4341f5b1-6fe5-44c5-8b8a-18fa84f80177
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/security/authenticating-users-with-forms-authentication-vb
msc.type: authoredcontent
ms.openlocfilehash: 0ff425a4c9728de2eec3d0c94e76cb51a15de487
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/06/2018
ms.locfileid: "30871002"
---
<a name="authenticating-users-with-forms-authentication-vb"></a><span data-ttu-id="36d79-104">Uwierzytelnianie użytkowników za pomocą uwierzytelniania formularzy (VB)</span><span class="sxs-lookup"><span data-stu-id="36d79-104">Authenticating Users with Forms Authentication (VB)</span></span>
====================
<span data-ttu-id="36d79-105">przez [firmy Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="36d79-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="36d79-106">Dowiedz się, jak za pomocą atrybutu [Authorize] hasło ochrony określonej strony w aplikacji MVC.</span><span class="sxs-lookup"><span data-stu-id="36d79-106">Learn how to use the [Authorize] attribute to password protect particular pages in your MVC application.</span></span> <span data-ttu-id="36d79-107">Jak używać narzędzia administrowania witryną sieci Web do tworzenia i zarządzania użytkownikami i rolami.</span><span class="sxs-lookup"><span data-stu-id="36d79-107">You learn how to use the Web Site Administration Tool to create and manage users and roles.</span></span> <span data-ttu-id="36d79-108">Można również informacje o sposobie konfigurowania przechowywania informacji o kontach i roli użytkownika.</span><span class="sxs-lookup"><span data-stu-id="36d79-108">You also learn how to configure where user account and role information is stored.</span></span>


<span data-ttu-id="36d79-109">Celem tego samouczka jest wyjaśniają, jak formularzy można używać uwierzytelniania hasła ochrona widoków w aplikacjach ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="36d79-109">The goal of this tutorial is to explain how you can use Forms authentication to password protect the views in your ASP.NET MVC applications.</span></span> <span data-ttu-id="36d79-110">Jak używać narzędzia administrowania witryną sieci Web do tworzenia użytkowników i ról.</span><span class="sxs-lookup"><span data-stu-id="36d79-110">You learn how to use the Web Site Administration Tool to create users and roles.</span></span> <span data-ttu-id="36d79-111">Możesz również sposób zapobiec nieautoryzowanemu wywoływania akcji kontrolera.</span><span class="sxs-lookup"><span data-stu-id="36d79-111">You also learn how to prevent unauthorized users from invoking controller actions.</span></span> <span data-ttu-id="36d79-112">Na koniec zostanie przedstawiony sposób skonfigurowania, gdzie są przechowywane nazwy użytkowników i hasła.</span><span class="sxs-lookup"><span data-stu-id="36d79-112">Finally, you learn how to configure where user names and passwords are stored.</span></span>

#### <a name="using-the-web-site-administration-tool"></a><span data-ttu-id="36d79-113">Za pomocą narzędzia administrowania witryną sieci Web</span><span class="sxs-lookup"><span data-stu-id="36d79-113">Using the Web Site Administration Tool</span></span>

<span data-ttu-id="36d79-114">Zanim przejdziemy inaczej możemy należy zacząć od tworzenie niektórych użytkowników i ról.</span><span class="sxs-lookup"><span data-stu-id="36d79-114">Before we do anything else, we should start by creating some users and roles.</span></span> <span data-ttu-id="36d79-115">Najprostszym sposobem tworzenia nowych użytkowników i ról ma korzystać z narzędzia administrowania witryną sieci Web 2008 w usłudze Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="36d79-115">The easiest way to create new users and roles is to take advantage of the Visual Studio 2008 Web Site Administration Tool.</span></span> <span data-ttu-id="36d79-116">To narzędzie można uruchomić po wybraniu opcji menu **projektu, konfiguracji ASP.NET**.</span><span class="sxs-lookup"><span data-stu-id="36d79-116">You can launch this tool by selecting the menu option **Project, ASP.NET Configuration**.</span></span> <span data-ttu-id="36d79-117">Alternatywnie możesz uruchomić narzędzie do administrowania witryną sieci Web, klikając ikonę (nieco przerażenie) młota naciśnięcie na świecie, który jest wyświetlany w górnej części okna Eksploratora rozwiązań (zobacz rysunek 1).</span><span class="sxs-lookup"><span data-stu-id="36d79-117">Alternatively, you can launch the Web Site Administration Tool by clicking the (somewhat scary) icon of the hammer hitting the world that appears at the top of the Solution Explorer window (see Figure 1).</span></span>

<span data-ttu-id="36d79-118">**Rysunek 1 — Uruchamianie narzędzia administrowania witryną sieci Web**</span><span class="sxs-lookup"><span data-stu-id="36d79-118">**Figure 1 – Launching the Web Site Administration Tool**</span></span>

![clip_image002[4]](authenticating-users-with-forms-authentication-vb/_static/image1.jpg)

<span data-ttu-id="36d79-120">W ramach narzędzia administrowania witryną sieci Web tworzenia nowych użytkowników i role, wybierając kartę Zabezpieczenia. Kliknij przycisk **tworzenia użytkownika** łącze, aby utworzyć nowego użytkownika o nazwie Stephen (patrz rysunek 2).</span><span class="sxs-lookup"><span data-stu-id="36d79-120">Within the Web Site Administration Tool, you create new users and roles by selecting the Security tab. Click the **Create user** link to create a new user named Stephen (see Figure 2).</span></span> <span data-ttu-id="36d79-121">Podaj użytkownika Stephen dowolnym hasłem, które mają (na przykład *klucz tajny*).</span><span class="sxs-lookup"><span data-stu-id="36d79-121">Provide the Stephen user with any password that you want (for example, *secret*).</span></span>

<span data-ttu-id="36d79-122">**Rysunek 2 — Tworzenie nowego użytkownika**</span><span class="sxs-lookup"><span data-stu-id="36d79-122">**Figure 2 – Creating a new user**</span></span>

![clip_image004[4]](authenticating-users-with-forms-authentication-vb/_static/image2.jpg)

<span data-ttu-id="36d79-124">Pierwszy Włączanie ról i definiowanie co najmniej jedną rolę do tworzenia nowych ról.</span><span class="sxs-lookup"><span data-stu-id="36d79-124">You create new roles by first enabling roles and defining one or more roles.</span></span> <span data-ttu-id="36d79-125">Włącz role, klikając **Włącz role** łącza.</span><span class="sxs-lookup"><span data-stu-id="36d79-125">Enable roles by clicking the **Enable roles** link.</span></span> <span data-ttu-id="36d79-126">Następnie należy utworzyć rolę o nazwie *Administratorzy* klikając **Utwórz role lub zarządzaj nimi** link (patrz rysunek 3).</span><span class="sxs-lookup"><span data-stu-id="36d79-126">Next, create a role named *Administrators* by clicking the **Create or Manage roles** link (see Figure 3).</span></span>

<span data-ttu-id="36d79-127">**Rysunek 3 — Tworzenie nowej roli**</span><span class="sxs-lookup"><span data-stu-id="36d79-127">**Figure 3 – Creating a new role**</span></span>

![clip_image006[4]](authenticating-users-with-forms-authentication-vb/_static/image3.jpg)

<span data-ttu-id="36d79-129">Na koniec Utwórz nowego użytkownika o nazwie Zosi i skojarz Zosi z rolą Administratorzy klikając łącza tworzenia użytkownika i wybierając administratorów, podczas tworzenia Zosi (patrz rysunek 4).</span><span class="sxs-lookup"><span data-stu-id="36d79-129">Finally, create a new user named Sally and associate Sally with the Administrators role by clicking the Create User link and selecting Administrators when creating Sally (see Figure 4).</span></span>

<span data-ttu-id="36d79-130">**Rysunek 4 — Dodawanie użytkownika do roli**</span><span class="sxs-lookup"><span data-stu-id="36d79-130">**Figure 4 – Adding a user to a role**</span></span>

![clip_image008[4]](authenticating-users-with-forms-authentication-vb/_static/image4.jpg)

<span data-ttu-id="36d79-132">Gdy wszystkie jest nazywany i gotowe, powinien mieć dwóch nowych użytkowników o nazwie Stephen i Zosi.</span><span class="sxs-lookup"><span data-stu-id="36d79-132">When all is said and done, you should have two new users named Stephen and Sally.</span></span> <span data-ttu-id="36d79-133">Nowa rola o nazwie Administratorzy powinni również mieć.</span><span class="sxs-lookup"><span data-stu-id="36d79-133">You should also have a new role named Administrators.</span></span> <span data-ttu-id="36d79-134">Zosi jest członkiem roli Administratorzy i Stephen nie jest.</span><span class="sxs-lookup"><span data-stu-id="36d79-134">Sally is a member of the Administrators role and Stephen is not.</span></span>

#### <a name="requiring-authorization"></a><span data-ttu-id="36d79-135">Wymaganie autoryzacji</span><span class="sxs-lookup"><span data-stu-id="36d79-135">Requiring Authorization</span></span>

<span data-ttu-id="36d79-136">Możesz wymagać użytkownika do uwierzytelnienia użytkownika wywołuje akcji kontrolera, dodając atrybut [Authorize] do akcji.</span><span class="sxs-lookup"><span data-stu-id="36d79-136">You can require a user to be authenticated before the user invokes a controller action by adding the [Authorize] attribute to the action.</span></span> <span data-ttu-id="36d79-137">Atrybut [Authorize] można zastosować do akcji kontrolera poszczególnych lub ten atrybut można stosować do klasy całego kontrolera.</span><span class="sxs-lookup"><span data-stu-id="36d79-137">You can apply the [Authorize] attribute to an individual controller action or you can apply this attribute to an entire controller class.</span></span>

<span data-ttu-id="36d79-138">Na przykład kontrolera 1 lista przedstawia akcji o nazwie CompanySecrets().</span><span class="sxs-lookup"><span data-stu-id="36d79-138">For example, the controller in Listing 1 exposes an action named CompanySecrets().</span></span> <span data-ttu-id="36d79-139">Ponieważ ta akcja ma atrybut [Authorize], chyba że użytkownik jest uwierzytelniany nie można wywołać tej akcji.</span><span class="sxs-lookup"><span data-stu-id="36d79-139">Because this action is decorated with the [Authorize] attribute, this action cannot be invoked unless a user is authenticated.</span></span>

<span data-ttu-id="36d79-140">**Wyświetlanie listy 1 – Controllers\HomeController.vb**</span><span class="sxs-lookup"><span data-stu-id="36d79-140">**Listing 1 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](authenticating-users-with-forms-authentication-vb/samples/sample1.vb)]

<span data-ttu-id="36d79-141">Jeśli wywołanie akcji CompanySecrets(), wprowadzając adres URL /Home/CompanySecrets na pasku adresu przeglądarki, a nie jesteś uwierzytelniony użytkownik, a następnie nastąpi przekierowanie do widoku logowania automatycznie (patrz rysunek 5).</span><span class="sxs-lookup"><span data-stu-id="36d79-141">If you invoke the CompanySecrets() action by entering the URL /Home/CompanySecrets in the address bar of your browser, and you are not an authenticated user, then you will be redirected to the Login view automatically (see Figure 5).</span></span>

<span data-ttu-id="36d79-142">**Rysunek 5 — widoku logowania**</span><span class="sxs-lookup"><span data-stu-id="36d79-142">**Figure 5 – The Login view**</span></span>

![clip_image010[4]](authenticating-users-with-forms-authentication-vb/_static/image5.jpg)

<span data-ttu-id="36d79-144">Widok logowania umożliwia wprowadź nazwę użytkownika i hasło.</span><span class="sxs-lookup"><span data-stu-id="36d79-144">You can use the Login view to enter your user name and password.</span></span> <span data-ttu-id="36d79-145">Jeśli nie jesteś zarejestrowanym użytkownikiem, a następnie kliknięcie **zarejestrować** łącze, aby przejść do rejestru wyświetlania (patrz rysunek 6).</span><span class="sxs-lookup"><span data-stu-id="36d79-145">If you are not a registered user then you can click the **register** link to navigate to the Register view (see Figure 6).</span></span> <span data-ttu-id="36d79-146">Widok rejestru umożliwia utworzenie nowego konta użytkownika.</span><span class="sxs-lookup"><span data-stu-id="36d79-146">You can use the Register view to create a new user account.</span></span>

<span data-ttu-id="36d79-147">**Rysunek 6 — widok rejestru**</span><span class="sxs-lookup"><span data-stu-id="36d79-147">**Figure 6 – The Register view**</span></span>

![clip_image012](authenticating-users-with-forms-authentication-vb/_static/image6.jpg)

<span data-ttu-id="36d79-149">Po pomyślnym zalogowaniu można wyświetlić CompanySecrets wyświetlania (patrz rysunek 7).</span><span class="sxs-lookup"><span data-stu-id="36d79-149">After you successfully log in, you can see the CompanySecrets view (see Figure 7).</span></span> <span data-ttu-id="36d79-150">Domyślnie możesz zalogować się do czasu zamknięcia okna przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="36d79-150">By default, you will continue to be logged in until you close your browser window.</span></span>

<span data-ttu-id="36d79-151">**Rysunek 7 — widok CompanySecrets**</span><span class="sxs-lookup"><span data-stu-id="36d79-151">**Figure 7 – The CompanySecrets view**</span></span>

![clip_image014](authenticating-users-with-forms-authentication-vb/_static/image7.jpg)

#### <a name="authorizing-by-user-name-or-user-role"></a><span data-ttu-id="36d79-153">Autoryzowanie według nazwy użytkownika lub roli użytkownika</span><span class="sxs-lookup"><span data-stu-id="36d79-153">Authorizing by User Name or User Role</span></span>

<span data-ttu-id="36d79-154">Aby ograniczyć dostęp do akcji kontrolera do określonego zestawu użytkowników lub zestaw ról użytkownika, można użyć atrybutu [Authorize].</span><span class="sxs-lookup"><span data-stu-id="36d79-154">You can use the [Authorize] attribute to restrict access to a controller action to a particular set of users or a particular set of user roles.</span></span> <span data-ttu-id="36d79-155">Na przykład zmodyfikowanych kontrolera głównej wyświetlania 2 zawiera dwa nowe akcje o nazwie StephenSecrets() i AdministratorSecrets().</span><span class="sxs-lookup"><span data-stu-id="36d79-155">For example, the modified Home controller in Listing 2 contains two new actions named StephenSecrets() and AdministratorSecrets().</span></span>

<span data-ttu-id="36d79-156">**Wyświetlanie listy 2 — Controllers\HomeController.vb**</span><span class="sxs-lookup"><span data-stu-id="36d79-156">**Listing 2 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](authenticating-users-with-forms-authentication-vb/samples/sample2.vb)]

<span data-ttu-id="36d79-157">Tylko użytkownik z nazwą użytkownika Stephen może wywołać akcję StephenSecrets().</span><span class="sxs-lookup"><span data-stu-id="36d79-157">Only a user with the user name Stephen can invoke the StephenSecrets() action.</span></span> <span data-ttu-id="36d79-158">Przekierowanie do widoku logowania wszystkich innych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="36d79-158">All other users get redirected to the Login view.</span></span> <span data-ttu-id="36d79-159">Właściwość użytkowników akceptuje rozdzielana przecinkami lista nazw kont użytkowników.</span><span class="sxs-lookup"><span data-stu-id="36d79-159">The Users property accepts a comma separated list of user account names.</span></span>

<span data-ttu-id="36d79-160">Tylko użytkownicy należący do roli Administratorzy mogą wywoływać Akcja AdministratorSecrets().</span><span class="sxs-lookup"><span data-stu-id="36d79-160">Only users in the Administrators role can invoke the AdministratorSecrets() action.</span></span> <span data-ttu-id="36d79-161">Na przykład ponieważ Zosi jest członkiem grupy Administratorzy, klika wywołanie akcji AdministratorSecrets().</span><span class="sxs-lookup"><span data-stu-id="36d79-161">For example, because Sally is a member of the Administrators group, she can invoke the AdministratorSecrets() action.</span></span> <span data-ttu-id="36d79-162">Przekierowanie do widoku logowania wszystkich innych użytkowników.</span><span class="sxs-lookup"><span data-stu-id="36d79-162">All other users get redirected to the Login view.</span></span> <span data-ttu-id="36d79-163">Właściwość role akceptuje rozdzielana przecinkami lista nazw ról.</span><span class="sxs-lookup"><span data-stu-id="36d79-163">The Roles property accepts a comma separated list of role names.</span></span>

#### <a name="configuring-authentication"></a><span data-ttu-id="36d79-164">Konfigurowanie uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="36d79-164">Configuring Authentication</span></span>

<span data-ttu-id="36d79-165">W tym momencie możesz może się zastanawiać, gdzie jest przechowywana informacji o kontach i roli użytkownika.</span><span class="sxs-lookup"><span data-stu-id="36d79-165">At this point, you might be wondering where the user account and role information is being stored.</span></span> <span data-ttu-id="36d79-166">Domyślnie informacje są przechowywane w bazie danych (RANU) programu SQL Express nazwane ASPNETDB.mdf znajduje się w aplikacji MVC aplikacji\_folderem danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-166">By default, the information is stored in a (RANU) SQL Express database named ASPNETDB.mdf located in your MVC application's App\_Data folder.</span></span> <span data-ttu-id="36d79-167">Ta baza danych jest generowany przez platformę ASP.NET automatycznie podczas uruchamiania przy użyciu członkostwa.</span><span class="sxs-lookup"><span data-stu-id="36d79-167">This database is generated by the ASP.NET framework automatically when you start using membership.</span></span>

<span data-ttu-id="36d79-168">Aby wyświetlić ASPNETDB.mdf bazy danych w oknie Eksploratora rozwiązań, należy najpierw wybierz opcję menu projektu, Pokaż wszystkie pliki.</span><span class="sxs-lookup"><span data-stu-id="36d79-168">In order to see the ASPNETDB.mdf database in the Solution Explorer window, you first need to select the menu option Project, Show All Files.</span></span>

<span data-ttu-id="36d79-169">Przy użyciu bazy danych SQL Express domyślny jest poprawnie przy tworzeniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="36d79-169">Using the default SQL Express database is fine when developing an application.</span></span> <span data-ttu-id="36d79-170">Prawdopodobnie jednak nie chcesz użyć ASPNETDB.mdf domyślnej bazy danych w przypadku aplikacji produkcyjnej.</span><span class="sxs-lookup"><span data-stu-id="36d79-170">Most likely, however, you won't want to use the default ASPNETDB.mdf database for a production application.</span></span> <span data-ttu-id="36d79-171">W takim przypadku można zmienić przechowywania informacji o koncie użytkownika, wykonując następujące dwa kroki:</span><span class="sxs-lookup"><span data-stu-id="36d79-171">In that case, you can change where user account information is stored by completing the following two steps:</span></span>

1. <span data-ttu-id="36d79-172">Dodawanie obiektów bazy danych usług aplikacji do produkcyjnej bazy danych — zmienić parametry połączenia aplikacji wskaż produkcyjnej bazy danych</span><span class="sxs-lookup"><span data-stu-id="36d79-172">Add the Application Services database objects to your production database - Change your application connection string to point to your production database</span></span>

<span data-ttu-id="36d79-173">Pierwszym krokiem jest dodanie wszystkie niezbędne obiekty bazy danych (tabele i procedury składowane) do produkcyjnej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-173">The first step is to add all of the necessary database objects (tables and stored procedures) to your production database.</span></span> <span data-ttu-id="36d79-174">Najprostszym sposobem, aby dodać te obiekty do nowej bazy danych jest wykorzystać Kreator konfiguracji ASP.NET SQL Server (patrz rysunek 8).</span><span class="sxs-lookup"><span data-stu-id="36d79-174">The easiest way to add these objects to a new database is to take advantage of the ASP.NET SQL Server Setup Wizard (see Figure 8).</span></span> <span data-ttu-id="36d79-175">To narzędzie można uruchomić, należy otworzyć wiersz polecenia 2008 programu Visual Studio z grupy programu Microsoft Visual Studio 2008 i wykonywania w wierszu polecenia następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="36d79-175">You can launch this tool by opening the Visual Studio 2008 Command Prompt from the Microsoft Visual Studio 2008 program group and executing the following command from the command prompt:</span></span>

<span data-ttu-id="36d79-176">aspnet\_regsql</span><span class="sxs-lookup"><span data-stu-id="36d79-176">aspnet\_regsql</span></span>

<span data-ttu-id="36d79-177">**Rysunek 8 — Kreator konfiguracji ASP.NET SQL Server**</span><span class="sxs-lookup"><span data-stu-id="36d79-177">**Figure 8 – The ASP.NET SQL Server Setup Wizard**</span></span>

![clip_image016](authenticating-users-with-forms-authentication-vb/_static/image8.jpg)

<span data-ttu-id="36d79-179">Kreator konfiguracji ASP.NET SQL Server umożliwia wybierz bazę danych programu SQL Server w sieci i zainstalować wszystkie obiekty bazy danych wymaganych przez usługi aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="36d79-179">The ASP.NET SQL Server Setup Wizard enables you to select a SQL Server database on your network and install all of the database objects required by the ASP.NET application services.</span></span> <span data-ttu-id="36d79-180">Serwer bazy danych nie jest wymagane znajdować się na komputerze lokalnym.</span><span class="sxs-lookup"><span data-stu-id="36d79-180">The database server is not required to be located on your local machine.</span></span>

> [!NOTE]
> <span data-ttu-id="36d79-181">Jeśli nie chcesz używać Kreator konfiguracji ASP.NET SQL Server można znaleźć skrypty SQL dodawania obiektów bazy danych usług aplikacji w następującym folderze:</span><span class="sxs-lookup"><span data-stu-id="36d79-181">If you don't want to use the ASP.NET SQL Server Setup Wizard, then you can find SQL scripts for adding the application services database objects in the following folder:</span></span>
> 
> 
> <span data-ttu-id="36d79-182">C:\Windows\Microsoft.NET\Framework\v2.0.50727</span><span class="sxs-lookup"><span data-stu-id="36d79-182">C:\Windows\Microsoft.NET\Framework\v2.0.50727</span></span>


<span data-ttu-id="36d79-183">Po utworzeniu niezbędne obiekty bazy danych, należy zmodyfikować połączenie z bazą danych używanych przez aplikację MVC.</span><span class="sxs-lookup"><span data-stu-id="36d79-183">After you create the necessary database objects, you need to modify the database connection used by your MVC application.</span></span> <span data-ttu-id="36d79-184">Zmodyfikuj ApplicationServices parametry połączenia w pliku konfiguracyjnym (web.config) w sieci web tak, aby wskazywało w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-184">Modify the ApplicationServices connection string in your web configuration (web.config) file so that it points to the production database.</span></span> <span data-ttu-id="36d79-185">Na przykład modyfikacji połączenia do wyświetlania 3 wskazuje na bazie danych o nazwie MyProductionDB (oryginalny ciąg połączenia ApplicationServices ma zostały oznaczone komentarzami).</span><span class="sxs-lookup"><span data-stu-id="36d79-185">For example, the modified connection in Listing 3 points to a database named MyProductionDB (the original ApplicationServices connection string has been commented out).</span></span>

<span data-ttu-id="36d79-186">**Wyświetlanie listy 3 — pliku Web.config**</span><span class="sxs-lookup"><span data-stu-id="36d79-186">**Listing 3 – Web.config**</span></span>

[!code-xml[Main](authenticating-users-with-forms-authentication-vb/samples/sample3.xml)]

#### <a name="configuring-database-permissions"></a><span data-ttu-id="36d79-187">Konfigurowanie uprawnień do bazy danych</span><span class="sxs-lookup"><span data-stu-id="36d79-187">Configuring Database Permissions</span></span>

<span data-ttu-id="36d79-188">Jeśli używasz zintegrowane zabezpieczenia do połączenia z bazą danych następnie musisz dodać prawidłowe konto użytkownika systemu Windows jako identyfikatora logowania do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-188">If you use Integrated Security to connect to your database then you will need to add the correct Windows user account as a login to your database.</span></span> <span data-ttu-id="36d79-189">Poprawne konto zależy od tego, czy używasz ASP.NET Development Server albo IIS jako serwera sieci web.</span><span class="sxs-lookup"><span data-stu-id="36d79-189">The correct account depends on whether you are using the ASP.NET Development Server or Internet Information Services as your web server.</span></span> <span data-ttu-id="36d79-190">Konto użytkownika zależy również od systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="36d79-190">The correct user account also depends on your operating system.</span></span>

<span data-ttu-id="36d79-191">Jeśli używasz ASP.NET Development Server (serwer sieci web domyślne używane przez program Visual Studio) aplikacji będzie wykonywany w kontekście konta użytkownika systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="36d79-191">If you are using the ASP.NET Development Server (the default web server used by Visual Studio) then your application executes within the context of your Windows user account.</span></span> <span data-ttu-id="36d79-192">W takim przypadku należy dodać konto użytkownika systemu Windows jako logowanie do serwera bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-192">In that case, you need to add your Windows user account as a database server login.</span></span>

<span data-ttu-id="36d79-193">Alternatywnie Jeśli używasz Internetowe usługi informacyjne należy dodać konto ASPNET lub konta NT urzędu/NETWORK SERVICE jako logowanie do serwera bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-193">Alternatively, if you are using Internet Information Services then you need to add either the ASPNET account or the NT AUTHORITY/NETWORK SERVICE account as a database server login.</span></span> <span data-ttu-id="36d79-194">Jeśli używasz systemu Windows XP Dodaj konto ASPNET jako identyfikatora logowania do bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-194">If you are using Windows XP then add the ASPNET account as a login to your database.</span></span> <span data-ttu-id="36d79-195">Jeśli używane są nowsze systemu operacyjnego, takich jak Windows Vista lub Windows Server 2008, Dodaj konto usługi NT urzędu i sieci, jako nazwy logowania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-195">If you are using a more recent operating system, such as Windows Vista or Windows Server 2008, then add the NT AUTHORITY/NETWORK SERVICE account as the database login.</span></span>

<span data-ttu-id="36d79-196">Można dodać nowego konta użytkownika do bazy danych przy użyciu programu Microsoft SQL Server Management Studio (patrz rysunek 9).</span><span class="sxs-lookup"><span data-stu-id="36d79-196">You can add a new user account to your database by using Microsoft SQL Server Management Studio (see Figure 9).</span></span>

<span data-ttu-id="36d79-197">**Rysunek 9 — Tworzenie nowego logowania programu Microsoft SQL Server**</span><span class="sxs-lookup"><span data-stu-id="36d79-197">**Figure 9 – Creating a new Microsoft SQL Server login**</span></span>

![clip_image018](authenticating-users-with-forms-authentication-vb/_static/image9.jpg)

<span data-ttu-id="36d79-199">Po utworzeniu wymagane logowania, należy do mapowania nazwy logowania użytkownika bazy danych z rolami właściwej bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-199">After you create the required login, you need to map the login to a database user with the right database roles.</span></span> <span data-ttu-id="36d79-200">Kliknij dwukrotnie nazwy logowania, a następnie wybierz kartę mapowania użytkowników. Wybierz co najmniej jedną rolę bazy danych usług aplikacji.</span><span class="sxs-lookup"><span data-stu-id="36d79-200">Double-click the login and select the User Mapping tab. Select one or more application services database roles.</span></span> <span data-ttu-id="36d79-201">Na przykład w celu uwierzytelniania użytkowników, należy włączyć aspnet\_członkostwa\_BasicAccess roli bazy danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-201">For example, in order to authenticate users, you need to enable the aspnet\_Membership\_BasicAccess database role.</span></span> <span data-ttu-id="36d79-202">Aby można było utworzyć nowych użytkowników, musisz włączyć aspnet\_członkostwa\_FullAccess roli bazy danych (zobacz rysunek 10).</span><span class="sxs-lookup"><span data-stu-id="36d79-202">In order to create new users, you need to enable the aspnet\_Membership\_FullAccess database role (see Figure 10).</span></span>

<span data-ttu-id="36d79-203">**Rysunek 10 — Dodawanie ról bazy danych usług aplikacji**</span><span class="sxs-lookup"><span data-stu-id="36d79-203">**Figure 10 – Adding Application Services database roles**</span></span>

![clip_image020](authenticating-users-with-forms-authentication-vb/_static/image10.jpg)

#### <a name="summary"></a><span data-ttu-id="36d79-205">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="36d79-205">Summary</span></span>

<span data-ttu-id="36d79-206">W tym samouczku przedstawiono sposób użycia uwierzytelniania formularzy, podczas tworzenia aplikacji platformy ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="36d79-206">In this tutorial, you learned how to use Forms authentication when building an ASP.NET MVC application.</span></span> <span data-ttu-id="36d79-207">Po pierwsze przedstawiono sposób tworzenia nowych użytkowników i role, korzystając z narzędzia administrowania witryną sieci Web.</span><span class="sxs-lookup"><span data-stu-id="36d79-207">First, you learned how to create new users and roles by taking advantage of the Web Site Administration Tool.</span></span> <span data-ttu-id="36d79-208">Następnie przedstawiono sposób użycia atrybutu [Authorize], aby zapobiec nieautoryzowanemu wywoływania akcji kontrolera.</span><span class="sxs-lookup"><span data-stu-id="36d79-208">Next, you learned how to use the [Authorize] attribute to prevent unauthorized users from invoking controller actions.</span></span> <span data-ttu-id="36d79-209">Ponadto przedstawiono sposób konfigurowania aplikacji MVC do użytkownika oraz informacje o rolach są przechowywane w produkcyjnej bazie danych.</span><span class="sxs-lookup"><span data-stu-id="36d79-209">Finally, you learned how to configure your MVC application to store user and role information in a production database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="36d79-210">[Poprzednie](preventing-javascript-injection-attacks-cs.md)
> [dalej](authenticating-users-with-windows-authentication-vb.md)</span><span class="sxs-lookup"><span data-stu-id="36d79-210">[Previous](preventing-javascript-injection-attacks-cs.md)
[Next](authenticating-users-with-windows-authentication-vb.md)</span></span>
