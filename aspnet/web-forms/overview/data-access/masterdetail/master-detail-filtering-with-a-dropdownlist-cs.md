---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: "Wzorzec/szczegół filtrowanie z DropDownList (C#) | Dokumentacja firmy Microsoft"
author: rick-anderson
description: "W tym samouczku będziesz przedstawiono sposób wyświetlania rekordy główne w formancie DropDownList i szczegóły wybranego elementu listy w widoku GridView."
ms.author: aspnetcontent
manager: wpickett
ms.date: 03/31/2010
ms.topic: article
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: cf3058ac095bc2ed728a716e70f962e260eef5a2
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 01/24/2018
---
<a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="242ec-103">Wzorzec/szczegół filtrowanie z DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="242ec-103">Master/Detail Filtering With a DropDownList (C#)</span></span>
====================
<span data-ttu-id="242ec-104">przez [Bento Scott](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="242ec-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="242ec-105">[Pobierz przykładową aplikację](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) lub [pobierania plików PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="242ec-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="242ec-106">W tym samouczku będziesz przedstawiono sposób wyświetlania rekordy główne w formancie DropDownList i szczegóły wybranego elementu listy w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="242ec-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>


## <a name="introduction"></a><span data-ttu-id="242ec-107">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="242ec-107">Introduction</span></span>

<span data-ttu-id="242ec-108">Spotykanym typem raportu jest *główny/szczegółowy raport*, w poprzez wyświetlenie niektórych zestawu rekordów "główny" zaczynający raportu.</span><span class="sxs-lookup"><span data-stu-id="242ec-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="242ec-109">Użytkownik może następnie przejść do jednego z głównym rekordów ten sposób wyświetlania tego rekordu głównego "szczegółowych informacji."</span><span class="sxs-lookup"><span data-stu-id="242ec-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="242ec-110">Wzorzec/szczegół raporty są idealnym wyborem w przypadku wizualizacja relacje jeden do wielu, takich jak raportu wyświetlane są wszystkie kategorie i następnie Umożliwianie użytkownikowi wybierz określonej kategorii i wyświetlić związane z nimi produkty.</span><span class="sxs-lookup"><span data-stu-id="242ec-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="242ec-111">Ponadto raporty wzorzec/szczegół są przydatne w przypadku wyświetlania szczegółowych informacji z szczególnie "szerokie" tabele (te, które zawiera wiele kolumn).</span><span class="sxs-lookup"><span data-stu-id="242ec-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="242ec-112">Na przykład poziom "główny" raport wzorzec/szczegół mogą być wyświetlane tylko produktu nazwy i Jednostka ceny produktów w bazie danych i przechodzenie od określonego produktu czy Pokaż pola dodatkowe produktu (kategorii, dostawca, ilość na jednostkę, i tak dalej).</span><span class="sxs-lookup"><span data-stu-id="242ec-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="242ec-113">Istnieje wiele sposobów, które można zaimplementować wzorzec/szczegół raportu.</span><span class="sxs-lookup"><span data-stu-id="242ec-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="242ec-114">Przez to i trzech kolejnych samouczkach przyjrzymy szerokiej gamy raportów wzorzec/szczegół.</span><span class="sxs-lookup"><span data-stu-id="242ec-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="242ec-115">W tym samouczku zajmiemy się tym sposób wyświetlania rekordów wzorca [kontroli DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) i szczegóły wybranego elementu listy w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="242ec-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="242ec-116">W szczególności w tym samouczku wzorzec/szczegół raportu spowoduje wyświetlenie listy kategorii i informacje o produkcie.</span><span class="sxs-lookup"><span data-stu-id="242ec-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="242ec-117">Krok 1: Wyświetlanie kategorii w DropDownList</span><span class="sxs-lookup"><span data-stu-id="242ec-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="242ec-118">Nasze raportu wzorzec/szczegół spowoduje wyświetlenie listy kategorii w DropDownList z produktami elementu wybranej listy wyświetlane dodatkowe w dół na stronie w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="242ec-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="242ec-119">Pierwszym zadaniem przed nami, jest następnie kategorie wyświetlane w DropDownList.</span><span class="sxs-lookup"><span data-stu-id="242ec-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="242ec-120">Otwórz `FilterByDropDownList.aspx` strony `Filtering` , przeciągnij z przybornika do strony projektanta DropDownList i ustawić jej `ID` właściwości `Categories`.</span><span class="sxs-lookup"><span data-stu-id="242ec-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="242ec-121">Następnie kliknij łącze Wybierz źródło danych z DropDownList tagów inteligentnych.</span><span class="sxs-lookup"><span data-stu-id="242ec-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="242ec-122">Spowoduje to wyświetlenie Kreator konfiguracji źródła danych.</span><span class="sxs-lookup"><span data-stu-id="242ec-122">This will display the Data Source Configuration wizard.</span></span>


<span data-ttu-id="242ec-123">[![Określ źródło danych DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="242ec-124">**Rysunek 1**: Określ źródło danych DropDownList ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>


<span data-ttu-id="242ec-125">Wybierz dodać nowy element ObjectDataSource o nazwie `CategoriesDataSource` który wywołuje `CategoriesBLL` klasy `GetCategories()` metody.</span><span class="sxs-lookup"><span data-stu-id="242ec-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>


<span data-ttu-id="242ec-126">[![Dodaj nowy element ObjectDataSource o nazwie CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="242ec-127">**Rysunek 2**: Dodaj nowy element ObjectDataSource o nazwie `CategoriesDataSource` ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>


<span data-ttu-id="242ec-128">[![Wybierz klasy CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="242ec-129">**Rysunek 3**: wybierz opcję do użycia `CategoriesBLL` klasy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>


<span data-ttu-id="242ec-130">[![Skonfiguruj element ObjectDataSource przy użyciu metody GetCategories()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="242ec-131">**Rysunek 4**: Konfigurowanie ObjectDataSource użyć `GetCategories()` — metoda ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>


<span data-ttu-id="242ec-132">Po skonfigurowaniu ObjectDataSource nadal trzeba określić, jakie pola źródła danych mają być wyświetlane w DropDownList i jedną powinna być skojarzona jako wartość dla elementu listy.</span><span class="sxs-lookup"><span data-stu-id="242ec-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="242ec-133">Ma `CategoryName` pole jako ekran i `CategoryID` jako wartość dla każdego elementu listy.</span><span class="sxs-lookup"><span data-stu-id="242ec-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="242ec-134">[![Ma pole CategoryName i użyj CategoryID wyświetlana lista DropDownList jako wartość](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="242ec-135">**Rysunek 5**: wyświetlone DropDownList `CategoryName` pola i użyj `CategoryID` jako wartość ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>


<span data-ttu-id="242ec-136">W tym momencie mamy DropDownList formant, który jest wypełniana rekordy z `Categories` tabeli (wszystkie dokonane w ciągu około sześciu sekund).</span><span class="sxs-lookup"><span data-stu-id="242ec-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="242ec-137">Rysunek 6 przedstawia naszych postępu dotychczasowych widzianego za pośrednictwem przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="242ec-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="242ec-138">[![Rozwijana lista bieżącej kategorii](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="242ec-139">**Rysunek 6**: listy rozwijane A bieżącej kategorii ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>


## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="242ec-140">Krok 2: Dodawanie widoku GridView produktów</span><span class="sxs-lookup"><span data-stu-id="242ec-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="242ec-141">Ten ostatni krok w raporcie naszych wzorzec/szczegół jest na liście produktów skojarzonych z wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="242ec-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="242ec-142">W tym celu Dodaj element GridView do strony i Utwórz nowy element ObjectDataSource o nazwie `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="242ec-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="242ec-143">Ma `productsDataSource` kontroli wybrakowane za pomocą `ProductsBLL` klasy `GetProductsByCategoryID(categoryID)` metody.</span><span class="sxs-lookup"><span data-stu-id="242ec-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>


<span data-ttu-id="242ec-144">[![Wybierz metodę GetProductsByCategoryID(categoryID)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="242ec-145">**Rysunek 7**: Wybierz `GetProductsByCategoryID(categoryID)` — metoda ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>


<span data-ttu-id="242ec-146">Po wybraniu tej metody, Kreator ObjectDataSource nam monituje o podanie wartości dla metody  *`categoryID`*  parametru.</span><span class="sxs-lookup"><span data-stu-id="242ec-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="242ec-147">Aby użyć wartości wybranych `categories` elementu DropDownList ustawiono parametr źródła kontroli i ControlID do `Categories`.</span><span class="sxs-lookup"><span data-stu-id="242ec-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>


<span data-ttu-id="242ec-148">[![Ustaw categoryID parametru wartość DropDownList kategorii](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="242ec-149">**Rysunek 8**: Ustaw  *`categoryID`*  parametru z wartością `Categories` DropDownList ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>


<span data-ttu-id="242ec-150">Poświęć chwilę, aby zapoznaj się z naszym postęp w przeglądarce.</span><span class="sxs-lookup"><span data-stu-id="242ec-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="242ec-151">Podczas odwiedzania najpierw strony, tych produktów należy do wybranej kategorii (napoje) są wyświetlane (jak pokazano na rysunku nr 9), ale zmiana DropDownList nie powoduje aktualizacji danych.</span><span class="sxs-lookup"><span data-stu-id="242ec-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="242ec-152">Jest to spowodowane odświeżania strony musi nastąpić można zaktualizować widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="242ec-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="242ec-153">W tym celu mamy dwie opcje (które wymaga pisania żadnego kodu):</span><span class="sxs-lookup"><span data-stu-id="242ec-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="242ec-154">**Ustaw kategorie lista DropDownList na**[właściwości AutoPostBack](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**na wartość True.**</span><span class="sxs-lookup"><span data-stu-id="242ec-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="242ec-155">(Można to zrobić, zaznaczając opcję Włącz AutoPostBack w tagu DropDownList.) To wyzwoli odświeżania strony zawsze, gdy lista DropDownList wybrany element zostanie zmieniona przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="242ec-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="242ec-156">W związku z tym gdy użytkownik wybierze nową kategorię z DropDownList nastąpi odświeżenie strony i widoku GridView zostanie zaktualizowany z produktami nowo wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="242ec-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="242ec-157">(Jest to podejście, które wcześniej używanych w ramach tego samouczka).</span><span class="sxs-lookup"><span data-stu-id="242ec-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="242ec-158">**Dodawanie formantu przycisku Web obok DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="242ec-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="242ec-159">Ustaw jego `Text` właściwości odświeżania lub podobny.</span><span class="sxs-lookup"><span data-stu-id="242ec-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="242ec-160">Z tej metody użytkownik będzie musiał wybierz nową kategorię, a następnie kliknij przycisk.</span><span class="sxs-lookup"><span data-stu-id="242ec-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="242ec-161">Kliknięcie przycisku powoduje odświeżenie strony i zaktualizować widoku GridView, aby wyświetlić listę tych produktów wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="242ec-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="242ec-162">Rysunki 9 i 10 ilustrują raportu wzorzec/szczegół w akcji.</span><span class="sxs-lookup"><span data-stu-id="242ec-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>


<span data-ttu-id="242ec-163">[![Podczas odwiedzania najpierw strony, są wyświetlane produkty napoju](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="242ec-164">**Rysunek 9**: podczas odwiedzania najpierw strony, są wyświetlane produkty napoju ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>


<span data-ttu-id="242ec-165">[![Automatyczne zaznaczanie nowego produktu (produktu) powoduje odświeżenie strony, aktualizowanie widoku GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="242ec-166">**Na rysunku nr 10**: zaznaczenie nowego produktu (produktu) automatycznie powoduje odświeżenie strony, aktualizowanie widoku GridView ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>


## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="242ec-167">Dodawanie elementu listy "--Wybierz kategorię--"</span><span class="sxs-lookup"><span data-stu-id="242ec-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="242ec-168">Podczas odwiedzania najpierw `FilterByDropDownList.aspx` strony kategorie lista DropDownList na pierwszy element listy (napoje) jest zaznaczone domyślnie, wyświetlane produkty napoju w widoku GridView.</span><span class="sxs-lookup"><span data-stu-id="242ec-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="242ec-169">Zamiast przedstawiający pierwszej kategorii produktów, firma Microsoft może być zamiast tego elementu DropDownList wybrane który mówi wyglądać mniej więcej tak, "--Wybierz kategorię--".</span><span class="sxs-lookup"><span data-stu-id="242ec-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="242ec-170">Aby dodać nowy element listy do DropDownList, przejdź do okna właściwości, a następnie kliknij wielokropek w `Items` właściwości.</span><span class="sxs-lookup"><span data-stu-id="242ec-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="242ec-171">Dodaj nowy element listy z `Text` "--Wybierz kategorię--" i `Value` `-1`.</span><span class="sxs-lookup"><span data-stu-id="242ec-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>


<span data-ttu-id="242ec-172">[![Dodaj wybierz kategorię--elementu listy](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="242ec-173">**Rysunek 11**: Dodaj wybierz kategorię — element listy ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>


<span data-ttu-id="242ec-174">Alternatywnie można dodać elementu listy, dodając następujący kod do DropDownList:</span><span class="sxs-lookup"><span data-stu-id="242ec-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="242ec-175">Ponadto należy ustawić kontrolę lista DropDownList `AppendDataBoundItems` na wartość True, ponieważ podczas kategorie są powiązane z DropDownList z elementu ObjectDataSource będzie zastępują żadnych elementów listy dodane ręcznie czy `AppendDataBoundItems` nie ma wartość True.</span><span class="sxs-lookup"><span data-stu-id="242ec-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>


![Ustaw wartość True dla właściwości AppendDataBoundItems](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="242ec-177">**Rysunek 12**: Ustaw `AppendDataBoundItems` właściwości na wartość True</span><span class="sxs-lookup"><span data-stu-id="242ec-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>


<span data-ttu-id="242ec-178">Po wprowadzeniu tych zmian podczas odwiedzania najpierw na stronie opcji "--Wybierz kategorię--" jest zaznaczone, a produkty nie są wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="242ec-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>


<span data-ttu-id="242ec-179">[![Ładowania strony początkowej produkty nie są wyświetlane](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="242ec-180">**Rysunek 13**: na początkowej stronie obciążenia nr produkty są wyświetlane ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>


<span data-ttu-id="242ec-181">Jest przyczyna produkty nie są wyświetlane po, ponieważ wybrano element listy "--Wybierz kategorię--", ponieważ jego wartość wynosi `-1` i nie ma produktów w bazie danych o `CategoryID` z `-1`.</span><span class="sxs-lookup"><span data-stu-id="242ec-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="242ec-182">Jeśli jest to zachowanie ma, a następnie gotowe na tym etapie!</span><span class="sxs-lookup"><span data-stu-id="242ec-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="242ec-183">Jeśli jednak chcesz wyświetlić *wszystkie* kategorii po wybraniu elementu listy "--Wybierz kategorię--", wróć do `ProductsBLL` klasy i dostosować `GetProductsByCategoryID(categoryID)` metodę, tak że wywołuje `GetProducts()` — metoda Jeśli przekazany w  *`categoryID`*  parametru jest mniejszy od zera:</span><span class="sxs-lookup"><span data-stu-id="242ec-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="242ec-184">Zastosowanych w tym miejscu jest podobna do metody możemy używany do wyświetlania wszystkich dostawców w [deklaratywne parametry](../basic-reporting/declarative-parameters-cs.md) samouczek, mimo że w tym przykładzie używamy wartość `-1` wskazująca, że wszystkie rekordy powinny być pobrany w przeciwieństwie do `null`.</span><span class="sxs-lookup"><span data-stu-id="242ec-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="242ec-185">Jest to spowodowane  *`categoryID`*  parametr `GetProductsByCategoryID(categoryID)` metoda oczekuje jako przekazano wartość całkowitą, natomiast w samouczku deklaratywne parametry zostały możemy przekazując parametr wejściowy ciąg znaków.</span><span class="sxs-lookup"><span data-stu-id="242ec-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="242ec-186">Zrzut ekranu przedstawia rysunek 14 `FilterByDropDownList.aspx` po wybraniu opcji "--Wybierz kategorię--".</span><span class="sxs-lookup"><span data-stu-id="242ec-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="242ec-187">W tym miejscu domyślnie są wyświetlane wszystkie produkty, a użytkownik można ograniczyć wyświetlanie przez wybranie jednej konkretnej kategorii.</span><span class="sxs-lookup"><span data-stu-id="242ec-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>


<span data-ttu-id="242ec-188">[![Wszystkie produkty są teraz wyświetlane domyślnie](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="242ec-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="242ec-189">**Rysunek 14**: wszystkie produkty są teraz wyświetlane domyślnie ([kliknij, aby wyświetlić obraz w pełnym rozmiarze](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="242ec-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>


## <a name="summary"></a><span data-ttu-id="242ec-190">Podsumowanie</span><span class="sxs-lookup"><span data-stu-id="242ec-190">Summary</span></span>

<span data-ttu-id="242ec-191">Podczas wyświetlania danych dotyczących hierarchicznie, pomaga często zawierają dane przy użyciu wzorzec/szczegół raportów, z których użytkownik może uruchomić perusing danych od góry hierarchii i przejść do szczegółów.</span><span class="sxs-lookup"><span data-stu-id="242ec-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="242ec-192">W tym samouczku będziemy zbadane, tworzenie prostego główny/szczegółowy raport pokazujący wybranej kategorii produktów.</span><span class="sxs-lookup"><span data-stu-id="242ec-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="242ec-193">Zostało to zrobić za pomocą DropDownList listy kategorii i GridView produktów należących do wybranej kategorii.</span><span class="sxs-lookup"><span data-stu-id="242ec-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="242ec-194">W [następny samouczek](master-detail-filtering-with-two-dropdownlists-cs.md) przeniesiemy interfejsu DropDownList w jednym kroku, za pomocą dwóch DropDownLists.</span><span class="sxs-lookup"><span data-stu-id="242ec-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="242ec-195">Programowanie przyjemność!</span><span class="sxs-lookup"><span data-stu-id="242ec-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="242ec-196">Informacje o autorze</span><span class="sxs-lookup"><span data-stu-id="242ec-196">About the Author</span></span>

<span data-ttu-id="242ec-197">[Scott Bento](http://www.4guysfromrolla.com/ScottMitchell.shtml), autora siedmiu książek ASP/ASP.NET i twórcę z [4GuysFromRolla.com](http://www.4guysfromrolla.com), pracuje z technologii Microsoft Web od 1998.</span><span class="sxs-lookup"><span data-stu-id="242ec-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="242ec-198">Scott działa jako niezależnego konsultanta trainer i składnika zapisywania.</span><span class="sxs-lookup"><span data-stu-id="242ec-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="242ec-199">Jest jego najnowszej książki [ *Sams nauczyć się ASP.NET 2.0 w ciągu 24 godzin*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="242ec-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="242ec-200">Piotr można uzyskać pod adresem [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) lub za pośrednictwem jego blog, który znajduje się w temacie [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="242ec-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="242ec-201">Next</span><span class="sxs-lookup"><span data-stu-id="242ec-201">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
