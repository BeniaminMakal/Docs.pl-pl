---
title: Routing w programie ASP.NET Core
author: ardalis
description: Dowiedz się, jak funkcje routingu platformy ASP.NET Core jest odpowiedzialny za mapowanie przychodzące żądanie do programu obsługi trasy.
ms.author: riande
ms.custom: mvc
ms.date: 10/01/2018
uid: fundamentals/routing
ms.openlocfilehash: 06059d720bd4444b1ec12e42d466ee54d1658203
ms.sourcegitcommit: 375e9a67f5e1f7b0faaa056b4b46294cc70f55b7
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/29/2018
ms.locfileid: "50207759"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="551b4-103">Routing w programie ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="551b4-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="551b4-104">Przez [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), i [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="551b4-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="551b4-105">Funkcje routingu jest odpowiedzialny za mapowanie przychodzące żądanie do programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="551b4-106">Trasy są zdefiniowane w aplikacji i skonfigurowane, po uruchomieniu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-106">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="551b4-107">Trasy Opcjonalnie można wyodrębnić wartości z adresu URL zawartych w żądaniu, a te wartości mogą następnie służyć do przetwarzania żądania.</span><span class="sxs-lookup"><span data-stu-id="551b4-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="551b4-108">Korzystając z informacji o trasie z aplikacji, funkcji routingu jest również możliwe do generowania adresów URL, które mapują do obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-108">Using route information from the app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="551b4-109">W związku z tym routing można znaleźć programu obsługi trasy na podstawie adresu URL lub znaleźć adres URL odpowiadający programu obsługi trasy, na podstawie informacji programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-109">Therefore, routing can find a route handler based on a URL, or find the URL corresponding to a given route handler based on route handler information.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="551b4-110">W tym dokumencie opisano niskiego poziomu routingu platformy ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="551b4-110">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="551b4-111">Aby uzyskać informacji na temat routingu platformy ASP.NET Core MVC, zobacz <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="551b4-111">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="551b4-112">[Wyświetlanie lub pobieranie przykładowego kodu](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([sposobu pobierania](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="551b4-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="551b4-113">Podstawy routingu</span><span class="sxs-lookup"><span data-stu-id="551b4-113">Routing basics</span></span>

<span data-ttu-id="551b4-114">Używa routingu *trasy* (implementacje <xref:Microsoft.AspNetCore.Routing.IRouter>) do:</span><span class="sxs-lookup"><span data-stu-id="551b4-114">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="551b4-115">Mapowanie żądań przychodzących do *trasy obsługi*.</span><span class="sxs-lookup"><span data-stu-id="551b4-115">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="551b4-116">Generowanie adresy URL używane w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="551b4-116">Generate URLs used in responses.</span></span>

<span data-ttu-id="551b4-117">Ogólnie rzecz biorąc aplikacja ma jedną kolekcję tras.</span><span class="sxs-lookup"><span data-stu-id="551b4-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="551b4-118">Gdy żądanie dociera, kolekcji tras są przetwarzane w kolejności.</span><span class="sxs-lookup"><span data-stu-id="551b4-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="551b4-119">Żądanie przychodzące szuka trasę, która pasuje do adresu URL żądania, wywołując <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metody w każdej z dostępnych tras w kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="551b4-119">The incoming request looks for a route that matches the request URL by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each available route in the route collection.</span></span> <span data-ttu-id="551b4-120">Z drugiej strony odpowiedzi, można używać routingu do generowania adresów URL (na przykład przekierowanie lub linki), w oparciu o trasach i dlatego uniknąć trwale kodować adresów URL, która pomaga w utrzymaniu.</span><span class="sxs-lookup"><span data-stu-id="551b4-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="551b4-121">Routing jest podłączony do [oprogramowania pośredniczącego](xref:fundamentals/middleware/index) potoku przez <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> klasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="551b4-122">[Platforma ASP.NET Core MVC](xref:mvc/overview) dodaje routingu do potoku oprogramowania pośredniczącego w ramach jego konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="551b4-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="551b4-123">Aby dowiedzieć się, przy użyciu routingu jako składnik autonomicznych, zobacz [użycia routingu oprogramowania pośredniczącego](#use-routing-middleware) sekcji.</span><span class="sxs-lookup"><span data-stu-id="551b4-123">To learn about using routing as a standalone component, see [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="551b4-124">Dopasowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="551b4-124">URL matching</span></span>

<span data-ttu-id="551b4-125">Dopasowanie adresu URL jest proces, który wysyła routingu przychodzącego żądania *obsługi*.</span><span class="sxs-lookup"><span data-stu-id="551b4-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="551b4-126">Ten proces jest na podstawie danych ze ścieżki adresu URL, ale może zostać rozszerzony do należy wziąć pod uwagę wszystkie dane w żądaniu.</span><span class="sxs-lookup"><span data-stu-id="551b4-126">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="551b4-127">Możliwość wysyłania żądań do rozdzielenia obsługi to klucz do skalowania, rozmiar i złożoność aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="551b4-128">Wprowadź żądań przychodzących `RouterMiddleware`, która wywołuje metodę <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> metody dla każdej trasy w sekwencji.</span><span class="sxs-lookup"><span data-stu-id="551b4-128">Incoming requests enter the `RouterMiddleware`, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="551b4-129"><xref:Microsoft.AspNetCore.Routing.IRouter> Wybierze wystąpienie czy *obsługi* żądania przez ustawienie [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) do innych niż null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span><span class="sxs-lookup"><span data-stu-id="551b4-129">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="551b4-130">Jeśli trasa Ustawia program obsługi żądania, route zatrzymanie przetwarzania i program obsługi jest wywoływane w celu przetworzenia żądania.</span><span class="sxs-lookup"><span data-stu-id="551b4-130">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="551b4-131">Jeśli wszystkie trasy są sprawdzane i żadna procedura obsługi nie znajduje się na żądanie, oprogramowanie pośredniczące wywołuje *dalej*, a następne oprogramowanie pośredniczące w potoku żądania jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="551b4-131">If all routes are tried and no handler is found for the request, the middleware calls *next*, and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="551b4-132">Podstawowe dane wejściowe `RouteAsync` jest [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) skojarzone z bieżącego żądania.</span><span class="sxs-lookup"><span data-stu-id="551b4-132">The primary input to `RouteAsync` is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="551b4-133">`RouteContext.Handler` i [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) są dane wyjściowe, gdy trasa pasuje.</span><span class="sxs-lookup"><span data-stu-id="551b4-133">The `RouteContext.Handler` and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route matches.</span></span>

<span data-ttu-id="551b4-134">Dopasowanie ciągu `RouteAsync` spowoduje także ustawienie właściwości `RouteContext.RouteData` odpowiednie wartości oparte na przetwarzanie żądań wykonywane do tej pory.</span><span class="sxs-lookup"><span data-stu-id="551b4-134">A match during `RouteAsync` also sets the properties of the `RouteContext.RouteData` to appropriate values based on the request processing performed thus far.</span></span> <span data-ttu-id="551b4-135">Jeśli trasa pasuje do żądania `RouteContext.RouteData` zawiera informacje o stanie ważne informacje *wynik*.</span><span class="sxs-lookup"><span data-stu-id="551b4-135">If a route matches a request, the `RouteContext.RouteData` contains important state information about the *result*.</span></span>

<span data-ttu-id="551b4-136">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) jest słownikiem *wartości trasy* wyprodukowanych z trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-136">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="551b4-137">Wartości te są zwykle określane przez tokenizowanie adres URL i może służyć do przyjmowania danych wejściowych użytkownika lub dodatkowo dispatching decyzje wewnątrz aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-137">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="551b4-138">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) to zbiór właściwości dodatkowych danych związanych z dopasowanej trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-138">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="551b4-139">`DataTokens` dostarczone dane o pomocy technicznej kojarzenie stanu z każdej trasy tak, aby aplikacja może wykonać później na podstawie decyzji w trasie, która pasuje.</span><span class="sxs-lookup"><span data-stu-id="551b4-139">`DataTokens` are provided to support associating state data with each route so that the app can make decisions later based on which route matched.</span></span> <span data-ttu-id="551b4-140">Te wartości są definiowane przez projektanta i wykonaj **nie** mają wpływ na zachowanie routingu w dowolny sposób.</span><span class="sxs-lookup"><span data-stu-id="551b4-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="551b4-141">Ponadto przechowalni wartości w `RouteData.DataTokens` może być dowolnego typu, w przeciwieństwie do `RouteData.Values`, które muszą być łatwo konwertowany do i z ciągów.</span><span class="sxs-lookup"><span data-stu-id="551b4-141">Additionally, values stashed in `RouteData.DataTokens` can be of any type, in contrast to `RouteData.Values`, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="551b4-142">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) znajduje się lista tras, na których uczestniczyła w pomyślnie dopasowywania żądania.</span><span class="sxs-lookup"><span data-stu-id="551b4-142">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="551b4-143">Trasy mogą być zagnieżdżone wewnątrz siebie nawzajem.</span><span class="sxs-lookup"><span data-stu-id="551b4-143">Routes can be nested inside of one another.</span></span> <span data-ttu-id="551b4-144">`Routers` Właściwość odzwierciedla drogę przez drzewo logiczne tras, które spowodowały dopasowanie.</span><span class="sxs-lookup"><span data-stu-id="551b4-144">The `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="551b4-145">Ogólnie rzecz biorąc, pierwszy element `Routers` jest kolekcją tras i powinny być używane do generowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-145">Generally, the first item in `Routers` is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="551b4-146">Ostatnim elementem w `Routers` jest programu obsługi trasy, który jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="551b4-146">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="551b4-147">Generowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="551b4-147">URL generation</span></span>

<span data-ttu-id="551b4-148">Generowanie adresu URL to proces, routingu, które można utworzyć ścieżki adresu URL na podstawie zestawu wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-148">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="551b4-149">Dzięki temu do logicznego rozdzielania między inne programy obsługi oraz w adresach URL, które do nich dostęp.</span><span class="sxs-lookup"><span data-stu-id="551b4-149">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="551b4-150">Generowanie adresu URL następuje podobny proces iteracyjny, ale zaczyna się od kodu użytkownika lub framework wywoływanie <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> metoda kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="551b4-150">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="551b4-151">Każdy *trasy* uzyska jego `GetVirtualPath` metoda wywoływana w sekwencji, aż do innych niż null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> jest zwracana.</span><span class="sxs-lookup"><span data-stu-id="551b4-151">Each *route* then has its `GetVirtualPath` method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="551b4-152">Podstawowy danych wejściowych do `GetVirtualPath` są:</span><span class="sxs-lookup"><span data-stu-id="551b4-152">The primary inputs to `GetVirtualPath` are:</span></span>

* [<span data-ttu-id="551b4-153">VirtualPathContext.HttpContext</span><span class="sxs-lookup"><span data-stu-id="551b4-153">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext*)
* [<span data-ttu-id="551b4-154">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="551b4-154">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*)
* [<span data-ttu-id="551b4-155">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="551b4-155">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*)

<span data-ttu-id="551b4-156">Trasy przede wszystkim używasz wartości trasy, dostarczone przez `Values` i `AmbientValues` zdecydować, czy jest możliwe do generowania adresu URL i wartości, których do uwzględnienia.</span><span class="sxs-lookup"><span data-stu-id="551b4-156">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="551b4-157">`AmbientValues` Zestaw wartości trasy, które zostały utworzone z dopasowywania bieżące żądanie w systemie routingu.</span><span class="sxs-lookup"><span data-stu-id="551b4-157">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="551b4-158">Z kolei `Values` są wartości trasy, które określają sposób generowania żądany adres URL dla bieżącej operacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-158">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="551b4-159">`HttpContext` Znajduje się w przypadku, gdy trasa musi uzyskać services lub dodatkowe dane skojarzone z bieżącym kontekstem.</span><span class="sxs-lookup"><span data-stu-id="551b4-159">The `HttpContext` is provided in case a route needs to obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="551b4-160">Traktować [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) jako zbiór zastąpienia [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="551b4-160">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as being a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="551b4-161">Generowanie adresu URL spróbuje ponownie użyć wartości trasy z bieżącego żądania, aby ułatwić do generowania adresów URL dla łącza przy użyciu tego samego trasę lub trasy wartości.</span><span class="sxs-lookup"><span data-stu-id="551b4-161">URL generation attempts to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="551b4-162">Dane wyjściowe `GetVirtualPath` jest `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="551b4-162">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="551b4-163">`VirtualPathData` jest równolegle z `RouteData`.</span><span class="sxs-lookup"><span data-stu-id="551b4-163">`VirtualPathData` is a parallel of `RouteData`.</span></span> <span data-ttu-id="551b4-164">`VirtualPathData` zawiera `VirtualPath` dla adresu URL danych wyjściowych i niektóre dodatkowe właściwości, które powinny zostać ustawione przez trasę.</span><span class="sxs-lookup"><span data-stu-id="551b4-164">`VirtualPathData` contains the `VirtualPath` for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="551b4-165">[VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) właściwość zawiera *ścieżka wirtualna* produkowane przez trasę.</span><span class="sxs-lookup"><span data-stu-id="551b4-165">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="551b4-166">W zależności od potrzeb może być konieczne ścieżkę do dalszego przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="551b4-166">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="551b4-167">Jeśli chcesz renderować wygenerowany adres URL w formacie HTML, należy poprzedzić ścieżki podstawowej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-167">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="551b4-168">[VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) jest odwołaniem do pomyślnie wygenerowano adres URL trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-168">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="551b4-169">[VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) właściwości jest słownikiem dodatkowych danych dotyczących trasy, który wygenerował adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-169">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="551b4-170">Jest to równoległego z [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="551b4-170">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

### <a name="creating-routes"></a><span data-ttu-id="551b4-171">Tworzenie tras</span><span class="sxs-lookup"><span data-stu-id="551b4-171">Creating routes</span></span>

<span data-ttu-id="551b4-172">Routing zapewnia <xref:Microsoft.AspNetCore.Routing.Route> klasy jako standardowej implementacji <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="551b4-172">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="551b4-173">`Route` używa *szablon trasy* Składnia umożliwiająca zdefiniowanie wzorców, które dopasowywania ścieżki adresu URL po <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="551b4-173">`Route` uses the *route template* syntax to define patterns that match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="551b4-174">`Route` używa tego samego szablonu trasy do wygenerowania adresu URL po `GetVirtualPath` jest wywoływana.</span><span class="sxs-lookup"><span data-stu-id="551b4-174">`Route` uses the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="551b4-175">Większość aplikacji utworzyć trasy, wywołując <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> lub jednego z podobne metody rozszerzenia zdefiniowane na <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="551b4-175">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="551b4-176">Wszystkie te metody Utwórz wystąpienie obiektu <xref:Microsoft.AspNetCore.Routing.Route> i dodać go do kolekcji tras.</span><span class="sxs-lookup"><span data-stu-id="551b4-176">All of these methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="551b4-177">`MapRoute` nie przyjmuje parametrów programu obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-177">`MapRoute` doesn't take a route handler parameter.</span></span> <span data-ttu-id="551b4-178">`MapRoute` tylko dodaje trasy, które są obsługiwane przez <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="551b4-178">`MapRoute` only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="551b4-179">Ponieważ domyślny program obsługi jest `IRouter`, mogą zdecydować, nie można obsłużyć żądania.</span><span class="sxs-lookup"><span data-stu-id="551b4-179">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="551b4-180">Na przykład ASP.NET Core MVC jest zazwyczaj skonfigurowany jako domyślny program obsługi, który obsługuje tylko żądania które pasują do dostępnych kontrolerów i akcji.</span><span class="sxs-lookup"><span data-stu-id="551b4-180">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="551b4-181">Aby dowiedzieć się więcej na temat routingu do MVC, zobacz <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="551b4-181">To learn more about routing to MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="551b4-182">Poniższy przykład kodu jest przykładem `MapRoute` wywołania używany przez typowy definicję trasy ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="551b4-182">The following code example is an example of a `MapRoute` call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="551b4-183">Ten szablon jest zgodny Ścieżka adresu URL, takich jak `/Products/Details/17` i wyodrębnia wartości trasy `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="551b4-183">This template matches a URL path like `/Products/Details/17` and extracts the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="551b4-184">Wartości trasy są określane przez dopasowanie każdego segmentu i dzielenia Ścieżka adresu URL na segmenty *kierowanie parametru* nazwy szablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-184">The route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="551b4-185">Noszą nazwy parametrów trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-185">Route parameters are named.</span></span> <span data-ttu-id="551b4-186">Są one definiowane, umieszczając nazwę parametru w nawiasach klamrowych `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="551b4-186">They're defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="551b4-187">Powyższy szablon może być również zgodna ze ścieżką URL `/` i spowodowało wygenerowanie wartości `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="551b4-187">The preceding template could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="551b4-188">Dzieje się tak dlatego `{controller}` i `{action}` parametrów trasy mają przypisane wartości domyślne i `id` parametr trasy jest opcjonalny.</span><span class="sxs-lookup"><span data-stu-id="551b4-188">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="551b4-189">Znak równości `=` logowanie następuje wartość po nazwę parametru trasa określa wartość domyślną dla parametru.</span><span class="sxs-lookup"><span data-stu-id="551b4-189">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="551b4-190">Znak zapytania `?` po nazwy parametru trasy definiuje parametru jako opcjonalną.</span><span class="sxs-lookup"><span data-stu-id="551b4-190">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="551b4-191">Parametry o wartości domyślne trasy *zawsze* uzyskiwania wartości trasy, gdy jest zgodna z trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-191">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="551b4-192">Parametry opcjonalne nie tworzy wartości trasy, jeśli nie było żadnych odpowiadającym segmencie ścieżki adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-192">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="551b4-193">Zobacz [dokumentacja dotycząca szablonów tras](#route-template-reference) uzyskać dokładny opis funkcji szablonu trasy i składni.</span><span class="sxs-lookup"><span data-stu-id="551b4-193">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="551b4-194">Ten przykład obejmuje *trasy ograniczenie*:</span><span class="sxs-lookup"><span data-stu-id="551b4-194">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="551b4-195">Ten szablon jest zgodny Ścieżka adresu URL, takich jak `/Products/Details/17` , ale nie `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="551b4-195">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="551b4-196">Definicji parametru trasy `{id:int}` definiuje [trasy ograniczenie](#route-constraint-reference) dla `id` parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-196">The route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter.</span></span> <span data-ttu-id="551b4-197">Implementowanie ograniczenia trasy <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> i badać wartości trasy, aby je zweryfikować.</span><span class="sxs-lookup"><span data-stu-id="551b4-197">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="551b4-198">W tym przykładzie wartość trasy `id` musi być konwertowany na liczbę całkowitą.</span><span class="sxs-lookup"><span data-stu-id="551b4-198">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="551b4-199">Zobacz [odwołanie w przypadku ograniczenia trasy](#route-constraint-reference) uzyskać bardziej szczegółowy opis ograniczenia trasy, które są dostarczane przez platformę.</span><span class="sxs-lookup"><span data-stu-id="551b4-199">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="551b4-200">Dodatkowe przeciążenia `MapRoute` akceptowanych wartości `constraints`, `dataTokens`, i `defaults`.</span><span class="sxs-lookup"><span data-stu-id="551b4-200">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="551b4-201">Te dodatkowe parametry `MapRoute` są zdefiniowane jako typ `object`.</span><span class="sxs-lookup"><span data-stu-id="551b4-201">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="551b4-202">Jest typowy tych parametrów do przekazania obiektu anonimowo wpisane, gdzie nazwy właściwości typu anonimowego dopasowania trasy nazwy parametrów.</span><span class="sxs-lookup"><span data-stu-id="551b4-202">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="551b4-203">Dwa poniższe przykłady tworzenia tras równoważne:</span><span class="sxs-lookup"><span data-stu-id="551b4-203">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="551b4-204">Składnię w tekście do definiowania ograniczeń i ustawień domyślnych może być wygodną proste trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-204">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="551b4-205">Istnieją jednak funkcji, takich jak tokeny danych, które nie są obsługiwane przez składnię w tekście.</span><span class="sxs-lookup"><span data-stu-id="551b4-205">However, there are features, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="551b4-206">W poniższym przykładzie pokazano kilka scenariuszy:</span><span class="sxs-lookup"><span data-stu-id="551b4-206">The following example demonstrates a few more scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="551b4-207">Ten szablon jest zgodny Ścieżka adresu URL, takich jak `/Blog/All-About-Routing/Introduction` i wyodrębnia wartości `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="551b4-207">This template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="551b4-208">Trasy domyślnej wartości `controller` i `action` są produkowane przez trasy, nawet jeśli w szablonie nie istnieją odpowiednie parametry trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-208">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="551b4-209">Można określić wartości domyślnych w szablonie trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-209">Default values can be specified in the route template.</span></span> <span data-ttu-id="551b4-210">`article` Parametr trasy jest zdefiniowany jako *wychwytywania* za wyglądu gwiazdki `*` przed nazwą parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-210">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="551b4-211">Parametry trasy wychwytywania Przechwytywanie pozostałą część ścieżki adresu URL i można także dopasować pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="551b4-211">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="551b4-212">Ten przykład dodaje tokeny ograniczeń i dane trasy:</span><span class="sxs-lookup"><span data-stu-id="551b4-212">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="551b4-213">Ten szablon jest zgodny Ścieżka adresu URL, takich jak `/en-US/Products/5` i wyodrębnia wartości `{ controller = Products, action = Details, id = 5 }` i tokeny danych `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="551b4-213">This template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokeny Windows zmiennych lokalnych](routing/_static/tokens.png)

### <a name="url-generation"></a><span data-ttu-id="551b4-215">Generowanie adresu URL</span><span class="sxs-lookup"><span data-stu-id="551b4-215">URL generation</span></span>

<span data-ttu-id="551b4-216">`Route` Klasy można również wykonać Generowanie adresu URL, łącząc zestaw wartości trasy przy użyciu szablonu trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-216">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="551b4-217">Jest to logicznie procesu zgodnych ze ścieżką URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-217">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="551b4-218">Aby lepiej zrozumieć Generowanie adresu URL, Wyobraź sobie adresu URL, które chcesz wygenerować, a następnie zastanów się, jak szablon trasy będzie odpowiadać tego adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-218">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="551b4-219">Wartości, których będzie generowany?</span><span class="sxs-lookup"><span data-stu-id="551b4-219">What values would be produced?</span></span> <span data-ttu-id="551b4-220">Jest to równoważne nierównej działania Generowanie adresu URL `Route` klasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-220">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="551b4-221">W tym przykładzie użyto podstawowe trasy ASP.NET Core MVC styl:</span><span class="sxs-lookup"><span data-stu-id="551b4-221">This example uses a basic ASP.NET Core MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="551b4-222">Za pomocą wartości trasy `{ controller = Products, action = List }`, ta trasa generuje adres URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="551b4-222">With the route values `{ controller = Products, action = List }`, this route generates the URL `/Products/List`.</span></span> <span data-ttu-id="551b4-223">Wartości trasy są zastępowane odpowiednich parametrów trasy w celu utworzenia ze ścieżką URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-223">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="551b4-224">Ponieważ `id` jest opcjonalny parametr trasy, to żaden problem, że nie ma wartości.</span><span class="sxs-lookup"><span data-stu-id="551b4-224">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="551b4-225">Za pomocą wartości trasy `{ controller = Home, action = Index }`, ta trasa generuje adres URL `/`.</span><span class="sxs-lookup"><span data-stu-id="551b4-225">With the route values `{ controller = Home, action = Index }`, this route generates the URL `/`.</span></span> <span data-ttu-id="551b4-226">Wartości trasy, które zostały dostarczone zgodne z wartościami domyślnymi, tak aby segmenty odpowiadający wartości te można bezpiecznie pominąć.</span><span class="sxs-lookup"><span data-stu-id="551b4-226">The route values that were provided match the default values so that the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="551b4-227">Oba adresy URL generowane dwustronnej konwersji z tą definicją trasy i wygenerować tej samej wartości trasy, które były używane do generowania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-227">Both URLs generated round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

> [!TIP]
> <span data-ttu-id="551b4-228">Skorzystaj z aplikacji za pomocą platformy ASP.NET Core MVC <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> do generowania adresów URL zamiast wywoływać metodę do routingu bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="551b4-228">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="551b4-229">Aby uzyskać więcej informacji na temat generowania adresu URL, zobacz [odwołania w przypadku generowania adresu url](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="551b4-229">For more information about URL generation, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="551b4-230">Użyj oprogramowania pośredniczącego routingu</span><span class="sxs-lookup"><span data-stu-id="551b4-230">Use Routing Middleware</span></span>

::: moniker range=">= aspnetcore-2.1"

<span data-ttu-id="551b4-231">Odwołanie [meta Microsoft.aspnetcore.all Microsoft.AspNetCore.App](xref:fundamentals/metapackage-app) w pliku projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-231">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.0"

<span data-ttu-id="551b4-232">Odwołanie [pakiet meta Microsoft.aspnetcore.all](xref:fundamentals/metapackage) w pliku projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-232">Reference the [Microsoft.AspNetCore.All metapackage](xref:fundamentals/metapackage) in the app's project file.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.0"

<span data-ttu-id="551b4-233">Odwołanie [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) w pliku projektu aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-233">Reference the [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) in the app's project file.</span></span>

::: moniker-end

<span data-ttu-id="551b4-234">Dodaj routingu do kontenera usługi w `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="551b4-234">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

<span data-ttu-id="551b4-235">Tras muszą być skonfigurowane w `Startup.Configure` metody.</span><span class="sxs-lookup"><span data-stu-id="551b4-235">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="551b4-236">Przykładowa aplikacja korzysta z tych interfejsów API:</span><span class="sxs-lookup"><span data-stu-id="551b4-236">The sample app uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="551b4-237">`MapGet` &ndash; Dopasowuje tylko żądania HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="551b4-237">`MapGet` &ndash; Matches only HTTP GET requests.</span></span>
* `UseRouter`

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

<span data-ttu-id="551b4-238">W poniższej tabeli przedstawiono odpowiedzi z danym identyfikatorów URI.</span><span class="sxs-lookup"><span data-stu-id="551b4-238">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="551b4-239">Identyfikator URI</span><span class="sxs-lookup"><span data-stu-id="551b4-239">URI</span></span>                  | <span data-ttu-id="551b4-240">Odpowiedź</span><span class="sxs-lookup"><span data-stu-id="551b4-240">Response</span></span>                                          |
| -------------------- | ------------------------------------------------- |
| <span data-ttu-id="551b4-241">/Package/Create/3</span><span class="sxs-lookup"><span data-stu-id="551b4-241">/package/create/3</span></span>    | <span data-ttu-id="551b4-242">Cześć!</span><span class="sxs-lookup"><span data-stu-id="551b4-242">Hello!</span></span> <span data-ttu-id="551b4-243">Wartości trasy: [operacji tworzenia], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="551b4-243">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="551b4-244">/ pakietu/śledzenie/3</span><span class="sxs-lookup"><span data-stu-id="551b4-244">/package/track/-3</span></span>    | <span data-ttu-id="551b4-245">Cześć!</span><span class="sxs-lookup"><span data-stu-id="551b4-245">Hello!</span></span> <span data-ttu-id="551b4-246">Wartości trasy: [operacji, Śledź], [identyfikator -3]</span><span class="sxs-lookup"><span data-stu-id="551b4-246">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="551b4-247">/ pakietu/śledzić/3 /</span><span class="sxs-lookup"><span data-stu-id="551b4-247">/package/track/-3/</span></span>   | <span data-ttu-id="551b4-248">Cześć!</span><span class="sxs-lookup"><span data-stu-id="551b4-248">Hello!</span></span> <span data-ttu-id="551b4-249">Wartości trasy: [operacji, Śledź], [identyfikator -3]</span><span class="sxs-lookup"><span data-stu-id="551b4-249">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="551b4-250">/ Package/śledzenie /</span><span class="sxs-lookup"><span data-stu-id="551b4-250">/package/track/</span></span>      | <span data-ttu-id="551b4-251">&lt;Przechodzić niezgodności&gt;</span><span class="sxs-lookup"><span data-stu-id="551b4-251">&lt;Fall through, no match&gt;</span></span>                    |
| <span data-ttu-id="551b4-252">Pobierz /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="551b4-252">GET /hello/Joe</span></span>       | <span data-ttu-id="551b4-253">Witaj, Jan!</span><span class="sxs-lookup"><span data-stu-id="551b4-253">Hi, Joe!</span></span>                                          |
| <span data-ttu-id="551b4-254">OPUBLIKUJ /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="551b4-254">POST /hello/Joe</span></span>      | <span data-ttu-id="551b4-255">&lt;Przechodzić, odpowiada tylko HTTP GET&gt;</span><span class="sxs-lookup"><span data-stu-id="551b4-255">&lt;Fall through, matches HTTP GET only&gt;</span></span>       |
| <span data-ttu-id="551b4-256">Pobierz /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="551b4-256">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="551b4-257">&lt;Przechodzić niezgodności&gt;</span><span class="sxs-lookup"><span data-stu-id="551b4-257">&lt;Fall through, no match&gt;</span></span>                    |

<span data-ttu-id="551b4-258">Jeśli konfigurujesz jedną trasę wywołać <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> przekazując `IRouter` wystąpienia.</span><span class="sxs-lookup"><span data-stu-id="551b4-258">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="551b4-259">Nie będzie konieczne użycie <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="551b4-259">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

<span data-ttu-id="551b4-260">Framework udostępnia zestaw metod rozszerzenia do tworzenia tras, takich jak:</span><span class="sxs-lookup"><span data-stu-id="551b4-260">The framework provides a set of extension methods for creating routes, such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="551b4-261">Niektóre z tych metod, takich jak `MapGet`, wymagają `RequestDelegate` należy podać.</span><span class="sxs-lookup"><span data-stu-id="551b4-261">Some of these methods, such as `MapGet`, require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="551b4-262">`RequestDelegate` Służy jako *programu obsługi trasy* gdy trasa odpowiada.</span><span class="sxs-lookup"><span data-stu-id="551b4-262">The `RequestDelegate` is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="551b4-263">Inne metody w tej rodzinie umożliwiają konfigurowanie potoku oprogramowania pośredniczącego do użytku jako program obsługi trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-263">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="551b4-264">Jeśli *mapy* metody nie zaakceptuje program obsługi, takie jak `MapRoute`, a następnie używa <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="551b4-264">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

<span data-ttu-id="551b4-265">`Map[Verb]` Metody używać ograniczeń w celu ograniczenia trasy do czasownik HTTP w nazwie metody.</span><span class="sxs-lookup"><span data-stu-id="551b4-265">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="551b4-266">Na przykład zobacz <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> i <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="551b4-266">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="551b4-267">Odwołanie do szablonu trasy</span><span class="sxs-lookup"><span data-stu-id="551b4-267">Route template reference</span></span>

<span data-ttu-id="551b4-268">Tokeny w nawiasy klamrowe (`{ ... }`) Zdefiniuj *parametry trasy* , są powiązane, jeśli trasa jest zgodny.</span><span class="sxs-lookup"><span data-stu-id="551b4-268">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="551b4-269">Można zdefiniować więcej niż jeden parametr trasy w segmencie trasy, ale musi być oddzielony wartości literału.</span><span class="sxs-lookup"><span data-stu-id="551b4-269">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="551b4-270">Na przykład `{controller=Home}{action=Index}` nie jest prawidłową trasę, ponieważ nie ma żadnych wartości literału między `{controller}` i `{action}`.</span><span class="sxs-lookup"><span data-stu-id="551b4-270">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="551b4-271">Te parametry trasy musi mieć nazwę i może określić dodatkowe atrybuty.</span><span class="sxs-lookup"><span data-stu-id="551b4-271">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="551b4-272">Tekst dosłowny niż parametrów trasy (na przykład `{id}`) i separatora ścieżki `/` musi być zgodna z tekstem w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-272">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="551b4-273">Dopasowywanie tekstu odbywa się bez uwzględniania wielkości liter i jest oparta na zdekodowany reprezentacja ścieżki URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-273">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="551b4-274">Aby dopasować Ogranicznik parametru trasy literału `{` lub `}`, zmienić jego znaczenie, powtarzając znak (`{{` lub `}}`).</span><span class="sxs-lookup"><span data-stu-id="551b4-274">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="551b4-275">Wzorce adresów URL, które próbują przechwytywania nazwę pliku z rozszerzeniem nazwy pliku opcjonalne mają dodatkowe zagadnienia.</span><span class="sxs-lookup"><span data-stu-id="551b4-275">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="551b4-276">Rozważmy na przykład szablon `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="551b4-276">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="551b4-277">Gdy oba `filename` i `ext` istnieje, obie wartości są wypełnione.</span><span class="sxs-lookup"><span data-stu-id="551b4-277">When both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="551b4-278">Jeśli tylko `filename` istnieje w adresie URL, dopasowania tras, ponieważ końcowej kropki `.` jest opcjonalne.</span><span class="sxs-lookup"><span data-stu-id="551b4-278">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="551b4-279">Następujące adresy URL dopasowania tej trasy:</span><span class="sxs-lookup"><span data-stu-id="551b4-279">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="551b4-280">Możesz użyć `*` znak jako prefiks parametru trasy, aby powiązać pozostałą część identyfikatora URI.</span><span class="sxs-lookup"><span data-stu-id="551b4-280">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="551b4-281">Jest to nazywane *wychwytywania* parametru.</span><span class="sxs-lookup"><span data-stu-id="551b4-281">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="551b4-282">Na przykład `blog/{*slug}` dopasowuje dowolny identyfikator URI, który rozpoczyna się od `/blog` i dowolną wartość z dołączonym (która jest przypisana do `slug` trasy wartość).</span><span class="sxs-lookup"><span data-stu-id="551b4-282">For example, `blog/{*slug}` matches any URI that starts with `/blog` and had any value following it (which is assigned to the `slug` route value).</span></span> <span data-ttu-id="551b4-283">Parametry przechwytującą cały mogą być również zgodna pusty ciąg.</span><span class="sxs-lookup"><span data-stu-id="551b4-283">Catch-all parameters can also match the empty string.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="551b4-284">Parametrze wychwytywania odpowiednie znaki specjalne, gdy trasa służy do generowania adresu URL, w tym separatora ścieżki (`/`) znaków.</span><span class="sxs-lookup"><span data-stu-id="551b4-284">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="551b4-285">Na przykład tras `foo/{*path}` wartościami trasy `{ path = "my/path" }` generuje `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="551b4-285">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="551b4-286">Należy pamiętać o zmienionym znaczeniu ukośnikiem.</span><span class="sxs-lookup"><span data-stu-id="551b4-286">Note the escaped forward slash.</span></span> <span data-ttu-id="551b4-287">Aby znakach separatora ścieżki Rundy, należy użyć `**` prefiks parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-287">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="551b4-288">Trasa `foo/{**path}` z `{ path = "my/path" }` generuje `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="551b4-288">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

::: moniker-end

<span data-ttu-id="551b4-289">Może mieć parametrów trasy *wartości domyślne*magazynu, określając wartość domyślna po nazwie parametru, rozdzielone znakiem równości (`=`).</span><span class="sxs-lookup"><span data-stu-id="551b4-289">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an equals sign (`=`).</span></span> <span data-ttu-id="551b4-290">Na przykład `{controller=Home}` definiuje `Home` jako wartość domyślna dla `controller`.</span><span class="sxs-lookup"><span data-stu-id="551b4-290">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="551b4-291">Wartością domyślną jest używany, jeśli wartość nie jest obecny w adresie URL, dla parametru.</span><span class="sxs-lookup"><span data-stu-id="551b4-291">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="551b4-292">Oprócz wartości domyślne parametrów trasy może być opcjonalnie, określony przez dodanie znaku zapytania (`?`) na końcu nazwy parametru, jak `id?`.</span><span class="sxs-lookup"><span data-stu-id="551b4-292">In addition to default values, route parameters may be optional, specified by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="551b4-293">Różnica między wartościami opcjonalne i domyślne parametry trasy jest parametr trasy z wartością domyślną będzie zawsze daje wartość opcjonalny parametr ma wartość tylko wtedy, gdy wartość zostanie podana w adresie URL żądania.</span><span class="sxs-lookup"><span data-stu-id="551b4-293">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value; an optional parameter has a value only when a value is provided by the request URL.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="551b4-294">Parametry trasy może mieć ograniczeń, które musi odpowiadać wartości trasy, powiązany z adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-294">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="551b4-295">Dodawanie dwukropka (`:`) i nazwa ograniczenia po Określa nazwę parametru trasy *ograniczenie w tekście* parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-295">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="551b4-296">Jeśli ograniczenie wymaga argumentów, są ujęte w nawiasy `( )` po nazwie ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="551b4-296">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="551b4-297">Można określić wiele ograniczeń w tekście, dodając inny dwukropka (`:`) i nazwa ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="551b4-297">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="551b4-298">Nazwa ograniczenia i argumenty są przekazywane do <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> usługi w celu utworzenia wystąpienia <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> do użycia podczas przetwarzania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-298">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="551b4-299">Jeśli Konstruktor ograniczenie wymaga usług, są one rozwiązane z iniekcji zależności aplikacji usług.</span><span class="sxs-lookup"><span data-stu-id="551b4-299">If the constraint constructor requires services, they're resolved from dependency injection's app services.</span></span> <span data-ttu-id="551b4-300">Na przykład szablon trasy `blog/{article:minlength(10)}` Określa `minlength` ograniczenie z argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="551b4-300">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="551b4-301">Aby uzyskać więcej informacji na temat ograniczenia trasy i lista ograniczeń dostarczanych przez szablon, zobacz [przekierować odwołanie do ograniczenia](#route-constraint-reference) sekcji.</span><span class="sxs-lookup"><span data-stu-id="551b4-301">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="551b4-302">Parametry trasy może mieć ograniczeń, które musi odpowiadać wartości trasy, powiązany z adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-302">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="551b4-303">Dodawanie dwukropka (`:`) i nazwa ograniczenia po Określa nazwę parametru trasy *ograniczenie w tekście* parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-303">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="551b4-304">Jeśli ograniczenie wymaga argumentów, są ujęte w nawiasy `( )` po nazwie ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="551b4-304">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="551b4-305">Można określić wiele ograniczeń w tekście, dodając inny dwukropka (`:`) i nazwa ograniczenia.</span><span class="sxs-lookup"><span data-stu-id="551b4-305">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="551b4-306">Nazwa ograniczenia i argumenty są przekazywane do <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> usługi w celu utworzenia wystąpienia <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> do użycia podczas przetwarzania adresu URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-306">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="551b4-307">Na przykład szablon trasy `blog/{article:minlength(10)}` Określa `minlength` ograniczenie z argumentem `10`.</span><span class="sxs-lookup"><span data-stu-id="551b4-307">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="551b4-308">Aby uzyskać więcej informacji na temat ograniczenia trasy i lista ograniczeń dostarczanych przez szablon, zobacz [przekierować odwołanie do ograniczenia](#route-constraint-reference) sekcji.</span><span class="sxs-lookup"><span data-stu-id="551b4-308">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="551b4-309">Parametry trasy może mieć również transformatory parametrów, które przekształcania wartości parametru podczas generowania łączy pasującego działania i stron na identyfikatory URI.</span><span class="sxs-lookup"><span data-stu-id="551b4-309">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URIs.</span></span> <span data-ttu-id="551b4-310">Ograniczenia, np. parametr transformatory można dodać wbudowane do parametru trasy, dodając dwukropek (`:`) i nazwa transformatora po nazwie parametru trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-310">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="551b4-311">Na przykład szablon trasy `blog/{article:slugify}` Określa `slugify` przekształcania.</span><span class="sxs-lookup"><span data-stu-id="551b4-311">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span>

::: moniker-end

<span data-ttu-id="551b4-312">Poniższa tabela przedstawia niektóre szablony trasy i ich zachowania.</span><span class="sxs-lookup"><span data-stu-id="551b4-312">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="551b4-313">Szablon trasy</span><span class="sxs-lookup"><span data-stu-id="551b4-313">Route Template</span></span>                         | <span data-ttu-id="551b4-314">Przykładowy adres URL dopasowania</span><span class="sxs-lookup"><span data-stu-id="551b4-314">Example Matching URL</span></span>  | <span data-ttu-id="551b4-315">Uwagi</span><span class="sxs-lookup"><span data-stu-id="551b4-315">Notes</span></span>                                                                  |
| -------------------------------------- | --------------------- | ---------------------------------------------------------------------- |
| <span data-ttu-id="551b4-316">Cześć</span><span class="sxs-lookup"><span data-stu-id="551b4-316">hello</span></span>                                  | <span data-ttu-id="551b4-317">człon</span><span class="sxs-lookup"><span data-stu-id="551b4-317">/hello</span></span>                | <span data-ttu-id="551b4-318">Jest zgodny tylko pojedynczą ścieżkę `/hello`</span><span class="sxs-lookup"><span data-stu-id="551b4-318">Only matches the single path `/hello`</span></span>                                  |
| <span data-ttu-id="551b4-319">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="551b4-319">{Page=Home}</span></span>                            | /                     | <span data-ttu-id="551b4-320">Dopasowuje i ustawia `Page` do `Home`</span><span class="sxs-lookup"><span data-stu-id="551b4-320">Matches and sets `Page` to `Home`</span></span>                                      |
| <span data-ttu-id="551b4-321">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="551b4-321">{Page=Home}</span></span>                            | <span data-ttu-id="551b4-322">/ Contact</span><span class="sxs-lookup"><span data-stu-id="551b4-322">/Contact</span></span>              | <span data-ttu-id="551b4-323">Dopasowuje i ustawia `Page` do `Contact`</span><span class="sxs-lookup"><span data-stu-id="551b4-323">Matches and sets `Page` to `Contact`</span></span>                                   |
| <span data-ttu-id="551b4-324">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="551b4-324">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="551b4-325">/ / Listy produktów</span><span class="sxs-lookup"><span data-stu-id="551b4-325">/Products/List</span></span>        | <span data-ttu-id="551b4-326">Mapuje `Products` kontrolera i `List` akcji</span><span class="sxs-lookup"><span data-stu-id="551b4-326">Maps to `Products` controller and `List`  action</span></span>                       |
| <span data-ttu-id="551b4-327">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="551b4-327">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="551b4-328">/ Produkty/szczegóły/123</span><span class="sxs-lookup"><span data-stu-id="551b4-328">/Products/Details/123</span></span> |  <span data-ttu-id="551b4-329">Mapuje `Products` kontrolera i `Details` akcji.</span><span class="sxs-lookup"><span data-stu-id="551b4-329">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="551b4-330">`id` Ustaw 123</span><span class="sxs-lookup"><span data-stu-id="551b4-330">`id` set to 123</span></span> |
| <span data-ttu-id="551b4-331">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="551b4-331">{controller=Home}/{action=Index}/{id?}</span></span> | /                     |  <span data-ttu-id="551b4-332">Mapuje `Home` kontrolera i `Index` metody. `id` jest ignorowana.</span><span class="sxs-lookup"><span data-stu-id="551b4-332">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span>       |

<span data-ttu-id="551b4-333">Przy użyciu szablonu ogólnie jest najprostszym podejściem do obsługi routingu.</span><span class="sxs-lookup"><span data-stu-id="551b4-333">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="551b4-334">Ograniczenia i ustawienia domyślne można również określić poza szablon trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-334">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="551b4-335">Włącz [rejestrowania](xref:fundamentals/logging/index) aby zobaczyć, jak tworzone w implementacji routingu, takich jak `Route`, zgodne z żądaniami.</span><span class="sxs-lookup"><span data-stu-id="551b4-335">Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="551b4-336">Zastrzeżone nazwy routingu</span><span class="sxs-lookup"><span data-stu-id="551b4-336">Reserved routing names</span></span>

<span data-ttu-id="551b4-337">Następujące słowa kluczowe są zarezerwowane nazwy i nie można użyć jako nazwy trasy i parametry:</span><span class="sxs-lookup"><span data-stu-id="551b4-337">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="551b4-338">Odwołanie do ograniczenia trasy</span><span class="sxs-lookup"><span data-stu-id="551b4-338">Route constraint reference</span></span>

<span data-ttu-id="551b4-339">Ograniczenia trasy wykonania, gdy `Route` ma dopasowane składnia przychodzącego adresu URL i podzielić na tokeny Ścieżka adresu URL do wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-339">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="551b4-340">Ograniczenia trasy ogólnie badać wartości tras skojarzone za pośrednictwem szablon trasy i wprowadzić tak, / nie decyzję o tym, czy wartość jest dopuszczalne.</span><span class="sxs-lookup"><span data-stu-id="551b4-340">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="551b4-341">Niektóre ograniczenia trasy umożliwia należy wziąć pod uwagę, czy żądania można kierować dane poza wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-341">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="551b4-342">Na przykład <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> można zaakceptować lub odrzucić żądanie oparte na jego zlecenie HTTP.</span><span class="sxs-lookup"><span data-stu-id="551b4-342">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span>

> [!WARNING]
> <span data-ttu-id="551b4-343">Należy unikać stosowania ograniczeń dla **sprawdzania danych wejściowych** ponieważ w ten sposób oznacza, że nieprawidłowe dane wejściowe skutkuje *404 — Nie można odnaleźć* odpowiedzi zamiast *400 — Nieprawidłowe żądanie* z odpowiedni komunikat o błędzie.</span><span class="sxs-lookup"><span data-stu-id="551b4-343">Avoid using constraints for **input validation** because doing so means that invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="551b4-344">Ograniczenia trasy są używane do **odróżnić** między podobne tras, nie można sprawdzić poprawność danych wejściowych dla określonej trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-344">Route constraints are used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="551b4-345">Poniższa tabela przedstawia niektóre ograniczenia trasy, a ich oczekiwane zachowanie.</span><span class="sxs-lookup"><span data-stu-id="551b4-345">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="551b4-346">ograniczenie</span><span class="sxs-lookup"><span data-stu-id="551b4-346">constraint</span></span> | <span data-ttu-id="551b4-347">Przykład</span><span class="sxs-lookup"><span data-stu-id="551b4-347">Example</span></span> | <span data-ttu-id="551b4-348">Przykład dopasowań</span><span class="sxs-lookup"><span data-stu-id="551b4-348">Example Matches</span></span> | <span data-ttu-id="551b4-349">Uwagi</span><span class="sxs-lookup"><span data-stu-id="551b4-349">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="551b4-350">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="551b4-350">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="551b4-351">Dopasowuje dowolną liczbę całkowitą</span><span class="sxs-lookup"><span data-stu-id="551b4-351">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="551b4-352">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="551b4-352">`true`, `FALSE`</span></span> | <span data-ttu-id="551b4-353">Dopasowuje `true` lub `false` (bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="551b4-353">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="551b4-354">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="551b4-354">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="551b4-355">Pasuje do prawidłowego `DateTime` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="551b4-355">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="551b4-356">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="551b4-356">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="551b4-357">Pasuje do prawidłowego `decimal` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="551b4-357">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="551b4-358">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="551b4-358">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="551b4-359">Pasuje do prawidłowego `double` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="551b4-359">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="551b4-360">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="551b4-360">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="551b4-361">Pasuje do prawidłowego `float` wartość (niezmiennej kultury — Zobacz ostrzeżenie)</span><span class="sxs-lookup"><span data-stu-id="551b4-361">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="551b4-362">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="551b4-362">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="551b4-363">Pasuje do prawidłowego `Guid` wartość</span><span class="sxs-lookup"><span data-stu-id="551b4-363">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="551b4-364">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="551b4-364">`123456789`, `-123456789`</span></span> | <span data-ttu-id="551b4-365">Pasuje do prawidłowego `long` wartość</span><span class="sxs-lookup"><span data-stu-id="551b4-365">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="551b4-366">Ciąg musi być co najmniej 4 znaki</span><span class="sxs-lookup"><span data-stu-id="551b4-366">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="551b4-367">Ciąg musi zawierać nie więcej niż 8 znaków</span><span class="sxs-lookup"><span data-stu-id="551b4-367">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="551b4-368">Ciąg musi być dokładnie 12 znaków.</span><span class="sxs-lookup"><span data-stu-id="551b4-368">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="551b4-369">Ciąg musi zawierać co najmniej 8 i nie więcej niż 16 znaków</span><span class="sxs-lookup"><span data-stu-id="551b4-369">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="551b4-370">Wartość całkowita musi być co najmniej 18</span><span class="sxs-lookup"><span data-stu-id="551b4-370">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="551b4-371">Wartość całkowita musi być nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="551b4-371">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="551b4-372">Wartość całkowita musi być co najmniej 18 lat, ale nie więcej niż 120</span><span class="sxs-lookup"><span data-stu-id="551b4-372">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="551b4-373">Ciąg musi zawierać co najmniej jeden znak alfabetyczny (`a`-`z`, bez uwzględniania wielkości liter)</span><span class="sxs-lookup"><span data-stu-id="551b4-373">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="551b4-374">Ciąg musi być zgodny z wyrażeniem regularnym (Zobacz porady dotyczące definiując wyrażenie regularne)</span><span class="sxs-lookup"><span data-stu-id="551b4-374">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` |  <span data-ttu-id="551b4-375">Używane do wymuszania, że wartość parametru nie jest obecny podczas generowania adresu URL</span><span class="sxs-lookup"><span data-stu-id="551b4-375">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="551b4-376">Wiele ograniczeń rozdzielana średnikami można zastosować do jednego parametru.</span><span class="sxs-lookup"><span data-stu-id="551b4-376">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="551b4-377">Na przykład następujące ograniczenia ogranicza parametr na wartość całkowitą równą 1 lub większą:</span><span class="sxs-lookup"><span data-stu-id="551b4-377">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="551b4-378">Trasy, ograniczenia, sprawdź adres URL, które są konwertowane na typ CLR (takie jak `int` lub `DateTime`) zawsze używają niezmiennej kultury.</span><span class="sxs-lookup"><span data-stu-id="551b4-378">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="551b4-379">Te ograniczenia przyjęto założenie, że adres URL jest niemożliwe do zlokalizowania.</span><span class="sxs-lookup"><span data-stu-id="551b4-379">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="551b4-380">Ograniczenia trasy dostarczone przez framework nie należy modyfikować wartości przechowywane w wartości trasy.</span><span class="sxs-lookup"><span data-stu-id="551b4-380">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="551b4-381">Wszystkie wartości trasy, pochodzącą z adresu URL analizy są przechowywane jako ciągi.</span><span class="sxs-lookup"><span data-stu-id="551b4-381">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="551b4-382">Na przykład `float` ograniczenie podejmuje próbę przekonwertowania na format zmiennoprzecinkowy wartości trasy, ale przekonwertowana wartość jest używana tylko po to, aby sprawdzić, może on zostać przekonwertowany na format zmiennoprzecinkowy.</span><span class="sxs-lookup"><span data-stu-id="551b4-382">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="551b4-383">Wyrażenia regularne</span><span class="sxs-lookup"><span data-stu-id="551b4-383">Regular expressions</span></span>

<span data-ttu-id="551b4-384">Dodaje platformę ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` do konstruktora wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="551b4-384">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="551b4-385">Zobacz <xref:System.Text.RegularExpressions.RegexOptions> opis tych elementów członkowskich.</span><span class="sxs-lookup"><span data-stu-id="551b4-385">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="551b4-386">Wyrażenia regularne używać ograniczników i tokeny podobne do używanych przez usługę Routing i języka C#.</span><span class="sxs-lookup"><span data-stu-id="551b4-386">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="551b4-387">Wyrażenie regularne tokeny muszą być wyjściowym.</span><span class="sxs-lookup"><span data-stu-id="551b4-387">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="551b4-388">Można użyć wyrażenia regularnego `^\d{3}-\d{2}-\d{4}$` routingu, wyrażenie musi mieć `\` znaki wpisane w jako `\\` w pliku źródłowym języka C# jako znak ucieczki `\` ciąg znaku ucieczki (chyba że za pomocą [ciąg verbatim literały](/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="551b4-388">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, the expression must have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="551b4-389">`{`, `}`, `[`, I `]` znaków muszą być poprzedzone podwojenie je jako znak ucieczki znaki ogranicznika parametr routingu.</span><span class="sxs-lookup"><span data-stu-id="551b4-389">The `{`, `}`, `[`, and `]` characters must be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span> <span data-ttu-id="551b4-390">W poniższej tabeli przedstawiono wyrażeń regularnych i wersji o zmienionym znaczeniu.</span><span class="sxs-lookup"><span data-stu-id="551b4-390">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="551b4-391">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="551b4-391">Expression</span></span>            | <span data-ttu-id="551b4-392">Poprzedzone znakiem zmiany znaczenia</span><span class="sxs-lookup"><span data-stu-id="551b4-392">Escaped</span></span>                        |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="551b4-393">Wyrażenia regularne użyte w routingu często rozpoczynać `^` znaków (dopasowanie ciągu pozycję początkową) i kończyć się `$` znak (dopasowanie kończy pozycja w ciągu).</span><span class="sxs-lookup"><span data-stu-id="551b4-393">Regular expressions used in routing often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="551b4-394">`^` i `$` znaków upewnij się, że wartość parametru trasy całe dopasowanie wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="551b4-394">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="551b4-395">Bez `^` i `$` znaków, wyrażenie regularne odpowiada wszelkich podciągu wewnątrz ciągu, który jest często niepożądane.</span><span class="sxs-lookup"><span data-stu-id="551b4-395">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="551b4-396">W poniższej tabeli przedstawiono kilka przykładów i wyjaśnia, dlaczego zgodne lub nie odpowiada.</span><span class="sxs-lookup"><span data-stu-id="551b4-396">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="551b4-397">Wyrażenie</span><span class="sxs-lookup"><span data-stu-id="551b4-397">Expression</span></span>   | <span data-ttu-id="551b4-398">String</span><span class="sxs-lookup"><span data-stu-id="551b4-398">String</span></span>    | <span data-ttu-id="551b4-399">Dopasowanie</span><span class="sxs-lookup"><span data-stu-id="551b4-399">Match</span></span> | <span data-ttu-id="551b4-400">Komentarz</span><span class="sxs-lookup"><span data-stu-id="551b4-400">Comment</span></span>               |
| ------------ | --------- |  ---- |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="551b4-401">Cześć</span><span class="sxs-lookup"><span data-stu-id="551b4-401">hello</span></span>     | <span data-ttu-id="551b4-402">Tak</span><span class="sxs-lookup"><span data-stu-id="551b4-402">Yes</span></span>   | <span data-ttu-id="551b4-403">podciąg dopasowania</span><span class="sxs-lookup"><span data-stu-id="551b4-403">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="551b4-404">123abc456</span><span class="sxs-lookup"><span data-stu-id="551b4-404">123abc456</span></span> | <span data-ttu-id="551b4-405">Tak</span><span class="sxs-lookup"><span data-stu-id="551b4-405">Yes</span></span>   | <span data-ttu-id="551b4-406">podciąg dopasowania</span><span class="sxs-lookup"><span data-stu-id="551b4-406">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="551b4-407">mz</span><span class="sxs-lookup"><span data-stu-id="551b4-407">mz</span></span>        | <span data-ttu-id="551b4-408">Tak</span><span class="sxs-lookup"><span data-stu-id="551b4-408">Yes</span></span>   | <span data-ttu-id="551b4-409">zgodne z wyrażeniem</span><span class="sxs-lookup"><span data-stu-id="551b4-409">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="551b4-410">MZ</span><span class="sxs-lookup"><span data-stu-id="551b4-410">MZ</span></span>        | <span data-ttu-id="551b4-411">Tak</span><span class="sxs-lookup"><span data-stu-id="551b4-411">Yes</span></span>   | <span data-ttu-id="551b4-412">bez uwzględniania wielkości liter</span><span class="sxs-lookup"><span data-stu-id="551b4-412">Not case sensitive</span></span>    |
| `^[a-z]{2}$` |  <span data-ttu-id="551b4-413">Cześć</span><span class="sxs-lookup"><span data-stu-id="551b4-413">hello</span></span>    | <span data-ttu-id="551b4-414">Nie</span><span class="sxs-lookup"><span data-stu-id="551b4-414">No</span></span>    | <span data-ttu-id="551b4-415">zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="551b4-415">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="551b4-416">123abc456</span><span class="sxs-lookup"><span data-stu-id="551b4-416">123abc456</span></span> | <span data-ttu-id="551b4-417">Nie</span><span class="sxs-lookup"><span data-stu-id="551b4-417">No</span></span>    | <span data-ttu-id="551b4-418">zobacz `^` i `$` powyżej</span><span class="sxs-lookup"><span data-stu-id="551b4-418">See `^` and `$` above</span></span> |

<span data-ttu-id="551b4-419">Aby uzyskać więcej informacji na temat składni wyrażeń regularnych, zobacz [wyrażeń regularnych programu .NET Framework](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="551b4-419">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="551b4-420">Aby ograniczyć parametr znany zestaw możliwych wartości, należy użyć wyrażenia regularnego.</span><span class="sxs-lookup"><span data-stu-id="551b4-420">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="551b4-421">Na przykład `{action:regex(^(list|get|create)$)}` jest zgodny tylko `action` trasy wartość `list`, `get`, lub `create`.</span><span class="sxs-lookup"><span data-stu-id="551b4-421">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="551b4-422">Jeśli przekazywana do słownika ograniczenia, ciąg `^(list|get|create)$` odpowiada.</span><span class="sxs-lookup"><span data-stu-id="551b4-422">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="551b4-423">Ograniczenia, które są przekazywane w słowniku ograniczenia (niewyrównane w szablonie), która nie pasuje do jednej znane ograniczenia również są traktowane jako wyrażenia regularne.</span><span class="sxs-lookup"><span data-stu-id="551b4-423">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

::: moniker range=">= aspnetcore-2.2"

## <a name="parameter-transformer-reference"></a><span data-ttu-id="551b4-424">Odwołania do parametru transformatora</span><span class="sxs-lookup"><span data-stu-id="551b4-424">Parameter transformer reference</span></span>

<span data-ttu-id="551b4-425">Parametr transformatory:</span><span class="sxs-lookup"><span data-stu-id="551b4-425">Parameter transformers:</span></span>

* <span data-ttu-id="551b4-426">Wykonania podczas generowania łącza dla `Route`.</span><span class="sxs-lookup"><span data-stu-id="551b4-426">Execute when generating a link for a `Route`.</span></span>
* <span data-ttu-id="551b4-427">Implementowanie `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="551b4-427">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="551b4-428">Zostały skonfigurowane za pomocą <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span><span class="sxs-lookup"><span data-stu-id="551b4-428">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="551b4-429">Pobrać parametru, wartości trasy i przekształć go w nową wartość ciągu.</span><span class="sxs-lookup"><span data-stu-id="551b4-429">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="551b4-430">Po przekształceniu wartość jest używana w wygenerowane łącze.</span><span class="sxs-lookup"><span data-stu-id="551b4-430">The transformed value is used in the generated link.</span></span>

<span data-ttu-id="551b4-431">Na przykład niestandardowy `slugify` transformatora parametr we wzorcu trasy `blog\{article:slugify}` z `Url.Action(new { article = "MyTestArticle" })` generuje `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="551b4-431">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="551b4-432">Transformatory parametru są również używane przez struktury do przekształcania identyfikatora URI, do którego jest rozpoznawany jako punkt końcowy.</span><span class="sxs-lookup"><span data-stu-id="551b4-432">Parameter transformers are also used by frameworks to transform the URI to which an endpoint resolves.</span></span> <span data-ttu-id="551b4-433">Na przykład ASP.NET Core MVC używa parametru transformatory do przekształcania wartości trasy, używany do dopasowywania `area`, `controller`, `action`, i `page`.</span><span class="sxs-lookup"><span data-stu-id="551b4-433">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home:slugify}/{action=Index:slugify}/{id?}");
```

<span data-ttu-id="551b4-434">Trasa poprzedniej akcji `SubscriptionManagementController.GetAll()` jest dopasowany do identyfikatora URI `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="551b4-434">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="551b4-435">Transformer parametru nie zmienia wartości trasy, używanego do generowania łącza.</span><span class="sxs-lookup"><span data-stu-id="551b4-435">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="551b4-436">`Url.Action("GetAll", "SubscriptionManagement")` dane wyjściowe `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="551b4-436">`Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="551b4-437">ASP.NET Core zawiera konwencje interfejsu API transformatory parametru przy użyciu wygenerowanego trasy:</span><span class="sxs-lookup"><span data-stu-id="551b4-437">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="551b4-438">ASP.NET Core MVC ma `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` Konwencji interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="551b4-438">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="551b4-439">Ta Konwencja dotyczy transformatora określony parametr wszystkich tras atrybutów w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="551b4-439">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="551b4-440">Transformer parametr przekształca tokeny trasy atrybutu, ponieważ zostaną zastąpione.</span><span class="sxs-lookup"><span data-stu-id="551b4-440">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="551b4-441">Aby uzyskać więcej informacji, zobacz [Użyj transformatora parametru, aby dostosować zastępowania tokenu](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="551b4-441">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="551b4-442">Strony razor ma `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` Konwencji interfejsu API.</span><span class="sxs-lookup"><span data-stu-id="551b4-442">Razor pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="551b4-443">Ta Konwencja dotyczy transformatora określony parametr wszystkie automatycznie odnalezione stron Razor.</span><span class="sxs-lookup"><span data-stu-id="551b4-443">This convention applies a specified parameter transformer to all automatically discovered Razor pages.</span></span> <span data-ttu-id="551b4-444">Transformer parametr przekształca folderu i pliku segmentów nazwy tras strony Razor.</span><span class="sxs-lookup"><span data-stu-id="551b4-444">The parameter transformer transforms the folder and file name segments of Razor page routes.</span></span> <span data-ttu-id="551b4-445">Aby uzyskać więcej informacji, zobacz [Użyj transformatora parametru, aby dostosować stronę trasy](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="551b4-445">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

::: moniker-end

## <a name="url-generation-reference"></a><span data-ttu-id="551b4-446">Odwołanie do generowania adresu URL</span><span class="sxs-lookup"><span data-stu-id="551b4-446">URL generation reference</span></span>

<span data-ttu-id="551b4-447">Poniższy przykład pokazuje, jak wygenerować łącze do trasy, biorąc pod uwagę słownika wartości trasy i <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="551b4-447">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

<span data-ttu-id="551b4-448">`VirtualPath` Generowane na końcu poprzedniego przykładowe dane stanowią `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="551b4-448">The `VirtualPath` generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="551b4-449">Słownik dostarcza `operation` i `id` wartości szablonu "Śledzenie trasy pakietu" trasy `package/{operation}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="551b4-449">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="551b4-450">Aby uzyskać szczegółowe informacje, zobacz przykładowy kod [użycia routingu w oprogramowaniu pośredniczącym](#use-routing-middleware) sekcji lub [przykładową aplikację](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="551b4-450">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="551b4-451">Drugi parametr `VirtualPathContext` Konstruktor jest kolekcją *otoczenia wartości*.</span><span class="sxs-lookup"><span data-stu-id="551b4-451">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="551b4-452">Wartości otoczenia umożliwiają wygodne przez ograniczenie liczby wartości, które Deweloper należy określić w ramach kontekstu żądania.</span><span class="sxs-lookup"><span data-stu-id="551b4-452">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="551b4-453">Bieżące wartości trasy, bieżącego żądania są traktowane jako wartości otoczenia dotyczącymi generowania łączy.</span><span class="sxs-lookup"><span data-stu-id="551b4-453">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="551b4-454">W aplikacji ASP.NET Core MVC, jeśli znajdują się w `About` akcji `HomeController`, nie musisz określić wartość trasy kontrolera, aby połączyć `Index` akcji&mdash;otoczenia wartość `Home` jest używany.</span><span class="sxs-lookup"><span data-stu-id="551b4-454">In an ASP.NET Core MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="551b4-455">Otoczenia wartości, które nie jest zgodny z parametrem są ignorowane, a otoczenia wartości również są ignorowane, gdy jawnie podana jest wartość zastępuje, go, przechodząc od lewej do prawej w adresie URL.</span><span class="sxs-lookup"><span data-stu-id="551b4-455">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="551b4-456">Wartości jawnie są dostarczane, ale które nie są zgodne niczego są dodawane do ciągu zapytania.</span><span class="sxs-lookup"><span data-stu-id="551b4-456">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="551b4-457">W poniższej tabeli przedstawiono wyniki, korzystając z szablonu trasy `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="551b4-457">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="551b4-458">Wartości otoczenia</span><span class="sxs-lookup"><span data-stu-id="551b4-458">Ambient Values</span></span>                | <span data-ttu-id="551b4-459">Jawne wartości</span><span class="sxs-lookup"><span data-stu-id="551b4-459">Explicit Values</span></span>                   | <span data-ttu-id="551b4-460">Wynik</span><span class="sxs-lookup"><span data-stu-id="551b4-460">Result</span></span>                  |
| ----------------------------- | --------------------------------- | ----------------------- |
| <span data-ttu-id="551b4-461">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="551b4-461">controller="Home"</span></span>             | <span data-ttu-id="551b4-462">action="About"</span><span class="sxs-lookup"><span data-stu-id="551b4-462">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="551b4-463">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="551b4-463">controller="Home"</span></span>             | <span data-ttu-id="551b4-464">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="551b4-464">controller="Order",action="About"</span></span> | `/Order/About`          |
| <span data-ttu-id="551b4-465">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="551b4-465">controller="Home",color="Red"</span></span> | <span data-ttu-id="551b4-466">action="About"</span><span class="sxs-lookup"><span data-stu-id="551b4-466">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="551b4-467">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="551b4-467">controller="Home"</span></span>             | <span data-ttu-id="551b4-468">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="551b4-468">action="About",color="Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="551b4-469">Jeśli ta wartość nie zostanie podany wprost trasy ma wartość domyślną, która nie jest zgodny z parametrem, musi być zgodna wartość domyślna:</span><span class="sxs-lookup"><span data-stu-id="551b4-469">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="551b4-470">Generowanie konsolidacji tylko generuje link dla tej trasy, gdy znajdują się pasujących wartości dla kontrolerów i akcji.</span><span class="sxs-lookup"><span data-stu-id="551b4-470">Link generation only generates a link for this route when the matching values for controller and action are provided.</span></span>
